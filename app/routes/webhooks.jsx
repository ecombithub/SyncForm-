// // // // // import { authenticate } from "../shopify.server";
// // // // // import db from "../db.server";

// // // // // export const action = async ({ request }) => {
// // // // //   const { topic, shop, session, admin } = await authenticate.webhook(request);

// // // // //   if (!admin) {
// // // // //     // The admin context isn't returned if the webhook fired after a shop was uninstalled.
// // // // //     throw new Response();
// // // // //   }

// // // // //   // The topics handled here should be declared in the shopify.app.toml.
// // // // //   // More info: https://shopify.dev/docs/apps/build/cli-for-apps/app-configuration
// // // // //   switch (topic) {
// // // // //     case "APP_UNINSTALLED":
// // // // //       if (session) {
// // // // //         await db.session.deleteMany({ where: { shop } });
// // // // //       }

// // // // //       break;
// // // // //     case "CUSTOMERS_DATA_REQUEST":
// // // // //     case "CUSTOMERS_REDACT":
// // // // //     case "SHOP_REDACT":
// // // // //     default:
// // // // //       throw new Response("Unhandled webhook topic", { status: 404 });
// // // // //   }

// // // // //   throw new Response();
// // // // // };

// // // // import React, { useState, useEffect, useRef } from 'react';
// // // // import Sortable from 'sortablejs';
// // // // import axios from 'axios';
// // // // import { useLocation } from 'react-router-dom';
// // // // import heading from '../images/heading.png';
// // // // import font from '../images/font-size.png';
// // // // import image from '../images/image-.png';
// // // // import divider2 from '../images/divider.png';
// // // // import btn from '../images/btn.png';
// // // // import emailtemp from '../images/emailtemp.png';
// // // // import phonem from '../images/phonem.png';
// // // // import desk from '../images/desk.png';
// // // // import socail from '../images/socail.png';
// // // // import htmlicon from '../images/htmlicon.png';
// // // // import maximizesize from '../images/maximize-size.png';
// // // // import deletep from '../images/deletep.png';
// // // // import delete1 from '../images/delete.png';
// // // // import facebook from '../images/facebook.png';
// // // // import instagram from '../images/instagram.png';
// // // // import twitter from '../images/twitter.png';
// // // // import videoplay from '../images/videoplay.png';
// // // // import left from '../images/left.png';
// // // // import right from '../images/right.png';
// // // // import product from '../images/product.png';
// // // // import spacer from '../images/spacer.png';
// // // // import spliti from '../images/spliti.png';
// // // // import { format } from 'date-fns';
// // // // import 'react-quill/dist/quill.snow.css';

// // // // import '../index.css';
// // // // import { useNavigate } from 'react-router-dom';
// // // // import { useLoaderData, Link } from "@remix-run/react";
// // // // import { authenticate, apiVersion } from "../shopify.server";


// // // // const toolbarOptions = [
// // // //     [{ header: [1, 2, 3, 4, 5, 6, false] }],
// // // //     ['bold', 'italic', 'underline'],
// // // //     ['link', 'image'],
// // // //     [{ list: 'ordered' }, { list: 'bullet' }],
// // // //     [{ script: 'sub' }, { script: 'super' }],
// // // //     [{ indent: '-1' }, { indent: '+1' }],
// // // //     [{ direction: 'rtl' }],
// // // //     [{ size: ['small', 'medium', 'large', 'huge'] }],
// // // //     [{ color: [] }, { background: [] }],
// // // //     [{ font: [] }],
// // // //     [{ align: [] }],
// // // //     ['clean'],
// // // // ];

// // // // const generateUniqueId = (length = 22) => {
// // // //     const charset = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
// // // //     let uniqueId = '';
// // // //     for (let i = 0; i < length; i++) {
// // // //         const randomIndex = Math.floor(Math.random() * charset.length);
// // // //         uniqueId += charset[randomIndex];
// // // //     }
// // // //     return uniqueId;
// // // // };

// // // // export const loader = async ({ request }) => {
// // // //     try {
// // // //         const { session } = await authenticate.admin(request);
// // // //         const { shop, accessToken } = session;

// // // //         const response = await fetch(
// // // //             `https://${shop}/admin/api/${apiVersion}/products.json`,
// // // //             {
// // // //                 method: "GET",
// // // //                 headers: {
// // // //                     "Content-Type": "application/json",
// // // //                     "X-Shopify-Access-Token": accessToken,
// // // //                 }
// // // //             }
// // // //         );

// // // //         if (!response.ok) {
// // // //             throw new Error(`Failed to fetch products: ${response.statusText}`);
// // // //         }

// // // //         const responseData = await response.json();
// // // //         const products = responseData?.products || [];

// // // //         const productsWithData = products.map(product => {
// // // //             const { variants } = product;
// // // //             const uniqueColors = Array.from(new Set(variants.map(variant => variant.option1))).join(' | ');
// // // //             const uniquePrices = Array.from(new Set(variants.map(variant => variant.price))).join(' | ');
// // // //             const uniqueSizes = Array.from(new Set(variants.map(variant => variant.option2))).join(' | ');

// // // //             return {
// // // //                 ...product,
// // // //                 color: uniqueColors,
// // // //                 price: uniquePrices,
// // // //                 size: uniqueSizes
// // // //             };
// // // //         });

// // // //         return { products: productsWithData, shop, apiVersion };
// // // //     } catch (err) {
// // // //         console.error("Error fetching products:", err.message);
// // // //         return { products: [] };
// // // //     }
// // // // };

// // // // const EmailTemplateCreate = () => {

// // // //     const navigate = useNavigate();
// // // //     const [fields, setFields] = useState([]);
// // // //     const [emailTemplateId, setEmailTemplateId] = useState(null);
// // // //     const formBuilderRef = useRef(null);
// // // //     const [formTitle, setFormTitle] = useState('Email-Template');
// // // //     const [existingTitles, setExistingTitles] = useState([]);
// // // //     const [showImagePopup, setShowImagePopup] = useState(false);
// // // //     const [showHeadingPopup, setShowHeadingPopup] = useState(false);
// // // //     const [showDescriptionPopup, setShowDescriptionPopup] = useState(false);
// // // //     const [headingText, setHeadingText] = useState('');
// // // //     const [headingLevel, setHeadingLevel] = useState('h1');
// // // //     const [selectedOption, setSelectedOption] = useState('heading');
// // // //     const [imageUrl, setImageUrl] = useState(null);
// // // //     const [headingFontSize, setHeadingFontSize] = useState('16');
// // // //     const [descriptionText, setDescriptionText] = useState('');
// // // //     const [backgroundColor, setBackgroundColor] = useState('#ffffff');
// // // //     const [borderRadious, setBorderRadious] = useState(5);
// // // //     const [templatePadding, setTemplatePadding] = useState('20');
// // // //     const [backgroundImage, setBackgroundImage] = useState(null);
// // // //     const [textAlign, setTextAlign] = useState('left');
// // // //     const [imageFieldId, setImageFieldId] = useState(null);
// // // //     const [showField, setShowField] = useState(true);
// // // //     const [showFields, setShowFields] = useState(true);
// // // //     const [showSocialIconPopup, setShowSocialIconPopup] = useState(false);
// // // //     const [selectedFieldId, setSelectedFieldId] = useState(null);
// // // //     const [emailFieldPopup, setEmailFieldPopup] = useState(false);
// // // //     const [activeFieldId, setActiveFieldId] = useState(null);
// // // //     const [socalIconWidth, setSocalIconWidth] = useState(30);
// // // //     const [socalIconHeight, setSocalIconHeight] = useState(30);
// // // //     const [formDataAdd, setFormDataAdd] = useState([]);
// // // //     const [selectedFormIds, setSelectedFormIds] = useState([]);
// // // //     const [selectedTitles, setSelectedTitles] = useState([]);
// // // //     const [showVideoInput, setShowVideoInput] = useState(false);
// // // //     const { products, shop, apiVersion } = useLoaderData();
// // // //     const [selectedProduct, setSelectedProduct] = useState(null);
// // // //     const [isPopupOpen, setIsPopupOpen] = useState(false);
// // // //     const [selectedProducts, setSelectedProducts] = useState([]);
// // // //     const [productTitles, setProductTitles] = useState([]);
// // // //     const [productImage, setProductImage] = useState([]);
// // // //     const [popupFieldTitle, setPopupFieldTitle] = useState('');
// // // //     const [showPrice, setShowPrice] = useState(false);
// // // //     const [showbtnn, setShowbtnn] = useState(false);
// // // //     const [productsPerRow, setProductsPerRow] = useState(3);
// // // //     const [lastProductFieldId, setLastProductFieldId] = useState(null);
// // // //     const [showFileUpload, setShowFileUpload] = useState(false);
// // // //     const emailFieldRef = useRef(null);
// // // //     const popupRef = useRef(null);
// // // //     const [selectedIcons, setSelectedIcons] = useState({
// // // //         facebook: true,
// // // //         twitter: true,
// // // //         instagram: true,
// // // //     });
// // // //     const [customIcons, setCustomIcons] = useState([]);
// // // //     const [id, setId] = useState(null);
// // // //     const location = useLocation();
// // // //     const { formData } = location.state || {};
// // // //     const [viewMode, setViewMode] = useState('desktop');
// // // //     const [dividerColor, setDividerColor] = useState('#000');
// // // //     const [showColorPicker, setShowColorPicker] = useState(false);
// // // //     const [buttonLabel, setButtonLabel] = useState('Submit');
// // // //     const [fontSize, setFontSize] = useState(16);
// // // //     const [padding, setPadding] = useState('10px 20px');
// // // //     const [width, setWidth] = useState(100);
// // // //     const [height, setHeight] = useState(40);
// // // //     const [btnbackgroundColor, setBtnBackgroundColor] = useState('#007BFF');
// // // //     const [showbtn, setShowBtn] = useState(false);
// // // //     const [emailWidth, setEmailWidth] = useState('800px');
// // // //     const [headingColor, setHeadingColor] = useState('#000');
// // // //     const formsPerPage = 5;
// // // //     const [currentPage, setCurrentPage] = useState(1);
// // // //     const [fontFamily, setFontFamily] = useState('Arial');
// // // //     const [ReactQuill, setReactQuill] = useState(null);
// // // //     const [editorValue, setEditorValue] = useState('');
// // // //     const [headingUrl, setHeadingUrl] = useState('');
// // // //     const [texteditorValue, setTextEditorValue] = useState('');
// // // //     const [columnCount, setColumnCount] = useState(6);
// // // //     const [isPopupVisible, setIsPopupVisible] = useState(false);
// // // //     const [columnImages, setColumnImages] = useState({});
// // // //     const [editorValues, setEditorValues] = useState({});
// // // //     const [editorValueed, setEditorValueed] = useState('');
// // // //     const [currentFieldId, setCurrentFieldId] = useState(null);
// // // //     const [isPopupVisibleed, setPopupVisibleed] = useState(false);
// // // //     const [popupFieldId, setPopupFieldId] = useState(null);

// // // //     const handleFontChange = (event) => {
// // // //         setFontFamily(event.target.value);
// // // //     };

// // // //     useEffect(() => {
// // // //         if (formData) {
// // // //             console.log('Form data received:', formData);
// // // //             console.log('Fields:', formData.fields);

// // // //             if (formData.fields && formData.fields.length > 0) {
// // // //                 const field = formData.fields[0];

// // // //                 if (field.columnData) {
// // // //                     console.log('Column Data:', field.columnData);
// // // //                 } else {
// // // //                     console.log('Column Data not found in the first field');
// // // //                 }
// // // //             } else {
// // // //                 console.log('No fields found in formData');
// // // //             }

// // // //             if (Array.isArray(formData.fields)) {
// // // //                 const validFields = formData.fields.map(field => {
// // // //                     if (!field.id) {
// // // //                         console.warn('Field missing ID:', field);
// // // //                     }

// // // //                     if (field.type === 'product') {
// // // //                         console.log('Price for product field:', field.price);
// // // //                         if (field.price === true) {
// // // //                             setShowPrice(true);
// // // //                         }
// // // //                         if (field.showbtnn === true) {
// // // //                             setShowbtnn(true);
// // // //                         }
// // // //                     }

// // // //                     return { ...field, id: field.id || generateUniqueId() };
// // // //                 });

// // // //                 setFields(validFields);
// // // //             }
// // // //             setEmailWidth(formData.styles.width);
// // // //             setBackgroundColor(formData.styles.backgroundColor);
// // // //             setBorderRadious(formData.styles.borderRadious);
// // // //             setBackgroundImage(formData.styles.backgroundImage);
// // // //             setTemplatePadding(formData.styles.templatePadding);
// // // //             setTextAlign(formData.styles.textAlign);
// // // //             setFontFamily(formData.styles.fontFamily);
// // // //             setEmailTemplateId(formData.templateId);
// // // //             setFormTitle(formData.title);
// // // //             setId(formData._id);
// // // //             setSelectedFormIds(formData.form_ids || []);
// // // //             const productsPerRow = formData.fields[0]?.productsPerRow || 3;
// // // //             setProductsPerRow(productsPerRow);
// // // //             console.log('Products per row:', formData.fields[0]?.productsPerRow);
// // // //             const columnCount = parseInt(formData.styles.columnCount) || '';
// // // //             setColumnCount(columnCount);

// // // //         }
// // // //     }, [formData]);

// // // //     const createInputField = (type, initialValue = '') => {
// // // //         const id = generateUniqueId();
// // // //         console.log(`Creating field of type ${type} with ID: ${id}`);

// // // //         return {
// // // //             id,
// // // //             type,
// // // //             contentType: 'text',
// // // //             image: type === 'images' ? initialValue : null,
// // // //             headerbtnbg: type === 'heading' ? '#9474ff' : undefined,
// // // //             headerbtncolor: type === 'heading' ? '#FFFFFF' : undefined,
// // // //             headingbtnPadding: type === 'heading' ? 10 : undefined,
// // // //             headingbtnradious: type === 'heading' ? 4 : undefined,
// // // //             headingbtnFontSize: type === 'heading' ? 16 : undefined,
// // // //             headingbtnwidth: type === 'heading' ? '100' : undefined,
// // // //             headingbtnheight: type === 'heading' ? '40' : undefined,
// // // //             headerbtn: type === 'heading' ? 'Vist Now' : undefined,
// // // //             headingbtnBorderColor: type === 'heading' ? '#000000' : undefined,
// // // //             headingbtnBorderWidth: type === 'heading' ? '1' : undefined,
// // // //             headingbtnBorderStyle: type === 'heading' ? 'solid' : undefined,
// // // //             bannerImageWidth: type === 'heading' ? '100' : undefined,
// // // //             bannerImageHeight: type === 'heading' ? 'default' : undefined,
// // // //             bannerImageTextAlign: type === 'heading' ? '' : undefined,
// // // //             headingText: type === 'heading' ? initialValue : '',
// // // //             headingLevel: type === 'heading' ? 'h1' : null,
// // // //             headingFontSize: type === 'heading' ? '16' : undefined,
// // // //             headingLetterSpacing: type === 'heading' ? 0 : undefined,
// // // //             headingPadding: type === 'heading' ? 0 : undefined,
// // // //             headingTextAlign: type === 'heading' ? "" : undefined,
// // // //             headingColor: type === 'heading' ? '#000' : undefined,
// // // //             headingbg: type === 'heading' ? '#0000' : undefined,
// // // //             headingbgImage: type === 'heading' ? '' : undefined,
// // // //             headingBorderColor: type === 'heading' ? '#000000' : undefined,
// // // //             headingBorderWidth: type === 'heading' ? '0' : undefined,
// // // //             headingBorderStyle: type === 'heading' ? 'solid' : undefined,
// // // //             headingFontWeight: type === 'heading' ? 600 : undefined,
// // // //             descritionFontSize: type === 'description' ? '16' : undefined,
// // // //             descritionColor: type === 'description' ? '#000' : undefined,
// // // //             descritionFontWeight: type === 'description' ? 500 : undefined,
// // // //             descriptionText: type === 'description' ? initialValue : 'No Description Provided',
// // // //             descriptionbg: type === 'description' ? '#0000' : undefined,
// // // //             descriptionPadding: type === 'description' ? 10 : undefined,
// // // //             descriptionLetterSpacing: type === 'description' ? 0 : undefined,
// // // //             descriptionTextAlign: type === 'description' ? "" : undefined,
// // // //             descriptionBorderColor: type === 'description' ? '#000000' : undefined,
// // // //             descriptionBorderWidth: type === 'description' ? '0' : undefined,
// // // //             descriptionBorderStyle: type === 'description' ? 'solid' : undefined,
// // // //             name: type === 'heading' ? initialValue :
// // // //                 type === 'description' ? 'Description' :
// // // //                     `Field_${id}`,
// // // //             label: type === 'heading' ? 'Heading' :
// // // //                 type === 'description' ? 'Description' :
// // // //                     type === 'button' ? 'Submit' :
// // // //                         `Default Label for ${type}`,
// // // //             value: initialValue || (type === 'description' ? 'No Description Provided' : ''),
// // // //             dividerColor: type === 'divider' ? '#000' : undefined,
// // // //             dividerWidth: type === 'divider' ? '100' : undefined,
// // // //             dividerheight: type === 'divider' ? '1' : undefined,
// // // //             buttonColor: type === 'button' ? '#007BFF' : undefined,
// // // //             buttonTextColor: type === 'button' ? '#FFF' : undefined,
// // // //             buttonFontSize: type === 'button' ? 16 : undefined,
// // // //             buttonPadding: type === 'button' ? 10 : undefined,
// // // //             buttonWidth: type === 'button' ? 100 : undefined,
// // // //             buttonHeight: type === 'button' ? 40 : undefined,
// // // //             buttonradious: type === 'button' ? 2 : undefined,
// // // //             buttonBorderColor: type === 'button' ? '#000000' : undefined,
// // // //             buttonBorderWidth: type === 'button' ? '1' : undefined,
// // // //             buttonBorderStyle: type === 'button' ? 'solid' : undefined,
// // // //             buttonLetterSpacing: type === 'button' ? 0 : undefined,
// // // //             buttonUrll: type === 'button' ? '' : undefined,
// // // //             socalIconWidth: type === 'socalicon' ? 30 : undefined,
// // // //             socalIconHeight: type === 'socalicon' ? 30 : undefined,
// // // //             socalIconPadding: type === 'socalicon' ? 10 : undefined,
// // // //             socaliconTextAlign: type === 'socalicon' ? "" : undefined,
// // // //             htmlColor: type === 'html convert' ? '#000' : undefined,
// // // //             htmlFontSize: type === 'html convert' ? 16 : undefined,
// // // //             htmlPadding: type === 'html convert' ? 10 : undefined,
// // // //             icons: {
// // // //                 facebook: { url: 'https://facebook.com', isHidden: false },
// // // //                 twitter: { url: 'https://twitter.com', isHidden: false },
// // // //                 instagram: { url: 'https://instagram.com', isHidden: false },
// // // //             },
// // // //             customIcons: [],
// // // //             spacerHeight: type === 'spacer' ? '20' : undefined,
// // // //             spacerbg: type === 'spacer' ? '#ffffff' : undefined,
// // // //             splitbg: type === 'split' ? '#0000' : undefined,
// // // //             videoPadding: type === 'video' ? '20' : undefined,
// // // //             splitPadding: type === 'split' ? '10' : undefined,
// // // //             videoBorderColor: type === 'video' ? '#000000' : undefined,
// // // //             videoBorderWidth: type === 'video' ? '0' : undefined,
// // // //             videoBorderStyle: type === 'video' ? 'solid' : undefined,
// // // //             imgWidth: type === 'images' ? '100' : undefined,
// // // //             imgTextAlign: type === 'images' ? "" : undefined,
// // // //             imgPadding: type === 'images' ? 10 : undefined,
// // // //             imgbg: type === 'images' ? '#0000' : undefined,
// // // //             imgBorderColor: type === 'images' ? '#000000' : undefined,
// // // //             imgBorderWidth: type === 'images' ? '0' : undefined,
// // // //             imgBorderStyle: type === 'images' ? 'solid' : undefined,
// // // //             productPadding: type === 'product' ? 10 : undefined,
// // // //             productbg: type === 'product' ? '#0000' : undefined,
// // // //             productBorderColor: type === 'product' ? '#000000' : undefined,
// // // //             productBorderWidth: type === 'product' ? '0' : undefined,
// // // //             productBorderStyle: type === 'product' ? 'solid' : undefined,
// // // //             productFontSize: type === 'product' ? 16 : undefined,
// // // //             productTextColor: type === 'product' ? '#000000' : undefined,
// // // //             productWeight: type === 'product' ? 400 : undefined,
// // // //             productLetterSpacing: type === 'product' ? 0 : undefined,
// // // //             productbtnBorderColor: type === 'product' ? '#000000' : undefined,
// // // //             productbtnBorderWidth: type === 'product' ? '1' : undefined,
// // // //             productbtnBorderStyle: type === 'product' ? 'solid' : undefined,
// // // //             productbtnbg: type === 'product' ? '#ffff' : undefined,
// // // //             productradious: type === 'product' ? '3' : undefined,
// // // //             productLabel: type === 'product' ? 'Shop Now' : undefined,
// // // //             productfontSize: type === 'product' ? '12' : undefined,
// // // //             productwidth: type === 'product' ? '80' : undefined,
// // // //             productheight: type === 'product' ? '30' : undefined,
// // // //             productbackgroundColor: type === 'product' ? '#007BFF' : undefined,
// // // //         };
// // // //     };

// // // //     const addInputField = (type) => {
// // // //         let newField;
// // // //         if (type === 'images') {
// // // //             setShowImagePopup(true);
// // // //             setImageFieldId(null);
// // // //         } else if (type === 'heading') {
// // // //             setShowHeadingPopup(true);
// // // //             setSelectedOption('heading')
// // // //             setEditorValue('');

// // // //         } else if (type === 'description') {
// // // //             setShowDescriptionPopup(true);
// // // //         } else if (type === 'divider') {
// // // //             toggleColorPicker();
// // // //             newField = createInputField(type);
// // // //             setFields((prevFields) => [...prevFields, newField]);
// // // //         }
// // // //         else if (type === 'button') {
// // // //             togglebtn();
// // // //             newField = createInputField(type);
// // // //             setFields((prevFields) => [...prevFields, newField]);
// // // //         } else if (type === 'socalicon') {
// // // //             const newField = createInputField('socalicon');

// // // //             setFields((prevFields) => {
// // // //                 const updatedFields = [...prevFields, newField];
// // // //                 console.log("Updated fields after adding new field:", updatedFields);

// // // //                 setSelectedFieldId(newField.id);
// // // //                 setSelectedIcons(newField.icons || {});
// // // //                 setCustomIcons(newField.customIcons || []);
// // // //                 setShowSocialIconPopup(true);

// // // //                 return updatedFields;
// // // //             });
// // // //         }
// // // //         if (type === 'html convert') {
// // // //             const newField = createInputField(type, type === 'html convert' ? '<h1>Your HTML Here</h1>' : '');
// // // //             setFields((prevFields) => [...prevFields, newField]);
// // // //         }
// // // //         if (type === 'split') {
// // // //             const splitFields = [
// // // //                 createInputField('split', '', ''),
// // // //                 createInputField('split', '', ''),
// // // //             ];
// // // //             setFields((prevFields) => [...prevFields, ...splitFields]);
// // // //         }
// // // //         if (type === 'spacer') {
// // // //             const newField = createInputField(type);
// // // //             setFields((prevFields) => [...prevFields, newField]);
// // // //         }
// // // //         if (type === 'video') {
// // // //             const newField = createInputField(type);
// // // //             setFields((prevFields) => [...prevFields, newField]);
// // // //             setShowVideoInput(true);
// // // //         }
// // // //         if (type === 'product') {
// // // //             const newField = createInputField('product');
// // // //             setFields((prevFields) => [...prevFields, newField]);
// // // //             setLastProductFieldId(newField.id);
// // // //             setIsPopupOpen(true);
// // // //         }
// // // //         if (type === 'Multicolumn') {
// // // //             const id = generateUniqueId();
// // // //             setFields((prevFields) => [
// // // //                 ...prevFields,
// // // //                 { id, type: 'Multicolumn', columnCount: 6 }
// // // //             ]);
// // // //             setColumnCount(6);
// // // //         }
// // // //         if (type === 'richtext') {
// // // //             const newField = createInputField('richtext');
// // // //             setFields([...fields, newField]);
// // // //             setCurrentFieldId(newField.id);
// // // //             setPopupVisibleed(true);
// // // //         }
// // // //     };

// // // //     useEffect(() => {

// // // //         const loadReactQuill = async () => {
// // // //             const { default: Quill } = await import('react-quill');
// // // //             setReactQuill(() => Quill);
// // // //         };

// // // //         loadReactQuill();
// // // //     }, []);


// // // //     const handleEdit = (field) => {
// // // //         setSelectedFieldId(field.id);
// // // //         setSelectedIcons(field.icons);
// // // //         setCustomIcons(field.customIcons || []);
// // // //         setShowSocialIconPopup(true);
// // // //     };

// // // //     const handleSaveSocialIcons = () => {
// // // //         setFields((prevFields) =>
// // // //             prevFields.map((field) =>
// // // //                 field.id === selectedFieldId
// // // //                     ? { ...field, icons: selectedIcons, customIcons }
// // // //                     : field
// // // //             )
// // // //         );
// // // //         setShowSocialIconPopup(false);

// // // //     };

// // // //     useEffect(() => {

// // // //         handleSaveSocialIcons();
// // // //     }, [selectedIcons, customIcons]);

// // // //     const handleToggleIcon = (icon) => {
// // // //         setSelectedIcons((prevIcons) => ({
// // // //             ...prevIcons,
// // // //             [icon]: {
// // // //                 ...prevIcons[icon],
// // // //                 isHidden: !prevIcons[icon]?.isHidden,
// // // //             },
// // // //         }));
// // // //     };

// // // //     const handleIconUrlChange = (e, icon) => {
// // // //         setSelectedIcons((prevIcons) => ({
// // // //             ...prevIcons,
// // // //             [icon]: {
// // // //                 ...prevIcons[icon],
// // // //                 url: e.target.value,
// // // //             },
// // // //         }));
// // // //     };

// // // //     const handleCustomIconUpload = (e) => {
// // // //         const files = e.target.files;
// // // //         const filePromises = Array.from(files).map((file) => {
// // // //             return new Promise((resolve) => {
// // // //                 const reader = new FileReader();
// // // //                 reader.onloadend = () => {
// // // //                     resolve(reader.result);
// // // //                 };
// // // //                 reader.readAsDataURL(file);
// // // //             });
// // // //         });

// // // //         Promise.all(filePromises).then((fileUrls) => {
// // // //             const newIcons = fileUrls.map((url) => ({
// // // //                 src: url,
// // // //                 name: 'Custom Icon',
// // // //                 isHidden: false
// // // //             }));
// // // //             setCustomIcons((prevIcons) => [...prevIcons, ...newIcons]);
// // // //         });
// // // //     };

// // // //     const handleCustomIconUrlChange = (e, index) => {
// // // //         const newUrl = e.target.value;
// // // //         setCustomIcons((prevIcons) =>
// // // //             prevIcons.map((icon, i) =>
// // // //                 i === index ? { ...icon, url: newUrl } : icon
// // // //             )
// // // //         );
// // // //     };

// // // //     const toggleCustomIconVisibility = (index) => {
// // // //         setCustomIcons((prevIcons) =>
// // // //             prevIcons.map((icon, i) =>
// // // //                 i === index ? { ...icon, isHidden: !icon.isHidden } : icon
// // // //             )
// // // //         );
// // // //     };

// // // //     const handleImageUpload = (e) => {
// // // //         const file = e.target.files[0];
// // // //         if (file) {
// // // //             const reader = new FileReader();
// // // //             reader.onloadend = () => {
// // // //                 const newField = createInputField('images', reader.result);
// // // //                 if (imageFieldId) {
// // // //                     setFields((prevFields) =>
// // // //                         prevFields.map((field) =>
// // // //                             field.id === imageFieldId ? { ...field, value: reader.result } : field
// // // //                         )
// // // //                     );
// // // //                 } else {
// // // //                     setFields((prevFields) => [...prevFields, newField]);
// // // //                 }
// // // //                 setShowImagePopup(false);
// // // //                 setImageFieldId(null);
// // // //             };
// // // //             reader.readAsDataURL(file);
// // // //         }
// // // //     };

// // // //     const handleAddHeading = (e) => {
// // // //         e.preventDefault();
// // // //         if (emailTemplateId) {
// // // //             setFields((prevFields) =>
// // // //                 prevFields.map((field) =>
// // // //                     field.id === emailTemplateId
// // // //                         ? {
// // // //                             ...field,
// // // //                             headingText,
// // // //                             headingLevel,
// // // //                             headingFontSize,
// // // //                             headingColor,
// // // //                             imageUrl,
// // // //                             editorContent: editorValue,
// // // //                             headingUrl,
// // // //                         }
// // // //                         : field
// // // //                 )
// // // //             );
// // // //         } else {
// // // //             const newField = createInputField('heading', headingText);
// // // //             newField.headingLevel = headingLevel;
// // // //             newField.headingFontSize = headingFontSize;
// // // //             newField.headingColor = headingColor;
// // // //             newField.imageUrl = imageUrl;
// // // //             newField.editorContent = editorValue;
// // // //             newField.headingUrl = headingUrl;
// // // //             setFields((prevFields) => [...prevFields, newField]);
// // // //         }
// // // //         setShowHeadingPopup(false);
// // // //         setHeadingText('');
// // // //         setHeadingLevel('h1');
// // // //         setHeadingFontSize('16');
// // // //         setEmailTemplateId(null);
// // // //         setImageUrl(null);
// // // //         setEditorValue('');
// // // //         setHeadingUrl('');
// // // //     };

// // // //     const handleEditorChange = (value) => {
// // // //         console.log("Editor value changed:", value);
// // // //         console.log("Active field ID:", activeFieldId);
// // // //         setEditorValue(value);

// // // //         setFields((prevFields) => {
// // // //             const updatedFields = prevFields.map((field) =>
// // // //                 field.id === activeFieldId
// // // //                     ? { ...field, editorContent: value }
// // // //                     : field
// // // //             );
// // // //             console.log("Updated fields after editor change:", updatedFields);
// // // //             return updatedFields;
// // // //         });
// // // //     };

// // // //     const handleUpdateUrl = (id, newUrl) => {
// // // //         setFields((prevFields) =>
// // // //             prevFields.map((field) =>
// // // //                 field.id === id ? { ...field, headingUrl: newUrl } : field
// // // //             )
// // // //         );
// // // //     };

// // // //     const handleAddDescription = (e) => {
// // // //         e.preventDefault();
// // // //         if (emailTemplateId) {
// // // //             setFields((prevFields) =>
// // // //                 prevFields.map((field) =>
// // // //                     field.id === emailTemplateId
// // // //                         ? { ...field, descriptionText }
// // // //                         : field
// // // //                 )
// // // //             );
// // // //         } else {
// // // //             const newField = createInputField('description', descriptionText);
// // // //             setFields((prevFields) => [...prevFields, newField]);
// // // //         }

// // // //         setShowDescriptionPopup(false);
// // // //         setDescriptionText('');
// // // //         setTextEditorValue('');
// // // //         setEmailTemplateId(null);
// // // //     };

// // // //     const handleDescriptionChange = (id, value) => {
// // // //         setFields((prevFields) =>
// // // //             prevFields.map((field) =>
// // // //                 field.id === id ? { ...field, descriptionText: value } : field
// // // //             )
// // // //         );
// // // //     };

// // // //     const removeField = (id) => {
// // // //         console.log('Attempting to remove field with ID:', id);
// // // //         setFields((prevFields) => {
// // // //             const newFields = prevFields.filter(field => field.id !== id);
// // // //             setEmailFieldPopup(false)
// // // //             console.log('Remaining fields after removal:', newFields);
// // // //             return newFields;
// // // //         });
// // // //     };


// // // //     useEffect(() => {
// // // //         axios
// // // //             .get('http://localhost:4001/get-forms')
// // // //             .then((res) => {
// // // //                 console.log('API Response:', res.data);
// // // //                 const filteredData = res.data.filter((form) => form.shop === shop);
// // // //                 setFormDataAdd(filteredData);
// // // //             })
// // // //             .catch((error) => console.error('API Error:', error));
// // // //     }, [shop]);

// // // //     useEffect(() => {
// // // //         if (formDataAdd.length > 0) {
// // // //             const formIds = formDataAdd.map((form) => form.formId);
// // // //             console.log('All form IDs:', formIds);
// // // //         }
// // // //     }, [formDataAdd]);

// // // //     const handleFormSelect = async (e) => {
// // // //         const title = e.target.value.trim();
// // // //         const selectedForm = formDataAdd.find((form) => form.title.trim() === title);

// // // //         if (selectedForm) {
// // // //             try {
// // // //                 const response = await fetch(`http://localhost:4001/check-form-connected/${selectedForm.formId}`);
// // // //                 const data = await response.json();

// // // //                 if (data.isConnected) {
// // // //                     alert('This form is already connected to a template.');

// // // //                     const confirmUnlink = window.confirm(
// // // //                         'Do you want to unlink it?'
// // // //                     );

// // // //                     if (confirmUnlink) {
// // // //                         const unlinkResponse = await fetch(
// // // //                             `http://localhost:4001/unlink-template/${selectedForm.formId}`,
// // // //                             { method: 'PUT' }
// // // //                         );

// // // //                         if (unlinkResponse.ok) {
// // // //                             alert('Template unlinked from form.');

// // // //                             const updatedCheckResponse = await fetch(
// // // //                                 `http://localhost:4001/check-form-connected/${selectedForm.formId}`
// // // //                             );
// // // //                             const updatedCheckData = await updatedCheckResponse.json();

// // // //                             if (!updatedCheckData.isConnected) {
// // // //                                 console.log('Form is no longer connected to a template.');
// // // //                             }
// // // //                         } else {
// // // //                             alert('Failed to unlink template.');
// // // //                         }
// // // //                     } else {
// // // //                         return;
// // // //                     }
// // // //                 }

// // // //                 setSelectedFormIds((prevFormIds) => {
// // // //                     if (prevFormIds.includes(selectedForm.formId)) {
// // // //                         return prevFormIds.filter((id) => id !== selectedForm.formId);
// // // //                     } else {
// // // //                         return [...prevFormIds, selectedForm.formId];
// // // //                     }
// // // //                 });

// // // //                 setSelectedTitles((prevSelectedTitles) => {
// // // //                     if (prevSelectedTitles.includes(title)) {
// // // //                         return prevSelectedTitles.filter((t) => t !== title);
// // // //                     } else {
// // // //                         return [...prevSelectedTitles, title];
// // // //                     }
// // // //                 });
// // // //             } catch (error) {
// // // //                 console.error('Error checking or unlinking form connection:', error);
// // // //                 alert('An error occurred while processing the form connection.');
// // // //             }
// // // //         }
// // // //     };

// // // //     useEffect(() => {
// // // //         console.log('Selected form IDs:', selectedFormIds);
// // // //     }, [selectedFormIds]);

// // // //     const createOrUpdateForm = async () => {
// // // //         const timestamp = format(new Date(), "yyyy-MM-dd HH:mm:ss a");
// // // //         let trimmedTitle = formTitle.trim();
// // // //         if (!trimmedTitle) {
// // // //             alert('Please provide a title for the template.');
// // // //             return;
// // // //         }

// // // //         if (!id) {
// // // //             try {
// // // //                 const response = await axios.get(`http://localhost:4001/check-title/${trimmedTitle}`);
// // // //                 if (response.data.exists) {

// // // //                     trimmedTitle = `${trimmedTitle}-${format(new Date(), "yyyyMMddHHmmss")}`;
// // // //                 }
// // // //             } catch (error) {
// // // //                 console.error('Error checking title:', error);
// // // //                 return;
// // // //             }
// // // //         }

// // // //         const templateId = emailTemplateId || generateUniqueId();
// // // //         setEmailTemplateId(templateId);

// // // //         if (fields.length === 0) {
// // // //             console.warn('No fields to create the form.');
// // // //             return;
// // // //         }

// // // //         const validFields = fields.filter(field => field && field.type);

// // // //         const updatedFields = validFields.map(field => {
// // // //             let value = '';

// // // //             switch (field.type) {
// // // //                 case 'images':
// // // //                     value = field.value || 'No Image Provided';
// // // //                     break;
// // // //                 case 'heading':
// // // //                     value = field.value || '';
// // // //                     field.editorContent = field.editorContent || editorValue || field.value || '';
// // // //                     field.headingUrl = field.headingUrl || '';
// // // //                     field.imageUrl = field.imageUrl || '';
// // // //                     break;
// // // //                 case 'description':
// // // //                     value = field.value || '';
// // // //                     break;
// // // //                 case 'socalicon':
// // // //                     value = field.icons || 'No Social Icons Provided';
// // // //                     break;
// // // //                 case 'divider':
// // // //                     value = field.icons || 'No Social Icons Provided';
// // // //                     break;
// // // //                 case 'button':
// // // //                     value = 'Button';
// // // //                 case 'split':
// // // //                     value = field.value || 'No Value Provided';
// // // //                     field.splitbg = field.splitbg || '';
// // // //                     field.width = field.width || '100%';
// // // //                     field.splitPadding = field.splitPadding || 0
// // // //                     break;
// // // //                 case 'spacer':
// // // //                     value = 'Spacer Field';
// // // //                     field.spacerHeight = field.spacerHeight || 30;
// // // //                     field.spacerbg = field.spacerbg || '#f0f0f0';
// // // //                     break;
// // // //                 case 'video':
// // // //                     value = field.value;
// // // //                     field.videoPadding = field.videoPadding || 20;
// // // //                     field.videoBorderWidth = field.videoBorderWidth || 1;
// // // //                     field.videoBorderStyle = field.videoBorderStyle || 'solid';
// // // //                     field.videoBorderColor = field.videoBorderColor || '#000';
// // // //                     break;
// // // //                 case 'richtext':
// // // //                     value = field.value;
// // // //                     field.content = field.content || editorValueed || field.value || '';
// // // //                     break;
// // // //                 case 'Multicolumn':
// // // //                     value = field.value;
// // // //                     if (!field.columnData) {
// // // //                         field.columnData = Array.from({ length: columnCount }, (_, i) => ({
// // // //                             image: columnImages[`${field.id}-${i}`] || '',
// // // //                             content: editorValues[`${field.id}-${i}`] || '',
// // // //                         }));
// // // //                     } else {

// // // //                         for (let i = 0; i < columnCount; i++) {
// // // //                             field.columnData[i] = {
// // // //                                 image: columnImages[`${field.id}-${i}`] || field.columnData[i]?.image,
// // // //                                 content: editorValues[`${field.id}-${i}`] || field.columnData[i]?.content,
// // // //                             };
// // // //                         }
// // // //                     }
// // // //                     field.columnCount = columnCount;
// // // //                     break;
// // // //                 case 'product':
// // // //                     return {
// // // //                         ...field,
// // // //                         products: field.products || [],
// // // //                         productsPerRow,
// // // //                         viewMode,
// // // //                         price: showPrice,
// // // //                         buttonUrl: field.productUrl || `https://${shop}/admin/products?selectedView=all`,
// // // //                         showbtnn: showbtnn

// // // //                     };

// // // //                 default:
// // // //                     value = '';
// // // //             }

// // // //             if (field.type === 'html convert') {
// // // //                 return {
// // // //                     ...field,
// // // //                     value: field.value || '',
// // // //                 };
// // // //             }

// // // //             if (field.type === 'button') {
// // // //                 field.buttonColor = btnbackgroundColor;
// // // //                 field.label = buttonLabel;
// // // //                 field.buttonFontSize = fontSize;
// // // //                 field.buttonWidth = width;
// // // //                 field.buttonHeight = height;
// // // //                 field.buttonPadding = padding;
// // // //             }

// // // //             if (field.type === 'socalicon') {
// // // //                 field.socalIconHeight = socalIconHeight;
// // // //                 field.socalIconWidth = socalIconWidth;
// // // //                 field.icons = {
// // // //                     facebook: {
// // // //                         url: selectedIcons.facebook?.url || field.icons.facebook.url,
// // // //                         isHidden: selectedIcons.facebook?.isHidden || false,
// // // //                         value: selectedIcons.facebook?.value || 'Facebook',
// // // //                     },
// // // //                     twitter: {
// // // //                         url: selectedIcons.twitter?.url || field.icons.twitter.url,
// // // //                         isHidden: selectedIcons.twitter?.isHidden || false,
// // // //                         value: selectedIcons.twitter?.value || 'Twitter',
// // // //                     },
// // // //                     instagram: {
// // // //                         url: selectedIcons.instagram?.url || field.icons.instagram.url,
// // // //                         isHidden: selectedIcons.instagram?.isHidden || false,
// // // //                         value: selectedIcons.instagram?.value || 'Instagram',
// // // //                     },
// // // //                     send: {
// // // //                         url: selectedIcons.send?.url || '',
// // // //                         isHidden: selectedIcons.send?.isHidden || false,
// // // //                         value: selectedIcons.send?.value || 'Send',
// // // //                     },
// // // //                 };

// // // //                 field.customIcons = field.customIcons || [];
// // // //             } else {
// // // //                 field.icons = {};
// // // //             }

// // // //             return {
// // // //                 ...field,
// // // //                 label: field.label || (field.type === 'button' ? 'Button' : `Default Label for ${field.type}`),
// // // //                 name: field.name || `Field_${field.id}`,
// // // //                 value: field.type === 'product' ? undefined : value,
// // // //                 headerbtnbg: field.headerbtnbg || null,
// // // //                 headerbtncolor: field.headerbtncolor || null,
// // // //                 headerbtn: field.headerbtn || null,
// // // //                 headingLevel: field.headingLevel || null,
// // // //                 headingbtnPadding: field.headingbtnPadding || 10,
// // // //                 headingbtnradious: field.headingbtnradious || 4,
// // // //                 headingbtnwidth: field.headingbtnwidth || 100,
// // // //                 headingbtnFontSize: field.headingbtnFontSize || 16,
// // // //                 headingbtnheight: field.headingbtnheight || 40,
// // // //                 headingbtnBorderWidth: field.headingbtnBorderWidth || 1,
// // // //                 headingbtnBorderStyle: field.headingbtnBorderStyle || 'solid',
// // // //                 headingbtnBorderColor: field.headingbtnBorderColor || '#000',
// // // //                 bannerImageWidth: field.bannerImageWidth || '100',
// // // //                 bannerImageHeight: field.bannerImageHeight || '',
// // // //                 bannerImageTextAlign: field.bannerImageTextAlign || '',
// // // //                 headingFontWeight: field.headingFontWeight || 600,
// // // //                 headingColor: field.headingColor || '#000',
// // // //                 headingbg: field.headingbg || '#ffff',
// // // //                 headingPadding: field.headingPadding || 0,
// // // //                 headingbgImage: field.headingbgImage || '',
// // // //                 headingLetterSpacing: field.headingLetterSpacing || 0,
// // // //                 headingTextAlign: field.headingTextAlign || '',
// // // //                 headingBorderWidth: field.headingBorderWidth || 1,
// // // //                 headingBorderStyle: field.headingBorderStyle || 'solid',
// // // //                 headingBorderColor: field.headingBorderColor || '#000',
// // // //                 headingFontSize: field.type === 'heading' ? (field.headingFontSize || "16") : undefined,
// // // //                 descritionFontWeight: field.descritionFontWeight || 600,
// // // //                 descritionFontSize: field.descritionFontSize || 16,
// // // //                 descritionColor: field.descritionColor || '#000',
// // // //                 descriptionbg: field.descriptionbg || '#ffff',
// // // //                 descriptionPadding: field.descriptionPadding || 10,
// // // //                 descriptionLetterSpacing: field.descriptionLetterSpacing || 0,
// // // //                 descriptionTextAlign: field.descriptionTextAlign || '',
// // // //                 descriptionBorderWidth: field.descriptionBorderWidth || 1,
// // // //                 descriptionBorderStyle: field.descriptionBorderStyle || 'solid',
// // // //                 descriptionBorderColor: field.descriptionBorderColor || '#000',
// // // //                 dividerColor: field.dividerColor || '#000',
// // // //                 dividerWidth: field.dividerWidth || '100',
// // // //                 dividerheight: field.dividerheight || '1',
// // // //                 buttonColor: field.buttonColor || '#007BFF',
// // // //                 buttonFontSize: field.buttonFontSize || 16,
// // // //                 buttonTextColor: field.buttonTextColor || '#fff',
// // // //                 buttonLetterSpacing: field.buttonLetterSpacing || 0,
// // // //                 buttonUrll: field.buttonUrll || '',
// // // //                 buttonBorderWidth: field.buttonBorderWidth || 1,
// // // //                 buttonBorderStyle: field.buttonBorderStyle || 'solid',
// // // //                 buttonBorderColor: field.buttonBorderColor || '#000',
// // // //                 buttonWidth: field.buttonWidth || 150,
// // // //                 buttonHeight: field.buttonHeight || 40,
// // // //                 buttonradious: field.buttonradious || 40,
// // // //                 buttonPadding: field.buttonPadding || 10,
// // // //                 socalIconHeight: field.socalIconHeight || 30,
// // // //                 socalIconWidth: field.socalIconWidth || 30,
// // // //                 socalIconPadding: field.socalIconPadding || 10,
// // // //                 socaliconTextAlign: field.socaliconTextAlign || '',
// // // //                 htmlFontSize: field.htmlFontSize || 16,
// // // //                 htmlPadding: field.htmlPadding || 10,
// // // //                 htmlColor: field.htmlColor || '#000',
// // // //                 splitbg: field.splitbg || '',
// // // //                 width: field.width || '100%',
// // // //                 spacerHeight: field.spacerHeight || 20,
// // // //                 spacerbg: field.spacerbg || '#fff',
// // // //                 videoPadding: field.videoPadding || 20,
// // // //                 splitPadding: field.splitPadding || 0,
// // // //                 videoBorderWidth: field.videoBorderWidth || 1,
// // // //                 videoBorderStyle: field.videoBorderStyle || 'solid',
// // // //                 videoBorderColor: field.videoBorderColor || '#000',
// // // //                 imgWidth: field.imgWidth || '100',
// // // //                 imgTextAlign: field.imgTextAlign || '',
// // // //                 imgPadding: field.imgPadding || 10,
// // // //                 imgbg: field.imgbg || '#ffff',
// // // //                 imgBorderWidth: field.imgBorderWidth || 0,
// // // //                 imgBorderStyle: field.imgBorderStyle || 'solid',
// // // //                 imgBorderColor: field.imgBorderColor || '#000',
// // // //                 productPadding: field.productPadding || 10,
// // // //                 productbg: field.productbg || '#ffff',
// // // //                 productBorderWidth: field.productBorderWidth || 0,
// // // //                 productBorderStyle: field.productBorderStyle || 'solid',
// // // //                 productBorderColor: field.productBorderColor || '#000',
// // // //                 productFontSize: field.productFontSize || 16,
// // // //                 productColor: field.productColor || '#000',
// // // //                 productWeight: field.productWeight || 600,
// // // //                 productLetterSpacing: field.productLetterSpacing || 0,
// // // //                 productbtnBorderColor: field.productbtnBorderColor || '#000',
// // // //                 productbtnBorderWidth: field.productbtnBorderWidth || 16,
// // // //                 productbtnBorderStyle: field.productbtnBorderStyle || '#000',
// // // //                 productbtnbg: field.productbtnbg || 600,
// // // //                 productradious: field.productradious || 0,
// // // //                 productLabel: field.productLabel || 'Shop Now',
// // // //                 productfontSize: field.productfontSize || '12',
// // // //                 productwidth: field.productwidth || 80,
// // // //                 productheight: field.productheight || 30,
// // // //                 productbackgroundColor: field.productbackgroundColor || '#007BFF',

// // // //             };
// // // //         });

// // // //         console.log('Updated fields:', updatedFields);

// // // //         const formData = {
// // // //             templateId,
// // // //             shop,
// // // //             form_ids: selectedFormIds.map(id => String(id)),
// // // //             title: trimmedTitle,
// // // //             fields: updatedFields,
// // // //             createdAt: timestamp,
// // // //             styles: {
// // // //                 backgroundImage,
// // // //                 backgroundColor,
// // // //                 borderRadious,
// // // //                 templatePadding,
// // // //                 textAlign,
// // // //                 fontFamily,
// // // //                 width: viewMode === 'desktop' ? '800px' : '400px',
// // // //                 dividerColor,
// // // //             },
// // // //         };

// // // //         try {
// // // //             const response = id
// // // //                 ? await axios.put(`http://localhost:4001/update/${id}`, formData)
// // // //                 : await axios.post('http://localhost:4001/send/api', formData);
// // // //             console.log('Form saved successfully with title:', trimmedTitle);
// // // //             const successMessage = id ? 'Form updated successfully' : 'Form created successfully';
// // // //             console.log(successMessage, response.data);
// // // //             navigate('/app/emailTemplate/list')

// // // //             if (!id) {
// // // //                 resetFormState();
// // // //             }

// // // //             setExistingTitles(prevTitles => [...prevTitles, trimmedTitle]);
// // // //         } catch (error) {
// // // //             console.error('Error saving form:', error);
// // // //             if (error.response) {
// // // //                 console.error('Response data:', error.response.data);
// // // //             }
// // // //         }
// // // //     };

// // // //     const resetFormState = () => {
// // // //         setFields([]);
// // // //         setEmailTemplateId(null);
// // // //         setHeadingText('');
// // // //         setBackgroundImage(null);
// // // //         setTemplatePadding('20')
// // // //         setBackgroundColor('#ffffff');
// // // //         setTextAlign('left');
// // // //         setBorderRadious(5)
// // // //         setId(null);
// // // //     };

// // // //     const handleBackgroundImageUpload = (e) => {
// // // //         const file = e.target.files[0];
// // // //         if (file) {
// // // //             const reader = new FileReader();
// // // //             reader.onloadend = () => {
// // // //                 setBackgroundImage(reader.result);
// // // //             };
// // // //             reader.readAsDataURL(file);
// // // //         }
// // // //     };

// // // //     useEffect(() => {
// // // //         const formBuilder = formBuilderRef.current;
// // // //         if (!formBuilder) return;

// // // //         const sortable = Sortable.create(formBuilder, {
// // // //             animation: 150,
// // // //             ghostClass: 'dragging',
// // // //             onEnd: (evt) => {
// // // //                 const newFields = [...fields];
// // // //                 const movedField = newFields.splice(evt.oldIndex, 1)[0];
// // // //                 newFields.splice(evt.newIndex, 0, movedField);
// // // //                 setFields(newFields);
// // // //             },
// // // //         });

// // // //         return () => {
// // // //             sortable.destroy();
// // // //         };
// // // //     }, [fields]);

// // // //     const toggleViewMode = (mode) => {
// // // //         setViewMode(mode);
// // // //         setEmailWidth(mode === 'desktop' ? '800px' : '400px');
// // // //         if (mode === 'mobile') {
// // // //             setProductsPerRow(1);
// // // //         } else {
// // // //             setProductsPerRow(3);
// // // //         }
// // // //     };

// // // //     const toggleColorPicker = () => {
// // // //         setShowColorPicker(!showColorPicker);
// // // //     };

// // // //     const togglebtn = () => {
// // // //         setShowBtn(!showbtn);
// // // //     };

// // // //     const toggleFields = () => {
// // // //         setShowFields(true);
// // // //         setDropdownVisible(false);
// // // //     };

// // // //     const toggleSettings = () => {
// // // //         setShowFields(false);
// // // //     };

// // // //     const renderField = (field) => {
// // // //         if (!field) return null;

// // // //         switch (field.type) {
// // // //             case 'html convert':
// // // //                 return (
// // // //                     <div>
// // // //                         <textarea
// // // //                             value={field.value}
// // // //                             onChange={(e) =>
// // // //                                 setFields((prevFields) =>
// // // //                                     prevFields.map((f) => (f.id === field.id ? { ...f, value: e.target.value } : f))
// // // //                                 )
// // // //                             }
// // // //                             rows="5"
// // // //                             cols="50"
// // // //                         />
// // // //                     </div>
// // // //                 );

// // // //             default:
// // // //                 return;
// // // //         }
// // // //     };


// // // //     useEffect(() => {
// // // //         const handleClickOutside = (event) => {
// // // //             if (popupRef.current && !popupRef.current.contains(event.target)) {
// // // //                 setEmailFieldPopup(false);
// // // //             }
// // // //         };

// // // //         document.addEventListener('mousedown', handleClickOutside);

// // // //         return () => {
// // // //             document.removeEventListener('mousedown', handleClickOutside);
// // // //         };
// // // //     }, []);

// // // //     useEffect(() => {
// // // //         const handleClickOutside = (event) => {
// // // //             if (emailFieldRef.current && !emailFieldRef.current.contains(event.target)) {
// // // //                 setActiveFieldId(null);
// // // //             }
// // // //         };

// // // //         document.addEventListener('mousedown', handleClickOutside);

// // // //         return () => {
// // // //             document.removeEventListener('mousedown', handleClickOutside);
// // // //         };
// // // //     }, []);

// // // //     const handleWidthChange = (newWidth) => {
// // // //         setFields((prevFields) => {
// // // //             const selectedIndex = prevFields.findIndex((f) => f.id === selectedFieldId);

// // // //             if (selectedIndex !== -1 && selectedIndex % 2 === 0) {
// // // //                 return prevFields.map((f, index) => {
// // // //                     if (index === selectedIndex) {
// // // //                         return { ...f, width: newWidth };
// // // //                     }
// // // //                     if (index === selectedIndex + 1) {
// // // //                         return { ...f, width: `${100 - parseInt(newWidth)}%` };
// // // //                     }
// // // //                     return f;
// // // //                 });
// // // //             } else if (selectedIndex !== -1) {
// // // //                 return prevFields.map((f, index) => {
// // // //                     if (index === selectedIndex) {
// // // //                         return { ...f, width: newWidth };
// // // //                     }
// // // //                     if (index === selectedIndex - 1) {
// // // //                         return { ...f, width: `${100 - parseInt(newWidth)}%` };
// // // //                     }
// // // //                     return f;
// // // //                 });
// // // //             }
// // // //             return prevFields;
// // // //         });
// // // //     };

// // // //     const handleVideoChange = (e, id) => {
// // // //         const updatedFields = fields.map(field => {
// // // //             if (field.id === id && field.type === 'video') {
// // // //                 return { ...field, value: e.target.value };
// // // //             }
// // // //             return field;
// // // //         });
// // // //         setFields(updatedFields);
// // // //     };

// // // //     const getVideoEmbedUrl = (url) => {
// // // //         const videoId = url.split('v=')[1]?.split('&')[0];
// // // //         if (videoId) {
// // // //             return `https://www.youtube.com/embed/${videoId}?autohide=1&showinfo=0&controls=0`;
// // // //         }
// // // //         return null;
// // // //     };

// // // //     const handleProductClick = (product, isChecked) => {
// // // //         setSelectedProducts((prevSelectedProducts) => {
// // // //             if (isChecked) {

// // // //                 return [...prevSelectedProducts, product];
// // // //             } else {
// // // //                 return prevSelectedProducts.filter((p) => p.id !== product.id);
// // // //             }
// // // //         });

// // // //         setFields((prevFields) => {
// // // //             return prevFields.map((field) => {
// // // //                 if (field.id === lastProductFieldId && field.type === 'product') {
// // // //                     return {
// // // //                         ...field,
// // // //                         products: isChecked
// // // //                             ? [...(field.products || []), product]
// // // //                             : (field.products || []).filter((p) => p.id !== product.id)
// // // //                     };
// // // //                 }
// // // //                 return field;
// // // //             });
// // // //         });

// // // //         setIsPopupOpen(true);
// // // //     };

// // // //     const handleRemoveProductFromForm = (index) => {
// // // //         const productToRemove = productTitles?.[index];

// // // //         if (!productToRemove) return;

// // // //         setProductTitles((prevTitles) =>
// // // //             Array.isArray(prevTitles) ? prevTitles.filter((title, i) => i !== index) : prevTitles
// // // //         );

// // // //         setSelectedProducts((prevSelectedProducts) =>
// // // //             Array.isArray(prevSelectedProducts)
// // // //                 ? prevSelectedProducts.filter((product) => product.title !== productToRemove)
// // // //                 : prevSelectedProducts
// // // //         );

// // // //         setFields((prevFields) =>
// // // //             Array.isArray(prevFields)
// // // //                 ? prevFields.map((field) =>
// // // //                     field.type === 'product'
// // // //                         ? { ...field, products: field.products.filter((product) => product.title !== productToRemove) }
// // // //                         : field
// // // //                 )
// // // //                 : prevFields
// // // //         );
// // // //     };

// // // //     const handleClosePopup = () => {
// // // //         setIsPopupOpen(false);
// // // //         setSelectedProduct(null);
// // // //     };

// // // //     const togglePrice = () => {
// // // //         setShowPrice(!showPrice);
// // // //     };

// // // //     const togglebtnn = () => {
// // // //         setShowbtnn(!showbtnn);
// // // //     };

// // // //     const AddProduct = () => {
// // // //         setIsPopupOpen(true);
// // // //     }

// // // //     useEffect(() => {
// // // //         console.log('isPopupOpen:', isPopupOpen);
// // // //         console.log('selectedProduct:', selectedProduct);
// // // //     }, [isPopupOpen, selectedProduct]);


// // // //     const handleAddProductToSelected = (fieldId, fieldTitle, fieldImage, products) => {
// // // //         console.log("Field ID:", fieldId);
// // // //         console.log("Field Title:", fieldTitle);
// // // //         console.log("Products:", products);
// // // //         console.log("Image:", fieldImage);
// // // //         setLastProductFieldId(fieldId);
// // // //         setPopupFieldTitle(fieldTitle);

// // // //         const productTitles = products.map(product => product.title);
// // // //         console.log("Product Titles:", productTitles);

// // // //         setProductTitles(productTitles);

// // // //         const productImages = products.map(product => product.images.length > 0 ? product.images[0].src : null);
// // // //         console.log("Product images:", productImages);
// // // //         setProductImage(productImages);
// // // //     };

// // // //     const handleProductsPerRowChange = (e) => {
// // // //         setProductsPerRow(parseInt(e.target.value, 6));
// // // //     };


// // // //     const totalPages = Math.ceil(products.length / formsPerPage);

// // // //     const handlePageChange = (page) => {
// // // //         if (page < 1 || page > totalPages) return;
// // // //         setCurrentPage(page);
// // // //     };

// // // //     const currentProducts = products.slice(
// // // //         (currentPage - 1) * formsPerPage,
// // // //         currentPage * formsPerPage
// // // //     );

// // // //     const generatePageNumbers = () => {
// // // //         const visiblePages = [];

// // // //         if (totalPages <= 5) {
// // // //             for (let i = 1; i <= totalPages; i++) {
// // // //                 visiblePages.push(i);
// // // //             }
// // // //         } else {

// // // //             if (currentPage <= 3) {
// // // //                 visiblePages.push(1, 2, 3, 4, '...', totalPages);
// // // //             }

// // // //             else if (currentPage >= totalPages - 2) {
// // // //                 visiblePages.push(1, '...', totalPages - 3, totalPages - 2, totalPages - 1, totalPages);
// // // //             }

// // // //             else {
// // // //                 visiblePages.push(1, '...', currentPage - 1, currentPage, currentPage + 1, '...', totalPages);
// // // //             }
// // // //         }

// // // //         return visiblePages;
// // // //     };


// // // //     const handleRemoveBackgroundImage = () => {
// // // //         setBackgroundImage('');
// // // //     };

// // // //     const RemoveImage = (fieldId) => {
// // // //         console.log(`Removing image for field with ID: ${fieldId}`);
// // // //         setFields((prevFields) =>
// // // //             prevFields.map((field) =>
// // // //                 field.id === fieldId
// // // //                     ? { ...field, imageUrl: null }
// // // //                     : field
// // // //             )
// // // //         );
// // // //     };

// // // //     const handleFileChange = (e, fieldId) => {
// // // //         const file = e.target.files[0];
// // // //         if (file) {
// // // //             const reader = new FileReader();
// // // //             reader.onloadend = () => {
// // // //                 setFields(prevFields =>
// // // //                     prevFields.map(f =>
// // // //                         f.id === fieldId ? { ...f, headingbgImage: reader.result } : f
// // // //                     )
// // // //                 );
// // // //             };
// // // //             reader.readAsDataURL(file);
// // // //         }
// // // //     };

// // // //     const handleFieldClick = (fieldId) => {
// // // //         setSelectedFieldId(fieldId);
// // // //         setEmailFieldPopup(true);
// // // //         setActiveFieldId(fieldId);
// // // //         const selectedField = fields.find((field) => field.id === fieldId);
// // // //         if (selectedField && selectedField.type === 'Multicolumn') {
// // // //             setIsPopupVisible(true);
// // // //             setColumnCount(selectedField.columnCount);
// // // //         }
// // // //     };

// // // //     const handleColumnClick = (fieldId, columnIndex) => {
// // // //         setPopupFieldId(fieldId);

// // // //         setFields((prevFields) =>
// // // //             prevFields.map((field) =>
// // // //                 field.id === fieldId
// // // //                     ? { ...field, selectedColumn: columnIndex }
// // // //                     : field
// // // //             )
// // // //         );
// // // //     };

// // // //     const handleColumnSelection = (columnSelection) => {
// // // //         const newColumnCount = Number(columnSelection);
// // // //         setColumnCount(newColumnCount);
// // // //         setFields((prevFields) =>
// // // //             prevFields.map((field) =>
// // // //                 field.id === popupFieldId
// // // //                     ? { ...field, columnCount: newColumnCount }
// // // //                     : field
// // // //             )
// // // //         );
// // // //     };

// // // //     const handleImageUploaded = (e, fieldId, columnIndex) => {
// // // //         const file = e.target.files[0];
// // // //         const reader = new FileReader();
// // // //         reader.onloadend = () => {
// // // //             setColumnImages((prevImages) => ({
// // // //                 ...prevImages,
// // // //                 [`${fieldId}-${columnIndex}`]: reader.result,
// // // //             }));
// // // //         };
// // // //         if (file) reader.readAsDataURL(file);
// // // //     };

// // // //     const handleRemoveImage = (fieldId, columnIndex) => {
// // // //         setColumnImages((prevImages) => {
// // // //             const updatedImages = { ...prevImages };
// // // //             delete updatedImages[`${fieldId}-${columnIndex}`];
// // // //             return updatedImages;
// // // //         });
// // // //     };

// // // //     const handleRemoveImage1 = (popupFieldId, selectedColumn) => {
// // // //         setFields((prevFields) => {
// // // //             const updatedFields = prevFields.map((field) => {
// // // //                 if (field.id === popupFieldId) {
// // // //                     const updatedColumnData = [...field.columnData];
// // // //                     updatedColumnData[selectedColumn].image = null;
// // // //                     return { ...field, columnData: updatedColumnData };
// // // //                 }
// // // //                 return field;
// // // //             });
// // // //             return updatedFields;
// // // //         });
// // // //     };

// // // //     const handleImageUpload1 = (e, popupFieldId, selectedColumn) => {
// // // //         const file = e.target.files[0];
// // // //         if (file) {
// // // //             // Create a URL for the image file (or upload it to a server and get the URL)
// // // //             const imageUrl = URL.createObjectURL(file);

// // // //             // Update the field data with the new image URL
// // // //             setFields((prevFields) => {
// // // //                 const updatedFields = prevFields.map((field) => {
// // // //                     if (field.id === popupFieldId) {
// // // //                         const updatedColumnData = [...field.columnData];
// // // //                         updatedColumnData[selectedColumn].image = imageUrl; // Set the new image URL
// // // //                         return { ...field, columnData: updatedColumnData }; // Update the field with the new column data
// // // //                     }
// // // //                     return field;
// // // //                 });
// // // //                 return updatedFields;
// // // //             });
// // // //         }
// // // //     };

// // // //     const handleContentChange = (value, popupFieldId, selectedColumn) => {
// // // //         setFields((prevFields) => {
// // // //             const updatedFields = prevFields.map((field) => {
// // // //                 if (field.id === popupFieldId) {
// // // //                     const updatedColumnData = [...field.columnData];
// // // //                     updatedColumnData[selectedColumn].content = value;
// // // //                     return { ...field, columnData: updatedColumnData };
// // // //                 }
// // // //                 return field;
// // // //             });
// // // //             return updatedFields;
// // // //         });
// // // //     };



// // // //     const handleEditorChangeed = (value, fieldId, columnIndex) => {
// // // //         setEditorValues((prevValues) => ({
// // // //             ...prevValues,
// // // //             [`${fieldId}-${columnIndex}`]: value,
// // // //         }));
// // // //     };

// // // //     const handleEditorChangeee = (value) => {
// // // //         setEditorValueed(value);
// // // //     };

// // // //     const handleSave = () => {
// // // //         const updatedFields = fields.map((field) =>
// // // //             field.id === currentFieldId ? { ...field, content: editorValueed } : field
// // // //         );
// // // //         setFields(updatedFields);
// // // //         setPopupVisibleed(false);
// // // //     };


// // // //     const handleEditChange = (value) => {
// // // //         console.log("Editor value changed:", value);
// // // //         console.log("Active field ID:", activeFieldId);
// // // //         setEditorValueed(value);

// // // //         setFields((prevFields) => {
// // // //             const updatedFields = prevFields.map((field) =>
// // // //                 field.id === activeFieldId
// // // //                     ? { ...field, content: value }
// // // //                     : field
// // // //             );
// // // //             console.log("Updated fields after editor change:", updatedFields);
// // // //             return updatedFields;
// // // //         });
// // // //     };

// // // //     return (
// // // //         <div>
// // // //             <div className='email-campaing-templates'>
// // // //                 <div className="builder-container">
// // // //                     <h3>Email campaign</h3>

// // // //                     <div className='builder_form_name'>
// // // //                         <div className='email-template-heading'>
// // // //                             <input
// // // //                                 type="text"
// // // //                                 value={formTitle}
// // // //                                 onChange={(e) => setFormTitle(e.target.value)}
// // // //                                 placeholder="Enter Name"
// // // //                             />
// // // //                         </div>
// // // //                         <div className='template-select-forms'>
// // // //                             <select onChange={handleFormSelect}>
// // // //                                 <option value="">Select a form</option>
// // // //                                 {formDataAdd.map((form) => (
// // // //                                     <option
// // // //                                         key={form.id}
// // // //                                         value={form.title}
// // // //                                         style={{
// // // //                                             color: selectedFormIds.includes(form.formId) ? '#45A7F6' : 'black',
// // // //                                         }}
// // // //                                     >
// // // //                                         {form.title}
// // // //                                     </option>
// // // //                                 ))}
// // // //                             </select>
// // // //                         </div>
// // // //                     </div>

// // // //                     <div className='builder-forms_rapp'>
// // // //                         <div className="builder-wrp">
// // // //                             <div className="controls-main-wrp email-tempalte">
// // // //                                 <div className="controls-wrp">
// // // //                                     {showField && (<div className="controls">
// // // //                                         <div className='builder-form-element'>
// // // //                                             <div className='buil_form_texttt'>
// // // //                                                 <div className='buil_form_texttt_p'>
// // // //                                                     <h2> Elements</h2>
// // // //                                                 </div>
// // // //                                             </div>
// // // //                                         </div>
// // // //                                         <div className='builder_fieldes'>
// // // //                                             <div className='builder_form_select_control'>
// // // //                                                 <div
// // // //                                                     className={`builder_form_fields ${showFields ? 'active' : ''}`}
// // // //                                                     onClick={toggleFields}
// // // //                                                 >
// // // //                                                     <h2>Fields</h2>
// // // //                                                 </div>
// // // //                                                 <div
// // // //                                                     className={`builder_form_setting ${!showFields ? 'active' : ''}`}
// // // //                                                     onClick={toggleSettings}
// // // //                                                 >
// // // //                                                     <h2>Settings</h2>
// // // //                                                 </div>

// // // //                                             </div>
// // // //                                             {showFields ? (
// // // //                                                 <div>
// // // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('heading')}><span className='form_builder_field_img'><img src={heading} alt="" /></span> <span><h4>Banner</h4></span></button></div>
// // // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('richtext')}><span className='form_builder_field_img'><img src={heading} alt="" /></span> <span><h4>Rich Text</h4></span></button></div>
// // // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('description')}><span className='form_builder_field_img'><img src={font} alt="" /></span> <span><h4>Description</h4></span></button></div>
// // // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('button')}><span className='form_builder_field_img'><img src={btn} alt="" /></span> <span><h4>Button</h4></span></button></div>
// // // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('divider')}><span className='form_builder_field_img'><img src={divider2} alt="" /></span> <span><h4>Divider</h4></span></button></div>
// // // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('split')}><span className='form_builder_field_img'><img src={spliti} alt="" /></span> <span><h4>Images with Text</h4></span></button></div>
// // // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('images')}><span className='form_builder_field_img'><img src={image} alt="" /></span> <span><h4>Images</h4></span></button></div>
// // // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('socalicon')}><span className='form_builder_field_img'><img src={socail} alt="" /></span> <span><h4>Social Icon</h4></span></button></div>
// // // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('html convert')}><span className='form_builder_field_img'><img src={htmlicon} alt="" /></span> <span><h4>HTML Block</h4></span></button></div>
// // // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('spacer')}><span className='form_builder_field_img'><img src={spacer} alt="" /></span> <span><h4>Spacer</h4></span></button></div>
// // // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('Multicolumn')}><span className='form_builder_field_img'><img src={product} alt="" /></span> <span><h4>Multicolumn</h4></span></button></div>
// // // //                                                     {/* <div className='builderr_field_wrpp'> <button onClick={() => addInputField('video')}><span className='form_builder_field_img'><img src={image} alt="" /></span> <span><h4>video</h4></span></button></div> */}
// // // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('product')}><span className='form_builder_field_img'><img src={product} alt="" /></span> <span><h4>Product</h4></span></button></div></div>

// // // //                                             ) : (
// // // //                                                 <div>
// // // //                                                     <div className='edit_form_close'>
// // // //                                                         <div className='edit-formwrap'>
// // // //                                                             <h3>Edit Properties</h3>
// // // //                                                             <div className="builder_field_wrpp">
// // // //                                                                 <div className='edit-form-options'>
// // // //                                                                     <div className="edit_setting_bg">
// // // //                                                                         <label htmlFor="font-family-selector">Font-Family</label>
// // // //                                                                         <select
// // // //                                                                             id="font-family-selector"
// // // //                                                                             value={fontFamily}
// // // //                                                                             onChange={handleFontChange}
// // // //                                                                             style={{ marginLeft: '10px', padding: '5px' }}
// // // //                                                                         >
// // // //                                                                             <option value="Arial">Arial</option>
// // // //                                                                             <option value="Verdana">Verdana</option>
// // // //                                                                             <option value="Times New Roman">Times New Roman</option>
// // // //                                                                             <option value="Georgia">Georgia</option>
// // // //                                                                             <option value="Courier New">Courier New</option>
// // // //                                                                             <option value="Roboto">Roboto</option>
// // // //                                                                         </select>
// // // //                                                                     </div>
// // // //                                                                     <div className='edit_setting_bg bgcolor'>
// // // //                                                                         <label>
// // // //                                                                             Background Color:
// // // //                                                                         </label>
// // // //                                                                         <div
// // // //                                                                             style={{
// // // //                                                                                 height: "50px",
// // // //                                                                                 width: "50px",
// // // //                                                                                 borderRadius: "50%",
// // // //                                                                                 backgroundColor: backgroundColor,
// // // //                                                                                 border: "1px solid #ccc",
// // // //                                                                                 cursor: "pointer",
// // // //                                                                             }}
// // // //                                                                             onClick={() => document.getElementById('colorInput').click()}
// // // //                                                                         >
// // // //                                                                         </div>
// // // //                                                                         <input
// // // //                                                                             id="colorInput"
// // // //                                                                             type="color"
// // // //                                                                             style={{
// // // //                                                                                 display: "none"
// // // //                                                                             }}
// // // //                                                                             value={backgroundColor}
// // // //                                                                             onChange={(e) => setBackgroundColor(e.target.value)}
// // // //                                                                         />
// // // //                                                                     </div>
// // // //                                                                     <div className='edit_setting_bg'>
// // // //                                                                         <label>Border-Radious:</label>
// // // //                                                                         <input
// // // //                                                                             type="text"
// // // //                                                                             id="Border-radious"
// // // //                                                                             value={borderRadious}
// // // //                                                                             onChange={(e) => setBorderRadious(e.target.value)}
// // // //                                                                         />
// // // //                                                                     </div>

// // // //                                                                     <div className='edit_setting_bg'>
// // // //                                                                         <label>Padding:</label>
// // // //                                                                         <input
// // // //                                                                             type="text"
// // // //                                                                             id="Padding"
// // // //                                                                             value={templatePadding}
// // // //                                                                             onChange={(e) => setTemplatePadding(e.target.value)}
// // // //                                                                         />
// // // //                                                                     </div>

// // // //                                                                     <div className='edit_setting_bg'>
// // // //                                                                         <label htmlFor="textAlign">Text Alignment:</label>
// // // //                                                                         <select
// // // //                                                                             id="textAlign"
// // // //                                                                             value={textAlign}
// // // //                                                                             onChange={(e) => setTextAlign(e.target.value)}
// // // //                                                                         >
// // // //                                                                             <option value="left">Left</option>
// // // //                                                                             <option value="center">Center</option>
// // // //                                                                             <option value="right">Right</option>
// // // //                                                                         </select>
// // // //                                                                     </div>

// // // //                                                                     <div className='edit_setting_bg'>
// // // //                                                                         <label htmlFor="backgroundImage">Background Image:</label>
// // // //                                                                         <input
// // // //                                                                             type="file"
// // // //                                                                             accept="image/*"
// // // //                                                                             onChange={handleBackgroundImageUpload}
// // // //                                                                         />
// // // //                                                                         {backgroundImage && (
// // // //                                                                             <button
// // // //                                                                                 type="button"
// // // //                                                                                 onClick={handleRemoveBackgroundImage}
// // // //                                                                                 style={{
// // // //                                                                                     margin: '10px 0',
// // // //                                                                                     padding: '5px 10px',
// // // //                                                                                     cursor: 'pointer',
// // // //                                                                                     background: 'white',
// // // //                                                                                     color: 'black',
// // // //                                                                                     border: 'none',
// // // //                                                                                     borderRadius: '5px',
// // // //                                                                                     border: '1px solid rgb(221, 221, 221)'
// // // //                                                                                 }}
// // // //                                                                             >

// // // //                                                                                 Remove Background
// // // //                                                                             </button>
// // // //                                                                         )}
// // // //                                                                         {backgroundImage && (
// // // //                                                                             <div
// // // //                                                                                 className="edit_setting_bg"
// // // //                                                                                 style={{
// // // //                                                                                     backgroundImage: backgroundImage ? `url(${backgroundImage})` : 'none',
// // // //                                                                                     backgroundRepeat: 'no-repeat',
// // // //                                                                                     backgroundSize: 'contain',
// // // //                                                                                     backgroundPosition: 'center',
// // // //                                                                                     height: '200px',
// // // //                                                                                     width: '100%',
// // // //                                                                                     border: '1px solid #ddd',
// // // //                                                                                 }}
// // // //                                                                             >

// // // //                                                                             </div>
// // // //                                                                         )}
// // // //                                                                     </div>
// // // //                                                                 </div>
// // // //                                                             </div>
// // // //                                                         </div>
// // // //                                                     </div>
// // // //                                                 </div>
// // // //                                             )}

// // // //                                         </div>
// // // //                                     </div>
// // // //                                     )}
// // // //                                 </div>

// // // //                                 <div className='form_builder_build'>
// // // //                                     <div id='bg_change' className="form-builder-wrp email-temp" >
// // // //                                         <div className='btn-email-templates'>
// // // //                                             <button className={`btn-templates ${(viewMode === 'desktop' || emailWidth === '800px') && emailWidth !== '400px' ? 'active' : ''}`} onClick={() => toggleViewMode('desktop')}>
// // // //                                                 <img src={desk} alt="Desktop" /> Desktop
// // // //                                             </button>
// // // //                                             <button className={`btn-templates ${(viewMode === 'mobile' || emailWidth === '400px') && emailWidth !== '800px' ? 'active' : ''}`} onClick={() => toggleViewMode('mobile')}>
// // // //                                                 <img src={phonem} alt="Mobile" /> Mobile
// // // //                                             </button>
// // // //                                         </div>

// // // //                                         <div
// // // //                                             className="form-builder email-template"
// // // //                                             ref={formBuilderRef}
// // // //                                             style={{
// // // //                                                 backgroundColor,
// // // //                                                 width: emailWidth,
// // // //                                                 textAlign,
// // // //                                                 padding: `${templatePadding}px`,
// // // //                                                 borderRadius: `${borderRadious}px`,
// // // //                                                 backgroundImage: backgroundImage ? `url(${backgroundImage})` : 'none',
// // // //                                                 backgroundSize: 'cover',
// // // //                                                 backgroundPosition: 'center',
// // // //                                                 margin: 'auto',
// // // //                                                 fontFamily
// // // //                                             }}
// // // //                                         >
// // // //                                             {fields.length === 0 ? (
// // // //                                                 <div>

// // // //                                                     <div className="builder-block-img-forms">
// // // //                                                         <div className='builder_block_blank'>
// // // //                                                             <img src={emailtemp} alt="Email Template" />
// // // //                                                             <div className='builder-block-img-forms-paragraph'>
// // // //                                                                 <p>Let's create the Email.</p>
// // // //                                                             </div>
// // // //                                                         </div>
// // // //                                                     </div>
// // // //                                                 </div>
// // // //                                             ) : (
// // // //                                                 <>
// // // //                                                     {fields
// // // //                                                         .filter((field) => field && field.id && field.type)
// // // //                                                         .map((field) => {
// // // //                                                             console.log('Rendering field:', field);
// // // //                                                             if (field.type === 'Multicolumn') {
// // // //                                                                 console.log("Field Data:", field)
// // // //                                                                 console.log("Column Data:", field.columnData);
// // // //                                                                 console.log("Column Images:", columnImages);
// // // //                                                                 console.log("Editor Values:", editorValues);

// // // //                                                                 return (
// // // //                                                                     <div key={field.id}
// // // //                                                                         onClick={() => handleFieldClick(field.id)}
// // // //                                                                         className={`email_field columns-container ${activeFieldId === field.id ? 'active' : ''}`}
// // // //                                                                         data-columns={field.columnCount}
// // // //                                                                     >

// // // //                                                                         {Array.from({ length: field.columnCount }, (_, index) => (
// // // //                                                                             <div
// // // //                                                                                 key={index}
// // // //                                                                                 className={`column ${field.selectedColumn === index ? 'active-column' : ''}`}
// // // //                                                                                 onClick={(e) => handleColumnClick(field.id, index)}
// // // //                                                                                 style={{
// // // //                                                                                     border: field.selectedColumn === index ? '2px solid red' : '1px solid gray',
// // // //                                                                                     cursor: 'pointer',
// // // //                                                                                 }}
// // // //                                                                             >

// // // //                                                                                 {field.columnData && field.columnData[index] ? (
// // // //                                                                                     <>
// // // //                                                                                         {field.columnData[index].image && (
// // // //                                                                                             <img
// // // //                                                                                                 src={field.columnData[index].image}
// // // //                                                                                                 alt={`Uploaded for Column ${index + 1}`}
// // // //                                                                                                 style={{ width: '100px', height: '100px', marginTop: '10px' }}
// // // //                                                                                             />
// // // //                                                                                         )}

// // // //                                                                                         {field.columnData[index].content && (
// // // //                                                                                             <div
// // // //                                                                                                 dangerouslySetInnerHTML={{
// // // //                                                                                                     __html: field.columnData[index].content,
// // // //                                                                                                 }}
// // // //                                                                                             />
// // // //                                                                                         )}
// // // //                                                                                     </>
// // // //                                                                                 ) : (

// // // //                                                                                     columnImages[`${field.id}-${index}`] || editorValues[`${field.id}-${index}`] ? (
// // // //                                                                                         <>

// // // //                                                                                             {columnImages[`${field.id}-${index}`] && (
// // // //                                                                                                 <img
// // // //                                                                                                     src={columnImages[`${field.id}-${index}`]}
// // // //                                                                                                     alt={`Uploaded for Column ${index + 1}`}
// // // //                                                                                                     style={{ width: '100px', height: '100px', marginTop: '10px' }}
// // // //                                                                                                 />
// // // //                                                                                             )}

// // // //                                                                                             {editorValues[`${field.id}-${index}`] && (
// // // //                                                                                                 <div
// // // //                                                                                                     dangerouslySetInnerHTML={{
// // // //                                                                                                         __html: editorValues[`${field.id}-${index}`],
// // // //                                                                                                     }}
// // // //                                                                                                 />
// // // //                                                                                             )}
// // // //                                                                                         </>
// // // //                                                                                     ) : (

// // // //                                                                                         <div style={{ color: 'gray' }}>
// // // //                                                                                             <h2>Column {index + 1}</h2>
// // // //                                                                                             Elevate your online store with our easy-to-use Text Box feature.
// // // //                                                                                             It's a game-changer for personalization, allowing customers to add their
// // // //                                                                                             special touch directly from a user-friendly drop-down menu.
// // // //                                                                                         </div>
// // // //                                                                                     )
// // // //                                                                                 )}
// // // //                                                                             </div>
// // // //                                                                         ))}
// // // //                                                                         <div className='form-builder-radio-btn email'>
// // // //                                                                             <button className='remove-btn' onClick={() => removeField(field.id)}>
// // // //                                                                                 <img src={delete1} alt="delete" />
// // // //                                                                             </button>
// // // //                                                                             <button className="copy-btn" onClick={() => addInputField(field.type)}>
// // // //                                                                                 <img src={maximizesize} alt="copy" />
// // // //                                                                             </button>
// // // //                                                                         </div>
// // // //                                                                     </div>
// // // //                                                                 );
// // // //                                                             }

// // // //                                                         })
// // // //                                                     }

// // // //                                                 </>
// // // //                                             )}
// // // //                                         </div>
// // // //                                     </div>
// // // //                                 </div>

// // // //                                 <div className='email-template-input-setting'>
// // // //                                     {emailFieldPopup && (<div className='form-builder-change-propertites' ref={popupRef}>
// // // //                                         <div className='form-builder-change_show_all'>
// // // //                                             <div className='form_qucik'>
// // // //                                                 <p>Quick setup Settings</p>
// // // //                                             </div>
// // // //                                             <div className='form_build_propertities'>

// // // //                                                 {fields.length > 0 && selectedFieldId && (
// // // //                                                     <div className='quick-setup-settings'>
// // // //                                                         {fields.map((field) => {
// // // //                                                             if (field.id === selectedFieldId && field.type === 'Multicolumn') {
// // // //                                                                 return (
// // // //                                                                     <div>

// // // //                                                                         <div className="popupp">
// // // //                                                                             <div className="form-builder-chaneging-wrap select">
// // // //                                                                                 <label>Select Columns</label>
// // // //                                                                                 <div className="column-options">
// // // //                                                                                     <select
// // // //                                                                                         value={columnCount}
// // // //                                                                                         onChange={(e) => handleColumnSelection(e.target.value)}
// // // //                                                                                     >
// // // //                                                                                         {[1, 2, 3, 4, 5, 6].map((column) => (
// // // //                                                                                             <option key={column} value={column}>
// // // //                                                                                                 {column} Columns
// // // //                                                                                             </option>
// // // //                                                                                         ))}
// // // //                                                                                     </select>
// // // //                                                                                 </div>
// // // //                                                                             </div>
// // // //                                                                         </div>
// // // //                                                                         {field.columnData && field.selectedColumn !== undefined ? (
// // // //                                                                             <>
// // // //                                                                                 {/* Display the uploaded image if it exists */}
// // // //                                                                                 {field.columnData[field.selectedColumn]?.image && (
// // // //                                                                                     <div>
// // // //                                                                                         <img
// // // //                                                                                             src={field.columnData[field.selectedColumn].image}
// // // //                                                                                             alt="Selected Column Image"
// // // //                                                                                             style={{
// // // //                                                                                                 width: '150px',
// // // //                                                                                                 height: '150px',
// // // //                                                                                                 marginBottom: '10px',
// // // //                                                                                             }}
// // // //                                                                                         />
// // // //                                                                                         <button
// // // //                                                                                             onClick={() =>
// // // //                                                                                                 handleRemoveImage1(
// // // //                                                                                                     popupFieldId,
// // // //                                                                                                     fields.find((f) => f.id === popupFieldId)?.selectedColumn
// // // //                                                                                                 )
// // // //                                                                                             }
// // // //                                                                                             style={{
// // // //                                                                                                 display: 'block',
// // // //                                                                                                 marginTop: '10px',
// // // //                                                                                                 padding: '5px 10px',
// // // //                                                                                                 cursor: 'pointer',
// // // //                                                                                             }}
// // // //                                                                                         >
// // // //                                                                                             Remove Image
// // // //                                                                                         </button>
// // // //                                                                                     </div>
// // // //                                                                                 )}

// // // //                                                                                 {field.columnData[field.selectedColumn]?.content && (
// // // //                                                                                     <div>
// // // //                                                                                         <ReactQuill
// // // //                                                                                             value={field.columnData[field.selectedColumn].content}
// // // //                                                                                             onChange={(value) =>
// // // //                                                                                                 handleContentChange(value, popupFieldId, fields.find((f) => f.id === popupFieldId)?.selectedColumn)
// // // //                                                                                             }
// // // //                                                                                             style={{ height: '200px', marginTop: '10px' }}
// // // //                                                                                         />
// // // //                                                                                     </div>
// // // //                                                                                 )}

// // // //                                                                                 <div className="form-builder-chaneging-wrap file">
// // // //                                                                                     <label>Select Image</label>
// // // //                                                                                     <input
// // // //                                                                                         type="file"
// // // //                                                                                         accept="image/*"
// // // //                                                                                         onChange={(e) =>
// // // //                                                                                             handleImageUpload1(e, popupFieldId, fields.find((f) => f.id === popupFieldId)?.selectedColumn)
// // // //                                                                                         }
// // // //                                                                                         style={{ marginTop: '10px' }}
// // // //                                                                                     />
// // // //                                                                                 </div>
// // // //                                                                             </>
// // // //                                                                         ) : (
// // // //                                                                             <p>No data available for this column.</p>
// // // //                                                                         )}

// // // //                                                                         <div className="popupp">
// // // //                                                                             <div className="form-builder-chaneging-wrap file">
// // // //                                                                                 <label>
// // // //                                                                                     Column{' '}
// // // //                                                                                     {fields.find((f) => f.id === popupFieldId)?.selectedColumn + 1}{' '}
// // // //                                                                                     Selected
// // // //                                                                                 </label>
// // // //                                                                                 <input
// // // //                                                                                     type="file"
// // // //                                                                                     accept="image/*"
// // // //                                                                                     onChange={(e) =>
// // // //                                                                                         handleImageUploaded(
// // // //                                                                                             e,
// // // //                                                                                             popupFieldId,
// // // //                                                                                             fields.find((f) => f.id === popupFieldId)?.selectedColumn
// // // //                                                                                         )
// // // //                                                                                     }
// // // //                                                                                 />

// // // //                                                                                 {columnImages[
// // // //                                                                                     `${popupFieldId}-${fields.find((f) => f.id === popupFieldId)?.selectedColumn}`
// // // //                                                                                 ] && (
// // // //                                                                                         <div>
// // // //                                                                                             <img
// // // //                                                                                                 src={
// // // //                                                                                                     columnImages[
// // // //                                                                                                     `${popupFieldId}-${fields.find((f) => f.id === popupFieldId)?.selectedColumn}`
// // // //                                                                                                     ]
// // // //                                                                                                 }
// // // //                                                                                                 alt="Image Preview"
// // // //                                                                                                 style={{
// // // //                                                                                                     maxWidth: '100%',
// // // //                                                                                                     maxHeight: '200px',
// // // //                                                                                                     marginTop: '10px',
// // // //                                                                                                 }}
// // // //                                                                                             />
// // // //                                                                                             <button
// // // //                                                                                                 onClick={() =>
// // // //                                                                                                     handleRemoveImage(
// // // //                                                                                                         popupFieldId,
// // // //                                                                                                         fields.find((f) => f.id === popupFieldId)?.selectedColumn
// // // //                                                                                                     )
// // // //                                                                                                 }
// // // //                                                                                                 style={{
// // // //                                                                                                     display: 'block',
// // // //                                                                                                     marginTop: '10px',
// // // //                                                                                                     padding: '5px 10px',
// // // //                                                                                                     cursor: 'pointer',
// // // //                                                                                                 }}
// // // //                                                                                             >
// // // //                                                                                                 Remove Image
// // // //                                                                                             </button>
// // // //                                                                                         </div>
// // // //                                                                                     )}
// // // //                                                                             </div>

// // // //                                                                             <ReactQuill
// // // //                                                                                 value={
// // // //                                                                                     editorValues[
// // // //                                                                                     `${popupFieldId}-${fields.find((f) => f.id === popupFieldId)?.selectedColumn}`
// // // //                                                                                     ] || ''
// // // //                                                                                 }
// // // //                                                                                 onChange={(value) =>
// // // //                                                                                     handleEditorChangeed(
// // // //                                                                                         value,
// // // //                                                                                         popupFieldId,
// // // //                                                                                         fields.find((f) => f.id === popupFieldId)?.selectedColumn
// // // //                                                                                     )
// // // //                                                                                 }
// // // //                                                                                 modules={{ toolbar: toolbarOptions }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                     </div>
// // // //                                                                 );
// // // //                                                             }


// // // //                                                             return null;
// // // //                                                         })}
// // // //                                                     </div>
// // // //                                                 )}
// // // //                                             </div>
// // // //                                         </div>

// // // //                                     </div>)}
// // // //                                 </div>
// // // //                             </div>
// // // //                         </div>
// // // //                     </div>

// // // //                 </div>

// // // //             </div>

// // // //         </div >
// // // //     );
// // // // };

// // // // export default EmailTemplateCreate;








// // // import React, { useState, useEffect, useRef } from 'react';
// // // import Sortable from 'sortablejs';
// // // import axios from 'axios';
// // // import { useLocation } from 'react-router-dom';
// // // import font from '../images/font-size.png';
// // // import image from '../images/image-.png';
// // // import divider2 from '../images/divider.png';
// // // import btn from '../images/btn.png';
// // // import emailtemp from '../images/emailtemp.png';
// // // import phonem from '../images/phonem.png';
// // // import desk from '../images/desk.png';
// // // import socail from '../images/socail.png';
// // // import htmlicon from '../images/htmlicon.png';
// // // import maximizesize from '../images/maximize-size.png';
// // // import deletep from '../images/deletep.png';
// // // import delete1 from '../images/delete.png';
// // // import facebook from '../images/facebook.png';
// // // import instagram from '../images/instagram.png';
// // // import twitter from '../images/twitter.png';
// // // import videoplay from '../images/videoplay.png';
// // // import left from '../images/left.png';
// // // import right from '../images/right.png';
// // // import product from '../images/product.png';
// // // import spacer from '../images/spacer.png';
// // // import banner from '../images/banner.png';
// // // import itext from '../images/itext.png';
// // // import multimedia from '../images/multimedia.png';
// // // import rich from '../images/rich.png';
// // // import productcancle from '../images/productcancle.png';
// // // import { format } from 'date-fns';
// // // import 'react-quill/dist/quill.snow.css';

// // // import '../index.css';
// // // import { useNavigate } from 'react-router-dom';
// // // import { useLoaderData, Link } from "@remix-run/react";
// // // import { authenticate, apiVersion } from "../shopify.server";


// // // const toolbarOptions = [
// // //     [{ header: [1, 2, 3, 4, 5, 6, false] }],
// // //     ['bold', 'italic', 'underline'],
// // //     ['link', 'image'],
// // //     [{ list: 'ordered' }, { list: 'bullet' }],
// // //     [{ script: 'sub' }, { script: 'super' }],
// // //     [{ indent: '-1' }, { indent: '+1' }],
// // //     [{ direction: 'rtl' }],
// // //     [{ size: ['small', 'medium', 'large', 'huge'] }],
// // //     [{ color: [] }, { background: [] }],
// // //     [{ font: [] }],
// // //     [{ align: [] }],
// // //     ['clean'],
// // // ];

// // // const generateUniqueId = (length = 22) => {
// // //     const charset = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
// // //     let uniqueId = '';
// // //     for (let i = 0; i < length; i++) {
// // //         const randomIndex = Math.floor(Math.random() * charset.length);
// // //         uniqueId += charset[randomIndex];
// // //     }
// // //     return uniqueId;
// // // };

// // // export const loader = async ({ request }) => {
// // //     try {
// // //         const { session } = await authenticate.admin(request);
// // //         const { shop, accessToken } = session;

// // //         const response = await fetch(
// // //             `https://${shop}/admin/api/${apiVersion}/products.json`,
// // //             {
// // //                 method: "GET",
// // //                 headers: {
// // //                     "Content-Type": "application/json",
// // //                     "X-Shopify-Access-Token": accessToken,
// // //                 }
// // //             }
// // //         );

// // //         if (!response.ok) {
// // //             throw new Error(`Failed to fetch products: ${response.statusText}`);
// // //         }

// // //         const responseData = await response.json();
// // //         const products = responseData?.products || [];

// // //         const productsWithData = products.map(product => {
// // //             const { variants } = product;
// // //             const uniqueColors = Array.from(new Set(variants.map(variant => variant.option1))).join(' | ');
// // //             const uniquePrices = Array.from(new Set(variants.map(variant => variant.price))).join(' | ');
// // //             const uniqueSizes = Array.from(new Set(variants.map(variant => variant.option2))).join(' | ');

// // //             return {
// // //                 ...product,
// // //                 color: uniqueColors,
// // //                 price: uniquePrices,
// // //                 size: uniqueSizes
// // //             };
// // //         });

// // //         return { products: productsWithData, shop, apiVersion };
// // //     } catch (err) {
// // //         console.error("Error fetching products:", err.message);
// // //         return { products: [] };
// // //     }
// // // };

// // // const EmailTemplateCreate = () => {

// // //     const navigate = useNavigate();
// // //     const [fields, setFields] = useState([]);
// // //     const [emailTemplateId, setEmailTemplateId] = useState(null);
// // //     const formBuilderRef = useRef(null);
// // //     const [formTitle, setFormTitle] = useState('Email-Template');
// // //     const [existingTitles, setExistingTitles] = useState([]);
// // //     const [showImagePopup, setShowImagePopup] = useState(false);
// // //     const [showHeadingPopup, setShowHeadingPopup] = useState(false);
// // //     const [showDescriptionPopup, setShowDescriptionPopup] = useState(false);
// // //     const [headingText, setHeadingText] = useState('');
// // //     const [headingLevel, setHeadingLevel] = useState('h1');
// // //     const [selectedOption, setSelectedOption] = useState('heading');
// // //     const [imageUrl, setImageUrl] = useState(null);
// // //     const [headingFontSize, setHeadingFontSize] = useState('16');
// // //     const [descriptionText, setDescriptionText] = useState('');
// // //     const [backgroundColor, setBackgroundColor] = useState('#ffffff');
// // //     const [borderRadious, setBorderRadious] = useState(5);
// // //     const [templatePadding, setTemplatePadding] = useState('20');
// // //     const [backgroundImage, setBackgroundImage] = useState(null);
// // //     const [textAlign, setTextAlign] = useState('left');
// // //     const [imageFieldId, setImageFieldId] = useState(null);
// // //     const [showField, setShowField] = useState(true);
// // //     const [showFields, setShowFields] = useState(true);
// // //     const [showSocialIconPopup, setShowSocialIconPopup] = useState(false);
// // //     const [selectedFieldId, setSelectedFieldId] = useState(null);
// // //     const [emailFieldPopup, setEmailFieldPopup] = useState(false);
// // //     const [activeFieldId, setActiveFieldId] = useState(null);
// // //     const [socalIconWidth, setSocalIconWidth] = useState(30);
// // //     const [socalIconHeight, setSocalIconHeight] = useState(30);
// // //     const [formDataAdd, setFormDataAdd] = useState([]);
// // //     const [selectedFormIds, setSelectedFormIds] = useState([]);
// // //     const [selectedTitles, setSelectedTitles] = useState([]);
// // //     const [showVideoInput, setShowVideoInput] = useState(false);
// // //     const { products, shop, apiVersion } = useLoaderData();
// // //     const [selectedProduct, setSelectedProduct] = useState(null);
// // //     const [isPopupOpen, setIsPopupOpen] = useState(false);
// // //     const [selectedProducts, setSelectedProducts] = useState([]);
// // //     const [productTitles, setProductTitles] = useState([]);
// // //     const [productImage, setProductImage] = useState([]);
// // //     const [popupFieldTitle, setPopupFieldTitle] = useState('');
// // //     const [showPrice, setShowPrice] = useState(false);
// // //     const [showbtnn, setShowbtnn] = useState(false);
// // //     const [productsPerRow, setProductsPerRow] = useState(3);
// // //     const [lastProductFieldId, setLastProductFieldId] = useState(null);
// // //     const [showFileUpload, setShowFileUpload] = useState(false);
// // //     const emailFieldRef = useRef(null);
// // //     const popupRef = useRef(null);
// // //     const [selectedIcons, setSelectedIcons] = useState({
// // //         facebook: true,
// // //         twitter: true,
// // //         instagram: true,
// // //     });
// // //     const [customIcons, setCustomIcons] = useState([]);
// // //     const [id, setId] = useState(null);
// // //     const location = useLocation();
// // //     const { formData } = location.state || {};
// // //     const [viewMode, setViewMode] = useState('desktop');
// // //     const [dividerColor, setDividerColor] = useState('#000');
// // //     const [showColorPicker, setShowColorPicker] = useState(false);
// // //     const [buttonLabel, setButtonLabel] = useState('Submit');
// // //     const [fontSize, setFontSize] = useState(16);
// // //     const [padding, setPadding] = useState('10px 20px');
// // //     const [width, setWidth] = useState(100);
// // //     const [height, setHeight] = useState(40);
// // //     const [btnbackgroundColor, setBtnBackgroundColor] = useState('#007BFF');
// // //     const [showbtn, setShowBtn] = useState(false);
// // //     const [emailWidth, setEmailWidth] = useState('800px');
// // //     const [headingColor, setHeadingColor] = useState('#000');
// // //     const formsPerPage = 3;
// // //     const [currentPage, setCurrentPage] = useState(1);
// // //     const [fontFamily, setFontFamily] = useState('Arial');
// // //     const [ReactQuill, setReactQuill] = useState(null);
// // //     const [editorValue, setEditorValue] = useState('');
// // //     const [headingUrl, setHeadingUrl] = useState('');
// // //     const [texteditorValue, setTextEditorValue] = useState('');
// // //     const [columnCount, setColumnCount] = useState(6);
// // //     const [isPopupVisible, setIsPopupVisible] = useState(false);
// // //     const [columnImages, setColumnImages] = useState({});
// // //     const [editorValues, setEditorValues] = useState({});
// // //     const [editorValueed, setEditorValueed] = useState('');
// // //     const [currentFieldId, setCurrentFieldId] = useState(null);
// // //     const [isPopupVisibleed, setPopupVisibleed] = useState(false);
// // //     const [popupFieldId, setPopupFieldId] = useState(null);

// // //     const handleFontChange = (event) => {
// // //         setFontFamily(event.target.value);
// // //     };

// // //     useEffect(() => {
// // //         if (formData) {
// // //             console.log('Form data received:', formData);
// // //             console.log('Fields:', formData.fields);

// // //             if (formData.fields && formData.fields.length > 0) {
// // //                 const field = formData.fields[0];

// // //                 if (field.columnData) {
// // //                     console.log('Column Data:', field.columnData);
// // //                 } else {
// // //                     console.log('Column Data not found in the first field');
// // //                 }
// // //             } else {
// // //                 console.log('No fields found in formData');
// // //             }

// // //             if (Array.isArray(formData.fields)) {
// // //                 const validFields = formData.fields.map(field => {
// // //                     if (!field.id) {
// // //                         console.warn('Field missing ID:', field);
// // //                     }

// // //                     if (field.type === 'product') {
// // //                         console.log('Price for product field:', field.price);
// // //                         if (field.price === true) {
// // //                             setShowPrice(true);
// // //                         }
// // //                         if (field.showbtnn === true) {
// // //                             setShowbtnn(true);
// // //                         }
// // //                     }

// // //                     return { ...field, id: field.id || generateUniqueId() };
// // //                 });

// // //                 setFields(validFields);
// // //             }
// // //             setEmailWidth(formData.styles.width);
// // //             setBackgroundColor(formData.styles.backgroundColor);
// // //             setBorderRadious(formData.styles.borderRadious);
// // //             setBackgroundImage(formData.styles.backgroundImage);
// // //             setTemplatePadding(formData.styles.templatePadding);
// // //             setTextAlign(formData.styles.textAlign);
// // //             setFontFamily(formData.styles.fontFamily);
// // //             setEmailTemplateId(formData.templateId);
// // //             setFormTitle(formData.title);
// // //             setId(formData._id);
// // //             setSelectedFormIds(formData.form_ids || []);
// // //             const productsPerRow = formData.fields[0]?.productsPerRow || 3;
// // //             setProductsPerRow(productsPerRow);
// // //             console.log('Products per row:', formData.fields[0]?.productsPerRow);
// // //             const columnCount = parseInt(formData.styles.columnCount) || '';
// // //             setColumnCount(columnCount);

// // //         }
// // //     }, [formData]);

// // //     const createInputField = (type, initialValue = '') => {
// // //         const id = generateUniqueId();
// // //         console.log(`Creating field of type ${type} with ID: ${id}`);

// // //         return {
// // //             id,
// // //             type,
// // //             contentType: 'text',
// // //             image: type === 'images' ? initialValue : null,
// // //             headerbtnbg: type === 'heading' ? '#9474ff' : undefined,
// // //             headerbtncolor: type === 'heading' ? '#FFFFFF' : undefined,
// // //             headingbtnPadding: type === 'heading' ? 10 : undefined,
// // //             headingbtnradious: type === 'heading' ? 4 : undefined,
// // //             headingbtnFontSize: type === 'heading' ? 16 : undefined,
// // //             headingbtnwidth: type === 'heading' ? '100' : undefined,
// // //             headingbtnheight: type === 'heading' ? '40' : undefined,
// // //             headerbtn: type === 'heading' ? 'Vist Now' : undefined,
// // //             headingbtnBorderColor: type === 'heading' ? '#000000' : undefined,
// // //             headingbtnBorderWidth: type === 'heading' ? '1' : undefined,
// // //             headingbtnBorderStyle: type === 'heading' ? 'solid' : undefined,
// // //             bannerImageWidth: type === 'heading' ? '100' : undefined,
// // //             bannerImageHeight: type === 'heading' ? 'default' : undefined,
// // //             bannerImageTextAlign: type === 'heading' ? '' : undefined,
// // //             headingText: type === 'heading' ? initialValue : '',
// // //             headingLevel: type === 'heading' ? 'h1' : null,
// // //             headingFontSize: type === 'heading' ? '16' : undefined,
// // //             headingLetterSpacing: type === 'heading' ? 0 : undefined,
// // //             headingPadding: type === 'heading' ? 0 : undefined,
// // //             headingTextAlign: type === 'heading' ? "" : undefined,
// // //             headingColor: type === 'heading' ? '#000' : undefined,
// // //             headingbg: type === 'heading' ? '#0000' : undefined,
// // //             headingbgImage: type === 'heading' ? '' : undefined,
// // //             headingBorderColor: type === 'heading' ? '#000000' : undefined,
// // //             headingBorderWidth: type === 'heading' ? '0' : undefined,
// // //             headingBorderStyle: type === 'heading' ? 'solid' : undefined,
// // //             headingFontWeight: type === 'heading' ? 600 : undefined,
// // //             descritionFontSize: type === 'description' ? '16' : undefined,
// // //             descritionColor: type === 'description' ? '#000' : undefined,
// // //             descritionFontWeight: type === 'description' ? 500 : undefined,
// // //             descriptionText: type === 'description' ? initialValue : 'No Description Provided',
// // //             descriptionbg: type === 'description' ? '#0000' : undefined,
// // //             descriptionPadding: type === 'description' ? 10 : undefined,
// // //             descriptionLetterSpacing: type === 'description' ? 0 : undefined,
// // //             descriptionTextAlign: type === 'description' ? "" : undefined,
// // //             descriptionBorderColor: type === 'description' ? '#000000' : undefined,
// // //             descriptionBorderWidth: type === 'description' ? '0' : undefined,
// // //             descriptionBorderStyle: type === 'description' ? 'solid' : undefined,
// // //             name: type === 'heading' ? initialValue :
// // //                 type === 'description' ? 'Description' :
// // //                     `Field_${id}`,
// // //             label: type === 'heading' ? 'Heading' :
// // //                 type === 'description' ? 'Description' :
// // //                     type === 'button' ? 'Submit' :
// // //                         `Default Label for ${type}`,
// // //             value: initialValue || (type === 'description' ? 'No Description Provided' : ''),
// // //             dividerColor: type === 'divider' ? '#000' : undefined,
// // //             dividerWidth: type === 'divider' ? '100' : undefined,
// // //             dividerheight: type === 'divider' ? '1' : undefined,
// // //             buttonColor: type === 'button' ? '#007BFF' : undefined,
// // //             buttonTextColor: type === 'button' ? '#FFF' : undefined,
// // //             buttonFontSize: type === 'button' ? 16 : undefined,
// // //             buttonPadding: type === 'button' ? 10 : undefined,
// // //             buttonWidth: type === 'button' ? 100 : undefined,
// // //             buttonHeight: type === 'button' ? 40 : undefined,
// // //             buttonradious: type === 'button' ? 2 : undefined,
// // //             buttonBorderColor: type === 'button' ? '#000000' : undefined,
// // //             buttonBorderWidth: type === 'button' ? '1' : undefined,
// // //             buttonBorderStyle: type === 'button' ? 'solid' : undefined,
// // //             buttonLetterSpacing: type === 'button' ? 0 : undefined,
// // //             buttonUrll: type === 'button' ? '' : undefined,
// // //             socalIconWidth: type === 'socalicon' ? 30 : undefined,
// // //             socalIconHeight: type === 'socalicon' ? 30 : undefined,
// // //             socalIconPadding: type === 'socalicon' ? 10 : undefined,
// // //             socaliconTextAlign: type === 'socalicon' ? "" : undefined,
// // //             htmlColor: type === 'html convert' ? '#000' : undefined,
// // //             htmlFontSize: type === 'html convert' ? 16 : undefined,
// // //             htmlPadding: type === 'html convert' ? 10 : undefined,
// // //             icons: {
// // //                 facebook: { url: 'https://facebook.com', isHidden: false },
// // //                 twitter: { url: 'https://twitter.com', isHidden: false },
// // //                 instagram: { url: 'https://instagram.com', isHidden: false },
// // //             },
// // //             customIcons: [],
// // //             spacerHeight: type === 'spacer' ? '20' : undefined,
// // //             spacerbg: type === 'spacer' ? '#ffffff' : undefined,
// // //             splitbg: type === 'split' ? '#0000' : undefined,
// // //             videoPadding: type === 'video' ? '20' : undefined,
// // //             splitPadding: type === 'split' ? '10' : undefined,
// // //             videoBorderColor: type === 'video' ? '#000000' : undefined,
// // //             videoBorderWidth: type === 'video' ? '0' : undefined,
// // //             videoBorderStyle: type === 'video' ? 'solid' : undefined,
// // //             imgWidth: type === 'images' ? '100' : undefined,
// // //             imgTextAlign: type === 'images' ? "" : undefined,
// // //             imgPadding: type === 'images' ? 10 : undefined,
// // //             imgbg: type === 'images' ? '#0000' : undefined,
// // //             imgBorderColor: type === 'images' ? '#000000' : undefined,
// // //             imgBorderWidth: type === 'images' ? '0' : undefined,
// // //             imgBorderStyle: type === 'images' ? 'solid' : undefined,
// // //             productPadding: type === 'product' ? 10 : undefined,
// // //             productbg: type === 'product' ? '#0000' : undefined,
// // //             productBorderColor: type === 'product' ? '#000000' : undefined,
// // //             productBorderWidth: type === 'product' ? '0' : undefined,
// // //             productBorderStyle: type === 'product' ? 'solid' : undefined,
// // //             productFontSize: type === 'product' ? 16 : undefined,
// // //             productTextColor: type === 'product' ? '#000000' : undefined,
// // //             productWeight: type === 'product' ? 400 : undefined,
// // //             productLetterSpacing: type === 'product' ? 0 : undefined,
// // //             productbtnBorderColor: type === 'product' ? '#000000' : undefined,
// // //             productbtnBorderWidth: type === 'product' ? '1' : undefined,
// // //             productbtnBorderStyle: type === 'product' ? 'solid' : undefined,
// // //             productbtnbg: type === 'product' ? '#ffff' : undefined,
// // //             productradious: type === 'product' ? '3' : undefined,
// // //             productLabel: type === 'product' ? 'Shop Now' : undefined,
// // //             productfontSize: type === 'product' ? '12' : undefined,
// // //             productwidth: type === 'product' ? '80' : undefined,
// // //             productheight: type === 'product' ? '30' : undefined,
// // //             productbackgroundColor: type === 'product' ? '#007BFF' : undefined,
// // //             additionalButtons: [],
// // //             displayStyle: 'flex',
// // //         };
// // //     };

// // //     const addInputField = (type) => {
// // //         let newField;
// // //         if (type === 'images') {
// // //             setShowImagePopup(true);
// // //             setImageFieldId(null);
// // //         } else if (type === 'heading') {
// // //             setShowHeadingPopup(true);
// // //             setSelectedOption('heading')
// // //             setEditorValue('');

// // //         } else if (type === 'description') {
// // //             setShowDescriptionPopup(true);
// // //         } else if (type === 'divider') {
// // //             toggleColorPicker();
// // //             newField = createInputField(type);
// // //             setFields((prevFields) => [...prevFields, newField]);
// // //         }
// // //         else if (type === 'button') {
// // //             togglebtn();
// // //             newField = createInputField(type);
// // //             setFields((prevFields) => [...prevFields, newField]);
// // //         } else if (type === 'socalicon') {
// // //             const newField = createInputField('socalicon');

// // //             setFields((prevFields) => {
// // //                 const updatedFields = [...prevFields, newField];
// // //                 console.log("Updated fields after adding new field:", updatedFields);

// // //                 setSelectedFieldId(newField.id);
// // //                 setSelectedIcons(newField.icons || {});
// // //                 setCustomIcons(newField.customIcons || []);
// // //                 setShowSocialIconPopup(true);

// // //                 return updatedFields;
// // //             });
// // //         }
// // //         if (type === 'html convert') {
// // //             const newField = createInputField(type, type === 'html convert' ? '<h1>Your HTML Here</h1>' : '');
// // //             setFields((prevFields) => [...prevFields, newField]);
// // //         }
// // //         if (type === 'split') {
// // //             const splitFields = [
// // //                 createInputField('split', '', ''),
// // //                 createInputField('split', '', ''),
// // //             ];
// // //             setFields((prevFields) => [...prevFields, ...splitFields]);
// // //         }
// // //         if (type === 'spacer') {
// // //             const newField = createInputField(type);
// // //             setFields((prevFields) => [...prevFields, newField]);
// // //         }
// // //         if (type === 'video') {
// // //             const newField = createInputField(type);
// // //             setFields((prevFields) => [...prevFields, newField]);
// // //             setShowVideoInput(true);
// // //         }
// // //         if (type === 'product') {
// // //             const newField = createInputField('product');
// // //             setFields((prevFields) => [...prevFields, newField]);
// // //             setLastProductFieldId(newField.id);
// // //             setIsPopupOpen(true);
// // //         }
// // //         if (type === 'Multicolumn') {
// // //             const id = generateUniqueId();
// // //             setFields((prevFields) => [
// // //                 ...prevFields,
// // //                 { id, type: 'Multicolumn', columnCount: 6 }
// // //             ]);
// // //             setColumnCount(6);
// // //         }
// // //         if (type === 'richtext') {
// // //             const newField = createInputField('richtext');
// // //             setFields([...fields, newField]);
// // //             setCurrentFieldId(newField.id);
// // //             setPopupVisibleed(true);
// // //         }
// // //     };

// // //     useEffect(() => {

// // //         const loadReactQuill = async () => {
// // //             const { default: Quill } = await import('react-quill');
// // //             setReactQuill(() => Quill);
// // //         };

// // //         loadReactQuill();
// // //     }, []);

// // //     const handleEdit = (field) => {
// // //         setSelectedFieldId(field.id);
// // //         setSelectedIcons(field.icons);
// // //         setCustomIcons(field.customIcons || []);
// // //         setShowSocialIconPopup(true);
// // //     };

// // //     const handleSaveSocialIcons = () => {
// // //         setFields((prevFields) =>
// // //             prevFields.map((field) =>
// // //                 field.id === selectedFieldId
// // //                     ? { ...field, icons: selectedIcons, customIcons }
// // //                     : field
// // //             )
// // //         );
// // //         setShowSocialIconPopup(false);

// // //     };

// // //     useEffect(() => {

// // //         handleSaveSocialIcons();
// // //     }, [selectedIcons, customIcons]);

// // //     const handleToggleIcon = (icon) => {
// // //         setSelectedIcons((prevIcons) => ({
// // //             ...prevIcons,
// // //             [icon]: {
// // //                 ...prevIcons[icon],
// // //                 isHidden: !prevIcons[icon]?.isHidden,
// // //             },
// // //         }));
// // //     };

// // //     const handleIconUrlChange = (e, icon) => {
// // //         setSelectedIcons((prevIcons) => ({
// // //             ...prevIcons,
// // //             [icon]: {
// // //                 ...prevIcons[icon],
// // //                 url: e.target.value,
// // //             },
// // //         }));
// // //     };

// // //     const handleCustomIconUpload = (e) => {
// // //         const files = e.target.files;
// // //         const filePromises = Array.from(files).map((file) => {
// // //             return new Promise((resolve) => {
// // //                 const reader = new FileReader();
// // //                 reader.onloadend = () => {
// // //                     resolve(reader.result);
// // //                 };
// // //                 reader.readAsDataURL(file);
// // //             });
// // //         });

// // //         Promise.all(filePromises).then((fileUrls) => {
// // //             const newIcons = fileUrls.map((url) => ({
// // //                 src: url,
// // //                 name: 'Custom Icon',
// // //                 isHidden: false
// // //             }));
// // //             setCustomIcons((prevIcons) => [...prevIcons, ...newIcons]);
// // //         });
// // //     };

// // //     const handleCustomIconUrlChange = (e, index) => {
// // //         const newUrl = e.target.value;
// // //         setCustomIcons((prevIcons) =>
// // //             prevIcons.map((icon, i) =>
// // //                 i === index ? { ...icon, url: newUrl } : icon
// // //             )
// // //         );
// // //     };

// // //     const toggleCustomIconVisibility = (index) => {
// // //         setCustomIcons((prevIcons) =>
// // //             prevIcons.map((icon, i) =>
// // //                 i === index ? { ...icon, isHidden: !icon.isHidden } : icon
// // //             )
// // //         );
// // //     };

// // //     const handleImageUpload = (e) => {
// // //         const file = e.target.files[0];
// // //         if (file) {
// // //             const reader = new FileReader();
// // //             reader.onloadend = () => {
// // //                 const newField = createInputField('images', reader.result);
// // //                 if (imageFieldId) {
// // //                     setFields((prevFields) =>
// // //                         prevFields.map((field) =>
// // //                             field.id === imageFieldId ? { ...field, value: reader.result } : field
// // //                         )
// // //                     );
// // //                 } else {
// // //                     setFields((prevFields) => [...prevFields, newField]);
// // //                 }
// // //                 setShowImagePopup(false);
// // //                 setImageFieldId(null);
// // //             };
// // //             reader.readAsDataURL(file);
// // //         }
// // //     };

// // //     const handleAddHeading = (e) => {
// // //         e.preventDefault();
// // //         if (emailTemplateId) {
// // //             setFields((prevFields) =>
// // //                 prevFields.map((field) =>
// // //                     field.id === emailTemplateId
// // //                         ? {
// // //                             ...field,
// // //                             headingText,
// // //                             headingLevel,
// // //                             headingFontSize,
// // //                             headingColor,
// // //                             imageUrl,
// // //                             editorContent: editorValue,
// // //                             headingUrl,
// // //                         }
// // //                         : field
// // //                 )
// // //             );
// // //         } else {
// // //             const newField = createInputField('heading', headingText);
// // //             newField.headingLevel = headingLevel;
// // //             newField.headingFontSize = headingFontSize;
// // //             newField.headingColor = headingColor;
// // //             newField.imageUrl = imageUrl;
// // //             newField.editorContent = editorValue;
// // //             newField.headingUrl = headingUrl;
// // //             setFields((prevFields) => [...prevFields, newField]);
// // //         }
// // //         setShowHeadingPopup(false);
// // //         setHeadingText('');
// // //         setHeadingLevel('h1');
// // //         setHeadingFontSize('16');
// // //         setEmailTemplateId(null);
// // //         setImageUrl(null);
// // //         setEditorValue('');
// // //         setHeadingUrl('');
// // //     };

// // //     const handleEditorChange = (value) => {
// // //         console.log("Editor value changed:", value);
// // //         console.log("Active field ID:", activeFieldId);
// // //         setEditorValue(value);

// // //         setFields((prevFields) => {
// // //             const updatedFields = prevFields.map((field) =>
// // //                 field.id === activeFieldId
// // //                     ? { ...field, editorContent: value }
// // //                     : field
// // //             );
// // //             console.log("Updated fields after editor change:", updatedFields);
// // //             return updatedFields;
// // //         });
// // //     };

// // //     const handleUpdateUrl = (id, newUrl) => {
// // //         setFields((prevFields) =>
// // //             prevFields.map((field) =>
// // //                 field.id === id ? { ...field, headingUrl: newUrl } : field
// // //             )
// // //         );
// // //     };

// // //     const handleAddDescription = (e) => {
// // //         e.preventDefault();
// // //         if (emailTemplateId) {
// // //             setFields((prevFields) =>
// // //                 prevFields.map((field) =>
// // //                     field.id === emailTemplateId
// // //                         ? { ...field, descriptionText }
// // //                         : field
// // //                 )
// // //             );
// // //         } else {
// // //             const newField = createInputField('description', descriptionText);
// // //             setFields((prevFields) => [...prevFields, newField]);
// // //         }

// // //         setShowDescriptionPopup(false);
// // //         setDescriptionText('');
// // //         setTextEditorValue('');
// // //         setEmailTemplateId(null);
// // //     };

// // //     const handleDescriptionChange = (id, value) => {
// // //         setFields((prevFields) =>
// // //             prevFields.map((field) =>
// // //                 field.id === id ? { ...field, descriptionText: value } : field
// // //             )
// // //         );
// // //     };

// // //     const removeField = (id) => {
// // //         console.log('Attempting to remove field with ID:', id);
// // //         setFields((prevFields) => {
// // //             const newFields = prevFields.filter(field => field.id !== id);
// // //             setEmailFieldPopup(false)
// // //             console.log('Remaining fields after removal:', newFields);
// // //             return newFields;
// // //         });
// // //     };


// // //     useEffect(() => {
// // //         axios
// // //             .get('http://localhost:4001/get-forms')
// // //             .then((res) => {
// // //                 console.log('API Response:', res.data);
// // //                 const filteredData = res.data.filter((form) => form.shop === shop);
// // //                 setFormDataAdd(filteredData);
// // //             })
// // //             .catch((error) => console.error('API Error:', error));
// // //     }, [shop]);

// // //     useEffect(() => {
// // //         if (formDataAdd.length > 0) {
// // //             const formIds = formDataAdd.map((form) => form.formId);
// // //             console.log('All form IDs:', formIds);
// // //         }
// // //     }, [formDataAdd]);

// // //     const handleFormSelect = async (e) => {
// // //         const title = e.target.value.trim();
// // //         const selectedForm = formDataAdd.find((form) => form.title.trim() === title);

// // //         if (selectedForm) {
// // //             try {
// // //                 const response = await fetch(`http://localhost:4001/check-form-connected/${selectedForm.formId}`);
// // //                 const data = await response.json();

// // //                 if (data.isConnected) {
// // //                     alert('This form is already connected to a template.');

// // //                     const confirmUnlink = window.confirm(
// // //                         'Do you want to unlink it?'
// // //                     );

// // //                     if (confirmUnlink) {
// // //                         const unlinkResponse = await fetch(
// // //                             `http://localhost:4001/unlink-template/${selectedForm.formId}`,
// // //                             { method: 'PUT' }
// // //                         );

// // //                         if (unlinkResponse.ok) {
// // //                             alert('Template unlinked from form.');

// // //                             const updatedCheckResponse = await fetch(
// // //                                 `http://localhost:4001/check-form-connected/${selectedForm.formId}`
// // //                             );
// // //                             const updatedCheckData = await updatedCheckResponse.json();

// // //                             if (!updatedCheckData.isConnected) {
// // //                                 console.log('Form is no longer connected to a template.');
// // //                             }
// // //                         } else {
// // //                             alert('Failed to unlink template.');
// // //                         }
// // //                     } else {
// // //                         return;
// // //                     }
// // //                 }

// // //                 setSelectedFormIds((prevFormIds) => {
// // //                     if (prevFormIds.includes(selectedForm.formId)) {
// // //                         return prevFormIds.filter((id) => id !== selectedForm.formId);
// // //                     } else {
// // //                         return [...prevFormIds, selectedForm.formId];
// // //                     }
// // //                 });

// // //                 setSelectedTitles((prevSelectedTitles) => {
// // //                     if (prevSelectedTitles.includes(title)) {
// // //                         return prevSelectedTitles.filter((t) => t !== title);
// // //                     } else {
// // //                         return [...prevSelectedTitles, title];
// // //                     }
// // //                 });
// // //             } catch (error) {
// // //                 console.error('Error checking or unlinking form connection:', error);
// // //                 alert('An error occurred while processing the form connection.');
// // //             }
// // //         }
// // //     };

// // //     useEffect(() => {
// // //         console.log('Selected form IDs:', selectedFormIds);
// // //     }, [selectedFormIds]);

// // //     const createOrUpdateForm = async () => {
// // //         const timestamp = format(new Date(), "yyyy-MM-dd HH:mm:ss a");
// // //         let trimmedTitle = formTitle.trim();
// // //         if (!trimmedTitle) {
// // //             alert('Please provide a title for the template.');
// // //             return;
// // //         }

// // //         if (!id) {
// // //             try {
// // //                 const response = await axios.get(`http://localhost:4001/check-title/${trimmedTitle}`);
// // //                 if (response.data.exists) {

// // //                     trimmedTitle = `${trimmedTitle}-${format(new Date(), "yyyyMMddHHmmss")}`;
// // //                 }
// // //             } catch (error) {
// // //                 console.error('Error checking title:', error);
// // //                 return;
// // //             }
// // //         }

// // //         const templateId = emailTemplateId || generateUniqueId();
// // //         setEmailTemplateId(templateId);

// // //         if (fields.length === 0) {
// // //             console.warn('No fields to create the form.');
// // //             return;
// // //         }

// // //         const validFields = fields.filter(field => field && field.type);

// // //         const updatedFields = validFields.map(field => {
// // //             let value = '';

// // //             switch (field.type) {
// // //                 case 'images':
// // //                     value = field.value || 'No Image Provided';
// // //                     break;
// // //                 case 'heading':
// // //                     value = field.value || '';
// // //                     field.editorContent = field.editorContent || editorValue || field.value || '';
// // //                     field.headingUrl = field.headingUrl || '';
// // //                     field.imageUrl = field.imageUrl || '';
// // //                     break;
// // //                 case 'description':
// // //                     value = field.value || '';
// // //                     break;
// // //                 case 'socalicon':
// // //                     value = field.icons || 'No Social Icons Provided';
// // //                     break;
// // //                 case 'divider':
// // //                     value = field.icons || 'No Social Icons Provided';
// // //                     break;
// // //                 case 'button':
// // //                     value = 'Button';
// // //                 case 'split':
// // //                     value = field.value || 'No Value Provided';
// // //                     field.splitbg = field.splitbg || '';
// // //                     field.width = field.width || '100%';
// // //                     field.splitPadding = field.splitPadding || 0
// // //                     break;
// // //                 case 'spacer':
// // //                     value = 'Spacer Field';
// // //                     field.spacerHeight = field.spacerHeight || 30;
// // //                     field.spacerbg = field.spacerbg || '#f0f0f0';
// // //                     break;
// // //                 case 'video':
// // //                     value = field.value;
// // //                     field.videoPadding = field.videoPadding || 20;
// // //                     field.videoBorderWidth = field.videoBorderWidth || 1;
// // //                     field.videoBorderStyle = field.videoBorderStyle || 'solid';
// // //                     field.videoBorderColor = field.videoBorderColor || '#000';
// // //                     break;
// // //                 case 'richtext':
// // //                     value = field.value;
// // //                     field.content = field.content || editorValueed || field.value || '';
// // //                     break;
// // //                 case 'Multicolumn':
// // //                     value = field.value;
// // //                     if (!field.columnData) {
// // //                         field.columnData = Array.from({ length: columnCount }, (_, i) => ({
// // //                             image: columnImages[`${field.id}-${i}`] || '',
// // //                             content: editorValues[`${field.id}-${i}`] || '',
// // //                         }));
// // //                     } else {

// // //                         for (let i = 0; i < columnCount; i++) {
// // //                             field.columnData[i] = {
// // //                                 image: columnImages[`${field.id}-${i}`] || field.columnData[i]?.image,
// // //                                 content: editorValues[`${field.id}-${i}`] || field.columnData[i]?.content,
// // //                             };
// // //                         }
// // //                     }
// // //                     field.columnCount = columnCount;
// // //                     break;
// // //                 case 'product':
// // //                     return {
// // //                         ...field,
// // //                         products: field.products || [],
// // //                         productsPerRow,
// // //                         viewMode,
// // //                         price: showPrice,
// // //                         buttonUrl: field.productUrl || `https://${shop}/admin/products?selectedView=all`,
// // //                         showbtnn: showbtnn

// // //                     };

// // //                 default:
// // //                     value = '';
// // //             }

// // //             if (field.type === 'html convert') {
// // //                 return {
// // //                     ...field,
// // //                     value: field.value || '',
// // //                 };
// // //             }

// // //             if (field.type === 'button') {
// // //                 field.buttonColor = btnbackgroundColor;
// // //                 field.label = buttonLabel;
// // //                 field.buttonFontSize = fontSize;
// // //                 field.buttonWidth = width;
// // //                 field.buttonHeight = height;
// // //                 field.buttonPadding = padding;
// // //             }

// // //             if (field.type === 'socalicon') {
// // //                 field.socalIconHeight = socalIconHeight;
// // //                 field.socalIconWidth = socalIconWidth;
// // //                 field.icons = {
// // //                     facebook: {
// // //                         url: selectedIcons.facebook?.url || field.icons.facebook.url,
// // //                         isHidden: selectedIcons.facebook?.isHidden || false,
// // //                         value: selectedIcons.facebook?.value || 'Facebook',
// // //                     },
// // //                     twitter: {
// // //                         url: selectedIcons.twitter?.url || field.icons.twitter.url,
// // //                         isHidden: selectedIcons.twitter?.isHidden || false,
// // //                         value: selectedIcons.twitter?.value || 'Twitter',
// // //                     },
// // //                     instagram: {
// // //                         url: selectedIcons.instagram?.url || field.icons.instagram.url,
// // //                         isHidden: selectedIcons.instagram?.isHidden || false,
// // //                         value: selectedIcons.instagram?.value || 'Instagram',
// // //                     },
// // //                     send: {
// // //                         url: selectedIcons.send?.url || '',
// // //                         isHidden: selectedIcons.send?.isHidden || false,
// // //                         value: selectedIcons.send?.value || 'Send',
// // //                     },
// // //                 };

// // //                 field.customIcons = field.customIcons || [];
// // //             } else {
// // //                 field.icons = {};
// // //             }

// // //             return {
// // //                 ...field,
// // //                 label: field.label || (field.type === 'button' ? 'Button' : `Default Label for ${field.type}`),
// // //                 name: field.name || `Field_${field.id}`,
// // //                 value: field.type === 'product' ? undefined : value,
// // //                 headerbtnbg: field.headerbtnbg || null,
// // //                 headerbtncolor: field.headerbtncolor || null,
// // //                 headerbtn: field.headerbtn || null,
// // //                 headingLevel: field.headingLevel || null,
// // //                 headingbtnPadding: field.headingbtnPadding || 10,
// // //                 headingbtnradious: field.headingbtnradious || 4,
// // //                 headingbtnwidth: field.headingbtnwidth || 100,
// // //                 headingbtnFontSize: field.headingbtnFontSize || 16,
// // //                 headingbtnheight: field.headingbtnheight || 40,
// // //                 headingbtnBorderWidth: field.headingbtnBorderWidth || 1,
// // //                 headingbtnBorderStyle: field.headingbtnBorderStyle || 'solid',
// // //                 headingbtnBorderColor: field.headingbtnBorderColor || '#000',
// // //                 bannerImageWidth: field.bannerImageWidth || '100',
// // //                 bannerImageHeight: field.bannerImageHeight || '',
// // //                 bannerImageTextAlign: field.bannerImageTextAlign || '',
// // //                 headingFontWeight: field.headingFontWeight || 600,
// // //                 headingColor: field.headingColor || '#000',
// // //                 headingbg: field.headingbg || '#ffff',
// // //                 headingPadding: field.headingPadding || 0,
// // //                 headingbgImage: field.headingbgImage || '',
// // //                 headingLetterSpacing: field.headingLetterSpacing || 0,
// // //                 headingTextAlign: field.headingTextAlign || '',
// // //                 headingBorderWidth: field.headingBorderWidth || 1,
// // //                 headingBorderStyle: field.headingBorderStyle || 'solid',
// // //                 headingBorderColor: field.headingBorderColor || '#000',
// // //                 headingFontSize: field.type === 'heading' ? (field.headingFontSize || "16") : undefined,
// // //                 descritionFontWeight: field.descritionFontWeight || 600,
// // //                 descritionFontSize: field.descritionFontSize || 16,
// // //                 descritionColor: field.descritionColor || '#000',
// // //                 descriptionbg: field.descriptionbg || '#ffff',
// // //                 descriptionPadding: field.descriptionPadding || 10,
// // //                 descriptionLetterSpacing: field.descriptionLetterSpacing || 0,
// // //                 descriptionTextAlign: field.descriptionTextAlign || '',
// // //                 descriptionBorderWidth: field.descriptionBorderWidth || 1,
// // //                 descriptionBorderStyle: field.descriptionBorderStyle || 'solid',
// // //                 descriptionBorderColor: field.descriptionBorderColor || '#000',
// // //                 dividerColor: field.dividerColor || '#000',
// // //                 dividerWidth: field.dividerWidth || '100',
// // //                 dividerheight: field.dividerheight || '1',
// // //                 buttonColor: field.buttonColor || '#007BFF',
// // //                 buttonFontSize: field.buttonFontSize || 16,
// // //                 buttonTextColor: field.buttonTextColor || '#fff',
// // //                 buttonLetterSpacing: field.buttonLetterSpacing || 0,
// // //                 buttonUrll: field.buttonUrll || '',
// // //                 buttonBorderWidth: field.buttonBorderWidth || 1,
// // //                 buttonBorderStyle: field.buttonBorderStyle || 'solid',
// // //                 buttonBorderColor: field.buttonBorderColor || '#000',
// // //                 buttonWidth: field.buttonWidth || 150,
// // //                 buttonHeight: field.buttonHeight || 40,
// // //                 buttonradious: field.buttonradious || 40,
// // //                 buttonPadding: field.buttonPadding || 10,
// // //                 socalIconHeight: field.socalIconHeight || 30,
// // //                 socalIconWidth: field.socalIconWidth || 30,
// // //                 socalIconPadding: field.socalIconPadding || 10,
// // //                 socaliconTextAlign: field.socaliconTextAlign || '',
// // //                 htmlFontSize: field.htmlFontSize || 16,
// // //                 htmlPadding: field.htmlPadding || 10,
// // //                 htmlColor: field.htmlColor || '#000',
// // //                 splitbg: field.splitbg || '',
// // //                 width: field.width || '100%',
// // //                 spacerHeight: field.spacerHeight || 20,
// // //                 spacerbg: field.spacerbg || '#fff',
// // //                 videoPadding: field.videoPadding || 20,
// // //                 splitPadding: field.splitPadding || 0,
// // //                 videoBorderWidth: field.videoBorderWidth || 1,
// // //                 videoBorderStyle: field.videoBorderStyle || 'solid',
// // //                 videoBorderColor: field.videoBorderColor || '#000',
// // //                 imgWidth: field.imgWidth || '100',
// // //                 imgTextAlign: field.imgTextAlign || '',
// // //                 imgPadding: field.imgPadding || 10,
// // //                 imgbg: field.imgbg || '#ffff',
// // //                 imgBorderWidth: field.imgBorderWidth || 0,
// // //                 imgBorderStyle: field.imgBorderStyle || 'solid',
// // //                 imgBorderColor: field.imgBorderColor || '#000',
// // //                 productPadding: field.productPadding || 10,
// // //                 productbg: field.productbg || '#ffff',
// // //                 productBorderWidth: field.productBorderWidth || 0,
// // //                 productBorderStyle: field.productBorderStyle || 'solid',
// // //                 productBorderColor: field.productBorderColor || '#000',
// // //                 productFontSize: field.productFontSize || 16,
// // //                 productColor: field.productColor || '#000',
// // //                 productWeight: field.productWeight || 600,
// // //                 productLetterSpacing: field.productLetterSpacing || 0,
// // //                 productbtnBorderColor: field.productbtnBorderColor || '#000',
// // //                 productbtnBorderWidth: field.productbtnBorderWidth || 16,
// // //                 productbtnBorderStyle: field.productbtnBorderStyle || '#000',
// // //                 productbtnbg: field.productbtnbg || 600,
// // //                 productradious: field.productradious || 0,
// // //                 productLabel: field.productLabel || 'Shop Now',
// // //                 productfontSize: field.productfontSize || '12',
// // //                 productwidth: field.productwidth || 80,
// // //                 productheight: field.productheight || 30,
// // //                 productbackgroundColor: field.productbackgroundColor || '#007BFF',

// // //             };
// // //         });

// // //         console.log('Updated fields:', updatedFields);

// // //         const formData = {
// // //             templateId,
// // //             shop,
// // //             form_ids: selectedFormIds.map(id => String(id)),
// // //             title: trimmedTitle,
// // //             fields: updatedFields,
// // //             createdAt: timestamp,
// // //             styles: {
// // //                 backgroundImage,
// // //                 backgroundColor,
// // //                 borderRadious,
// // //                 templatePadding,
// // //                 textAlign,
// // //                 fontFamily,
// // //                 width: viewMode === 'desktop' ? '800px' : '400px',
// // //                 dividerColor,
// // //             },
// // //         };

// // //         try {
// // //             const response = id
// // //                 ? await axios.put(`http://localhost:4001/update/${id}`, formData)
// // //                 : await axios.post('http://localhost:4001/send/api', formData);
// // //             console.log('Form saved successfully with title:', trimmedTitle);
// // //             const successMessage = id ? 'Form updated successfully' : 'Form created successfully';
// // //             console.log(successMessage, response.data);
// // //             navigate('/app/emailTemplate/list')

// // //             if (!id) {
// // //                 resetFormState();
// // //             }

// // //             setExistingTitles(prevTitles => [...prevTitles, trimmedTitle]);
// // //         } catch (error) {
// // //             console.error('Error saving form:', error);
// // //             if (error.response) {
// // //                 console.error('Response data:', error.response.data);
// // //             }
// // //         }
// // //     };

// // //     const resetFormState = () => {
// // //         setFields([]);
// // //         setEmailTemplateId(null);
// // //         setHeadingText('');
// // //         setBackgroundImage(null);
// // //         setTemplatePadding('20')
// // //         setBackgroundColor('#ffffff');
// // //         setTextAlign('left');
// // //         setBorderRadious(5)
// // //         setId(null);
// // //     };

// // //     const handleBackgroundImageUpload = (e) => {
// // //         const file = e.target.files[0];
// // //         if (file) {
// // //             const reader = new FileReader();
// // //             reader.onloadend = () => {
// // //                 setBackgroundImage(reader.result);
// // //             };
// // //             reader.readAsDataURL(file);
// // //         }
// // //     };

// // //     useEffect(() => {
// // //         const formBuilder = formBuilderRef.current;
// // //         if (!formBuilder) return;

// // //         const sortable = Sortable.create(formBuilder, {
// // //             animation: 150,
// // //             ghostClass: 'dragging',
// // //             onEnd: (evt) => {
// // //                 const newFields = [...fields];
// // //                 const movedField = newFields.splice(evt.oldIndex, 1)[0];
// // //                 newFields.splice(evt.newIndex, 0, movedField);
// // //                 setFields(newFields);
// // //             },
// // //         });

// // //         return () => {
// // //             sortable.destroy();
// // //         };
// // //     }, [fields]);

// // //     const toggleViewMode = (mode) => {
// // //         setViewMode(mode);
// // //         setEmailWidth(mode === 'desktop' ? '800px' : '400px');
// // //         if (mode === 'mobile') {
// // //             setProductsPerRow(1);
// // //         } else {
// // //             setProductsPerRow(3);
// // //         }
// // //     };

// // //     const toggleColorPicker = () => {
// // //         setShowColorPicker(!showColorPicker);
// // //     };

// // //     const togglebtn = () => {
// // //         setShowBtn(!showbtn);
// // //     };

// // //     const toggleFields = () => {
// // //         setShowFields(true);
// // //         setDropdownVisible(false);
// // //     };

// // //     const toggleSettings = () => {
// // //         setShowFields(false);
// // //     };

// // //     const renderField = (field) => {
// // //         if (!field) return null;

// // //         switch (field.type) {
// // //             case 'html convert':
// // //                 return (
// // //                     <div>
// // //                         <textarea
// // //                             value={field.value}
// // //                             onChange={(e) =>
// // //                                 setFields((prevFields) =>
// // //                                     prevFields.map((f) => (f.id === field.id ? { ...f, value: e.target.value } : f))
// // //                                 )
// // //                             }
// // //                             rows="5"
// // //                             cols="50"
// // //                         />
// // //                     </div>
// // //                 );

// // //             default:
// // //                 return;
// // //         }
// // //     };


// // //     useEffect(() => {
// // //         const handleClickOutside = (event) => {
// // //             if (popupRef.current && !popupRef.current.contains(event.target)) {
// // //                 setEmailFieldPopup(false);
// // //             }
// // //         };

// // //         document.addEventListener('mousedown', handleClickOutside);

// // //         return () => {
// // //             document.removeEventListener('mousedown', handleClickOutside);
// // //         };
// // //     }, []);

// // //     useEffect(() => {
// // //         const handleClickOutside = (event) => {
// // //             if (emailFieldRef.current && !emailFieldRef.current.contains(event.target)) {
// // //                 setActiveFieldId(null);
// // //             }
// // //         };

// // //         document.addEventListener('mousedown', handleClickOutside);

// // //         return () => {
// // //             document.removeEventListener('mousedown', handleClickOutside);
// // //         };
// // //     }, []);

// // //     const handleWidthChange = (newWidth) => {
// // //         setFields((prevFields) => {
// // //             const selectedIndex = prevFields.findIndex((f) => f.id === selectedFieldId);

// // //             if (selectedIndex !== -1 && selectedIndex % 2 === 0) {
// // //                 return prevFields.map((f, index) => {
// // //                     if (index === selectedIndex) {
// // //                         return { ...f, width: newWidth };
// // //                     }
// // //                     if (index === selectedIndex + 1) {
// // //                         return { ...f, width: `${100 - parseInt(newWidth)}%` };
// // //                     }
// // //                     return f;
// // //                 });
// // //             } else if (selectedIndex !== -1) {
// // //                 return prevFields.map((f, index) => {
// // //                     if (index === selectedIndex) {
// // //                         return { ...f, width: newWidth };
// // //                     }
// // //                     if (index === selectedIndex - 1) {
// // //                         return { ...f, width: `${100 - parseInt(newWidth)}%` };
// // //                     }
// // //                     return f;
// // //                 });
// // //             }
// // //             return prevFields;
// // //         });
// // //     };

// // //     const handleVideoChange = (e, id) => {
// // //         const updatedFields = fields.map(field => {
// // //             if (field.id === id && field.type === 'video') {
// // //                 return { ...field, value: e.target.value };
// // //             }
// // //             return field;
// // //         });
// // //         setFields(updatedFields);
// // //     };

// // //     const getVideoEmbedUrl = (url) => {
// // //         const videoId = url.split('v=')[1]?.split('&')[0];
// // //         if (videoId) {
// // //             return `https://www.youtube.com/embed/${videoId}?autohide=1&showinfo=0&controls=0`;
// // //         }
// // //         return null;
// // //     };

// // //     const handleProductClick = (product, isChecked) => {
// // //         setSelectedProducts((prevSelectedProducts) => {
// // //             if (isChecked) {

// // //                 return [...prevSelectedProducts, product];
// // //             } else {
// // //                 return prevSelectedProducts.filter((p) => p.id !== product.id);
// // //             }
// // //         });

// // //         setFields((prevFields) => {
// // //             return prevFields.map((field) => {
// // //                 if (field.id === lastProductFieldId && field.type === 'product') {
// // //                     return {
// // //                         ...field,
// // //                         products: isChecked
// // //                             ? [...(field.products || []), product]
// // //                             : (field.products || []).filter((p) => p.id !== product.id)
// // //                     };
// // //                 }
// // //                 return field;
// // //             });
// // //         });

// // //         setIsPopupOpen(true);
// // //     };

// // //     const handleRemoveProductFromForm = (index) => {
// // //         const productToRemove = productTitles?.[index];

// // //         if (!productToRemove) return;

// // //         setProductTitles((prevTitles) =>
// // //             Array.isArray(prevTitles) ? prevTitles.filter((title, i) => i !== index) : prevTitles
// // //         );

// // //         setSelectedProducts((prevSelectedProducts) =>
// // //             Array.isArray(prevSelectedProducts)
// // //                 ? prevSelectedProducts.filter((product) => product.title !== productToRemove)
// // //                 : prevSelectedProducts
// // //         );

// // //         setFields((prevFields) =>
// // //             Array.isArray(prevFields)
// // //                 ? prevFields.map((field) =>
// // //                     field.type === 'product'
// // //                         ? { ...field, products: field.products.filter((product) => product.title !== productToRemove) }
// // //                         : field
// // //                 )
// // //                 : prevFields
// // //         );
// // //     };

// // //     const handleClosePopup = () => {
// // //         setIsPopupOpen(false);
// // //         setSelectedProduct(null);
// // //     };

// // //     const togglePrice = () => {
// // //         setShowPrice(!showPrice);
// // //     };

// // //     const togglebtnn = () => {
// // //         setShowbtnn(!showbtnn);
// // //     };

// // //     const AddProduct = () => {
// // //         setIsPopupOpen(true);
// // //     }

// // //     useEffect(() => {
// // //         console.log('isPopupOpen:', isPopupOpen);
// // //         console.log('selectedProduct:', selectedProduct);
// // //     }, [isPopupOpen, selectedProduct]);


// // //     const handleAddProductToSelected = (fieldId, fieldTitle, fieldImage, products) => {
// // //         console.log("Field ID:", fieldId);
// // //         console.log("Field Title:", fieldTitle);
// // //         console.log("Products:", products);
// // //         console.log("Image:", fieldImage);
// // //         setLastProductFieldId(fieldId);
// // //         setPopupFieldTitle(fieldTitle);

// // //         const productTitles = products.map(product => product.title);
// // //         console.log("Product Titles:", productTitles);

// // //         setProductTitles(productTitles);

// // //         const productImages = products.map(product => product.images.length > 0 ? product.images[0].src : null);
// // //         console.log("Product images:", productImages);
// // //         setProductImage(productImages);
// // //     };

// // //     const handleProductsPerRowChange = (e) => {
// // //         setProductsPerRow(parseInt(e.target.value, 6));
// // //     };


// // //     const totalPages = Math.ceil(products.length / formsPerPage);

// // //     const handlePageChange = (page) => {
// // //         if (page < 1 || page > totalPages) return;
// // //         setCurrentPage(page);
// // //     };

// // //     const currentProducts = products.slice(
// // //         (currentPage - 1) * formsPerPage,
// // //         currentPage * formsPerPage
// // //     );

// // //     const generatePageNumbers = () => {
// // //         const visiblePages = [];

// // //         if (totalPages <= 5) {
// // //             for (let i = 1; i <= totalPages; i++) {
// // //                 visiblePages.push(i);
// // //             }
// // //         } else {

// // //             if (currentPage <= 3) {
// // //                 visiblePages.push(1, 2, 3, 4, '...', totalPages);
// // //             }

// // //             else if (currentPage >= totalPages - 2) {
// // //                 visiblePages.push(1, '...', totalPages - 3, totalPages - 2, totalPages - 1, totalPages);
// // //             }

// // //             else {
// // //                 visiblePages.push(1, '...', currentPage - 1, currentPage, currentPage + 1, '...', totalPages);
// // //             }
// // //         }

// // //         return visiblePages;
// // //     };


// // //     const handleRemoveBackgroundImage = () => {
// // //         setBackgroundImage('');
// // //     };

// // //     const RemoveImage = (fieldId) => {
// // //         console.log(`Removing image for field with ID: ${fieldId}`);
// // //         setFields((prevFields) =>
// // //             prevFields.map((field) =>
// // //                 field.id === fieldId
// // //                     ? { ...field, imageUrl: null }
// // //                     : field
// // //             )
// // //         );
// // //     };

// // //     const handleFileChange = (e, fieldId) => {
// // //         const file = e.target.files[0];
// // //         if (file) {
// // //             const reader = new FileReader();
// // //             reader.onloadend = () => {
// // //                 setFields(prevFields =>
// // //                     prevFields.map(f =>
// // //                         f.id === fieldId ? { ...f, headingbgImage: reader.result } : f
// // //                     )
// // //                 );
// // //             };
// // //             reader.readAsDataURL(file);
// // //         }
// // //     };

// // //     const handleFieldClick = (fieldId) => {
// // //         setSelectedFieldId(fieldId);
// // //         setEmailFieldPopup(true);
// // //         setActiveFieldId(fieldId);
// // //         const selectedField = fields.find((field) => field.id === fieldId);
// // //         if (selectedField && selectedField.type === 'Multicolumn') {
// // //             setIsPopupVisible(true);
// // //             setColumnCount(selectedField.columnCount);
// // //         }
// // //     };

// // //     const handleColumnClick = (fieldId, columnIndex) => {
// // //         setPopupFieldId(fieldId);

// // //         setFields((prevFields) =>
// // //             prevFields.map((field) =>
// // //                 field.id === fieldId
// // //                     ? { ...field, selectedColumn: columnIndex }
// // //                     : field
// // //             )
// // //         );
// // //     };

// // //     const handleColumnSelection = (columnSelection) => {
// // //         const newColumnCount = Number(columnSelection);
// // //         setColumnCount(newColumnCount);
// // //         setFields((prevFields) =>
// // //             prevFields.map((field) =>
// // //                 field.id === popupFieldId
// // //                     ? { ...field, columnCount: newColumnCount }
// // //                     : field
// // //             )
// // //         );
// // //     };

// // //     const handleImageUploaded = (e, fieldId, columnIndex) => {
// // //         const file = e.target.files[0];
// // //         const reader = new FileReader();
// // //         reader.onloadend = () => {
// // //             setColumnImages((prevImages) => ({
// // //                 ...prevImages,
// // //                 [`${fieldId}-${columnIndex}`]: reader.result,
// // //             }));
// // //         };
// // //         if (file) reader.readAsDataURL(file);
// // //     };

// // //     const handleRemoveImage = (fieldId, columnIndex) => {
// // //         setColumnImages((prevImages) => {
// // //             const updatedImages = { ...prevImages };
// // //             delete updatedImages[`${fieldId}-${columnIndex}`];
// // //             return updatedImages;
// // //         });
// // //     };

// // //     const handleEditorChangeed = (value, fieldId, columnIndex) => {
// // //         setEditorValues((prevValues) => ({
// // //             ...prevValues,
// // //             [`${fieldId}-${columnIndex}`]: value,
// // //         }));
// // //     };

// // //     const handleEditorChangeee = (value) => {
// // //         setEditorValueed(value);
// // //     };

// // //     const handleSave = () => {
// // //         const updatedFields = fields.map((field) =>
// // //             field.id === currentFieldId ? { ...field, content: editorValueed } : field
// // //         );
// // //         setFields(updatedFields);
// // //         setPopupVisibleed(false);
// // //     };

// // //     const handleRemoveImage1 = (popupFieldId, selectedColumn) => {
// // //         setFields((prevFields) => {
// // //             const updatedFields = prevFields.map((field) => {
// // //                 if (field.id === popupFieldId) {
// // //                     const updatedColumnData = [...field.columnData];
// // //                     updatedColumnData[selectedColumn].image = null;
// // //                     return { ...field, columnData: updatedColumnData };
// // //                 }
// // //                 return field;
// // //             });
// // //             return updatedFields;
// // //         });
// // //     };

// // //     const handleImageUpload1 = (e, popupFieldId, selectedColumn) => {
// // //         const file = e.target.files[0];
// // //         if (file) {
// // //             const imageUrl = URL.createObjectURL(file);

// // //             setFields((prevFields) => {
// // //                 const updatedFields = prevFields.map((field) => {
// // //                     if (field.id === popupFieldId) {
// // //                         const updatedColumnData = [...field.columnData];
// // //                         updatedColumnData[selectedColumn].image = imageUrl;
// // //                         return { ...field, columnData: updatedColumnData };
// // //                     }
// // //                     return field;
// // //                 });
// // //                 return updatedFields;
// // //             });
// // //         }
// // //     };

// // //     const handleContentChange = (value, popupFieldId, selectedColumn) => {
// // //         setFields((prevFields) => {
// // //             const updatedFields = prevFields.map((field) => {
// // //                 if (field.id === popupFieldId) {
// // //                     const updatedColumnData = [...field.columnData];
// // //                     updatedColumnData[selectedColumn].content = value;
// // //                     return { ...field, columnData: updatedColumnData };
// // //                 }
// // //                 return field;
// // //             });
// // //             return updatedFields;
// // //         });
// // //     };

// // //     const handleEditChange = (value) => {
// // //         console.log("Editor value changed:", value);
// // //         console.log("Active field ID:", activeFieldId);
// // //         setEditorValueed(value);

// // //         setFields((prevFields) => {
// // //             const updatedFields = prevFields.map((field) =>
// // //                 field.id === activeFieldId
// // //                     ? { ...field, content: value }
// // //                     : field
// // //             );
// // //             console.log("Updated fields after editor change:", updatedFields);
// // //             return updatedFields;
// // //         });
// // //     };

// // //     return (
// // //         <div>
// // //             <div className='email-campaing-templates'>
// // //                 <div className="builder-container">
// // //                     <h3>Email campaign</h3>

// // //                     <div className='builder_form_name'>
// // //                         <div className='email-template-heading'>
// // //                             <input
// // //                                 type="text"
// // //                                 value={formTitle}
// // //                                 onChange={(e) => setFormTitle(e.target.value)}
// // //                                 placeholder="Enter Name"
// // //                             />
// // //                         </div>
// // //                         <div className='template-select-forms'>
// // //                             <select onChange={handleFormSelect}>
// // //                                 <option value="">Select a form</option>
// // //                                 {formDataAdd.map((form) => (
// // //                                     <option
// // //                                         key={form.id}
// // //                                         value={form.title}
// // //                                         style={{
// // //                                             color: selectedFormIds.includes(form.formId) ? '#45A7F6' : 'black',
// // //                                         }}
// // //                                     >
// // //                                         {form.title}
// // //                                     </option>
// // //                                 ))}
// // //                             </select>
// // //                         </div>
// // //                     </div>

// // //                     <div className='builder-forms_rapp'>
// // //                         <div className="builder-wrp">
// // //                             <div className="controls-main-wrp email-tempalte">
// // //                                 <div className="controls-wrp">
// // //                                     {showField && (<div className="controls">
// // //                                         <div className='builder-form-element'>
// // //                                             <div className='buil_form_texttt'>
// // //                                                 <div className='buil_form_texttt_p'>
// // //                                                     <h2> Elements</h2>
// // //                                                 </div>
// // //                                             </div>
// // //                                         </div>
// // //                                         <div className='builder_fieldes'>
// // //                                             <div className='builder_form_select_control'>
// // //                                                 <div
// // //                                                     className={`builder_form_fields ${showFields ? 'active' : ''}`}
// // //                                                     onClick={toggleFields}
// // //                                                 >
// // //                                                     <h2>Fields</h2>
// // //                                                 </div>
// // //                                                 <div
// // //                                                     className={`builder_form_setting ${!showFields ? 'active' : ''}`}
// // //                                                     onClick={toggleSettings}
// // //                                                 >
// // //                                                     <h2>Settings</h2>
// // //                                                 </div>

// // //                                             </div>
// // //                                             {showFields ? (
// // //                                                 <div>
// // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('heading')}><span className='form_builder_field_img'><img src={banner} alt="" /></span> <span><h4>Banner</h4></span></button></div>
// // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('richtext')}><span className='form_builder_field_img'><img src={rich} alt="" /></span> <span><h4>Rich Text</h4></span></button></div>
// // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('description')}><span className='form_builder_field_img'><img src={font} alt="" /></span> <span><h4>Description</h4></span></button></div>
// // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('button')}><span className='form_builder_field_img'><img src={btn} alt="" /></span> <span><h4>Button</h4></span></button></div>
// // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('divider')}><span className='form_builder_field_img'><img src={divider2} alt="" /></span> <span><h4>Divider</h4></span></button></div>
// // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('split')}><span className='form_builder_field_img'><img src={itext} alt="" /></span> <span><h4>Images with Text</h4></span></button></div>
// // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('images')}><span className='form_builder_field_img'><img src={image} alt="" /></span> <span><h4>Images</h4></span></button></div>
// // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('socalicon')}><span className='form_builder_field_img'><img src={socail} alt="" /></span> <span><h4>Social Icon</h4></span></button></div>
// // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('html convert')}><span className='form_builder_field_img'><img src={htmlicon} alt="" /></span> <span><h4>HTML Block</h4></span></button></div>
// // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('spacer')}><span className='form_builder_field_img'><img src={spacer} alt="" /></span> <span><h4>Spacer</h4></span></button></div>
// // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('Multicolumn')}><span className='form_builder_field_img'><img src={multimedia} /></span><span><h4>Multicolumn</h4></span></button></div>
// // //                                                     {/* <div className='builderr_field_wrpp'> <button onClick={() => addInputField('video')}><span className='form_builder_field_img'><img src={image} alt="" /></span> <span><h4>video</h4></span></button></div> */}
// // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('product')}><span className='form_builder_field_img'><img src={product} alt="" /></span> <span><h4>Product</h4></span></button></div></div>

// // //                                             ) : (
// // //                                                 <div>
// // //                                                     <div className='edit_form_close'>
// // //                                                         <div className='edit-formwrap'>
// // //                                                             <h3>Edit Properties</h3>
// // //                                                             <div className="builder_field_wrpp">
// // //                                                                 <div className='edit-form-options'>
// // //                                                                     <div className="edit_setting_bg">
// // //                                                                         <label htmlFor="font-family-selector">Font-Family</label>
// // //                                                                         <select
// // //                                                                             id="font-family-selector"
// // //                                                                             value={fontFamily}
// // //                                                                             onChange={handleFontChange}
// // //                                                                             style={{ marginLeft: '10px', padding: '5px' }}
// // //                                                                         >
// // //                                                                             <option value="Arial">Arial</option>
// // //                                                                             <option value="Verdana">Verdana</option>
// // //                                                                             <option value="Times New Roman">Times New Roman</option>
// // //                                                                             <option value="Georgia">Georgia</option>
// // //                                                                             <option value="Courier New">Courier New</option>
// // //                                                                             <option value="Roboto">Roboto</option>
// // //                                                                         </select>
// // //                                                                     </div>
// // //                                                                     <div className='edit_setting_bg bgcolor'>
// // //                                                                         <label>
// // //                                                                             Background Color:
// // //                                                                         </label>
// // //                                                                         <div
// // //                                                                             style={{
// // //                                                                                 height: "50px",
// // //                                                                                 width: "50px",
// // //                                                                                 borderRadius: "50%",
// // //                                                                                 backgroundColor: backgroundColor,
// // //                                                                                 border: "1px solid #ccc",
// // //                                                                                 cursor: "pointer",
// // //                                                                             }}
// // //                                                                             onClick={() => document.getElementById('colorInput').click()}
// // //                                                                         >
// // //                                                                         </div>
// // //                                                                         <input
// // //                                                                             id="colorInput"
// // //                                                                             type="color"
// // //                                                                             style={{
// // //                                                                                 display: "none"
// // //                                                                             }}
// // //                                                                             value={backgroundColor}
// // //                                                                             onChange={(e) => setBackgroundColor(e.target.value)}
// // //                                                                         />
// // //                                                                     </div>
// // //                                                                     <div className='edit_setting_bg'>
// // //                                                                         <label>Border-Radious:</label>
// // //                                                                         <input
// // //                                                                             type="text"
// // //                                                                             id="Border-radious"
// // //                                                                             value={borderRadious}
// // //                                                                             onChange={(e) => setBorderRadious(e.target.value)}
// // //                                                                         />
// // //                                                                     </div>

// // //                                                                     <div className='edit_setting_bg'>
// // //                                                                         <label>Padding:</label>
// // //                                                                         <input
// // //                                                                             type="text"
// // //                                                                             id="Padding"
// // //                                                                             value={templatePadding}
// // //                                                                             onChange={(e) => setTemplatePadding(e.target.value)}
// // //                                                                         />
// // //                                                                     </div>

// // //                                                                     <div className='edit_setting_bg'>
// // //                                                                         <label htmlFor="textAlign">Text Alignment:</label>
// // //                                                                         <select
// // //                                                                             id="textAlign"
// // //                                                                             value={textAlign}
// // //                                                                             onChange={(e) => setTextAlign(e.target.value)}
// // //                                                                         >
// // //                                                                             <option value="left">Left</option>
// // //                                                                             <option value="center">Center</option>
// // //                                                                             <option value="right">Right</option>
// // //                                                                         </select>
// // //                                                                     </div>

// // //                                                                     <div className='edit_setting_bg'>
// // //                                                                         <label htmlFor="backgroundImage">Background Image:</label>
// // //                                                                         <input
// // //                                                                             type="file"
// // //                                                                             accept="image/*"
// // //                                                                             onChange={handleBackgroundImageUpload}
// // //                                                                         />
// // //                                                                         {backgroundImage && (
// // //                                                                             <button
// // //                                                                                 type="button"
// // //                                                                                 onClick={handleRemoveBackgroundImage}
// // //                                                                                 style={{
// // //                                                                                     margin: '10px 0',
// // //                                                                                     padding: '5px 10px',
// // //                                                                                     cursor: 'pointer',
// // //                                                                                     background: 'white',
// // //                                                                                     color: 'black',
// // //                                                                                     border: 'none',
// // //                                                                                     borderRadius: '5px',
// // //                                                                                     border: '1px solid rgb(221, 221, 221)'
// // //                                                                                 }}
// // //                                                                             >

// // //                                                                                 Remove Background
// // //                                                                             </button>
// // //                                                                         )}
// // //                                                                         {backgroundImage && (
// // //                                                                             <div
// // //                                                                                 className="edit_setting_bg"
// // //                                                                                 style={{
// // //                                                                                     backgroundImage: backgroundImage ? `url(${backgroundImage})` : 'none',
// // //                                                                                     backgroundRepeat: 'no-repeat',
// // //                                                                                     backgroundSize: 'contain',
// // //                                                                                     backgroundPosition: 'center',
// // //                                                                                     height: '200px',
// // //                                                                                     width: '100%',
// // //                                                                                     border: '1px solid #ddd',
// // //                                                                                 }}
// // //                                                                             >

// // //                                                                             </div>
// // //                                                                         )}
// // //                                                                     </div>
// // //                                                                 </div>
// // //                                                             </div>
// // //                                                         </div>
// // //                                                     </div>
// // //                                                 </div>
// // //                                             )}

// // //                                         </div>
// // //                                     </div>
// // //                                     )}
// // //                                 </div>

// // //                                 <div className='form_builder_build'>
// // //                                     <div id='bg_change' className="form-builder-wrp email-temp" >
// // //                                         <div className='btn-email-templates'>
// // //                                             <button className={`btn-templates ${(viewMode === 'desktop' || emailWidth === '800px') && emailWidth !== '400px' ? 'active' : ''}`} onClick={() => toggleViewMode('desktop')}>
// // //                                                 <img src={desk} alt="Desktop" /> Desktop
// // //                                             </button>
// // //                                             <button className={`btn-templates ${(viewMode === 'mobile' || emailWidth === '400px') && emailWidth !== '800px' ? 'active' : ''}`} onClick={() => toggleViewMode('mobile')}>
// // //                                                 <img src={phonem} alt="Mobile" /> Mobile
// // //                                             </button>
// // //                                         </div>

// // //                                         <div
// // //                                             className="form-builder email-template"
// // //                                             ref={formBuilderRef}
// // //                                             style={{
// // //                                                 backgroundColor,
// // //                                                 width: emailWidth,
// // //                                                 textAlign,
// // //                                                 padding: `${templatePadding}px`,
// // //                                                 borderRadius: `${borderRadious}px`,
// // //                                                 backgroundImage: backgroundImage ? `url(${backgroundImage})` : 'none',
// // //                                                 backgroundSize: 'cover',
// // //                                                 backgroundPosition: 'center',
// // //                                                 margin: 'auto',
// // //                                                 fontFamily
// // //                                             }}
// // //                                         >
// // //                                             {fields.length === 0 ? (
// // //                                                 <div>

// // //                                                     <div className="builder-block-img-forms">
// // //                                                         <div className='builder_block_blank'>
// // //                                                             <img src={emailtemp} alt="Email Template" />
// // //                                                             <div className='builder-block-img-forms-paragraph'>
// // //                                                                 <p>Let's create the Email.</p>
// // //                                                             </div>
// // //                                                         </div>
// // //                                                     </div>
// // //                                                 </div>
// // //                                             ) : (
// // //                                                 <>
// // //                                                     {fields
// // //                                                         .filter((field) => field && field.id && field.type)
// // //                                                         .map((field) => {
// // //                                                             console.log('Rendering field:', field);
// // //                                                             if (field.type === 'heading') {
// // //                                                                 const HeadingTag = field.headingLevel || 'h1';

// // //                                                                 return (
// // //                                                                     <div
// // //                                                                         key={field.id}
// // //                                                                         onClick={() => handleFieldClick(field.id)}
// // //                                                                         className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
// // //                                                                     >
// // //                                                                         <div className='email-input-field'
// // //                                                                             style={{
// // //                                                                                 fontWeight: field.headingFontWeight,
// // //                                                                                 backgroundColor: field.headingbg,
// // //                                                                                 borderWidth: `${field.headingBorderWidth}px`,
// // //                                                                                 borderStyle: field.headingBorderStyle,
// // //                                                                                 borderColor: field.headingBorderColor,
// // //                                                                                 backgroundImage: field.headingbgImage ? `url(${field.headingbgImage})` : 'none',
// // //                                                                                 backgroundRepeat: 'no-repeat',
// // //                                                                                 backgroundSize: 'cover',

// // //                                                                             }}
// // //                                                                         >
// // //                                                                             {React.createElement(HeadingTag, {
// // //                                                                                 style: {
// // //                                                                                     fontSize: `${field.headingFontSize}px`,
// // //                                                                                     color: field.headingColor,
// // //                                                                                     padding: `${field.headingPadding}px`,
// // //                                                                                     letterSpacing: `${field.headingLetterSpacing}px`,
// // //                                                                                     textAlign: field.headingTextAlign || '',
// // //                                                                                 }
// // //                                                                             }, field.headingText || field.value)}
// // //                                                                             {field.imageUrl && (
// // //                                                                                 <div className="heading-image" style={{ textAlign: field.bannerImageTextAlign || '' }} >
// // //                                                                                     <img
// // //                                                                                         src={field.imageUrl}
// // //                                                                                         alt="Heading Image"
// // //                                                                                         style={{
// // //                                                                                             width: `${field.bannerImageWidth}%`,
// // //                                                                                             height: field.bannerImageHeight || 'auto',
// // //                                                                                         }}
// // //                                                                                     />
// // //                                                                                 </div>
// // //                                                                             )}
// // //                                                                             {(field.editorContent || editorValue) && (
// // //                                                                                 <div
// // //                                                                                     className="heading-editor-content"
// // //                                                                                     dangerouslySetInnerHTML={{
// // //                                                                                         __html: field.editorContent || editorValue
// // //                                                                                     }}
// // //                                                                                 />
// // //                                                                             )}
// // //                                                                             {field.headingUrl && (
// // //                                                                                 <a href={field.headingUrl} target="_blank" rel="noopener noreferrer" onClick={(e) => e.preventDefault()}>
// // //                                                                                     <button
// // //                                                                                         onClick={(e) => {
// // //                                                                                             e.preventDefault();
// // //                                                                                             console.log("Button clicked, but no navigation.");
// // //                                                                                         }}
// // //                                                                                         style={{
// // //                                                                                             background: field.headerbtnbg,
// // //                                                                                             color: field.headerbtncolor,
// // //                                                                                             height: `${field.headingbtnheight}px`,
// // //                                                                                             width: `${field.headingbtnwidth}px`,
// // //                                                                                             fontSize: `${field.headingbtnFontSize}px`,
// // //                                                                                             borderRadius: `${field.headingbtnradious}px`,
// // //                                                                                             padding: `${field.headingbtnPadding}px`,
// // //                                                                                             borderWidth: `${field.headingbtnBorderWidth}px`,
// // //                                                                                             borderStyle: field.headingbtnBorderStyle,
// // //                                                                                             borderColor: field.headingbtnBorderColor,
// // //                                                                                         }}
// // //                                                                                     >
// // //                                                                                         {field.headerbtn}
// // //                                                                                     </button>
// // //                                                                                 </a>
// // //                                                                             )}
// // //                                                                             <div className='form-builder-radio-btn email'>
// // //                                                                                 <button className='remove-btn' onClick={() => removeField(field.id)}>
// // //                                                                                     <img src={delete1} alt="delete" />
// // //                                                                                 </button>
// // //                                                                                 <button className="copy-btn" onClick={() => addInputField(field.type)}>
// // //                                                                                     <img src={maximizesize} alt="copy" />
// // //                                                                                 </button>
// // //                                                                             </div>
// // //                                                                         </div>
// // //                                                                     </div>
// // //                                                                 );
// // //                                                             }

// // //                                                             if (field.type === 'description') {
// // //                                                                 return (
// // //                                                                     <div key={field.id} onClick={() => handleFieldClick(field.id)}
// // //                                                                         className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}

// // //                                                                     >
// // //                                                                         <div style={{
// // //                                                                             backgroundColor: field.descriptionbg,
// // //                                                                             padding: `${field.descriptionPadding}px`,
// // //                                                                         }}>
// // //                                                                             <p style={{
// // //                                                                                 fontSize: `${field.descritionFontSize}px`,
// // //                                                                                 letterSpacing: `${field.descriptionLetterSpacing}px`,
// // //                                                                                 textAlign: field.descriptionTextAlign || '',
// // //                                                                                 borderWidth: `${field.descriptionBorderWidth}px`,
// // //                                                                                 borderStyle: field.descriptionBorderStyle,
// // //                                                                                 borderColor: field.descriptionBorderColor,
// // //                                                                                 fontWeight: field.descritionFontWeight,
// // //                                                                                 color: field.descritionColor
// // //                                                                             }}>{field.descriptionText || field.value || ''}</p>

// // //                                                                         </div>
// // //                                                                         <div className='form-builder-radio-btn email'>
// // //                                                                             <button className='remove-btn' onClick={() => removeField(field.id)}>
// // //                                                                                 <img src={delete1} alt="delete" />
// // //                                                                             </button>
// // //                                                                             <button className="copy-btn" onClick={() => addInputField(field.type)}>
// // //                                                                                 <img src={maximizesize} alt="copy" />
// // //                                                                             </button>
// // //                                                                         </div>
// // //                                                                     </div>
// // //                                                                 );
// // //                                                             }

// // //                                                             if (field.type === 'images') {
// // //                                                                 return (
// // //                                                                     <div key={field.id} onClick={() => handleFieldClick(field.id)}
// // //                                                                         className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
// // //                                                                         ref={emailFieldRef}
// // //                                                                     >
// // //                                                                         <div className='email_field-images'
// // //                                                                             style={{
// // //                                                                                 width: `${field.imgWidth}%`,
// // //                                                                                 textAlign: field.imgTextAlign ? field.imgTextAlign : '',
// // //                                                                                 backgroundColor: field.imgbg,
// // //                                                                                 padding: `${field.imgPadding}px`,
// // //                                                                                 borderWidth: `${field.imgBorderWidth}px`,
// // //                                                                                 borderStyle: field.imgBorderStyle,
// // //                                                                                 borderColor: field.imgBorderColor,
// // //                                                                                 margin: 'auto'
// // //                                                                             }}>
// // //                                                                             {field.value ? (
// // //                                                                                 <img src={field.value} alt="Dynamic" style={{ maxWidth: '100%', height: 'auto' }} />
// // //                                                                             ) : (
// // //                                                                                 <p>No Image Provided</p>
// // //                                                                             )}
// // //                                                                         </div>

// // //                                                                         <div className='form-builder-radio-btn email'>
// // //                                                                             <button className='remove-btn' onClick={() => removeField(field.id)}>
// // //                                                                                 <img src={delete1} alt="delete" />
// // //                                                                             </button>
// // //                                                                             <button className="copy-btn" onClick={() => addInputField(field.type)}>
// // //                                                                                 <img src={maximizesize} alt="copy" />
// // //                                                                             </button>
// // //                                                                         </div>
// // //                                                                     </div>
// // //                                                                 );
// // //                                                             }
// // //                                                             if (field.type === 'divider') {
// // //                                                                 return (
// // //                                                                     <div key={field.id} onClick={() => handleFieldClick(field.id)}
// // //                                                                         className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
// // //                                                                         ref={emailFieldRef}
// // //                                                                     >
// // //                                                                         <hr style={{
// // //                                                                             border: `1px solid ${field.dividerColor}`, width: `${field.dividerWidth}%`,
// // //                                                                             height: `${field.dividerheight}px`
// // //                                                                         }} />
// // //                                                                         <div className='form-builder-radio-btn email'>
// // //                                                                             <button className='remove-btn' onClick={() => removeField(field.id)}>
// // //                                                                                 <img src={delete1} alt="delete" />
// // //                                                                             </button>
// // //                                                                             <button className="copy-btn" onClick={() => addInputField(field.type)}>
// // //                                                                                 <img src={maximizesize} alt="copy" />
// // //                                                                             </button>
// // //                                                                         </div>
// // //                                                                     </div>
// // //                                                                 );
// // //                                                             }

// // //                                                             if (field.type === 'split') {
// // //                                                                 const isImageUploaded = field.value && field.value.startsWith('data:image');
// // //                                                                 return (
// // //                                                                     <div key={field.id} onClick={() => handleFieldClick(field.id)}
// // //                                                                         className={`email_field split-width ${activeFieldId === field.id ? 'active' : ''}`}
// // //                                                                         ref={emailFieldRef}
// // //                                                                         style={{
// // //                                                                             width: field.width,
// // //                                                                             backgroundColor: field.splitbg,
// // //                                                                             padding: `${field.splitPadding}px`
// // //                                                                         }}
// // //                                                                     >
// // //                                                                         {!isImageUploaded && (
// // //                                                                             <div
// // //                                                                                 onClick={() => setSelectedFieldId(field.id)}
// // //                                                                                 style={{
// // //                                                                                     padding: '10px',
// // //                                                                                     minHeight: '30px',
// // //                                                                                     border: '1px solid #ccc',
// // //                                                                                     display: 'flex',
// // //                                                                                     alignItems: 'center',
// // //                                                                                     justifyContent: 'center',
// // //                                                                                 }}
// // //                                                                                 dangerouslySetInnerHTML={{ __html: field.value || 'Add text...' }}
// // //                                                                             />
// // //                                                                         )}
// // //                                                                         {isImageUploaded && (
// // //                                                                             <div>
// // //                                                                                 <img
// // //                                                                                     src={field.value}
// // //                                                                                     alt="Uploaded Preview"
// // //                                                                                     style={{ maxWidth: '100%', maxHeight: '200px' }}
// // //                                                                                 />
// // //                                                                             </div>
// // //                                                                         )}
// // //                                                                         <div className='form-builder-radio-btn email'>
// // //                                                                             <button className='remove-btn' onClick={() => removeField(field.id)}>
// // //                                                                                 <img src={delete1} alt="delete" />
// // //                                                                             </button>
// // //                                                                             <button className="copy-btn" onClick={() => addInputField(field.type)}>
// // //                                                                                 <img src={maximizesize} alt="copy" />
// // //                                                                             </button>
// // //                                                                         </div>
// // //                                                                     </div>
// // //                                                                 )
// // //                                                             }
// // //                                                             if (field.type === 'richtext') {
// // //                                                                 return (
// // //                                                                     <div key={field.id} onClick={() => handleFieldClick(field.id)}
// // //                                                                         className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
// // //                                                                     >
// // //                                                                         <div dangerouslySetInnerHTML={{ __html: field.content }} />
// // //                                                                         <div className='form-builder-radio-btn email'>
// // //                                                                             <button className='remove-btn' onClick={() => removeField(field.id)}>
// // //                                                                                 <img src={delete1} alt="delete" />
// // //                                                                             </button>
// // //                                                                             <button className="copy-btn" onClick={() => addInputField(field.type)}>
// // //                                                                                 <img src={maximizesize} alt="copy" />
// // //                                                                             </button>
// // //                                                                         </div>
// // //                                                                     </div>
// // //                                                                 );
// // //                                                             }
// // //                                                             if (field.type === 'spacer') {
// // //                                                                 return (
// // //                                                                     <div key={field.id} onClick={() => handleFieldClick(field.id)}
// // //                                                                         className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
// // //                                                                         ref={emailFieldRef}
// // //                                                                     >
// // //                                                                         <div className='spacer-height-show' style={{ height: `${field.spacerHeight}px`, backgroundColor: field.spacerbg }}></div>
// // //                                                                         <div className='form-builder-radio-btn email'>
// // //                                                                             <button className='remove-btn' onClick={() => removeField(field.id)}>
// // //                                                                                 <img src={delete1} alt="delete" />
// // //                                                                             </button>
// // //                                                                             <button className="copy-btn" onClick={() => addInputField(field.type)}>
// // //                                                                                 <img src={maximizesize} alt="copy" />
// // //                                                                             </button>
// // //                                                                         </div>
// // //                                                                     </div>
// // //                                                                 );

// // //                                                             }
// // //                                                             if (field.type === 'video') {

// // //                                                                 return (
// // //                                                                     <div key={field.id} onClick={() => handleFieldClick(field.id)}
// // //                                                                         className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
// // //                                                                         ref={emailFieldRef}
// // //                                                                     >
// // //                                                                         <div className='email-tempalte-video-show' style={{ padding: `${field.videoPadding}px`, borderWidth: `${field.videoBorderWidth}px`, borderStyle: field.videoBorderStyle, borderColor: field.videoBorderColor }}>
// // //                                                                             {field.value && getVideoEmbedUrl(field.value) ? (
// // //                                                                                 <iframe
// // //                                                                                     height="250px"
// // //                                                                                     width="500px"
// // //                                                                                     src={getVideoEmbedUrl(field.value)}
// // //                                                                                     title="Video Preview"
// // //                                                                                     frameBorder="0"
// // //                                                                                     allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
// // //                                                                                     allowFullScreen
// // //                                                                                 ></iframe>) : (
// // //                                                                                 <div className='email-tempalte-img'>
// // //                                                                                     <img src={videoplay} alt="" />
// // //                                                                                 </div>
// // //                                                                             )}
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-radio-btn email'>
// // //                                                                             <button className='remove-btn' onClick={() => removeField(field.id)}>
// // //                                                                                 <img src={delete1} alt="delete" />
// // //                                                                             </button>
// // //                                                                             <button className="copy-btn" onClick={() => addInputField(field.type)}>
// // //                                                                                 <img src={maximizesize} alt="copy" />
// // //                                                                             </button>
// // //                                                                         </div>

// // //                                                                     </div>
// // //                                                                 );
// // //                                                             }

// // //                                                             if (field.type === 'button') {
// // //                                                                 return (
// // //                                                                     <div key={field.id} onClick={() => handleFieldClick(field.id)}
// // //                                                                         className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
// // //                                                                         ref={emailFieldRef}
// // //                                                                     >
// // //                                                                         <a href={field.buttonUrll}
// // //                                                                          onClick={(event) => {
// // //                                                                             event.preventDefault();
// // //                                                                             console.log("Button clicked!");
// // //                                                                         }}
// // //                                                                         >
// // //                                                                             <button
// // //                                                                                 type="button"
// // //                                                                                 style={{
// // //                                                                                     fontSize: `${fontSize}px`,
// // //                                                                                     color: field.buttonTextColor,
// // //                                                                                     backgroundColor: btnbackgroundColor,
// // //                                                                                     width: `${width}px`,
// // //                                                                                     height: `${height}px`,
// // //                                                                                     padding: `${padding}px`,
// // //                                                                                     borderWidth: `${field.buttonBorderWidth}px`,
// // //                                                                                     borderStyle: field.buttonBorderStyle,
// // //                                                                                     borderColor: field.buttonBorderColor,
// // //                                                                                     letterSpacing: `${field.buttonLetterSpacing}px`,
// // //                                                                                     borderRadius: `${field.buttonradious}px`
// // //                                                                                 }}
// // //                                                                             >
// // //                                                                                 {buttonLabel}
// // //                                                                             </button>
// // //                                                                         </a>
                                                                        
// // //                                                                         <div className='form-builder-radio-btn email'>
// // //                                                                             <button className='remove-btn' onClick={() => removeField(field.id)}>
// // //                                                                                 <img src={delete1} alt="delete" />
// // //                                                                             </button>
// // //                                                                             <button className="copy-btn" onClick={() => addInputField(field.type)}>
// // //                                                                                 <img src={maximizesize} alt="copy" />
// // //                                                                             </button>
// // //                                                                         </div>
// // //                                                                     </div>
// // //                                                                 );
// // //                                                             }

// // //                                                             if (field.type === 'html convert') {
// // //                                                                 return (
// // //                                                                     <div className="form-builder-and-preview">
// // //                                                                         <div key={field.id} onClick={() => handleFieldClick(field.id)}
// // //                                                                             className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
// // //                                                                             ref={emailFieldRef}
// // //                                                                         >
// // //                                                                             <div>
// // //                                                                                 <div style={{ color: field.htmlColor, fontSize: `${field.htmlFontSize}px`, padding: `${field.htmlPadding}px` }}
// // //                                                                                     className="preview-content"
// // //                                                                                     dangerouslySetInnerHTML={{ __html: field.value }}
// // //                                                                                 />
// // //                                                                                 <div className='form-builder-radio-btn email'>
// // //                                                                                     <button className='remove-btn' onClick={() => removeField(field.id)}>
// // //                                                                                         <img src={delete1} alt="delete" />
// // //                                                                                     </button>
// // //                                                                                     <button className="copy-btn" onClick={() => addInputField(field.type)}>
// // //                                                                                         <img src={maximizesize} alt="copy" />
// // //                                                                                     </button>
// // //                                                                                 </div>
// // //                                                                             </div>
// // //                                                                         </div>
// // //                                                                     </div>
// // //                                                                 );
// // //                                                             }
// // //                                                             if (field.type === 'Multicolumn') {
// // //                                                                 console.log("Field Data:", field)
// // //                                                                 console.log("Column Data:", field.columnData);
// // //                                                                 console.log("Column Images:", columnImages);
// // //                                                                 console.log("Editor Values:", editorValues);

// // //                                                                 return (
// // //                                                                     <div key={field.id}
// // //                                                                         onClick={() => handleFieldClick(field.id)}
// // //                                                                         className={`email_field columns-container ${activeFieldId === field.id ? 'active' : ''}`}
// // //                                                                         data-columns={field.columnCount}
// // //                                                                     >

// // //                                                                         {Array.from({ length: field.columnCount }, (_, index) => (
// // //                                                                             <div
// // //                                                                                 key={index}
// // //                                                                                 className={`column ${field.selectedColumn === index ? 'active-column' : ''}`}
// // //                                                                                 onClick={(e) => handleColumnClick(field.id, index)}
// // //                                                                                 style={{
// // //                                                                                     border: field.selectedColumn === index ? '2px solid red' : '1px solid gray',
// // //                                                                                     cursor: 'pointer',
// // //                                                                                 }}
// // //                                                                             >

// // //                                                                                 {field.columnData && field.columnData[index] ? (
// // //                                                                                     <>
// // //                                                                                         {field.columnData[index].image && (
// // //                                                                                             <img
// // //                                                                                                 src={field.columnData[index].image}
// // //                                                                                                 alt={`Uploaded for Column ${index + 1}`}
// // //                                                                                                 style={{ width: '100px', height: '100px', marginTop: '10px' }}
// // //                                                                                             />
// // //                                                                                         )}

// // //                                                                                         {field.columnData[index].content && (
// // //                                                                                             <div
// // //                                                                                                 dangerouslySetInnerHTML={{
// // //                                                                                                     __html: field.columnData[index].content,
// // //                                                                                                 }}
// // //                                                                                             />
// // //                                                                                         )}
// // //                                                                                     </>
// // //                                                                                 ) : (

// // //                                                                                     columnImages[`${field.id}-${index}`] || editorValues[`${field.id}-${index}`] ? (
// // //                                                                                         <>

// // //                                                                                             {columnImages[`${field.id}-${index}`] && (
// // //                                                                                                 <img
// // //                                                                                                     src={columnImages[`${field.id}-${index}`]}
// // //                                                                                                     alt={`Uploaded for Column ${index + 1}`}
// // //                                                                                                     style={{ width: '100px', height: '100px', marginTop: '10px' }}
// // //                                                                                                 />
// // //                                                                                             )}

// // //                                                                                             {editorValues[`${field.id}-${index}`] && (
// // //                                                                                                 <div
// // //                                                                                                     dangerouslySetInnerHTML={{
// // //                                                                                                         __html: editorValues[`${field.id}-${index}`],
// // //                                                                                                     }}
// // //                                                                                                 />
// // //                                                                                             )}
// // //                                                                                         </>
// // //                                                                                     ) : (

// // //                                                                                         <div style={{ color: 'gray' }}>
// // //                                                                                             <h2>Column {index + 1}</h2>
// // //                                                                                             Elevate your online store with our easy-to-use Text Box feature.
// // //                                                                                             It's a game-changer for personalization, allowing customers to add their
// // //                                                                                             special touch directly from a user-friendly drop-down menu.
// // //                                                                                         </div>
// // //                                                                                     )
// // //                                                                                 )}
// // //                                                                             </div>
// // //                                                                         ))}
// // //                                                                         <div className='form-builder-radio-btn email'>
// // //                                                                             <button className='remove-btn' onClick={() => removeField(field.id)}>
// // //                                                                                 <img src={delete1} alt="delete" />
// // //                                                                             </button>
// // //                                                                             <button className="copy-btn" onClick={() => addInputField(field.type)}>
// // //                                                                                 <img src={maximizesize} alt="copy" />
// // //                                                                             </button>
// // //                                                                         </div>
// // //                                                                     </div>
// // //                                                                 );
// // //                                                             }

// // //                                                             if (field.type === 'product' && field.products) {
// // //                                                                 return (
// // //                                                                     <div onClick={() => handleAddProductToSelected(field.id, field.title, field.image, field.products)}>
// // //                                                                         <div key={field.id} onClick={() => handleFieldClick(field.id)}
// // //                                                                             className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
// // //                                                                             ref={emailFieldRef}
// // //                                                                         >
// // //                                                                             <div className={`template-products ${productsPerRow ? `row-${productsPerRow}` : 'row-3'} ${viewMode === 'mobile' ? 'mobile' : ''}`}
// // //                                                                                 style={{
// // //                                                                                     padding: `${field.productPadding}px`,
// // //                                                                                     backgroundColor: field.productbg,
// // //                                                                                     borderWidth: `${field.productBorderWidth}px`,
// // //                                                                                     borderStyle: field.productBorderStyle,
// // //                                                                                     borderColor: field.productBorderColor,
// // //                                                                                     fontSize: `${field.productFontSize}px`,
// // //                                                                                     color: field.productTextColor,

// // //                                                                                 }}
// // //                                                                             >
// // //                                                                                 {field.products.map((product) => (
// // //                                                                                     <div className='product-show' key={product.id}>

// // //                                                                                         {product.images && product.images.length > 0 && (
// // //                                                                                             <div className="images-gallery">
// // //                                                                                                 <img
// // //                                                                                                     src={product.images[0].src}
// // //                                                                                                     alt={product.images[0].alt || 'Product Image'}
// // //                                                                                                     style={{ width: '150px', height: '150px', objectFit: 'cover' }}
// // //                                                                                                 />
// // //                                                                                             </div>
// // //                                                                                         )}
// // //                                                                                         <div>
// // //                                                                                             <h4 style={{ letterSpacing: `${field.productLetterSpacing}px`, fontWeight: field.productWeight, }}>{product.title}</h4>
// // //                                                                                             {showPrice && product.variants && product.variants.length > 0 && (
// // //                                                                                                 <p style={{ fontWeight: field.productWeight, letterSpacing: `${field.productLetterSpacing}px` }}> ${product.variants[0].price}</p>
// // //                                                                                             )}
// // //                                                                                         </div>

// // //                                                                                         {showbtnn && (
// // //                                                                                             <a href={`https://${shop}/admin/products?selectedView=all`} target="_blank" rel="noopener noreferrer">
// // //                                                                                                 <button
// // //                                                                                                     style={{
// // //                                                                                                         fontSize: `${field.productfontSize}px`,
// // //                                                                                                         width: `${field.productwidth}px`,
// // //                                                                                                         height: `${field.productheight}px`,
// // //                                                                                                         backgroundColor: field.productbackgroundColor,
// // //                                                                                                         borderWidth: `${field.productbtnBorderWidth}px`,
// // //                                                                                                         borderStyle: field.productbtnBorderStyle,
// // //                                                                                                         borderColor: field.productbtnBorderColor,
// // //                                                                                                         color: field.productbtnbg,
// // //                                                                                                         borderRadius: `${field.productradious}px`,
// // //                                                                                                     }}
// // //                                                                                                     className='show-bnt-prodcut'>{field.productLabel}</button>
// // //                                                                                             </a>
// // //                                                                                         )}
// // //                                                                                     </div>
// // //                                                                                 ))}
// // //                                                                             </div>
// // //                                                                             <div className='form-builder-radio-btn email'>
// // //                                                                                 <button className='remove-btn' onClick={() => removeField(field.id)}>
// // //                                                                                     <img src={delete1} alt="delete" />
// // //                                                                                 </button>
// // //                                                                                 <button className="copy-btn" onClick={() => addInputField(field.type)}>
// // //                                                                                     <img src={maximizesize} alt="copy" />
// // //                                                                                 </button>
// // //                                                                             </div>
// // //                                                                         </div>
// // //                                                                     </div>
// // //                                                                 );
// // //                                                             }

// // //                                                             if (field.type === 'socalicon') {
// // //                                                                 return (
// // //                                                                     <div onClick={() => handleEdit(field)}>
// // //                                                                         <div key={field.id} onClick={() => handleFieldClick(field.id)}
// // //                                                                             className={`email_field  ${activeFieldId === field.id ? 'active' : ''}`}
// // //                                                                             ref={emailFieldRef}

// // //                                                                         >
// // //                                                                             <div style={{ textAlign: field.socaliconTextAlign || '', padding: `${field.socalIconPadding}px` }} >
// // //                                                                                 <div className="social-icons" >
// // //                                                                                     {field.icons.facebook && field.icons.facebook.url && !field.icons.facebook.isHidden && (
// // //                                                                                         <a href={field.icons.facebook.url} onClick={(e) => e.preventDefault()}>
// // //                                                                                             <img src={facebook} alt="" style={{ width: `${socalIconWidth}px`, height: `${socalIconHeight}px` }} />
// // //                                                                                         </a>
// // //                                                                                     )}
// // //                                                                                     {field.icons.twitter && field.icons.twitter.url && !field.icons.twitter.isHidden && (
// // //                                                                                         <a href={field.icons.twitter.url} onClick={(e) => e.preventDefault()}>
// // //                                                                                             <img src={twitter} alt="" style={{ width: `${socalIconWidth}px`, height: `${socalIconHeight}px` }} />
// // //                                                                                         </a>
// // //                                                                                     )}
// // //                                                                                     {field.icons.instagram && field.icons.instagram.url && !field.icons.instagram.isHidden && (
// // //                                                                                         <a href={field.icons.instagram.url} onClick={(e) => e.preventDefault()}>
// // //                                                                                             <img src={instagram} alt="" style={{ width: `${socalIconWidth}px`, height: `${socalIconHeight}px` }} />
// // //                                                                                         </a>
// // //                                                                                     )}
// // //                                                                                     {field.customIcons.map((icon, index) =>
// // //                                                                                         icon.url && !icon.isHidden ? (
// // //                                                                                             <a key={index} href={icon.url} target="_blank" rel="noopener noreferrer" onClick={(e) => e.preventDefault()}>
// // //                                                                                                 <img src={icon.src} alt={`Custom Icon ${index}`} style={{ width: `${socalIconWidth}px`, }} />
// // //                                                                                             </a>
// // //                                                                                         ) : null
// // //                                                                                     )}
// // //                                                                                 </div>
// // //                                                                             </div>
// // //                                                                             <div className='form-builder-radio-btn email'>
// // //                                                                                 <button className='remove-btn' onClick={() => removeField(field.id)}>
// // //                                                                                     <img src={delete1} alt="delete" />
// // //                                                                                 </button>
// // //                                                                                 <button className="copy-btn" onClick={() => addInputField(field.type)}>
// // //                                                                                     <img src={maximizesize} alt="copy" />
// // //                                                                                 </button>
// // //                                                                             </div>
// // //                                                                         </div>
// // //                                                                     </div>
// // //                                                                 )
// // //                                                             }
// // //                                                         })
// // //                                                     }

// // //                                                 </>
// // //                                             )}
// // //                                         </div>
// // //                                     </div>
// // //                                 </div>

// // //                                 <div className='email-template-input-setting'>
// // //                                     {emailFieldPopup && (<div className='form-builder-change-propertites' ref={popupRef}>
// // //                                         <div className='form-builder-change_show_all'>
// // //                                             <div className='form_qucik'>
// // //                                                 <p>Quick setup Settings</p>
// // //                                             </div>
// // //                                             <div className='form_build_propertities'>

// // //                                                 {fields.length > 0 && selectedFieldId && (
// // //                                                     <div className='quick-setup-settings'>
// // //                                                         {fields.map((field) => {
// // //                                                             if (field.id === selectedFieldId && field.type === 'Multicolumn') {
// // //                                                                 return (
// // //                                                                     <div>
// // //                                                                         <div className="form-builder-chaneging-wrap">
// // //                                                                             <div className="form-builder-chaneging-wrap select">
// // //                                                                                 <label>Select Columns</label>
// // //                                                                                 <div className="column-options">
// // //                                                                                     <select
// // //                                                                                         value={columnCount}
// // //                                                                                         onChange={(e) => handleColumnSelection(e.target.value)}
// // //                                                                                     >
// // //                                                                                         {[1, 2, 3, 4, 5, 6].map((column) => (
// // //                                                                                             <option key={column} value={column}>
// // //                                                                                                 {column} Columns
// // //                                                                                             </option>
// // //                                                                                         ))}
// // //                                                                                     </select>
// // //                                                                                 </div>
// // //                                                                             </div>
// // //                                                                         </div>
// // //                                                                         <div className="form-builder-chaneging-wrap updatemulti">
// // //                                                                             {field.columnData && field.selectedColumn !== undefined ? (
// // //                                                                                 <>
// // //                                                                                     {field.columnData[field.selectedColumn]?.image ? (
// // //                                                                                         <div>
// // //                                                                                             <div className="form-builder-chaneging-wrap file">
// // //                                                                                                 <label>Update Image</label>
// // //                                                                                                 <input
// // //                                                                                                     type="file"
// // //                                                                                                     accept="image/*"
// // //                                                                                                     onChange={(e) =>
// // //                                                                                                         handleImageUpload1(e, popupFieldId, fields.find((f) => f.id === popupFieldId)?.selectedColumn)
// // //                                                                                                     }
// // //                                                                                                     style={{ marginTop: '10px' }}
// // //                                                                                                 />
// // //                                                                                             </div>
// // //                                                                                             <img
// // //                                                                                                 src={field.columnData[field.selectedColumn].image}
// // //                                                                                                 alt="Selected Column Image"
// // //                                                                                                 style={{
// // //                                                                                                     width: '150px',
// // //                                                                                                     height: '150px',
// // //                                                                                                     marginBottom: '10px',
// // //                                                                                                 }}
// // //                                                                                             />
// // //                                                                                             <button
// // //                                                                                                 onClick={() =>
// // //                                                                                                     handleRemoveImage1(
// // //                                                                                                         popupFieldId,
// // //                                                                                                         fields.find((f) => f.id === popupFieldId)?.selectedColumn
// // //                                                                                                     )
// // //                                                                                                 }
// // //                                                                                                 style={{
// // //                                                                                                     display: 'block',
// // //                                                                                                     marginTop: '10px',
// // //                                                                                                     padding: '5px 10px',
// // //                                                                                                     cursor: 'pointer',
// // //                                                                                                 }}
// // //                                                                                             >
// // //                                                                                                 Remove Image
// // //                                                                                             </button>
// // //                                                                                         </div>
// // //                                                                                     ) : (
// // //                                                                                         field.columnData[field.selectedColumn]?.content && (
// // //                                                                                             <div>
// // //                                                                                                 <div className="form-builder-chaneging-wrap file">
// // //                                                                                                     <label>Add Image</label>
// // //                                                                                                     <input
// // //                                                                                                         type="file"
// // //                                                                                                         accept="image/*"
// // //                                                                                                         onChange={(e) =>
// // //                                                                                                             handleImageUpload1(e, popupFieldId, fields.find((f) => f.id === popupFieldId)?.selectedColumn)
// // //                                                                                                         }
// // //                                                                                                         style={{ marginTop: '10px' }}
// // //                                                                                                     />
// // //                                                                                                 </div>
// // //                                                                                             </div>
// // //                                                                                         )
// // //                                                                                     )}

// // //                                                                                     {field.columnData[field.selectedColumn]?.content && (
// // //                                                                                         <ReactQuill
// // //                                                                                             value={field.columnData[field.selectedColumn].content}
// // //                                                                                             onChange={(value) =>
// // //                                                                                                 handleContentChange(value, popupFieldId, fields.find((f) => f.id === popupFieldId)?.selectedColumn)
// // //                                                                                             }
// // //                                                                                         />
// // //                                                                                     )}
// // //                                                                                 </>
// // //                                                                             ) : (
// // //                                                                                 <p>No data available for this column.</p>
// // //                                                                             )}
// // //                                                                         </div>

// // //                                                                         <div className="form-builder-chaneging-wrap">
// // //                                                                             <div className="form-builder-chaneging-wrap file">
// // //                                                                                 <label>
// // //                                                                                     Column{' '}
// // //                                                                                     {fields.find((f) => f.id === popupFieldId)?.selectedColumn + 1}{' '}
// // //                                                                                     Selected
// // //                                                                                 </label>
// // //                                                                                 <input
// // //                                                                                     type="file"
// // //                                                                                     accept="image/*"
// // //                                                                                     onChange={(e) =>
// // //                                                                                         handleImageUploaded(
// // //                                                                                             e,
// // //                                                                                             popupFieldId,
// // //                                                                                             fields.find((f) => f.id === popupFieldId)?.selectedColumn
// // //                                                                                         )
// // //                                                                                     }
// // //                                                                                 />


// // //                                                                                 {columnImages[
// // //                                                                                     `${popupFieldId}-${fields.find((f) => f.id === popupFieldId)?.selectedColumn}`
// // //                                                                                 ] && (
// // //                                                                                         <div>
// // //                                                                                             <img
// // //                                                                                                 src={
// // //                                                                                                     columnImages[
// // //                                                                                                     `${popupFieldId}-${fields.find((f) => f.id === popupFieldId)?.selectedColumn}`
// // //                                                                                                     ]
// // //                                                                                                 }
// // //                                                                                                 alt="Image Preview"
// // //                                                                                                 style={{
// // //                                                                                                     maxWidth: '100%',
// // //                                                                                                     maxHeight: '200px',
// // //                                                                                                     marginTop: '10px',
// // //                                                                                                 }}
// // //                                                                                             />
// // //                                                                                             <button
// // //                                                                                                 onClick={() =>
// // //                                                                                                     handleRemoveImage(
// // //                                                                                                         popupFieldId,
// // //                                                                                                         fields.find((f) => f.id === popupFieldId)?.selectedColumn
// // //                                                                                                     )
// // //                                                                                                 }
// // //                                                                                                 style={{
// // //                                                                                                     display: 'block',
// // //                                                                                                     marginTop: '10px',
// // //                                                                                                     padding: '5px 10px',
// // //                                                                                                     cursor: 'pointer',
// // //                                                                                                 }}
// // //                                                                                             >
// // //                                                                                                 Remove Image
// // //                                                                                             </button>
// // //                                                                                         </div>
// // //                                                                                     )}
// // //                                                                             </div>

// // //                                                                             <ReactQuill
// // //                                                                                 value={
// // //                                                                                     editorValues[
// // //                                                                                     `${popupFieldId}-${fields.find((f) => f.id === popupFieldId)?.selectedColumn}`
// // //                                                                                     ] || ''
// // //                                                                                 }
// // //                                                                                 onChange={(value) =>
// // //                                                                                     handleEditorChangeed(
// // //                                                                                         value,
// // //                                                                                         popupFieldId,
// // //                                                                                         fields.find((f) => f.id === popupFieldId)?.selectedColumn
// // //                                                                                     )
// // //                                                                                 }
// // //                                                                                 modules={{ toolbar: toolbarOptions }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                     </div>
// // //                                                                 );
// // //                                                             }

// // //                                                             if (field.id === selectedFieldId && field.type === 'richtext') {
// // //                                                                 return (
// // //                                                                     <div>
// // //                                                                         <ReactQuill
// // //                                                                             value={editorValueed || field.content}
// // //                                                                             onChange={handleEditChange}
// // //                                                                             modules={{ toolbar: toolbarOptions }}
// // //                                                                         />

// // //                                                                     </div>
// // //                                                                 )
// // //                                                             }
// // //                                                             if (field.id === selectedFieldId && field.type === 'product') {
// // //                                                                 return (
// // //                                                                     <div>

// // //                                                                         <div>
// // //                                                                             <div className="show-select-product">
// // //                                                                                 <h3>Products</h3>
// // //                                                                                 {productTitles.length > 0 ? (
// // //                                                                                     productTitles.map((title, index) => (
// // //                                                                                         <div className='show-product-details' key={index}>
// // //                                                                                             <div style={{ display: 'flex', alignItems: 'center' }}>
// // //                                                                                                 {productImage[index] && (
// // //                                                                                                     <img
// // //                                                                                                         src={productImage[index]}
// // //                                                                                                         alt={title}
// // //                                                                                                         style={{ width: '50px', height: '50px', objectFit: 'cover', marginRight: '10px' }}
// // //                                                                                                     />
// // //                                                                                                 )}

// // //                                                                                                 <h4>{title.length > 35 ? title.slice(0, 35) + '...' : title}</h4>
// // //                                                                                             </div>
// // //                                                                                             <div style={{ cursor: "pointer" }} onClick={() => handleRemoveProductFromForm(index)}>
// // //                                                                                                 <img src={deletep} alt="" style={{ width: '70%' }} />
// // //                                                                                             </div>
// // //                                                                                         </div>
// // //                                                                                     ))
// // //                                                                                 ) : (
// // //                                                                                     <p>No products selected</p>
// // //                                                                                 )}

// // //                                                                                 <button className='product-btn-addproduct' onClick={AddProduct}>Add Product</button>
// // //                                                                             </div>
// // //                                                                         </div>
// // //                                                                         <div className='product-detalis-all'>
// // //                                                                             <h3>Product details</h3>
// // //                                                                             <label className="custom-checkbox">
// // //                                                                                 <input
// // //                                                                                     type="checkbox"
// // //                                                                                     checked={showPrice}
// // //                                                                                     onChange={togglePrice}
// // //                                                                                 />
// // //                                                                                 Price
// // //                                                                             </label>
// // //                                                                             <label className="custom-checkbox">
// // //                                                                                 <input
// // //                                                                                     type="checkbox"
// // //                                                                                     checked={showbtnn}
// // //                                                                                     onChange={togglebtnn}
// // //                                                                                 />
// // //                                                                                 Button
// // //                                                                             </label>
// // //                                                                         </div>
// // //                                                                         <div className="product-detalis-all">
// // //                                                                             <h3>Product layout</h3>
// // //                                                                             <div className='form-builder-chaneging-wrap select'>
// // //                                                                                 <select onChange={handleProductsPerRowChange} defaultValue={3}>
// // //                                                                                     {[...Array(6).keys()].map(i => (
// // //                                                                                         <option key={i + 1} value={i + 1}>{i + 1} per row</option>
// // //                                                                                     ))}
// // //                                                                                 </select>
// // //                                                                             </div>

// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap number' >
// // //                                                                             <label>Padding (px)</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.productPadding}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, productPadding: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // //                                                                             <label> Background Color</label>
// // //                                                                             <input
// // //                                                                                 type="color"
// // //                                                                                 value={field.productbg || '#ffffff'}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, productbg: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // //                                                                             <label>Border Color</label>
// // //                                                                             <input
// // //                                                                                 type="color"
// // //                                                                                 value={field.productBorderColor}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, productBorderColor: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>

// // //                                                                         <div className='form-builder-chaneging-wrap number' >
// // //                                                                             <label>Border Width (px)</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.productBorderWidth}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, productBorderWidth: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap'>
// // //                                                                             <label>Border Style</label>
// // //                                                                             <select
// // //                                                                                 value={field.productBorderStyle}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, productBorderStyle: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             >
// // //                                                                                 <option value="solid">Solid</option>
// // //                                                                                 <option value="dashed">Dashed</option>
// // //                                                                                 <option value="dotted">Dotted</option>
// // //                                                                             </select>
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // //                                                                             <label>Font Size (px)</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.productFontSize}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, productFontSize: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // //                                                                             <label> Color</label>
// // //                                                                             <input
// // //                                                                                 type="color"
// // //                                                                                 value={field.productTextColor}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, productTextColor: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // //                                                                             <label> Font-Weight</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.productWeight}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, productWeight: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}

// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // //                                                                             <label> Letter Spacing</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.productLetterSpacing}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, productLetterSpacing: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                                 placeholder="Letter Spacing"
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap all-btn'>
// // //                                                                             <label> Button</label>
// // //                                                                             <div className='form-builder-chaneging-wrap'>
// // //                                                                                 <label>Button Label</label>
// // //                                                                                 <input
// // //                                                                                     type="text"
// // //                                                                                     value={field.productLabel}
// // //                                                                                     onChange={(e) => {
// // //                                                                                         setFields(prevFields =>
// // //                                                                                             prevFields.map(f =>
// // //                                                                                                 f.id === field.id ? { ...f, productLabel: e.target.value } : f
// // //                                                                                             )
// // //                                                                                         );
// // //                                                                                     }}
// // //                                                                                 />
// // //                                                                             </div>
// // //                                                                             <div className='form-builder-chaneging-wrap number'>
// // //                                                                                 <label>Font Size (px)</label>
// // //                                                                                 <input
// // //                                                                                     type="number"
// // //                                                                                     value={field.productfontSize}
// // //                                                                                     onChange={(e) => {
// // //                                                                                         setFields(prevFields =>
// // //                                                                                             prevFields.map(f =>
// // //                                                                                                 f.id === field.id ? { ...f, productfontSize: e.target.value } : f
// // //                                                                                             )
// // //                                                                                         );
// // //                                                                                     }}
// // //                                                                                 />
// // //                                                                             </div>
// // //                                                                             <div className='form-builder-chaneging-wrap number'>
// // //                                                                                 <label>Width (px)</label>
// // //                                                                                 <input
// // //                                                                                     type="number"
// // //                                                                                     value={field.productwidth}
// // //                                                                                     onChange={(e) => {
// // //                                                                                         setFields(prevFields =>
// // //                                                                                             prevFields.map(f =>
// // //                                                                                                 f.id === field.id ? { ...f, productwidth: e.target.value } : f
// // //                                                                                             )
// // //                                                                                         );
// // //                                                                                     }}
// // //                                                                                 />
// // //                                                                             </div>

// // //                                                                             <div className='form-builder-chaneging-wrap number'>
// // //                                                                                 <label>Height (px)</label>
// // //                                                                                 <input
// // //                                                                                     type="number"
// // //                                                                                     value={field.productheight}
// // //                                                                                     onChange={(e) => {
// // //                                                                                         setFields(prevFields =>
// // //                                                                                             prevFields.map(f =>
// // //                                                                                                 f.id === field.id ? { ...f, productheight: e.target.value } : f
// // //                                                                                             )
// // //                                                                                         );
// // //                                                                                     }}
// // //                                                                                 />
// // //                                                                             </div>
// // //                                                                             <div className='form-builder-chaneging-wrap color'>
// // //                                                                                 <label>Background Color</label>
// // //                                                                                 <input
// // //                                                                                     type="color"
// // //                                                                                     value={field.productbackgroundColor}
// // //                                                                                     onChange={(e) => {
// // //                                                                                         setFields(prevFields =>
// // //                                                                                             prevFields.map(f =>
// // //                                                                                                 f.id === field.id ? { ...f, productbackgroundColor: e.target.value } : f
// // //                                                                                             )
// // //                                                                                         );
// // //                                                                                     }}
// // //                                                                                 />
// // //                                                                             </div>
// // //                                                                             <div className='form-builder-chaneging-wrap color'>
// // //                                                                                 <label>Border Color</label>
// // //                                                                                 <input
// // //                                                                                     type="color"
// // //                                                                                     value={field.productbtnBorderColor}
// // //                                                                                     onChange={(e) => {
// // //                                                                                         setFields(prevFields =>
// // //                                                                                             prevFields.map(f =>
// // //                                                                                                 f.id === field.id ? { ...f, productbtnBorderColor: e.target.value } : f
// // //                                                                                             )
// // //                                                                                         );
// // //                                                                                     }}
// // //                                                                                 />
// // //                                                                             </div>

// // //                                                                             <div className='form-builder-chaneging-wrap number' >
// // //                                                                                 <label>Border Width (px)</label>
// // //                                                                                 <input
// // //                                                                                     type="number"
// // //                                                                                     value={field.productbtnBorderWidth}
// // //                                                                                     onChange={(e) => {
// // //                                                                                         setFields(prevFields =>
// // //                                                                                             prevFields.map(f =>
// // //                                                                                                 f.id === field.id ? { ...f, productbtnBorderWidth: e.target.value } : f
// // //                                                                                             )
// // //                                                                                         );
// // //                                                                                     }}
// // //                                                                                 />
// // //                                                                             </div>
// // //                                                                             <div className='form-builder-chaneging-wrap'>
// // //                                                                                 <label>Border Style</label>
// // //                                                                                 <select
// // //                                                                                     value={field.productbtnBorderStyle}
// // //                                                                                     onChange={(e) => {
// // //                                                                                         setFields(prevFields =>
// // //                                                                                             prevFields.map(f =>
// // //                                                                                                 f.id === field.id ? { ...f, productbtnBorderStyle: e.target.value } : f
// // //                                                                                             )
// // //                                                                                         );
// // //                                                                                     }}
// // //                                                                                 >
// // //                                                                                     <option value="solid">Solid</option>
// // //                                                                                     <option value="dashed">Dashed</option>
// // //                                                                                     <option value="dotted">Dotted</option>
// // //                                                                                 </select>
// // //                                                                             </div>
// // //                                                                             <div className='form-builder-chaneging-wrap color'>
// // //                                                                                 <label>Color</label>
// // //                                                                                 <input
// // //                                                                                     type="color"
// // //                                                                                     value={field.productbtnbg || '#ffffff'}
// // //                                                                                     onChange={(e) => {
// // //                                                                                         setFields(prevFields =>
// // //                                                                                             prevFields.map(f =>
// // //                                                                                                 f.id === field.id ? { ...f, productbtnbg: e.target.value } : f
// // //                                                                                             )
// // //                                                                                         );
// // //                                                                                     }}
// // //                                                                                 />
// // //                                                                             </div>
// // //                                                                             <div className='form-builder-chaneging-wrap number'>
// // //                                                                                 <label>Border-Radious</label>
// // //                                                                                 <input
// // //                                                                                     type="number"
// // //                                                                                     value={field.productradious || '#ffffff'}
// // //                                                                                     onChange={(e) => {
// // //                                                                                         setFields(prevFields =>
// // //                                                                                             prevFields.map(f =>
// // //                                                                                                 f.id === field.id ? { ...f, productradious: e.target.value } : f
// // //                                                                                             )
// // //                                                                                         );
// // //                                                                                     }}
// // //                                                                                 />
// // //                                                                             </div>
// // //                                                                         </div>

// // //                                                                     </div>
// // //                                                                 )
// // //                                                             }
// // //                                                             if (field.id === selectedFieldId && field.type === 'heading') {
// // //                                                                 return (
// // //                                                                     <div key={field.id}>
// // //                                                                         <div className='form-builder-chaneging-wrap'>
// // //                                                                             <label>Heading Text:</label>
// // //                                                                             <input
// // //                                                                                 type="text"
// // //                                                                                 value={field.headingText || field.value}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, headingText: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                                 placeholder="Enter Heading Text"
// // //                                                                             />
// // //                                                                         </div>

// // //                                                                         <div className='form-builder-chaneging-wrap'>
// // //                                                                             <label>Heading Level:</label>
// // //                                                                             <select
// // //                                                                                 value={field.headingLevel}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, headingLevel: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             >
// // //                                                                                 <option value="h1">H1</option>
// // //                                                                                 <option value="h2">H2</option>
// // //                                                                                 <option value="h3">H3</option>
// // //                                                                                 <option value="h4">H4</option>
// // //                                                                                 <option value="h5">H5</option>
// // //                                                                                 <option value="h6">H6</option>
// // //                                                                             </select>
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // //                                                                             <label>Heading Font Size:</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.headingFontSize}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, headingFontSize: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                                 placeholder="Font Size"
// // //                                                                             />
// // //                                                                         </div>

// // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // //                                                                             <label> Color</label>
// // //                                                                             <input
// // //                                                                                 type="color"
// // //                                                                                 value={field.headingColor}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, headingColor: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         {field.imageUrl ? (
// // //                                                                             <div>
// // //                                                                                 <div className="form-builder-chaneging-wrap">
// // //                                                                                     <div className="image-preview">
// // //                                                                                         <img
// // //                                                                                             src={field.imageUrl || field.value}
// // //                                                                                             alt="Heading Image"
// // //                                                                                             style={{ width: "150px" }}
// // //                                                                                         />
// // //                                                                                     </div>
// // //                                                                                 </div>
// // //                                                                                 <button onClick={() => RemoveImage(field.id)}>Remove Image</button>
// // //                                                                                 <div className='form-builder-chaneging-wrap number'>
// // //                                                                                     <label>Image Width:</label>
// // //                                                                                     <input
// // //                                                                                         type="number"
// // //                                                                                         value={field.bannerImageWidth}
// // //                                                                                         onChange={(e) => {
// // //                                                                                             setFields(prevFields =>
// // //                                                                                                 prevFields.map(f =>
// // //                                                                                                     f.id === field.id ? { ...f, bannerImageWidth: e.target.value } : f
// // //                                                                                                 )
// // //                                                                                             );
// // //                                                                                         }}
// // //                                                                                         placeholder="Enter Heading Text"
// // //                                                                                     />
// // //                                                                                 </div>
// // //                                                                                 <div className="form-builder-chaneging-wrap number">
// // //                                                                                     <label>Image Height:</label>
// // //                                                                                     <select
// // //                                                                                         value={
// // //                                                                                             field.bannerImageHeight === '100px'
// // //                                                                                                 ? 'small'
// // //                                                                                                 : field.bannerImageHeight === '200px'
// // //                                                                                                     ? 'medium'
// // //                                                                                                     : field.bannerImageHeight === '300px'
// // //                                                                                                         ? 'large'
// // //                                                                                                         : 'default'
// // //                                                                                         }
// // //                                                                                         onChange={(e) => {
// // //                                                                                             const selectedValue = e.target.value;
// // //                                                                                             const heightMapping = {
// // //                                                                                                 default: 'auto',
// // //                                                                                                 small: '100px',
// // //                                                                                                 medium: '200px',
// // //                                                                                                 large: '300px',
// // //                                                                                             };

// // //                                                                                             setFields((prevFields) =>
// // //                                                                                                 prevFields.map((f) =>
// // //                                                                                                     f.id === field.id
// // //                                                                                                         ? {
// // //                                                                                                             ...f,
// // //                                                                                                             bannerImageHeight: heightMapping[selectedValue],
// // //                                                                                                         }
// // //                                                                                                         : f
// // //                                                                                                 )
// // //                                                                                             );
// // //                                                                                         }}
// // //                                                                                     >
// // //                                                                                         <option value="default">Default</option>
// // //                                                                                         <option value="small">Small</option>
// // //                                                                                         <option value="medium">Medium</option>
// // //                                                                                         <option value="large">Large</option>
// // //                                                                                     </select>
// // //                                                                                 </div>
// // //                                                                                 <div className='form-builder-chaneging-wrap'>
// // //                                                                                     <label>Text Align </label>
// // //                                                                                     <select
// // //                                                                                         value={field.bannerImageTextAlign}
// // //                                                                                         onChange={(e) => {
// // //                                                                                             setFields(prevFields =>
// // //                                                                                                 prevFields.map(f =>
// // //                                                                                                     f.id === field.id ? { ...f, bannerImageTextAlign: e.target.value } : f
// // //                                                                                                 )
// // //                                                                                             );
// // //                                                                                         }}
// // //                                                                                     >
// // //                                                                                         <option value="">Select text align</option>
// // //                                                                                         <option value="left">left</option>
// // //                                                                                         <option value="center">center</option>
// // //                                                                                         <option value="right">right</option>
// // //                                                                                     </select>
// // //                                                                                 </div>
// // //                                                                             </div>
// // //                                                                         ) : null}

// // //                                                                         <div className="form-builder-chaneging-wrap">
// // //                                                                             {(editorValue || field.editorContent) && (
// // //                                                                                 <ReactQuill
// // //                                                                                     value={editorValue || field.editorContent}
// // //                                                                                     onChange={handleEditorChange}
// // //                                                                                     modules={{ toolbar: toolbarOptions }}
// // //                                                                                 />
// // //                                                                             )}
// // //                                                                         </div>
// // //                                                                         <div className="form-builder-changing-wrap url">
// // //                                                                             {field.headingUrl && (
// // //                                                                                 <>
// // //                                                                                     <label>Button Url:</label>
// // //                                                                                     <input
// // //                                                                                         type="url"
// // //                                                                                         value={field.headingUrl}
// // //                                                                                         onChange={(e) => handleUpdateUrl(field.id, e.target.value)}
// // //                                                                                         placeholder="Update URL"
// // //                                                                                     />

// // //                                                                                     <div className='form-builder-chaneging-wrap'>
// // //                                                                                         <label>Button Label</label>
// // //                                                                                         <input
// // //                                                                                             type="text"
// // //                                                                                             value={field.headerbtn}
// // //                                                                                             onChange={(e) => {
// // //                                                                                                 setFields(prevFields =>
// // //                                                                                                     prevFields.map(f =>
// // //                                                                                                         f.id === field.id ? { ...f, headerbtn: e.target.value } : f
// // //                                                                                                     )
// // //                                                                                                 );
// // //                                                                                             }}
// // //                                                                                         />
// // //                                                                                     </div>

// // //                                                                                     <div className='form-builder-chaneging-wrap color'>
// // //                                                                                         <label>Button Background</label>
// // //                                                                                         <input
// // //                                                                                             type="color"
// // //                                                                                             value={field.headerbtnbg}
// // //                                                                                             onChange={(e) => {
// // //                                                                                                 setFields(prevFields =>
// // //                                                                                                     prevFields.map(f =>
// // //                                                                                                         f.id === field.id ? { ...f, headerbtnbg: e.target.value } : f
// // //                                                                                                     )
// // //                                                                                                 );
// // //                                                                                             }}
// // //                                                                                         />
// // //                                                                                     </div>
// // //                                                                                     <div className='form-builder-chaneging-wrap color'>
// // //                                                                                         <label>Border Color</label>
// // //                                                                                         <input
// // //                                                                                             type="color"
// // //                                                                                             value={field.headingbtnBorderColor}
// // //                                                                                             onChange={(e) => {
// // //                                                                                                 setFields(prevFields =>
// // //                                                                                                     prevFields.map(f =>
// // //                                                                                                         f.id === field.id ? { ...f, headingbtnBorderColor: e.target.value } : f
// // //                                                                                                     )
// // //                                                                                                 );
// // //                                                                                             }}
// // //                                                                                         />
// // //                                                                                     </div>

// // //                                                                                     <div className='form-builder-chaneging-wrap number' >
// // //                                                                                         <label>Border Width (px)</label>
// // //                                                                                         <input
// // //                                                                                             type="number"
// // //                                                                                             value={field.headingbtnBorderWidth}
// // //                                                                                             onChange={(e) => {
// // //                                                                                                 setFields(prevFields =>
// // //                                                                                                     prevFields.map(f =>
// // //                                                                                                         f.id === field.id ? { ...f, headingbtnBorderWidth: e.target.value } : f
// // //                                                                                                     )
// // //                                                                                                 );
// // //                                                                                             }}
// // //                                                                                         />
// // //                                                                                     </div>
// // //                                                                                     <div className='form-builder-chaneging-wrap'>
// // //                                                                                         <label>Border Style</label>
// // //                                                                                         <select
// // //                                                                                             value={field.headingbtnBorderStyle}
// // //                                                                                             onChange={(e) => {
// // //                                                                                                 setFields(prevFields =>
// // //                                                                                                     prevFields.map(f =>
// // //                                                                                                         f.id === field.id ? { ...f, headingbtnBorderStyle: e.target.value } : f
// // //                                                                                                     )
// // //                                                                                                 );
// // //                                                                                             }}
// // //                                                                                         >
// // //                                                                                             <option value="solid">Solid</option>
// // //                                                                                             <option value="dashed">Dashed</option>
// // //                                                                                             <option value="dotted">Dotted</option>
// // //                                                                                         </select>
// // //                                                                                     </div>
// // //                                                                                     <div className='form-builder-chaneging-wrap color'>
// // //                                                                                         <label>Button Color</label>
// // //                                                                                         <input
// // //                                                                                             type="color"
// // //                                                                                             value={field.headerbtncolor}
// // //                                                                                             onChange={(e) => {
// // //                                                                                                 setFields(prevFields =>
// // //                                                                                                     prevFields.map(f =>
// // //                                                                                                         f.id === field.id ? { ...f, headerbtncolor: e.target.value } : f
// // //                                                                                                     )
// // //                                                                                                 );
// // //                                                                                             }}
// // //                                                                                         />
// // //                                                                                     </div>
// // //                                                                                     <div className='form-builder-chaneging-wrap number'>
// // //                                                                                         <label>Button Padding</label>
// // //                                                                                         <input
// // //                                                                                             type="number"
// // //                                                                                             value={field.headingbtnPadding}
// // //                                                                                             onChange={(e) => {
// // //                                                                                                 setFields(prevFields =>
// // //                                                                                                     prevFields.map(f =>
// // //                                                                                                         f.id === field.id ? { ...f, headingbtnPadding: e.target.value } : f
// // //                                                                                                     )
// // //                                                                                                 );
// // //                                                                                             }}
// // //                                                                                             placeholder="Padding"
// // //                                                                                         />
// // //                                                                                     </div>
// // //                                                                                     <div className='form-builder-chaneging-wrap number'>
// // //                                                                                         <label>Button Radious</label>
// // //                                                                                         <input
// // //                                                                                             type="number"
// // //                                                                                             value={field.headingbtnradious}
// // //                                                                                             onChange={(e) => {
// // //                                                                                                 setFields(prevFields =>
// // //                                                                                                     prevFields.map(f =>
// // //                                                                                                         f.id === field.id ? { ...f, headingbtnradious: e.target.value } : f
// // //                                                                                                     )
// // //                                                                                                 );
// // //                                                                                             }}
// // //                                                                                             placeholder="Padding"
// // //                                                                                         />
// // //                                                                                     </div>
// // //                                                                                     <div className='form-builder-chaneging-wrap number'>
// // //                                                                                         <label>Button Height</label>
// // //                                                                                         <input
// // //                                                                                             type="number"
// // //                                                                                             value={field.headingbtnheight}
// // //                                                                                             onChange={(e) => {
// // //                                                                                                 setFields(prevFields =>
// // //                                                                                                     prevFields.map(f =>
// // //                                                                                                         f.id === field.id ? { ...f, headingbtnheight: e.target.value } : f
// // //                                                                                                     )
// // //                                                                                                 );
// // //                                                                                             }}
// // //                                                                                             placeholder="Padding"
// // //                                                                                         />
// // //                                                                                     </div>
// // //                                                                                     <div className='form-builder-chaneging-wrap number'>
// // //                                                                                         <label>Button Width</label>
// // //                                                                                         <input
// // //                                                                                             type="number"
// // //                                                                                             value={field.headingbtnwidth}
// // //                                                                                             onChange={(e) => {
// // //                                                                                                 setFields(prevFields =>
// // //                                                                                                     prevFields.map(f =>
// // //                                                                                                         f.id === field.id ? { ...f, headingbtnwidth: e.target.value } : f
// // //                                                                                                     )
// // //                                                                                                 );
// // //                                                                                             }}
// // //                                                                                             placeholder="Padding"
// // //                                                                                         />
// // //                                                                                     </div>

// // //                                                                                     <div className='form-builder-chaneging-wrap number'>
// // //                                                                                         <label>Button Font-Size</label>
// // //                                                                                         <input
// // //                                                                                             type="number"
// // //                                                                                             value={field.headingbtnFontSize}
// // //                                                                                             onChange={(e) => {
// // //                                                                                                 setFields(prevFields =>
// // //                                                                                                     prevFields.map(f =>
// // //                                                                                                         f.id === field.id ? { ...f, headingbtnFontSize: e.target.value } : f
// // //                                                                                                     )
// // //                                                                                                 );
// // //                                                                                             }}
// // //                                                                                             placeholder="Padding"
// // //                                                                                         />
// // //                                                                                     </div>

// // //                                                                                 </>

// // //                                                                             )}
// // //                                                                         </div>

// // //                                                                         <div className='form-builder-chaneging-wrap image'>
// // //                                                                             <label>Background Image</label>
// // //                                                                             <input
// // //                                                                                 type="file"
// // //                                                                                 accept="image/*"
// // //                                                                                 onChange={(e) => handleFileChange(e, field.id)}
// // //                                                                             />

// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap preview '>
// // //                                                                             {field.headingbgImage && (
// // //                                                                                 <div className="image-preview">
// // //                                                                                     <img
// // //                                                                                         src={field.headingbgImage}
// // //                                                                                         alt="Background Preview"
// // //                                                                                         style={{ maxWidth: '100%', maxHeight: '150px', objectFit: 'cover' }}
// // //                                                                                     />
// // //                                                                                 </div>
// // //                                                                             )}
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // //                                                                             <label> Background Color</label>
// // //                                                                             <input
// // //                                                                                 type="color"
// // //                                                                                 value={field.headingbg || '#ffffff'}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, headingbg: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // //                                                                             <label> Padding</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.headingPadding}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, headingPadding: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                                 placeholder="Padding"
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // //                                                                             <label> Letter Spacing</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.headingLetterSpacing}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, headingLetterSpacing: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                                 placeholder="Letter Spacing"
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap'>
// // //                                                                             <label>Text Align </label>
// // //                                                                             <select
// // //                                                                                 value={field.headingTextAlign}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, headingTextAlign: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             >
// // //                                                                                 <option value="">Select text align</option>
// // //                                                                                 <option value="left">left</option>
// // //                                                                                 <option value="center">center</option>
// // //                                                                                 <option value="right">right</option>
// // //                                                                             </select>
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // //                                                                             <label> Font-Weight</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.headingFontWeight}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, headingFontWeight: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}

// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // //                                                                             <label>Border Color</label>
// // //                                                                             <input
// // //                                                                                 type="color"
// // //                                                                                 value={field.headingBorderColor}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, headingBorderColor: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>

// // //                                                                         <div className='form-builder-chaneging-wrap number' >
// // //                                                                             <label>Border Width (px)</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.headingBorderWidth}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, headingBorderWidth: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap'>
// // //                                                                             <label>Border Style</label>
// // //                                                                             <select
// // //                                                                                 value={field.headingBorderStyle}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, headingBorderStyle: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             >
// // //                                                                                 <option value="solid">Solid</option>
// // //                                                                                 <option value="dashed">Dashed</option>
// // //                                                                                 <option value="dotted">Dotted</option>
// // //                                                                             </select>
// // //                                                                         </div>
// // //                                                                     </div>
// // //                                                                 );
// // //                                                             }

// // //                                                             if (field.id === selectedFieldId && field.type === 'description') {
// // //                                                                 return (
// // //                                                                     <div key={field.id} className="form-builder-chaneging-wrap">
// // //                                                                         <label>Description Text</label>
// // //                                                                         <textarea
// // //                                                                             type="text"
// // //                                                                             value={field.descriptionText || field.value || ''}
// // //                                                                             onChange={(e) => handleDescriptionChange(field.id, e.target.value)}
// // //                                                                             placeholder="Enter Description"
// // //                                                                         />

// // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // //                                                                             <label>Font Size (px)</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.descritionFontSize}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, descritionFontSize: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // //                                                                             <label>Font-Weight</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.descritionFontWeight}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, descritionFontWeight: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // //                                                                             <label> Color</label>
// // //                                                                             <input
// // //                                                                                 type="color"
// // //                                                                                 value={field.descritionColor}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, descritionColor: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // //                                                                             <label> Background Color</label>
// // //                                                                             <input
// // //                                                                                 type="color"
// // //                                                                                 value={field.descriptionbg || '#ffffff'}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, descriptionbg: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // //                                                                             <label> Padding</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.descriptionPadding}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, descriptionPadding: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                                 placeholder="Padding"
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // //                                                                             <label> Letter Spacing</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.descriptionLetterSpacing}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, descriptionLetterSpacing: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                                 placeholder="Letter Spacing"
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap'>
// // //                                                                             <label>Text Align </label>
// // //                                                                             <select
// // //                                                                                 value={field.descriptionTextAlign}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, descriptionTextAlign: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             >
// // //                                                                                 <option value="">Select text align</option>
// // //                                                                                 <option value="left">left</option>
// // //                                                                                 <option value="center">center</option>
// // //                                                                                 <option value="right">right</option>
// // //                                                                             </select>
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // //                                                                             <label>Border Color</label>
// // //                                                                             <input
// // //                                                                                 type="color"
// // //                                                                                 value={field.descriptionBorderColor}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, descriptionBorderColor: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>

// // //                                                                         <div className='form-builder-chaneging-wrap number' >
// // //                                                                             <label>Border Width (px)</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.descriptionBorderWidth}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, descriptionBorderWidth: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap'>
// // //                                                                             <label>Border Style</label>
// // //                                                                             <select
// // //                                                                                 value={field.descriptionBorderStyle}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, descriptionBorderStyle: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             >
// // //                                                                                 <option value="solid">Solid</option>
// // //                                                                                 <option value="dashed">Dashed</option>
// // //                                                                                 <option value="dotted">Dotted</option>
// // //                                                                             </select>
// // //                                                                         </div>
// // //                                                                     </div>

// // //                                                                 );
// // //                                                             }
// // //                                                             if (field.id === selectedFieldId && field.type === "images") {
// // //                                                                 return (
// // //                                                                     <div key={field.id} className="form-builder-chaneging-wrap file">
// // //                                                                         <div>
// // //                                                                             {field.value ? (
// // //                                                                                 <img src={field.value} alt="Uploaded" style={{ maxWidth: '100%', height: 'auto' }} />
// // //                                                                             ) : (
// // //                                                                                 <p>No Image Provided</p>
// // //                                                                             )}
// // //                                                                         </div>
// // //                                                                         <button className='update-image' onClick={() => setImageFieldId(field.id)}>Update Image</button>
// // //                                                                         <button className='update-image' onClick={() => removeField(field.id)}>Remove Image</button>
// // //                                                                         {imageFieldId === field.id && (
// // //                                                                             <input type="file" accept="image/*" onChange={(e) => handleImageUpload(e, field.id)} />
// // //                                                                         )}
// // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // //                                                                             <label>Width</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.imgWidth}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, imgWidth: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap'>
// // //                                                                             <label>Text Align </label>
// // //                                                                             <select
// // //                                                                                 value={field.imgTextAlign}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, imgTextAlign: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             >
// // //                                                                                 <option value="">Select text align</option>
// // //                                                                                 <option value="left">left</option>
// // //                                                                                 <option value="center">center</option>
// // //                                                                                 <option value="right">right</option>
// // //                                                                             </select>
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // //                                                                             <label> Background Color</label>
// // //                                                                             <input
// // //                                                                                 type="color"
// // //                                                                                 value={field.imgbg || '#ffffff'}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, imgbg: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // //                                                                             <label> Padding</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.imgPadding}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, imgPadding: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                                 placeholder="Padding"
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // //                                                                             <label>Border Color</label>
// // //                                                                             <input
// // //                                                                                 type="color"
// // //                                                                                 value={field.imgBorderColor}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, imgBorderColor: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>

// // //                                                                         <div className='form-builder-chaneging-wrap number' >
// // //                                                                             <label>Border Width (px)</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.imgBorderWidth}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, imgBorderWidth: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap'>
// // //                                                                             <label>Border Style</label>
// // //                                                                             <select
// // //                                                                                 value={field.imgBorderStyle}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, imgBorderStyle: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             >
// // //                                                                                 <option value="solid">Solid</option>
// // //                                                                                 <option value="dashed">Dashed</option>
// // //                                                                                 <option value="dotted">Dotted</option>
// // //                                                                             </select>
// // //                                                                         </div>
// // //                                                                     </div>
// // //                                                                 );
// // //                                                             }
// // //                                                             if (field.id === selectedFieldId && field.type === "divider") {
// // //                                                                 return (
// // //                                                                     <div key={field.id} className="form-builder-chaneging-wrap">
// // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // //                                                                             <label>Divider Color</label>
// // //                                                                             <input
// // //                                                                                 type="color"
// // //                                                                                 value={field.dividerColor}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, dividerColor: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // //                                                                             <label>Width</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.dividerWidth}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, dividerWidth: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // //                                                                             <label>Height</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.dividerheight}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, dividerheight: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>

// // //                                                                     </div>
// // //                                                                 );
// // //                                                             }

// // //                                                             if (field.id === selectedFieldId && field.type === "html convert") {
// // //                                                                 return (
// // //                                                                     <div key={field.id} className="form-builder-chaneging-wrap color">
// // //                                                                         <label>Html Convert</label>
// // //                                                                         <div className="form-builder-and-preview">
// // //                                                                             {fields.map((field) => renderField(field))}

// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // //                                                                             <label> Color</label>
// // //                                                                             <input
// // //                                                                                 type="color"
// // //                                                                                 value={field.htmlColor}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, htmlColor: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // //                                                                             <label>Font Size (px)</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.htmlFontSize}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, htmlFontSize: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // //                                                                             <label>Padding (px)</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.htmlPadding}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, htmlPadding: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>

// // //                                                                     </div>
// // //                                                                 );
// // //                                                             }
// // //                                                             if (field.id === selectedFieldId && field.type === "split") {
// // //                                                                 return (
// // //                                                                     <div key={field.id} className="form-builder-chaneging-wrap color">
// // //                                                                         <div style={{ marginTop: '20px' }}>
// // //                                                                             <label htmlFor="widthSelect">Adjust Width: </label>
// // //                                                                             <select
// // //                                                                                 id="widthSelect"
// // //                                                                                 onChange={(e) => handleWidthChange(e.target.value)}
// // //                                                                                 value={fields.find((f) => f.id === selectedFieldId)?.width || '50%'}
// // //                                                                             >
// // //                                                                                 <option value="25%">25%</option>
// // //                                                                                 <option value="50%">50%</option>
// // //                                                                                 <option value="75%">75%</option>
// // //                                                                             </select>

// // //                                                                             <div style={{ marginTop: '10px' }}>
// // //                                                                                 <label htmlFor="contentType">Content Type: </label>
// // //                                                                                 <select
// // //                                                                                     id="contentType"
// // //                                                                                     onChange={(e) =>
// // //                                                                                         setFields((prevFields) =>
// // //                                                                                             prevFields.map((f) =>
// // //                                                                                                 f.id === selectedFieldId ? { ...f, contentType: e.target.value } : f
// // //                                                                                             )
// // //                                                                                         )
// // //                                                                                     }
// // //                                                                                     value={fields.find((f) => f.id === selectedFieldId)?.contentType || 'text'}
// // //                                                                                 >
// // //                                                                                     <option value="text">Text</option>
// // //                                                                                     <option value="image">Image</option>
// // //                                                                                 </select>
// // //                                                                             </div>

// // //                                                                             <div style={{ marginTop: '10px' }}>
// // //                                                                                 {fields.find((f) => f.id === selectedFieldId)?.contentType === 'text' ? (
// // //                                                                                     <div>
// // //                                                                                         {ReactQuill ? (
// // //                                                                                             <ReactQuill
// // //                                                                                                 value={fields.find((f) => f.id === selectedFieldId)?.value || ''}
// // //                                                                                                 onChange={(value) => {
// // //                                                                                                     setFields((prevFields) =>
// // //                                                                                                         prevFields.map((f) =>
// // //                                                                                                             f.id === selectedFieldId ? { ...f, value: value } : f
// // //                                                                                                         )
// // //                                                                                                     );
// // //                                                                                                 }}
// // //                                                                                                 modules={{ toolbar: toolbarOptions }}
// // //                                                                                             />
// // //                                                                                         ) : (
// // //                                                                                             <p>Loading editor...</p>
// // //                                                                                         )}
// // //                                                                                     </div>
// // //                                                                                 ) : (
// // //                                                                                     <input
// // //                                                                                         type="file"
// // //                                                                                         accept="image/*"
// // //                                                                                         onChange={(e) => {
// // //                                                                                             const file = e.target.files[0];
// // //                                                                                             if (file) {
// // //                                                                                                 const reader = new FileReader();
// // //                                                                                                 reader.onload = () => {
// // //                                                                                                     setFields((prevFields) =>
// // //                                                                                                         prevFields.map((f) =>
// // //                                                                                                             f.id === selectedFieldId
// // //                                                                                                                 ? { ...f, value: reader.result }
// // //                                                                                                                 : f
// // //                                                                                                         )
// // //                                                                                                     );
// // //                                                                                                 };
// // //                                                                                                 reader.readAsDataURL(file);
// // //                                                                                             }
// // //                                                                                         }}
// // //                                                                                     />
// // //                                                                                 )}
// // //                                                                             </div>
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // //                                                                             <label> Background color</label>
// // //                                                                             <input
// // //                                                                                 type="color"
// // //                                                                                 value={field.splitbg}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, splitbg: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // //                                                                             <label>Padding</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.splitPadding}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, splitPadding: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>

// // //                                                                     </div>
// // //                                                                 );
// // //                                                             }

// // //                                                             if (field.id === selectedFieldId && field.type === "video") {
// // //                                                                 return (
// // //                                                                     <div key={field.id} className="form-builder-chaneging-wrap file">
// // //                                                                         <div className='form-builder-chaneging-wrap '>
// // //                                                                             <label>Video Url</label>
// // //                                                                             <input
// // //                                                                                 type="text"
// // //                                                                                 value={field.value}
// // //                                                                                 onChange={(e) => handleVideoChange(e, field.id)}
// // //                                                                                 placeholder="Enter video URL"
// // //                                                                             />
// // //                                                                             <iframe
// // //                                                                                 src={getVideoEmbedUrl(field.value)}
// // //                                                                                 title="Video Preview"
// // //                                                                                 frameBorder="0"
// // //                                                                                 allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
// // //                                                                                 allowFullScreen
// // //                                                                             ></iframe>
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // //                                                                             <label>Padding</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.videoPadding}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, videoPadding: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // //                                                                             <label>Border Color</label>
// // //                                                                             <input
// // //                                                                                 type="color"
// // //                                                                                 value={field.videoBorderColor}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, videoBorderColor: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>

// // //                                                                         <div className='form-builder-chaneging-wrap number' >
// // //                                                                             <label>Border Width (px)</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.videoBorderWidth}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, videoBorderWidth: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap'>
// // //                                                                             <label>Border Style</label>
// // //                                                                             <select
// // //                                                                                 value={field.videoBorderStyle}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, videoBorderStyle: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             >
// // //                                                                                 <option value="solid">Solid</option>
// // //                                                                                 <option value="dashed">Dashed</option>
// // //                                                                                 <option value="dotted">Dotted</option>
// // //                                                                             </select>
// // //                                                                         </div>

// // //                                                                     </div>
// // //                                                                 );
// // //                                                             }

// // //                                                             if (field.id === selectedFieldId && field.type === "spacer") {
// // //                                                                 return (
// // //                                                                     <div key={field.id} className="form-builder-chaneging-wrap number">
// // //                                                                         <div className='form-builder-chaneging-wrap number' >
// // //                                                                             <label htmlFor="spacer-height-input">Spacer Height (px):</label>
// // //                                                                             <input
// // //                                                                                 id="spacer-height-input"
// // //                                                                                 type="number"
// // //                                                                                 value={field.spacerHeight}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, spacerHeight: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                                 min="0"
// // //                                                                             />
// // //                                                                             <p style={{ color: '#A8A8A8' }} className='spacer-height-text'>Current Spacer Height: {field.spacerHeight}px</p>
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // //                                                                             <label> Spacer Background color</label>
// // //                                                                             <input
// // //                                                                                 type="color"
// // //                                                                                 value={field.spacerbg}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, spacerbg: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                     </div>
// // //                                                                 );
// // //                                                             }

// // //                                                             if (field.id === selectedFieldId && field.type === 'button') {
// // //                                                                 return (
// // //                                                                     <div key={field.id}>
                                                                       
// // //                                                                         <div className='form-builder-chaneging-wrap'>
// // //                                                                             <label>Button Label</label>
// // //                                                                             <input
// // //                                                                                 type="text"
// // //                                                                                 value={buttonLabel}
// // //                                                                                 onChange={(e) => setButtonLabel(e.target.value)}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // //                                                                             <label>Font Size (px)</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={fontSize}
// // //                                                                                 onChange={(e) => setFontSize(e.target.value)}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap'>
// // //                                                                             <label>Button Padding (px)</label>
// // //                                                                             <input
// // //                                                                                 type="text"
// // //                                                                                 value={padding}
// // //                                                                                 onChange={(e) => setPadding(e.target.value)}
// // //                                                                             />
// // //                                                                         </div>

// // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // //                                                                             <label>Width (px)</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={width}
// // //                                                                                 onChange={(e) => setWidth(e.target.value)}
// // //                                                                             />
// // //                                                                         </div>

// // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // //                                                                             <label>Height (px)</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={height}
// // //                                                                                 onChange={(e) => setHeight(e.target.value)}
// // //                                                                             />
// // //                                                                         </div>

// // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // //                                                                             <label>Background Color</label>
// // //                                                                             <input
// // //                                                                                 type="color"
// // //                                                                                 value={btnbackgroundColor}
// // //                                                                                 onChange={(e) => setBtnBackgroundColor(e.target.value)}
// // //                                                                             />
// // //                                                                         </div>

// // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // //                                                                             <label>Color</label>
// // //                                                                             <input
// // //                                                                                 type="color"
// // //                                                                                 value={field.buttonTextColor}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, buttonTextColor: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap'>
// // //                                                                             <label>
// // //                                                                                 Button Url
// // //                                                                                 <input
// // //                                                                                     type="text"
// // //                                                                                     value={field.buttonUrll}
// // //                                                                                     onChange={(e) => {
// // //                                                                                         setFields(prevFields =>
// // //                                                                                             prevFields.map(f =>
// // //                                                                                                 f.id === field.id ? { ...f, buttonUrll: e.target.value } : f
// // //                                                                                             )
// // //                                                                                         );
// // //                                                                                     }}
// // //                                                                                 />
// // //                                                                             </label>
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // //                                                                             <label> Letter Spacing</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.buttonLetterSpacing}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, buttonLetterSpacing: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                                 placeholder="Letter Spacing"
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // //                                                                             <label> Border-Radious</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.buttonradious}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, buttonradious: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                                 placeholder=" Border-Radious"
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // //                                                                             <label>Border Color</label>
// // //                                                                             <input
// // //                                                                                 type="color"
// // //                                                                                 value={field.buttonBorderColor}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, buttonBorderColor: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>

// // //                                                                         <div className='form-builder-chaneging-wrap number' >
// // //                                                                             <label>Border Width (px)</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.buttonBorderWidth}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, buttonBorderWidth: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap'>
// // //                                                                             <label>Border Style</label>
// // //                                                                             <select
// // //                                                                                 value={field.buttonBorderStyle}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, buttonBorderStyle: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             >
// // //                                                                                 <option value="solid">Solid</option>
// // //                                                                                 <option value="dashed">Dashed</option>
// // //                                                                                 <option value="dotted">Dotted</option>
// // //                                                                             </select>
// // //                                                                         </div>

// // //                                                                     </div>
// // //                                                                 );
// // //                                                             }
// // //                                                             if (field.type === "socalicon" && field.id === selectedFieldId) {
// // //                                                                 return (
// // //                                                                     <div key={field.id} className="description-field">

// // //                                                                         <div className="form-builder-chaneging-wrap">
// // //                                                                             <h2>Edit Social Icons</h2>

// // //                                                                             <div className='form-builder-chaneging-wrap'>
// // //                                                                                 <label>
// // //                                                                                     <div className='custom-checkbox socalicons'>
// // //                                                                                         <input
// // //                                                                                             type="checkbox"
// // //                                                                                             checked={!selectedIcons.facebook.isHidden}
// // //                                                                                             onChange={() => handleToggleIcon('facebook')}
// // //                                                                                         />
// // //                                                                                         <i class="fa fa-facebook-square" aria-hidden="true"></i>
// // //                                                                                         Facebook URL
// // //                                                                                     </div>
// // //                                                                                     <input
// // //                                                                                         type="text"
// // //                                                                                         value={selectedIcons.facebook.url}
// // //                                                                                         onChange={(e) => handleIconUrlChange(e, 'facebook')}
// // //                                                                                         style={{ display: selectedIcons.facebook.isHidden ? 'none' : 'block' }}
// // //                                                                                     />
// // //                                                                                 </label>
// // //                                                                             </div>
// // //                                                                             <div className='form-builder-chaneging-wrap'>
// // //                                                                                 <label>
// // //                                                                                     <div className='custom-checkbox socalicons'>
// // //                                                                                         <input
// // //                                                                                             type="checkbox"
// // //                                                                                             checked={!selectedIcons.twitter.isHidden}
// // //                                                                                             onChange={() => handleToggleIcon('twitter')}
// // //                                                                                         />
// // //                                                                                         <i class="fa fa-twitter" aria-hidden="true"></i>
// // //                                                                                         Twitter URL
// // //                                                                                     </div>
// // //                                                                                     <input
// // //                                                                                         type="text"
// // //                                                                                         value={selectedIcons.twitter.url}
// // //                                                                                         onChange={(e) => handleIconUrlChange(e, 'twitter')}
// // //                                                                                         style={{ display: selectedIcons.twitter.isHidden ? 'none' : 'block' }}
// // //                                                                                     />
// // //                                                                                 </label>
// // //                                                                             </div>
// // //                                                                             <div className='form-builder-chaneging-wrap'>
// // //                                                                                 <label>
// // //                                                                                     <div className='custom-checkbox socalicons'>
// // //                                                                                         <input
// // //                                                                                             type="checkbox"
// // //                                                                                             checked={!selectedIcons.instagram.isHidden}
// // //                                                                                             onChange={() => handleToggleIcon('instagram')}
// // //                                                                                         />
// // //                                                                                         <i class="fa fa-instagram" aria-hidden="true"></i>
// // //                                                                                         Instagram URL
// // //                                                                                     </div>
// // //                                                                                     <input
// // //                                                                                         type="text"
// // //                                                                                         value={selectedIcons.instagram.url}
// // //                                                                                         onChange={(e) => handleIconUrlChange(e, 'instagram')}
// // //                                                                                         style={{ display: selectedIcons.instagram.isHidden ? 'none' : 'block' }}
// // //                                                                                     />
// // //                                                                                 </label>
// // //                                                                             </div>
// // //                                                                             <div className='form-builder-chaneging-wrap'>
// // //                                                                                 <button onClick={() => setShowFileUpload((prev) => !prev)}> + </button>
// // //                                                                                 {showFileUpload && (
// // //                                                                                     <div className='form-builder-chaneging-wrap file'>
// // //                                                                                         <input
// // //                                                                                             type="file"
// // //                                                                                             accept="image/*"
// // //                                                                                             onChange={handleCustomIconUpload}
// // //                                                                                             multiple
// // //                                                                                         />
// // //                                                                                     </div>
// // //                                                                                 )}
// // //                                                                                 {customIcons.length > 0 && (
// // //                                                                                     <div>
// // //                                                                                         {customIcons.map((icon, index) => (
// // //                                                                                             <div key={index} className='form-builder-chaneging-wrap  '>
// // //                                                                                                 <div className='form-builder-chaneging-wrap socal'>
// // //                                                                                                     <div className='custom-checkbox'>
// // //                                                                                                         <input
// // //                                                                                                             type="checkbox"
// // //                                                                                                             checked={!icon.isHidden}
// // //                                                                                                             onChange={() => toggleCustomIconVisibility(index)}
// // //                                                                                                         />

// // //                                                                                                     </div>
// // //                                                                                                     <div className='img-socal-costom'>
// // //                                                                                                         <img src={icon.src} alt={icon.name} style={{ width: "100%" }} />
// // //                                                                                                     </div>
// // //                                                                                                 </div>

// // //                                                                                                 <input
// // //                                                                                                     type="text"
// // //                                                                                                     value={icon.url}
// // //                                                                                                     onChange={(e) => handleCustomIconUrlChange(e, index)}
// // //                                                                                                     placeholder="Custom URL"
// // //                                                                                                 />

// // //                                                                                             </div>
// // //                                                                                         ))}
// // //                                                                                     </div>
// // //                                                                                 )}
// // //                                                                             </div>

// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // //                                                                             <label>Social Icon Height (px)</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={socalIconHeight}
// // //                                                                                 onChange={(e) => setSocalIconHeight(e.target.value)}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // //                                                                             <label>Social Icon Width (px)</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={socalIconWidth}
// // //                                                                                 onChange={(e) => setSocalIconWidth(e.target.value)}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap'>
// // //                                                                             <label>Text Align </label>
// // //                                                                             <select
// // //                                                                                 value={field.socaliconTextAlign}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, socaliconTextAlign: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             >
// // //                                                                                 <option value="">Select text align</option>
// // //                                                                                 <option value="left">left</option>
// // //                                                                                 <option value="center">center</option>
// // //                                                                                 <option value="right">right</option>
// // //                                                                             </select>
// // //                                                                         </div>
// // //                                                                         <div className='form-builder-chaneging-wrap number' >
// // //                                                                             <label>Padding (px)</label>
// // //                                                                             <input
// // //                                                                                 type="number"
// // //                                                                                 value={field.socalIconPadding}
// // //                                                                                 onChange={(e) => {
// // //                                                                                     setFields(prevFields =>
// // //                                                                                         prevFields.map(f =>
// // //                                                                                             f.id === field.id ? { ...f, socalIconPadding: e.target.value } : f
// // //                                                                                         )
// // //                                                                                     );
// // //                                                                                 }}
// // //                                                                             />
// // //                                                                         </div>
// // //                                                                     </div>
// // //                                                                 );
// // //                                                             }

// // //                                                             return null;
// // //                                                         })}
// // //                                                     </div>
// // //                                                 )}
// // //                                             </div>
// // //                                         </div>

// // //                                     </div>)}
// // //                                 </div>
// // //                             </div>
// // //                         </div>
// // //                     </div>
// // //                     <div className='btn_form_bulider'>
// // //                         <div className="form-submission-wrp">
// // //                             <button className="cancle-form-btn" >Cancle</button>
// // //                         </div>
// // //                         <div className="form-submission-wrp">
// // //                             <button className="create-form-btn action_btn" onClick={createOrUpdateForm} >Save</button>
// // //                         </div>
// // //                     </div>
// // //                 </div>

// // //             </div>
// // //             <div className='form-builder-wrap-popup-inputs'>
// // //                 <div className="form-builder-prodcut-all">
// // //                     {isPopupOpen && (
// // //                         <div className="popup ">
// // //                             <div className="popup-content product">
// // //                                 <button className="procduct-canclebtn" onClick={handleClosePopup}>
// // //                                     <img src={productcancle} />
// // //                                 </button>
// // //                                 <div className="product-list">
// // //                                     {currentProducts.length > 0 ? (
// // //                                         currentProducts.map((product) => (
// // //                                             <div key={product.id} className="product-item">
// // //                                                 <div className='product-item-flex'>
// // //                                                     <div className='custom-checkbox'>
// // //                                                         <input
// // //                                                             type="checkbox"
// // //                                                             checked={selectedProducts.some((p) => p.id === product.id)}
// // //                                                             onChange={(e) => handleProductClick(product, e.target.checked)}
// // //                                                         />
// // //                                                     </div>
// // //                                                     <div className='product-itm-all-inline'>
// // //                                                         {product.images && product.images.length > 0 && (
// // //                                                             <div className="images-galley">
// // //                                                                 <img
// // //                                                                     src={product.images[0].src}
// // //                                                                     alt={product.images[0].alt || 'Product Image'}

// // //                                                                 />
// // //                                                             </div>
// // //                                                         )}
// // //                                                         <div className='product-itm-all-prices'>
// // //                                                             <h3>{product.title}</h3>
// // //                                                             {product.variants && product.variants.length > 0 &&
// // //                                                                 (<p className='price-product-all'>Price: ${product.variants[0].price}</p>)}
// // //                                                         </div>
// // //                                                     </div>

// // //                                                 </div>


// // //                                             </div>
// // //                                         ))
// // //                                     ) : (
// // //                                         <p>No products available.</p>
// // //                                     )}
// // //                                 </div>

// // //                                 {totalPages > 1 && (
// // //                                     <div className="pagination">
// // //                                         <div className='show-all enteries'>
// // //                                             Showing data {currentProducts.length} of {products.length} products
// // //                                         </div>
// // //                                         <nav>
// // //                                             <ul className="xs:mt-0 mt-2 inline-flex items-center -space-x-px">
// // //                                                 <li>
// // //                                                     <button
// // //                                                         type="button"
// // //                                                         disabled={currentPage === 1}
// // //                                                         onClick={() => handlePageChange(currentPage - 1)}
// // //                                                     >
// // //                                                         <img src={left} alt="Previous" />
// // //                                                     </button>
// // //                                                 </li>
// // //                                                 {generatePageNumbers().map((page, index) => (
// // //                                                     <li key={index} aria-current={currentPage === page ? 'page' : undefined}>
// // //                                                         {page === '...' ? (
// // //                                                             <span>...</span>
// // //                                                         ) : (
// // //                                                             <button
// // //                                                                 type="button"
// // //                                                                 onClick={() => handlePageChange(page)}
// // //                                                                 className={`${currentPage === page ? 'active' : 'inactive'}`}
// // //                                                             >
// // //                                                                 {page}
// // //                                                             </button>
// // //                                                         )}
// // //                                                     </li>
// // //                                                 ))}
// // //                                                 <li>
// // //                                                     <button
// // //                                                         type="button"
// // //                                                         disabled={currentPage === totalPages}
// // //                                                         onClick={() => handlePageChange(currentPage + 1)}
// // //                                                     >
// // //                                                         <img src={right} alt="Next" />
// // //                                                     </button>
// // //                                                 </li>
// // //                                             </ul>
// // //                                         </nav>

// // //                                     </div>
// // //                                 )}
// // //                             </div>
// // //                         </div>
// // //                     )}
// // //                 </div>
// // //                 {showImagePopup && (
// // //                     <div className="popup">
// // //                         <div className="popup-content">
// // //                             <h3>Upload Image</h3>
// // //                             <input type="file" accept="image/*" onChange={handleImageUpload} />
// // //                             <button onClick={() => setShowImagePopup(false)}>Close</button>
// // //                         </div>
// // //                     </div>
// // //                 )}

// // //                 {showHeadingPopup && (
// // //                     <div className="popup">
// // //                         <div className="popup-content">
// // //                             <div className="options">
// // //                                 <button style={{ padding: '10px', color: 'white', background: '#FD633E', fontSize: '14px', border: 'none' }} onClick={() => setSelectedOption('heading')}>Heading</button>
// // //                                 <button style={{ padding: '10px', color: 'white', background: '#F27F01', fontSize: '14px', border: 'none' }} onClick={() => setSelectedOption('image')}>Image</button>
// // //                                 <button style={{ padding: '10px', color: 'white', background: '#27A196', fontSize: '14px', border: 'none' }} onClick={() => setSelectedOption('content')}>Content</button>
// // //                                 <button style={{ padding: '10px', color: 'white', background: '#D9A425', fontSize: '14px', border: 'none' }} onClick={() => setSelectedOption('url')}>Button URL</button>
// // //                             </div>
// // //                             {selectedOption === 'heading' && (
// // //                                 <div className="heading-section">
// // //                                     <label>
// // //                                         <input
// // //                                             type="text"
// // //                                             value={headingText}
// // //                                             onChange={(e) => setHeadingText(e.target.value)}
// // //                                             placeholder="Heading Text"
// // //                                         />
// // //                                     </label>
// // //                                     <label>
// // //                                         <select value={headingLevel} onChange={(e) => setHeadingLevel(e.target.value)}>
// // //                                             <option value="h1">H1</option>
// // //                                             <option value="h2">H2</option>
// // //                                             <option value="h3">H3</option>
// // //                                             <option value="h4">H4</option>
// // //                                             <option value="h5">H5</option>
// // //                                             <option value="h6">H6</option>
// // //                                         </select>
// // //                                     </label>
// // //                                     <label>
// // //                                         <input
// // //                                             type="text"
// // //                                             value={headingFontSize}
// // //                                             onChange={(e) => setHeadingFontSize(e.target.value)}
// // //                                             placeholder="Font Size"
// // //                                         />
// // //                                     </label>
// // //                                 </div>
// // //                             )}
// // //                             {selectedOption === 'content' && (
// // //                                 <div className="content-section">
// // //                                     <div className='admin-input email'>
// // //                                         <div className='admin-label'>
// // //                                             <label htmlFor="content">Content</label>
// // //                                         </div>
// // //                                         {ReactQuill ? (
// // //                                             <ReactQuill
// // //                                                 value={editorValue}
// // //                                                 onChange={setEditorValue}
// // //                                                 modules={{ toolbar: toolbarOptions }}
// // //                                             />
// // //                                         ) : (
// // //                                             <p>Loading editor...</p>
// // //                                         )}
// // //                                     </div>
// // //                                 </div>
// // //                             )}
// // //                             {selectedOption === 'url' && (
// // //                                 <div className="form-builder-changing-wrap url url-section">
// // //                                     <button style={{
// // //                                         backgroundColor: '#9474ff',
// // //                                         border: '1px solid black',
// // //                                         color: 'white',
// // //                                         padding: '10px',
// // //                                         borderRadius: '4px',
// // //                                         height: '40px',
// // //                                         width: '100px',
// // //                                         fontSize: '16px'

// // //                                     }}>Vist Now</button>
// // //                                     <label>
// // //                                         URL:
// // //                                         <input
// // //                                             type="url"
// // //                                             value={headingUrl}
// // //                                             onChange={(e) => setHeadingUrl(e.target.value)}
// // //                                             placeholder="Enter URL (optional)"
// // //                                         />
// // //                                     </label>
// // //                                 </div>
// // //                             )}

// // //                             {selectedOption === 'image' && (
// // //                                 <div className="form-builder-changing-wrap file section">
// // //                                     <label> Image:
// // //                                         <input
// // //                                             type="file"
// // //                                             accept="image/*"
// // //                                             onChange={(e) => {
// // //                                                 const file = e.target.files[0];
// // //                                                 if (file) {
// // //                                                     const reader = new FileReader();
// // //                                                     reader.onloadend = () => {
// // //                                                         setImageUrl(reader.result);
// // //                                                     };
// // //                                                     reader.readAsDataURL(file);
// // //                                                 }
// // //                                             }}
// // //                                         />
// // //                                         {imageUrl && <img src={imageUrl} alt="Preview" style={{ width: '100px', marginTop: '10px' }} />}
// // //                                     </label>
// // //                                 </div>
// // //                             )}

// // //                             <button onClick={handleAddHeading}>Add Heading</button>
// // //                             <button className='heading_cancle' onClick={() => setShowHeadingPopup(false)}>Close</button>
// // //                         </div>
// // //                     </div>
// // //                 )}
// // //                 {showDescriptionPopup && (
// // //                     <div className="popup">
// // //                         <div className="popup-content">
// // //                             <label>
// // //                                 Description:
// // //                                 <textarea
// // //                                     value={descriptionText}
// // //                                     onChange={(e) => setDescriptionText(e.target.value)}
// // //                                     placeholder="Description"
// // //                                 />
// // //                             </label>
// // //                             <button onClick={handleAddDescription}>Add Description</button>
// // //                             <button className='heading_cancle' onClick={() => setShowDescriptionPopup(false)}>Close</button>
// // //                         </div>
// // //                     </div>
// // //                 )}
// // //                 {isPopupVisibleed && (
// // //                     <div className="popup">
// // //                         <div className="popup-content">
// // //                             <h4>Edit Rich Text</h4>
// // //                             <div className="content-section">
// // //                                 <div className="admin-input email">
// // //                                     <div className="admin-label">
// // //                                         <label htmlFor="content">Content</label>
// // //                                     </div>
// // //                                     <ReactQuill
// // //                                         value={editorValueed}
// // //                                         onChange={handleEditorChangeee}
// // //                                         modules={{ toolbar: toolbarOptions }}
// // //                                     />
// // //                                 </div>
// // //                             </div>

// // //                             <button onClick={handleSave}>Save</button>
// // //                             <button onClick={() => setPopupVisibleed(false)}>Cancel</button>
// // //                         </div>
// // //                     </div>
// // //                 )}
// // //             </div>

// // //         </div >
// // //     );
// // // };

// // // export default EmailTemplateCreate;







// // // // import React, { useState, useEffect, useRef } from 'react';
// // // // import Sortable from 'sortablejs';
// // // // import axios from 'axios';
// // // // import { useLocation } from 'react-router-dom';
// // // // import heading from '../images/heading.png';
// // // // import font from '../images/font-size.png';
// // // // import image from '../images/image-.png';
// // // // import divider2 from '../images/divider.png';
// // // // import btn from '../images/btn.png';
// // // // import emailtemp from '../images/emailtemp.png';
// // // // import phonem from '../images/phonem.png';
// // // // import desk from '../images/desk.png';
// // // // import socail from '../images/socail.png';
// // // // import htmlicon from '../images/htmlicon.png';
// // // // import maximizesize from '../images/maximize-size.png';
// // // // import deletep from '../images/deletep.png';
// // // // import delete1 from '../images/delete.png';
// // // // import facebook from '../images/facebook.png';
// // // // import instagram from '../images/instagram.png';
// // // // import twitter from '../images/twitter.png';
// // // // import videoplay from '../images/videoplay.png';
// // // // import left from '../images/left.png';
// // // // import right from '../images/right.png';
// // // // import product from '../images/product.png';
// // // // import spacer from '../images/spacer.png';
// // // // import spliti from '../images/spliti.png';
// // // // import { format } from 'date-fns';
// // // // import 'react-quill/dist/quill.snow.css';

// // // // import '../index.css';
// // // // import { useNavigate } from 'react-router-dom';
// // // // import { useLoaderData, Link } from "@remix-run/react";
// // // // import { authenticate, apiVersion } from "../shopify.server";

// // // // const toolbarOptions = [
// // // //     [{ header: [1, 2, 3, 4, 5, 6, false] }],
// // // //     ['bold', 'italic', 'underline'],
// // // //     ['link', 'image'],
// // // //     [{ list: 'ordered' }, { list: 'bullet' }],
// // // //     [{ script: 'sub' }, { script: 'super' }],
// // // //     [{ indent: '-1' }, { indent: '+1' }],
// // // //     [{ direction: 'rtl' }],
// // // //     [{ size: ['small', 'medium', 'large', 'huge'] }],
// // // //     [{ color: [] }, { background: [] }],
// // // //     [{ font: [] }],
// // // //     [{ align: [] }],
// // // //     ['clean'],
// // // // ];

// // // // const generateUniqueId = (length = 22) => {
// // // //     const charset = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
// // // //     let uniqueId = '';
// // // //     for (let i = 0; i < length; i++) {
// // // //         const randomIndex = Math.floor(Math.random() * charset.length);
// // // //         uniqueId += charset[randomIndex];
// // // //     }
// // // //     return uniqueId;
// // // // };

// // // // export const loader = async ({ request }) => {
// // // //     try {
// // // //         const { session } = await authenticate.admin(request);
// // // //         const { shop, accessToken } = session;

// // // //         const response = await fetch(
// // // //             `https://${shop}/admin/api/${apiVersion}/products.json`,
// // // //             {
// // // //                 method: "GET",
// // // //                 headers: {
// // // //                     "Content-Type": "application/json",
// // // //                     "X-Shopify-Access-Token": accessToken,
// // // //                 }
// // // //             }
// // // //         );

// // // //         if (!response.ok) {
// // // //             throw new Error(`Failed to fetch products: ${response.statusText}`);
// // // //         }

// // // //         const responseData = await response.json();
// // // //         const products = responseData?.products || [];

// // // //         const productsWithData = products.map(product => {
// // // //             const { variants } = product;
// // // //             const uniqueColors = Array.from(new Set(variants.map(variant => variant.option1))).join(' | ');
// // // //             const uniquePrices = Array.from(new Set(variants.map(variant => variant.price))).join(' | ');
// // // //             const uniqueSizes = Array.from(new Set(variants.map(variant => variant.option2))).join(' | ');

// // // //             return {
// // // //                 ...product,
// // // //                 color: uniqueColors,
// // // //                 price: uniquePrices,
// // // //                 size: uniqueSizes
// // // //             };
// // // //         });

// // // //         return { products: productsWithData, shop, apiVersion };
// // // //     } catch (err) {
// // // //         console.error("Error fetching products:", err.message);
// // // //         return { products: [] };
// // // //     }
// // // // };

// // // // const EmailTemplateCreate = () => {

// // // //     const navigate = useNavigate();
// // // //     const [fields, setFields] = useState([]);
// // // //     const [emailTemplateId, setEmailTemplateId] = useState(null);
// // // //     const formBuilderRef = useRef(null);
// // // //     const [formTitle, setFormTitle] = useState('Email-Template');
// // // //     const [existingTitles, setExistingTitles] = useState([]);
// // // //     const [showImagePopup, setShowImagePopup] = useState(false);
// // // //     const [showHeadingPopup, setShowHeadingPopup] = useState(false);
// // // //     const [showDescriptionPopup, setShowDescriptionPopup] = useState(false);
// // // //     const [headingText, setHeadingText] = useState('');
// // // //     const [headingLevel, setHeadingLevel] = useState('h1');
// // // //     const [selectedOption, setSelectedOption] = useState('heading');
// // // //     const [imageUrl, setImageUrl] = useState(null);
// // // //     const [headingFontSize, setHeadingFontSize] = useState('16');
// // // //     const [descriptionText, setDescriptionText] = useState('');
// // // //     const [backgroundColor, setBackgroundColor] = useState('#ffffff');
// // // //     const [borderRadious, setBorderRadious] = useState(5);
// // // //     const [templatePadding, setTemplatePadding] = useState('20');
// // // //     const [backgroundImage, setBackgroundImage] = useState(null);
// // // //     const [textAlign, setTextAlign] = useState('left');
// // // //     const [imageFieldId, setImageFieldId] = useState(null);
// // // //     const [showField, setShowField] = useState(true);
// // // //     const [showFields, setShowFields] = useState(true);
// // // //     const [showSocialIconPopup, setShowSocialIconPopup] = useState(false);
// // // //     const [selectedFieldId, setSelectedFieldId] = useState(null);
// // // //     const [emailFieldPopup, setEmailFieldPopup] = useState(false);
// // // //     const [activeFieldId, setActiveFieldId] = useState(null);
// // // //     const [socalIconWidth, setSocalIconWidth] = useState(30);
// // // //     const [socalIconHeight, setSocalIconHeight] = useState(30);
// // // //     const [formDataAdd, setFormDataAdd] = useState([]);
// // // //     const [selectedFormIds, setSelectedFormIds] = useState([]);
// // // //     const [selectedTitles, setSelectedTitles] = useState([]);
// // // //     const [showVideoInput, setShowVideoInput] = useState(false);
// // // //     const { products, shop, apiVersion } = useLoaderData();
// // // //     const [selectedProduct, setSelectedProduct] = useState(null);
// // // //     const [isPopupOpen, setIsPopupOpen] = useState(false);
// // // //     const [selectedProducts, setSelectedProducts] = useState([]);
// // // //     const [productTitles, setProductTitles] = useState([]);
// // // //     const [productImage, setProductImage] = useState([]);
// // // //     const [popupFieldTitle, setPopupFieldTitle] = useState('');
// // // //     const [showPrice, setShowPrice] = useState(false);
// // // //     const [showbtnn, setShowbtnn] = useState(false);
// // // //     const [productsPerRow, setProductsPerRow] = useState(3);
// // // //     const [lastProductFieldId, setLastProductFieldId] = useState(null);
// // // //     const [showFileUpload, setShowFileUpload] = useState(false);
// // // //     const emailFieldRef = useRef(null);
// // // //     const popupRef = useRef(null);
// // // //     const [selectedIcons, setSelectedIcons] = useState({
// // // //         facebook: true,
// // // //         twitter: true,
// // // //         instagram: true,
// // // //     });
// // // //     const [customIcons, setCustomIcons] = useState([]);
// // // //     const [id, setId] = useState(null);
// // // //     const location = useLocation();
// // // //     const { formData } = location.state || {};
// // // //     const [viewMode, setViewMode] = useState('desktop');
// // // //     const [dividerColor, setDividerColor] = useState('#000');
// // // //     const [showColorPicker, setShowColorPicker] = useState(false);
// // // //     const [buttonLabel, setButtonLabel] = useState('Submit');
// // // //     const [fontSize, setFontSize] = useState(16);
// // // //     const [padding, setPadding] = useState('10px 20px');
// // // //     const [width, setWidth] = useState(100);
// // // //     const [height, setHeight] = useState(40);
// // // //     const [btnbackgroundColor, setBtnBackgroundColor] = useState('#007BFF');
// // // //     const [showbtn, setShowBtn] = useState(false);
// // // //     const [emailWidth, setEmailWidth] = useState('800px');
// // // //     const [headingColor, setHeadingColor] = useState('#000');
// // // //     const formsPerPage = 5;
// // // //     const [currentPage, setCurrentPage] = useState(1);
// // // //     const [fontFamily, setFontFamily] = useState('Arial');
// // // //     const [ReactQuill, setReactQuill] = useState(null);
// // // //     const [editorValue, setEditorValue] = useState('');
// // // //     const [headingUrl, setHeadingUrl] = useState('');
// // // //     const [texteditorValue, setTextEditorValue] = useState('');
// // // //     const [columnCount, setColumnCount] = useState(6);
// // // //     const [isPopupVisible, setIsPopupVisible] = useState(false);
// // // //     const [selectedColumn, setSelectedColumn] = useState(null);
// // // //     const [columnImages, setColumnImages] = useState({});
// // // //     const [editorValues, setEditorValues] = useState({});
// // // //     const [editorValueed, setEditorValueed] = useState('');
// // // //     const [currentFieldId, setCurrentFieldId] = useState(null);
// // // //     const [isPopupVisibleed, setPopupVisibleed] = useState(false);

// // // //     const handleFontChange = (event) => {
// // // //         setFontFamily(event.target.value);
// // // //     };

// // // //     useEffect(() => {
// // // //         if (formData) {
// // // //             console.log('Form data received:', formData);
// // // //             console.log('Fields:', formData.fields);

// // // //             const newColumnImages = {};
// // // //             const newEditorValues = {};

// // // //             formData.fields.forEach((field, index) => {
// // // //                 if (field.columnImages) {
// // // //                     newColumnImages[index] = field.columnImages;
// // // //                 }
// // // //                 if (field.editorValues) {
// // // //                     newEditorValues[index] = field.editorValues;
// // // //                 }
// // // //             });

// // // //             setColumnImages(newColumnImages);
// // // //             setEditorValues(newEditorValues);

// // // //             if (Array.isArray(formData.fields)) {
// // // //                 const validFields = formData.fields.map(field => {
// // // //                     if (!field.id) {
// // // //                         console.warn('Field missing ID:', field);
// // // //                     }

// // // //                     if (field.type === 'product') {
// // // //                         console.log('Price for product field:', field.price);
// // // //                         if (field.price === true) {
// // // //                             setShowPrice(true);
// // // //                         }
// // // //                         if (field.showbtnn === true) {
// // // //                             setShowbtnn(true);
// // // //                         }
// // // //                     }

// // // //                     return { ...field, id: field.id || generateUniqueId() };
// // // //                 });

// // // //                 setFields(validFields);
// // // //             }
// // // //             setEmailWidth(formData.styles.width);
// // // //             setBackgroundColor(formData.styles.backgroundColor);
// // // //             setBorderRadious(formData.styles.borderRadious);
// // // //             setBackgroundImage(formData.styles.backgroundImage);
// // // //             setTemplatePadding(formData.styles.templatePadding);
// // // //             setTextAlign(formData.styles.textAlign);
// // // //             setFontFamily(formData.styles.fontFamily);
// // // //             setEmailTemplateId(formData.templateId);
// // // //             setFormTitle(formData.title);
// // // //             setId(formData._id);
// // // //             setSelectedFormIds(formData.form_ids || []);
// // // //             const productsPerRow = formData.fields[0]?.productsPerRow || 3;
// // // //             setProductsPerRow(productsPerRow);
// // // //             console.log('Products per row:', formData.fields[0]?.productsPerRow);
// // // //             const columnCount = parseInt(formData.styles.columnCount) || 2;
// // // //             setColumnCount(columnCount);

// // // //         }
// // // //     }, [formData]);

// // // //     const createInputField = (type, initialValue = '') => {
// // // //         const id = generateUniqueId();
// // // //         console.log(`Creating field of type ${type} with ID: ${id}`);

// // // //         return {
// // // //             id,
// // // //             type,
// // // //             contentType: 'text',
// // // //             image: type === 'images' ? initialValue : null,
// // // //             headerbtnbg: type === 'heading' ? '#9474ff' : undefined,
// // // //             headerbtncolor: type === 'heading' ? '#FFFFFF' : undefined,
// // // //             headingbtnPadding: type === 'heading' ? 10 : undefined,
// // // //             headingbtnradious: type === 'heading' ? 4 : undefined,
// // // //             headingbtnFontSize: type === 'heading' ? 16 : undefined,
// // // //             headingbtnwidth: type === 'heading' ? '100' : undefined,
// // // //             headingbtnheight: type === 'heading' ? '40' : undefined,
// // // //             headerbtn: type === 'heading' ? 'Vist Now' : undefined,
// // // //             headingbtnBorderColor: type === 'heading' ? '#000000' : undefined,
// // // //             headingbtnBorderWidth: type === 'heading' ? '1' : undefined,
// // // //             headingbtnBorderStyle: type === 'heading' ? 'solid' : undefined,
// // // //             bannerImageWidth: type === 'heading' ? '100' : undefined,
// // // //             bannerImageHeight: type === 'heading' ? 'default' : undefined,
// // // //             bannerImageTextAlign: type === 'heading' ? '' : undefined,
// // // //             headingText: type === 'heading' ? initialValue : '',
// // // //             headingLevel: type === 'heading' ? 'h1' : null,
// // // //             headingFontSize: type === 'heading' ? '16' : undefined,
// // // //             headingLetterSpacing: type === 'heading' ? 0 : undefined,
// // // //             headingPadding: type === 'heading' ? 0 : undefined,
// // // //             headingTextAlign: type === 'heading' ? "" : undefined,
// // // //             headingColor: type === 'heading' ? '#000' : undefined,
// // // //             headingbg: type === 'heading' ? '#0000' : undefined,
// // // //             headingbgImage: type === 'heading' ? '' : undefined,
// // // //             headingBorderColor: type === 'heading' ? '#000000' : undefined,
// // // //             headingBorderWidth: type === 'heading' ? '0' : undefined,
// // // //             headingBorderStyle: type === 'heading' ? 'solid' : undefined,
// // // //             headingFontWeight: type === 'heading' ? 600 : undefined,
// // // //             descritionFontSize: type === 'description' ? '16' : undefined,
// // // //             descritionColor: type === 'description' ? '#000' : undefined,
// // // //             descritionFontWeight: type === 'description' ? 500 : undefined,
// // // //             descriptionText: type === 'description' ? initialValue : 'No Description Provided',
// // // //             descriptionbg: type === 'description' ? '#0000' : undefined,
// // // //             descriptionPadding: type === 'description' ? 10 : undefined,
// // // //             descriptionLetterSpacing: type === 'description' ? 0 : undefined,
// // // //             descriptionTextAlign: type === 'description' ? "" : undefined,
// // // //             descriptionBorderColor: type === 'description' ? '#000000' : undefined,
// // // //             descriptionBorderWidth: type === 'description' ? '0' : undefined,
// // // //             descriptionBorderStyle: type === 'description' ? 'solid' : undefined,
// // // //             name: type === 'heading' ? initialValue :
// // // //                 type === 'description' ? 'Description' :
// // // //                     `Field_${id}`,
// // // //             label: type === 'heading' ? 'Heading' :
// // // //                 type === 'description' ? 'Description' :
// // // //                     type === 'button' ? 'Submit' :
// // // //                         `Default Label for ${type}`,
// // // //             value: initialValue || (type === 'description' ? 'No Description Provided' : ''),
// // // //             dividerColor: type === 'divider' ? '#000' : undefined,
// // // //             dividerWidth: type === 'divider' ? '100' : undefined,
// // // //             dividerheight: type === 'divider' ? '1' : undefined,
// // // //             buttonColor: type === 'button' ? '#007BFF' : undefined,
// // // //             buttonTextColor: type === 'button' ? '#FFF' : undefined,
// // // //             buttonFontSize: type === 'button' ? 16 : undefined,
// // // //             buttonPadding: type === 'button' ? 10 : undefined,
// // // //             buttonWidth: type === 'button' ? 100 : undefined,
// // // //             buttonHeight: type === 'button' ? 40 : undefined,
// // // //             buttonradious: type === 'button' ? 2 : undefined,
// // // //             buttonBorderColor: type === 'button' ? '#000000' : undefined,
// // // //             buttonBorderWidth: type === 'button' ? '1' : undefined,
// // // //             buttonBorderStyle: type === 'button' ? 'solid' : undefined,
// // // //             buttonLetterSpacing: type === 'button' ? 0 : undefined,
// // // //             buttonUrll: type === 'button' ? '' : undefined,
// // // //             socalIconWidth: type === 'socalicon' ? 30 : undefined,
// // // //             socalIconHeight: type === 'socalicon' ? 30 : undefined,
// // // //             socalIconPadding: type === 'socalicon' ? 10 : undefined,
// // // //             socaliconTextAlign: type === 'socalicon' ? "" : undefined,
// // // //             htmlColor: type === 'html convert' ? '#000' : undefined,
// // // //             htmlFontSize: type === 'html convert' ? 16 : undefined,
// // // //             htmlPadding: type === 'html convert' ? 10 : undefined,
// // // //             icons: {
// // // //                 facebook: { url: 'https://facebook.com', isHidden: false },
// // // //                 twitter: { url: 'https://twitter.com', isHidden: false },
// // // //                 instagram: { url: 'https://instagram.com', isHidden: false },
// // // //             },
// // // //             customIcons: [],
// // // //             spacerHeight: type === 'spacer' ? '20' : undefined,
// // // //             spacerbg: type === 'spacer' ? '#ffffff' : undefined,
// // // //             splitbg: type === 'split' ? '#0000' : undefined,
// // // //             videoPadding: type === 'video' ? '20' : undefined,
// // // //             splitPadding: type === 'split' ? '10' : undefined,
// // // //             videoBorderColor: type === 'video' ? '#000000' : undefined,
// // // //             videoBorderWidth: type === 'video' ? '0' : undefined,
// // // //             videoBorderStyle: type === 'video' ? 'solid' : undefined,
// // // //             imgWidth: type === 'images' ? '100' : undefined,
// // // //             imgTextAlign: type === 'images' ? "" : undefined,
// // // //             imgPadding: type === 'images' ? 10 : undefined,
// // // //             imgbg: type === 'images' ? '#0000' : undefined,
// // // //             imgBorderColor: type === 'images' ? '#000000' : undefined,
// // // //             imgBorderWidth: type === 'images' ? '0' : undefined,
// // // //             imgBorderStyle: type === 'images' ? 'solid' : undefined,
// // // //             productPadding: type === 'product' ? 10 : undefined,
// // // //             productbg: type === 'product' ? '#0000' : undefined,
// // // //             productBorderColor: type === 'product' ? '#000000' : undefined,
// // // //             productBorderWidth: type === 'product' ? '0' : undefined,
// // // //             productBorderStyle: type === 'product' ? 'solid' : undefined,
// // // //             productFontSize: type === 'product' ? 16 : undefined,
// // // //             productTextColor: type === 'product' ? '#000000' : undefined,
// // // //             productWeight: type === 'product' ? 400 : undefined,
// // // //             productLetterSpacing: type === 'product' ? 0 : undefined,
// // // //             productbtnBorderColor: type === 'product' ? '#000000' : undefined,
// // // //             productbtnBorderWidth: type === 'product' ? '1' : undefined,
// // // //             productbtnBorderStyle: type === 'product' ? 'solid' : undefined,
// // // //             productbtnbg: type === 'product' ? '#ffff' : undefined,
// // // //             productradious: type === 'product' ? '3' : undefined,
// // // //             productLabel: type === 'product' ? 'Shop Now' : undefined,
// // // //             productfontSize: type === 'product' ? '12' : undefined,
// // // //             productwidth: type === 'product' ? '80' : undefined,
// // // //             productheight: type === 'product' ? '30' : undefined,
// // // //             productbackgroundColor: type === 'product' ? '#007BFF' : undefined,
// // // //         };
// // // //     };

// // // //     const addInputField = (type) => {
// // // //         let newField;
// // // //         if (type === 'images') {
// // // //             setShowImagePopup(true);
// // // //             setImageFieldId(null);
// // // //         } else if (type === 'heading') {
// // // //             setShowHeadingPopup(true);
// // // //             setSelectedOption('heading')
// // // //             setEditorValue('');

// // // //         } else if (type === 'description') {
// // // //             setShowDescriptionPopup(true);
// // // //         } else if (type === 'divider') {
// // // //             toggleColorPicker();
// // // //             newField = createInputField(type);
// // // //             setFields((prevFields) => [...prevFields, newField]);
// // // //         }
// // // //         else if (type === 'button') {
// // // //             togglebtn();
// // // //             newField = createInputField(type);
// // // //             setFields((prevFields) => [...prevFields, newField]);
// // // //         } else if (type === 'socalicon') {
// // // //             const newField = createInputField('socalicon');

// // // //             setFields((prevFields) => {
// // // //                 const updatedFields = [...prevFields, newField];
// // // //                 console.log("Updated fields after adding new field:", updatedFields);

// // // //                 setSelectedFieldId(newField.id);
// // // //                 setSelectedIcons(newField.icons || {});
// // // //                 setCustomIcons(newField.customIcons || []);
// // // //                 setShowSocialIconPopup(true);

// // // //                 return updatedFields;
// // // //             });
// // // //         }
// // // //         if (type === 'html convert') {
// // // //             const newField = createInputField(type, type === 'html convert' ? '<h1>Your HTML Here</h1>' : '');
// // // //             setFields((prevFields) => [...prevFields, newField]);
// // // //         }
// // // //         if (type === 'split') {
// // // //             const splitFields = [
// // // //                 createInputField('split', '', ''),
// // // //                 createInputField('split', '', ''),
// // // //             ];
// // // //             setFields((prevFields) => [...prevFields, ...splitFields]);
// // // //         }
// // // //         if (type === 'spacer') {
// // // //             const newField = createInputField(type);
// // // //             setFields((prevFields) => [...prevFields, newField]);
// // // //         }
// // // //         if (type === 'video') {
// // // //             const newField = createInputField(type);
// // // //             setFields((prevFields) => [...prevFields, newField]);
// // // //             setShowVideoInput(true);
// // // //         }
// // // //         if (type === 'product') {
// // // //             const newField = createInputField('product');
// // // //             setFields((prevFields) => [...prevFields, newField]);
// // // //             setLastProductFieldId(newField.id);
// // // //             setIsPopupOpen(true);
// // // //         }
// // // //         if (type === 'Multicolumn') {
// // // //             setFields([...fields, createInputField('Multicolumn')]);
// // // //         }
// // // //         if (type === 'richtext') {
// // // //             const newField = createInputField('richtext');
// // // //             setFields([...fields, newField]);
// // // //             setCurrentFieldId(newField.id);
// // // //             setPopupVisibleed(true);
// // // //         }
// // // //     };

// // // //     useEffect(() => {

// // // //         const loadReactQuill = async () => {
// // // //             const { default: Quill } = await import('react-quill');
// // // //             setReactQuill(() => Quill);
// // // //         };

// // // //         loadReactQuill();
// // // //     }, []);


// // // //     const handleEdit = (field) => {
// // // //         setSelectedFieldId(field.id);
// // // //         setSelectedIcons(field.icons);
// // // //         setCustomIcons(field.customIcons || []);
// // // //         setShowSocialIconPopup(true);
// // // //     };

// // // //     const handleSaveSocialIcons = () => {
// // // //         setFields((prevFields) =>
// // // //             prevFields.map((field) =>
// // // //                 field.id === selectedFieldId
// // // //                     ? { ...field, icons: selectedIcons, customIcons }
// // // //                     : field
// // // //             )
// // // //         );
// // // //         setShowSocialIconPopup(false);

// // // //     };

// // // //     useEffect(() => {

// // // //         handleSaveSocialIcons();
// // // //     }, [selectedIcons, customIcons]);

// // // //     const handleToggleIcon = (icon) => {
// // // //         setSelectedIcons((prevIcons) => ({
// // // //             ...prevIcons,
// // // //             [icon]: {
// // // //                 ...prevIcons[icon],
// // // //                 isHidden: !prevIcons[icon]?.isHidden,
// // // //             },
// // // //         }));
// // // //     };

// // // //     const handleIconUrlChange = (e, icon) => {
// // // //         setSelectedIcons((prevIcons) => ({
// // // //             ...prevIcons,
// // // //             [icon]: {
// // // //                 ...prevIcons[icon],
// // // //                 url: e.target.value,
// // // //             },
// // // //         }));
// // // //     };

// // // //     const handleCustomIconUpload = (e) => {
// // // //         const files = e.target.files;
// // // //         const filePromises = Array.from(files).map((file) => {
// // // //             return new Promise((resolve) => {
// // // //                 const reader = new FileReader();
// // // //                 reader.onloadend = () => {
// // // //                     resolve(reader.result);
// // // //                 };
// // // //                 reader.readAsDataURL(file);
// // // //             });
// // // //         });

// // // //         Promise.all(filePromises).then((fileUrls) => {
// // // //             const newIcons = fileUrls.map((url) => ({
// // // //                 src: url,
// // // //                 name: 'Custom Icon',
// // // //                 isHidden: false
// // // //             }));
// // // //             setCustomIcons((prevIcons) => [...prevIcons, ...newIcons]);
// // // //         });
// // // //     };

// // // //     const handleCustomIconUrlChange = (e, index) => {
// // // //         const newUrl = e.target.value;
// // // //         setCustomIcons((prevIcons) =>
// // // //             prevIcons.map((icon, i) =>
// // // //                 i === index ? { ...icon, url: newUrl } : icon
// // // //             )
// // // //         );
// // // //     };

// // // //     const toggleCustomIconVisibility = (index) => {
// // // //         setCustomIcons((prevIcons) =>
// // // //             prevIcons.map((icon, i) =>
// // // //                 i === index ? { ...icon, isHidden: !icon.isHidden } : icon
// // // //             )
// // // //         );
// // // //     };

// // // //     const handleImageUpload = (e) => {
// // // //         const file = e.target.files[0];
// // // //         if (file) {
// // // //             const reader = new FileReader();
// // // //             reader.onloadend = () => {
// // // //                 const newField = createInputField('images', reader.result);
// // // //                 if (imageFieldId) {
// // // //                     setFields((prevFields) =>
// // // //                         prevFields.map((field) =>
// // // //                             field.id === imageFieldId ? { ...field, value: reader.result } : field
// // // //                         )
// // // //                     );
// // // //                 } else {
// // // //                     setFields((prevFields) => [...prevFields, newField]);
// // // //                 }
// // // //                 setShowImagePopup(false);
// // // //                 setImageFieldId(null);
// // // //             };
// // // //             reader.readAsDataURL(file);
// // // //         }
// // // //     };

// // // //     const handleAddHeading = (e) => {
// // // //         e.preventDefault();
// // // //         if (emailTemplateId) {
// // // //             setFields((prevFields) =>
// // // //                 prevFields.map((field) =>
// // // //                     field.id === emailTemplateId
// // // //                         ? {
// // // //                             ...field,
// // // //                             headingText,
// // // //                             headingLevel,
// // // //                             headingFontSize,
// // // //                             headingColor,
// // // //                             imageUrl,
// // // //                             editorContent: editorValue,
// // // //                             headingUrl,
// // // //                         }
// // // //                         : field
// // // //                 )
// // // //             );
// // // //         } else {
// // // //             const newField = createInputField('heading', headingText);
// // // //             newField.headingLevel = headingLevel;
// // // //             newField.headingFontSize = headingFontSize;
// // // //             newField.headingColor = headingColor;
// // // //             newField.imageUrl = imageUrl;
// // // //             newField.editorContent = editorValue;
// // // //             newField.headingUrl = headingUrl;
// // // //             setFields((prevFields) => [...prevFields, newField]);
// // // //         }
// // // //         setShowHeadingPopup(false);
// // // //         setHeadingText('');
// // // //         setHeadingLevel('h1');
// // // //         setHeadingFontSize('16');
// // // //         setEmailTemplateId(null);
// // // //         setImageUrl(null);
// // // //         setEditorValue('');
// // // //         setHeadingUrl('');
// // // //     };

// // // //     const handleEditorChange = (value) => {
// // // //         console.log("Editor value changed:", value);
// // // //         console.log("Active field ID:", activeFieldId);
// // // //         setEditorValue(value);

// // // //         setFields((prevFields) => {
// // // //             const updatedFields = prevFields.map((field) =>
// // // //                 field.id === activeFieldId
// // // //                     ? { ...field, editorContent: value }
// // // //                     : field
// // // //             );
// // // //             console.log("Updated fields after editor change:", updatedFields);
// // // //             return updatedFields;
// // // //         });
// // // //     };

// // // //     const handleUpdateUrl = (id, newUrl) => {
// // // //         setFields((prevFields) =>
// // // //             prevFields.map((field) =>
// // // //                 field.id === id ? { ...field, headingUrl: newUrl } : field
// // // //             )
// // // //         );
// // // //     };

// // // //     const handleAddDescription = (e) => {
// // // //         e.preventDefault();
// // // //         if (emailTemplateId) {
// // // //             setFields((prevFields) =>
// // // //                 prevFields.map((field) =>
// // // //                     field.id === emailTemplateId
// // // //                         ? { ...field, descriptionText }
// // // //                         : field
// // // //                 )
// // // //             );
// // // //         } else {
// // // //             const newField = createInputField('description', descriptionText);
// // // //             setFields((prevFields) => [...prevFields, newField]);
// // // //         }

// // // //         setShowDescriptionPopup(false);
// // // //         setDescriptionText('');
// // // //         setTextEditorValue('');
// // // //         setEmailTemplateId(null);
// // // //     };

// // // //     const handleDescriptionChange = (id, value) => {
// // // //         setFields((prevFields) =>
// // // //             prevFields.map((field) =>
// // // //                 field.id === id ? { ...field, descriptionText: value } : field
// // // //             )
// // // //         );
// // // //     };

// // // //     const removeField = (id) => {
// // // //         console.log('Attempting to remove field with ID:', id);
// // // //         setFields((prevFields) => {
// // // //             const newFields = prevFields.filter(field => field.id !== id);
// // // //             setEmailFieldPopup(false)
// // // //             console.log('Remaining fields after removal:', newFields);
// // // //             return newFields;
// // // //         });
// // // //     };


// // // //     useEffect(() => {
// // // //         axios
// // // //             .get('http://localhost:4001/get-forms')
// // // //             .then((res) => {
// // // //                 console.log('API Response:', res.data);
// // // //                 const filteredData = res.data.filter((form) => form.shop === shop);
// // // //                 setFormDataAdd(filteredData);
// // // //             })
// // // //             .catch((error) => console.error('API Error:', error));
// // // //     }, [shop]);

// // // //     useEffect(() => {
// // // //         if (formDataAdd.length > 0) {
// // // //             const formIds = formDataAdd.map((form) => form.formId);
// // // //             console.log('All form IDs:', formIds);
// // // //         }
// // // //     }, [formDataAdd]);

// // // //     const handleFormSelect = async (e) => {
// // // //         const title = e.target.value.trim();
// // // //         const selectedForm = formDataAdd.find((form) => form.title.trim() === title);

// // // //         if (selectedForm) {
// // // //             try {
// // // //                 const response = await fetch(`http://localhost:4001/check-form-connected/${selectedForm.formId}`);
// // // //                 const data = await response.json();

// // // //                 if (data.isConnected) {
// // // //                     alert('This form is already connected to a template.');

// // // //                     const confirmUnlink = window.confirm(
// // // //                         'Do you want to unlink it?'
// // // //                     );

// // // //                     if (confirmUnlink) {
// // // //                         const unlinkResponse = await fetch(
// // // //                             `http://localhost:4001/unlink-template/${selectedForm.formId}`,
// // // //                             { method: 'PUT' }
// // // //                         );

// // // //                         if (unlinkResponse.ok) {
// // // //                             alert('Template unlinked from form.');

// // // //                             const updatedCheckResponse = await fetch(
// // // //                                 `http://localhost:4001/check-form-connected/${selectedForm.formId}`
// // // //                             );
// // // //                             const updatedCheckData = await updatedCheckResponse.json();

// // // //                             if (!updatedCheckData.isConnected) {
// // // //                                 console.log('Form is no longer connected to a template.');
// // // //                             }
// // // //                         } else {
// // // //                             alert('Failed to unlink template.');
// // // //                         }
// // // //                     } else {
// // // //                         return;
// // // //                     }
// // // //                 }

// // // //                 setSelectedFormIds((prevFormIds) => {
// // // //                     if (prevFormIds.includes(selectedForm.formId)) {
// // // //                         return prevFormIds.filter((id) => id !== selectedForm.formId);
// // // //                     } else {
// // // //                         return [...prevFormIds, selectedForm.formId];
// // // //                     }
// // // //                 });

// // // //                 setSelectedTitles((prevSelectedTitles) => {
// // // //                     if (prevSelectedTitles.includes(title)) {
// // // //                         return prevSelectedTitles.filter((t) => t !== title);
// // // //                     } else {
// // // //                         return [...prevSelectedTitles, title];
// // // //                     }
// // // //                 });
// // // //             } catch (error) {
// // // //                 console.error('Error checking or unlinking form connection:', error);
// // // //                 alert('An error occurred while processing the form connection.');
// // // //             }
// // // //         }
// // // //     };

// // // //     useEffect(() => {
// // // //         console.log('Selected form IDs:', selectedFormIds);
// // // //     }, [selectedFormIds]);

// // // //     const createOrUpdateForm = async () => {
// // // //         const timestamp = format(new Date(), "yyyy-MM-dd HH:mm:ss a");
// // // //         let trimmedTitle = formTitle.trim();
// // // //         if (!trimmedTitle) {
// // // //             alert('Please provide a title for the template.');
// // // //             return;
// // // //         }

// // // //         if (!id) {
// // // //             try {
// // // //                 const response = await axios.get(`http://localhost:4001/check-title/${trimmedTitle}`);
// // // //                 if (response.data.exists) {

// // // //                     trimmedTitle = `${trimmedTitle}-${format(new Date(), "yyyyMMddHHmmss")}`;
// // // //                 }
// // // //             } catch (error) {
// // // //                 console.error('Error checking title:', error);
// // // //                 return;
// // // //             }
// // // //         }

// // // //         const templateId = emailTemplateId || generateUniqueId();
// // // //         setEmailTemplateId(templateId);

// // // //         if (fields.length === 0) {
// // // //             console.warn('No fields to create the form.');
// // // //             return;
// // // //         }

// // // //         const validFields = fields.filter(field => field && field.type);

// // // //         const updatedFields = validFields.map(field => {
// // // //             let value = '';

// // // //             switch (field.type) {
// // // //                 case 'images':
// // // //                     value = field.value || 'No Image Provided';
// // // //                     break;
// // // //                 case 'heading':
// // // //                     value = field.value || '';
// // // //                     field.editorContent = field.editorContent || editorValue || field.value || '';
// // // //                     field.headingUrl = field.headingUrl || '';
// // // //                     field.imageUrl = field.imageUrl || '';
// // // //                     break;
// // // //                 case 'description':
// // // //                     value = field.value || '';
// // // //                     break;
// // // //                 case 'socalicon':
// // // //                     value = field.icons || 'No Social Icons Provided';
// // // //                     break;
// // // //                 case 'divider':
// // // //                     value = field.icons || 'No Social Icons Provided';
// // // //                     break;
// // // //                 case 'button':
// // // //                     value = 'Button';
// // // //                 case 'split':
// // // //                     value = field.value || 'No Value Provided';
// // // //                     field.splitbg = field.splitbg || '';
// // // //                     field.width = field.width || '100%';
// // // //                     field.splitPadding = field.splitPadding || 0
// // // //                     break;
// // // //                 case 'spacer':
// // // //                     value = 'Spacer Field';
// // // //                     field.spacerHeight = field.spacerHeight || 30;
// // // //                     field.spacerbg = field.spacerbg || '#f0f0f0';
// // // //                     break;
// // // //                 case 'video':
// // // //                     value = field.value;
// // // //                     field.videoPadding = field.videoPadding || 20;
// // // //                     field.videoBorderWidth = field.videoBorderWidth || 1;
// // // //                     field.videoBorderStyle = field.videoBorderStyle || 'solid';
// // // //                     field.videoBorderColor = field.videoBorderColor || '#000';
// // // //                     break;
// // // //                 case 'richtext':
// // // //                     value = field.value;
// // // //                     field.content = field.content || editorValueed || field.value || '';
// // // //                     break;
// // // //                 case 'Multicolumn':
// // // //                     value = field.value;
// // // //                     field.columnCount = columnCount
// // // //                     field.columnImages = columnImages;
// // // //                     field.editorValues = editorValues;
// // // //                     break;
// // // //                 case 'product':
// // // //                     return {
// // // //                         ...field,
// // // //                         products: field.products || [],
// // // //                         productsPerRow,
// // // //                         viewMode,
// // // //                         price: showPrice,
// // // //                         buttonUrl: field.productUrl || `https://${shop}/admin/products?selectedView=all`,
// // // //                         showbtnn: showbtnn

// // // //                     };

// // // //                 default:
// // // //                     value = '';
// // // //             }

// // // //             if (field.type === 'html convert') {
// // // //                 return {
// // // //                     ...field,
// // // //                     value: field.value || '',
// // // //                 };
// // // //             }

// // // //             if (field.type === 'button') {
// // // //                 field.buttonColor = btnbackgroundColor;
// // // //                 field.label = buttonLabel;
// // // //                 field.buttonFontSize = fontSize;
// // // //                 field.buttonWidth = width;
// // // //                 field.buttonHeight = height;
// // // //                 field.buttonPadding = padding;
// // // //             }

// // // //             if (field.type === 'socalicon') {
// // // //                 field.socalIconHeight = socalIconHeight;
// // // //                 field.socalIconWidth = socalIconWidth;
// // // //                 field.icons = {
// // // //                     facebook: {
// // // //                         url: selectedIcons.facebook?.url || field.icons.facebook.url,
// // // //                         isHidden: selectedIcons.facebook?.isHidden || false,
// // // //                         value: selectedIcons.facebook?.value || 'Facebook',
// // // //                     },
// // // //                     twitter: {
// // // //                         url: selectedIcons.twitter?.url || field.icons.twitter.url,
// // // //                         isHidden: selectedIcons.twitter?.isHidden || false,
// // // //                         value: selectedIcons.twitter?.value || 'Twitter',
// // // //                     },
// // // //                     instagram: {
// // // //                         url: selectedIcons.instagram?.url || field.icons.instagram.url,
// // // //                         isHidden: selectedIcons.instagram?.isHidden || false,
// // // //                         value: selectedIcons.instagram?.value || 'Instagram',
// // // //                     },
// // // //                     send: {
// // // //                         url: selectedIcons.send?.url || '',
// // // //                         isHidden: selectedIcons.send?.isHidden || false,
// // // //                         value: selectedIcons.send?.value || 'Send',
// // // //                     },
// // // //                 };

// // // //                 field.customIcons = field.customIcons || [];
// // // //             } else {
// // // //                 field.icons = {};
// // // //             }

// // // //             return {
// // // //                 ...field,
// // // //                 label: field.label || (field.type === 'button' ? 'Button' : `Default Label for ${field.type}`),
// // // //                 name: field.name || `Field_${field.id}`,
// // // //                 value: field.type === 'product' ? undefined : value,
// // // //                 headerbtnbg: field.headerbtnbg || null,
// // // //                 headerbtncolor: field.headerbtncolor || null,
// // // //                 headerbtn: field.headerbtn || null,
// // // //                 headingLevel: field.headingLevel || null,
// // // //                 headingbtnPadding: field.headingbtnPadding || 10,
// // // //                 headingbtnradious: field.headingbtnradious || 4,
// // // //                 headingbtnwidth: field.headingbtnwidth || 100,
// // // //                 headingbtnFontSize: field.headingbtnFontSize || 16,
// // // //                 headingbtnheight: field.headingbtnheight || 40,
// // // //                 headingbtnBorderWidth: field.headingbtnBorderWidth || 1,
// // // //                 headingbtnBorderStyle: field.headingbtnBorderStyle || 'solid',
// // // //                 headingbtnBorderColor: field.headingbtnBorderColor || '#000',
// // // //                 bannerImageWidth: field.bannerImageWidth || '100',
// // // //                 bannerImageHeight: field.bannerImageHeight || '',
// // // //                 bannerImageTextAlign: field.bannerImageTextAlign || '',
// // // //                 headingFontWeight: field.headingFontWeight || 600,
// // // //                 headingColor: field.headingColor || '#000',
// // // //                 headingbg: field.headingbg || '#ffff',
// // // //                 headingPadding: field.headingPadding || 0,
// // // //                 headingbgImage: field.headingbgImage || '',
// // // //                 headingLetterSpacing: field.headingLetterSpacing || 0,
// // // //                 headingTextAlign: field.headingTextAlign || '',
// // // //                 headingBorderWidth: field.headingBorderWidth || 1,
// // // //                 headingBorderStyle: field.headingBorderStyle || 'solid',
// // // //                 headingBorderColor: field.headingBorderColor || '#000',
// // // //                 headingFontSize: field.type === 'heading' ? (field.headingFontSize || "16") : undefined,
// // // //                 descritionFontWeight: field.descritionFontWeight || 600,
// // // //                 descritionFontSize: field.descritionFontSize || 16,
// // // //                 descritionColor: field.descritionColor || '#000',
// // // //                 descriptionbg: field.descriptionbg || '#ffff',
// // // //                 descriptionPadding: field.descriptionPadding || 10,
// // // //                 descriptionLetterSpacing: field.descriptionLetterSpacing || 0,
// // // //                 descriptionTextAlign: field.descriptionTextAlign || '',
// // // //                 descriptionBorderWidth: field.descriptionBorderWidth || 1,
// // // //                 descriptionBorderStyle: field.descriptionBorderStyle || 'solid',
// // // //                 descriptionBorderColor: field.descriptionBorderColor || '#000',
// // // //                 dividerColor: field.dividerColor || '#000',
// // // //                 dividerWidth: field.dividerWidth || '100',
// // // //                 dividerheight: field.dividerheight || '1',
// // // //                 buttonColor: field.buttonColor || '#007BFF',
// // // //                 buttonFontSize: field.buttonFontSize || 16,
// // // //                 buttonTextColor: field.buttonTextColor || '#fff',
// // // //                 buttonLetterSpacing: field.buttonLetterSpacing || 0,
// // // //                 buttonUrll: field.buttonUrll || '',
// // // //                 buttonBorderWidth: field.buttonBorderWidth || 1,
// // // //                 buttonBorderStyle: field.buttonBorderStyle || 'solid',
// // // //                 buttonBorderColor: field.buttonBorderColor || '#000',
// // // //                 buttonWidth: field.buttonWidth || 150,
// // // //                 buttonHeight: field.buttonHeight || 40,
// // // //                 buttonradious: field.buttonradious || 40,
// // // //                 buttonPadding: field.buttonPadding || 10,
// // // //                 socalIconHeight: field.socalIconHeight || 30,
// // // //                 socalIconWidth: field.socalIconWidth || 30,
// // // //                 socalIconPadding: field.socalIconPadding || 10,
// // // //                 socaliconTextAlign: field.socaliconTextAlign || '',
// // // //                 htmlFontSize: field.htmlFontSize || 16,
// // // //                 htmlPadding: field.htmlPadding || 10,
// // // //                 htmlColor: field.htmlColor || '#000',
// // // //                 splitbg: field.splitbg || '',
// // // //                 width: field.width || '100%',
// // // //                 spacerHeight: field.spacerHeight || 20,
// // // //                 spacerbg: field.spacerbg || '#fff',
// // // //                 videoPadding: field.videoPadding || 20,
// // // //                 splitPadding: field.splitPadding || 0,
// // // //                 videoBorderWidth: field.videoBorderWidth || 1,
// // // //                 videoBorderStyle: field.videoBorderStyle || 'solid',
// // // //                 videoBorderColor: field.videoBorderColor || '#000',
// // // //                 imgWidth: field.imgWidth || '100',
// // // //                 imgTextAlign: field.imgTextAlign || '',
// // // //                 imgPadding: field.imgPadding || 10,
// // // //                 imgbg: field.imgbg || '#ffff',
// // // //                 imgBorderWidth: field.imgBorderWidth || 0,
// // // //                 imgBorderStyle: field.imgBorderStyle || 'solid',
// // // //                 imgBorderColor: field.imgBorderColor || '#000',
// // // //                 productPadding: field.productPadding || 10,
// // // //                 productbg: field.productbg || '#ffff',
// // // //                 productBorderWidth: field.productBorderWidth || 0,
// // // //                 productBorderStyle: field.productBorderStyle || 'solid',
// // // //                 productBorderColor: field.productBorderColor || '#000',
// // // //                 productFontSize: field.productFontSize || 16,
// // // //                 productColor: field.productColor || '#000',
// // // //                 productWeight: field.productWeight || 600,
// // // //                 productLetterSpacing: field.productLetterSpacing || 0,
// // // //                 productbtnBorderColor: field.productbtnBorderColor || '#000',
// // // //                 productbtnBorderWidth: field.productbtnBorderWidth || 16,
// // // //                 productbtnBorderStyle: field.productbtnBorderStyle || '#000',
// // // //                 productbtnbg: field.productbtnbg || 600,
// // // //                 productradious: field.productradious || 0,
// // // //                 productLabel: field.productLabel || 'Shop Now',
// // // //                 productfontSize: field.productfontSize || '12',
// // // //                 productwidth: field.productwidth || 80,
// // // //                 productheight: field.productheight || 30,
// // // //                 productbackgroundColor: field.productbackgroundColor || '#007BFF',

// // // //             };
// // // //         });

// // // //         console.log('Updated fields:', updatedFields);

// // // //         const formData = {
// // // //             templateId,
// // // //             shop,
// // // //             form_ids: selectedFormIds.map(id => String(id)),
// // // //             title: trimmedTitle,
// // // //             fields: updatedFields,
// // // //             createdAt: timestamp,
// // // //             styles: {
// // // //                 backgroundImage,
// // // //                 backgroundColor,
// // // //                 borderRadious,
// // // //                 templatePadding,
// // // //                 textAlign,
// // // //                 fontFamily,
// // // //                 width: viewMode === 'desktop' ? '800px' : '400px',
// // // //                 dividerColor,
// // // //             },
// // // //         };

// // // //         try {
// // // //             const response = id
// // // //                 ? await axios.put(`http://localhost:4001/update/${id}`, formData)
// // // //                 : await axios.post('http://localhost:4001/send/api', formData);
// // // //             console.log('Form saved successfully with title:', trimmedTitle);
// // // //             const successMessage = id ? 'Form updated successfully' : 'Form created successfully';
// // // //             console.log(successMessage, response.data);
// // // //             navigate('/app/emailTemplate/list')

// // // //             if (!id) {
// // // //                 resetFormState();
// // // //             }

// // // //             setExistingTitles(prevTitles => [...prevTitles, trimmedTitle]);
// // // //         } catch (error) {
// // // //             console.error('Error saving form:', error);
// // // //             if (error.response) {
// // // //                 console.error('Response data:', error.response.data);
// // // //             }
// // // //         }
// // // //     };

// // // //     const resetFormState = () => {
// // // //         setFields([]);
// // // //         setEmailTemplateId(null);
// // // //         setHeadingText('');
// // // //         setBackgroundImage(null);
// // // //         setTemplatePadding('20')
// // // //         setBackgroundColor('#ffffff');
// // // //         setTextAlign('left');
// // // //         setBorderRadious(5)
// // // //         setId(null);
// // // //     };

// // // //     const handleBackgroundImageUpload = (e) => {
// // // //         const file = e.target.files[0];
// // // //         if (file) {
// // // //             const reader = new FileReader();
// // // //             reader.onloadend = () => {
// // // //                 setBackgroundImage(reader.result);
// // // //             };
// // // //             reader.readAsDataURL(file);
// // // //         }
// // // //     };

// // // //     useEffect(() => {
// // // //         const formBuilder = formBuilderRef.current;
// // // //         if (!formBuilder) return;

// // // //         const sortable = Sortable.create(formBuilder, {
// // // //             animation: 150,
// // // //             ghostClass: 'dragging',
// // // //             onEnd: (evt) => {
// // // //                 const newFields = [...fields];
// // // //                 const movedField = newFields.splice(evt.oldIndex, 1)[0];
// // // //                 newFields.splice(evt.newIndex, 0, movedField);
// // // //                 setFields(newFields);
// // // //             },
// // // //         });

// // // //         return () => {
// // // //             sortable.destroy();
// // // //         };
// // // //     }, [fields]);

// // // //     const toggleViewMode = (mode) => {
// // // //         setViewMode(mode);
// // // //         setEmailWidth(mode === 'desktop' ? '800px' : '400px');
// // // //         if (mode === 'mobile') {
// // // //             setProductsPerRow(1);
// // // //         } else {
// // // //             setProductsPerRow(3);
// // // //         }
// // // //     };

// // // //     const toggleColorPicker = () => {
// // // //         setShowColorPicker(!showColorPicker);
// // // //     };

// // // //     const togglebtn = () => {
// // // //         setShowBtn(!showbtn);
// // // //     };

// // // //     const toggleFields = () => {
// // // //         setShowFields(true);
// // // //         setDropdownVisible(false);
// // // //     };

// // // //     const toggleSettings = () => {
// // // //         setShowFields(false);
// // // //     };

// // // //     const renderField = (field) => {
// // // //         if (!field) return null;

// // // //         switch (field.type) {
// // // //             case 'html convert':
// // // //                 return (
// // // //                     <div>
// // // //                         <textarea
// // // //                             value={field.value}
// // // //                             onChange={(e) =>
// // // //                                 setFields((prevFields) =>
// // // //                                     prevFields.map((f) => (f.id === field.id ? { ...f, value: e.target.value } : f))
// // // //                                 )
// // // //                             }
// // // //                             rows="5"
// // // //                             cols="50"
// // // //                         />
// // // //                     </div>
// // // //                 );

// // // //             default:
// // // //                 return;
// // // //         }
// // // //     };


// // // //     useEffect(() => {
// // // //         const handleClickOutside = (event) => {
// // // //             if (popupRef.current && !popupRef.current.contains(event.target)) {
// // // //                 setEmailFieldPopup(false);
// // // //             }
// // // //         };

// // // //         document.addEventListener('mousedown', handleClickOutside);

// // // //         return () => {
// // // //             document.removeEventListener('mousedown', handleClickOutside);
// // // //         };
// // // //     }, []);

// // // //     useEffect(() => {
// // // //         const handleClickOutside = (event) => {
// // // //             if (emailFieldRef.current && !emailFieldRef.current.contains(event.target)) {
// // // //                 setActiveFieldId(null);
// // // //             }
// // // //         };

// // // //         document.addEventListener('mousedown', handleClickOutside);

// // // //         return () => {
// // // //             document.removeEventListener('mousedown', handleClickOutside);
// // // //         };
// // // //     }, []);

// // // //     const handleWidthChange = (newWidth) => {
// // // //         setFields((prevFields) => {
// // // //             const selectedIndex = prevFields.findIndex((f) => f.id === selectedFieldId);

// // // //             if (selectedIndex !== -1 && selectedIndex % 2 === 0) {
// // // //                 return prevFields.map((f, index) => {
// // // //                     if (index === selectedIndex) {
// // // //                         return { ...f, width: newWidth };
// // // //                     }
// // // //                     if (index === selectedIndex + 1) {
// // // //                         return { ...f, width: `${100 - parseInt(newWidth)}%` };
// // // //                     }
// // // //                     return f;
// // // //                 });
// // // //             } else if (selectedIndex !== -1) {
// // // //                 return prevFields.map((f, index) => {
// // // //                     if (index === selectedIndex) {
// // // //                         return { ...f, width: newWidth };
// // // //                     }
// // // //                     if (index === selectedIndex - 1) {
// // // //                         return { ...f, width: `${100 - parseInt(newWidth)}%` };
// // // //                     }
// // // //                     return f;
// // // //                 });
// // // //             }
// // // //             return prevFields;
// // // //         });
// // // //     };

// // // //     const handleVideoChange = (e, id) => {
// // // //         const updatedFields = fields.map(field => {
// // // //             if (field.id === id && field.type === 'video') {
// // // //                 return { ...field, value: e.target.value };
// // // //             }
// // // //             return field;
// // // //         });
// // // //         setFields(updatedFields);
// // // //     };

// // // //     const getVideoEmbedUrl = (url) => {
// // // //         const videoId = url.split('v=')[1]?.split('&')[0];
// // // //         if (videoId) {
// // // //             return `https://www.youtube.com/embed/${videoId}?autohide=1&showinfo=0&controls=0`;
// // // //         }
// // // //         return null;
// // // //     };

// // // //     const handleProductClick = (product, isChecked) => {
// // // //         setSelectedProducts((prevSelectedProducts) => {
// // // //             if (isChecked) {

// // // //                 return [...prevSelectedProducts, product];
// // // //             } else {
// // // //                 return prevSelectedProducts.filter((p) => p.id !== product.id);
// // // //             }
// // // //         });

// // // //         setFields((prevFields) => {
// // // //             return prevFields.map((field) => {
// // // //                 if (field.id === lastProductFieldId && field.type === 'product') {
// // // //                     return {
// // // //                         ...field,
// // // //                         products: isChecked
// // // //                             ? [...(field.products || []), product]
// // // //                             : (field.products || []).filter((p) => p.id !== product.id)
// // // //                     };
// // // //                 }
// // // //                 return field;
// // // //             });
// // // //         });

// // // //         setIsPopupOpen(true);
// // // //     };

// // // //     const handleRemoveProductFromForm = (index) => {
// // // //         const productToRemove = productTitles?.[index];

// // // //         if (!productToRemove) return;

// // // //         setProductTitles((prevTitles) =>
// // // //             Array.isArray(prevTitles) ? prevTitles.filter((title, i) => i !== index) : prevTitles
// // // //         );

// // // //         setSelectedProducts((prevSelectedProducts) =>
// // // //             Array.isArray(prevSelectedProducts)
// // // //                 ? prevSelectedProducts.filter((product) => product.title !== productToRemove)
// // // //                 : prevSelectedProducts
// // // //         );

// // // //         setFields((prevFields) =>
// // // //             Array.isArray(prevFields)
// // // //                 ? prevFields.map((field) =>
// // // //                     field.type === 'product'
// // // //                         ? { ...field, products: field.products.filter((product) => product.title !== productToRemove) }
// // // //                         : field
// // // //                 )
// // // //                 : prevFields
// // // //         );
// // // //     };

// // // //     const handleClosePopup = () => {
// // // //         setIsPopupOpen(false);
// // // //         setSelectedProduct(null);
// // // //     };

// // // //     const togglePrice = () => {
// // // //         setShowPrice(!showPrice);
// // // //     };

// // // //     const togglebtnn = () => {
// // // //         setShowbtnn(!showbtnn);
// // // //     };

// // // //     const AddProduct = () => {
// // // //         setIsPopupOpen(true);
// // // //     }

// // // //     useEffect(() => {
// // // //         console.log('isPopupOpen:', isPopupOpen);
// // // //         console.log('selectedProduct:', selectedProduct);
// // // //     }, [isPopupOpen, selectedProduct]);


// // // //     const handleAddProductToSelected = (fieldId, fieldTitle, fieldImage, products) => {
// // // //         console.log("Field ID:", fieldId);
// // // //         console.log("Field Title:", fieldTitle);
// // // //         console.log("Products:", products);
// // // //         console.log("Image:", fieldImage);
// // // //         setLastProductFieldId(fieldId);
// // // //         setPopupFieldTitle(fieldTitle);

// // // //         const productTitles = products.map(product => product.title);
// // // //         console.log("Product Titles:", productTitles);

// // // //         setProductTitles(productTitles);

// // // //         const productImages = products.map(product => product.images.length > 0 ? product.images[0].src : null);
// // // //         console.log("Product images:", productImages);
// // // //         setProductImage(productImages);
// // // //     };

// // // //     const handleProductsPerRowChange = (e) => {
// // // //         setProductsPerRow(parseInt(e.target.value, 6));
// // // //     };


// // // //     const totalPages = Math.ceil(products.length / formsPerPage);

// // // //     const handlePageChange = (page) => {
// // // //         if (page < 1 || page > totalPages) return;
// // // //         setCurrentPage(page);
// // // //     };

// // // //     const currentProducts = products.slice(
// // // //         (currentPage - 1) * formsPerPage,
// // // //         currentPage * formsPerPage
// // // //     );

// // // //     const generatePageNumbers = () => {
// // // //         const visiblePages = [];

// // // //         if (totalPages <= 5) {
// // // //             for (let i = 1; i <= totalPages; i++) {
// // // //                 visiblePages.push(i);
// // // //             }
// // // //         } else {

// // // //             if (currentPage <= 3) {
// // // //                 visiblePages.push(1, 2, 3, 4, '...', totalPages);
// // // //             }

// // // //             else if (currentPage >= totalPages - 2) {
// // // //                 visiblePages.push(1, '...', totalPages - 3, totalPages - 2, totalPages - 1, totalPages);
// // // //             }

// // // //             else {
// // // //                 visiblePages.push(1, '...', currentPage - 1, currentPage, currentPage + 1, '...', totalPages);
// // // //             }
// // // //         }

// // // //         return visiblePages;
// // // //     };


// // // //     const handleRemoveBackgroundImage = () => {
// // // //         setBackgroundImage('');
// // // //     };

// // // //     const RemoveImage = (fieldId) => {
// // // //         console.log(`Removing image for field with ID: ${fieldId}`);
// // // //         setFields((prevFields) =>
// // // //             prevFields.map((field) =>
// // // //                 field.id === fieldId
// // // //                     ? { ...field, imageUrl: null }
// // // //                     : field
// // // //             )
// // // //         );
// // // //     };

// // // //     const handleFileChange = (e, fieldId) => {
// // // //         const file = e.target.files[0];
// // // //         if (file) {
// // // //             const reader = new FileReader();
// // // //             reader.onloadend = () => {
// // // //                 setFields(prevFields =>
// // // //                     prevFields.map(f =>
// // // //                         f.id === fieldId ? { ...f, headingbgImage: reader.result } : f
// // // //                     )
// // // //                 );
// // // //             };
// // // //             reader.readAsDataURL(file);
// // // //         }
// // // //     };

// // // //     const handleFieldClick = (fieldId) => {
// // // //         setSelectedFieldId(fieldId);
// // // //         setEmailFieldPopup(true);
// // // //         setActiveFieldId(fieldId);

// // // //         const selectedField = fields.find((field) => field.id === fieldId);
// // // //         if (selectedField && selectedField.type === 'Multicolumn') {
// // // //             setIsPopupVisible(true);
// // // //             handleColumnClick(null, 0);
// // // //         }
// // // //     };

// // // //     const handleColumnClick = (e, columnIndex) => {
// // // //         e.stopPropagation();
// // // //         setSelectedColumn(columnIndex);
// // // //         setEmailFieldPopup(true);
// // // //     };

// // // //     const handleColumnSelection = (columnSelection) => {
// // // //         if (columnSelection >= 1 && columnSelection <= 6) {
// // // //             setColumnCount(Number(columnSelection));
// // // //             setIsPopupVisible(false);
// // // //         } else {
// // // //             alert("Please select a valid number between 1 and 6.");
// // // //         }
// // // //     };

// // // //     const handleImageUploaded = (event) => {
// // // //         const file = event.target.files[0];
// // // //         if (file) {
// // // //             const reader = new FileReader();

// // // //             reader.onloadend = () => {
// // // //                 const base64Image = reader.result;
// // // //                 setColumnImages((prevImages) => ({
// // // //                     ...prevImages,
// // // //                     [selectedColumn]: base64Image,
// // // //                 }));
// // // //                 setIsPopupVisible(false);
// // // //             };

// // // //             reader.readAsDataURL(file);
// // // //         }
// // // //     };


// // // //     const handleEditorChangeed = (value, columnIndex) => {
// // // //         setEditorValues((prevValues) => ({
// // // //             ...prevValues,
// // // //             [columnIndex]: value,
// // // //         }));
// // // //     };

// // // //     const handleEditorChangeee = (value) => {
// // // //         setEditorValueed(value);
// // // //     };

// // // //     const handleSave = () => {
// // // //         const updatedFields = fields.map((field) =>
// // // //             field.id === currentFieldId ? { ...field, content: editorValueed } : field
// // // //         );
// // // //         setFields(updatedFields);
// // // //         setPopupVisibleed(false);
// // // //     };


// // // //     const handleEditChange = (value) => {
// // // //         console.log("Editor value changed:", value);
// // // //         console.log("Active field ID:", activeFieldId);
// // // //         setEditorValueed(value);

// // // //         setFields((prevFields) => {
// // // //             const updatedFields = prevFields.map((field) =>
// // // //                 field.id === activeFieldId
// // // //                     ? { ...field, content: value }
// // // //                     : field
// // // //             );
// // // //             console.log("Updated fields after editor change:", updatedFields);
// // // //             return updatedFields;
// // // //         });
// // // //     };

// // // //     return (
// // // //         <div>
// // // //             <div className='email-campaing-templates'>
// // // //                 <div className="builder-container">
// // // //                     <h3>Email campaign</h3>

// // // //                     <div className='builder_form_name'>
// // // //                         <div className='email-template-heading'>
// // // //                             <input
// // // //                                 type="text"
// // // //                                 value={formTitle}
// // // //                                 onChange={(e) => setFormTitle(e.target.value)}
// // // //                                 placeholder="Enter Name"
// // // //                             />
// // // //                         </div>
// // // //                         <div className='template-select-forms'>
// // // //                             <select onChange={handleFormSelect}>
// // // //                                 <option value="">Select a form</option>
// // // //                                 {formDataAdd.map((form) => (
// // // //                                     <option
// // // //                                         key={form.id}
// // // //                                         value={form.title}
// // // //                                         style={{
// // // //                                             color: selectedFormIds.includes(form.formId) ? '#45A7F6' : 'black',
// // // //                                         }}
// // // //                                     >
// // // //                                         {form.title}
// // // //                                     </option>
// // // //                                 ))}
// // // //                             </select>
// // // //                         </div>
// // // //                     </div>

// // // //                     <div className='builder-forms_rapp'>
// // // //                         <div className="builder-wrp">
// // // //                             <div className="controls-main-wrp email-tempalte">
// // // //                                 <div className="controls-wrp">
// // // //                                     {showField && (<div className="controls">
// // // //                                         <div className='builder-form-element'>
// // // //                                             <div className='buil_form_texttt'>
// // // //                                                 <div className='buil_form_texttt_p'>
// // // //                                                     <h2> Elements</h2>
// // // //                                                 </div>
// // // //                                             </div>
// // // //                                         </div>
// // // //                                         <div className='builder_fieldes'>
// // // //                                             <div className='builder_form_select_control'>
// // // //                                                 <div
// // // //                                                     className={`builder_form_fields ${showFields ? 'active' : ''}`}
// // // //                                                     onClick={toggleFields}
// // // //                                                 >
// // // //                                                     <h2>Fields</h2>
// // // //                                                 </div>
// // // //                                                 <div
// // // //                                                     className={`builder_form_setting ${!showFields ? 'active' : ''}`}
// // // //                                                     onClick={toggleSettings}
// // // //                                                 >
// // // //                                                     <h2>Settings</h2>
// // // //                                                 </div>

// // // //                                             </div>
// // // //                                             {showFields ? (
// // // //                                                 <div>
// // // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('heading')}><span className='form_builder_field_img'><img src={heading} alt="" /></span> <span><h4>Banner</h4></span></button></div>
// // // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('richtext')}><span className='form_builder_field_img'><img src={heading} alt="" /></span> <span><h4>Rich Text</h4></span></button></div>
// // // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('description')}><span className='form_builder_field_img'><img src={font} alt="" /></span> <span><h4>Description</h4></span></button></div>
// // // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('button')}><span className='form_builder_field_img'><img src={btn} alt="" /></span> <span><h4>Button</h4></span></button></div>
// // // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('divider')}><span className='form_builder_field_img'><img src={divider2} alt="" /></span> <span><h4>Divider</h4></span></button></div>
// // // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('split')}><span className='form_builder_field_img'><img src={spliti} alt="" /></span> <span><h4>Images with Text</h4></span></button></div>
// // // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('images')}><span className='form_builder_field_img'><img src={image} alt="" /></span> <span><h4>Images</h4></span></button></div>
// // // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('socalicon')}><span className='form_builder_field_img'><img src={socail} alt="" /></span> <span><h4>Social Icon</h4></span></button></div>
// // // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('html convert')}><span className='form_builder_field_img'><img src={htmlicon} alt="" /></span> <span><h4>HTML Block</h4></span></button></div>
// // // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('spacer')}><span className='form_builder_field_img'><img src={spacer} alt="" /></span> <span><h4>Spacer</h4></span></button></div>
// // // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('Multicolumn')}><span className='form_builder_field_img'><img src={product} alt="" /></span> <span><h4>Multicolumn</h4></span></button></div>
// // // //                                                     {/* <div className='builderr_field_wrpp'> <button onClick={() => addInputField('video')}><span className='form_builder_field_img'><img src={image} alt="" /></span> <span><h4>video</h4></span></button></div> */}
// // // //                                                     <div className='builderr_field_wrpp'> <button onClick={() => addInputField('product')}><span className='form_builder_field_img'><img src={product} alt="" /></span> <span><h4>Product</h4></span></button></div></div>

// // // //                                             ) : (
// // // //                                                 <div>
// // // //                                                     <div className='edit_form_close'>
// // // //                                                         <div className='edit-formwrap'>
// // // //                                                             <h3>Edit Properties</h3>
// // // //                                                             <div className="builder_field_wrpp">
// // // //                                                                 <div className='edit-form-options'>
// // // //                                                                     <div className="edit_setting_bg">
// // // //                                                                         <label htmlFor="font-family-selector">Font-Family</label>
// // // //                                                                         <select
// // // //                                                                             id="font-family-selector"
// // // //                                                                             value={fontFamily}
// // // //                                                                             onChange={handleFontChange}
// // // //                                                                             style={{ marginLeft: '10px', padding: '5px' }}
// // // //                                                                         >
// // // //                                                                             <option value="Arial">Arial</option>
// // // //                                                                             <option value="Verdana">Verdana</option>
// // // //                                                                             <option value="Times New Roman">Times New Roman</option>
// // // //                                                                             <option value="Georgia">Georgia</option>
// // // //                                                                             <option value="Courier New">Courier New</option>
// // // //                                                                             <option value="Roboto">Roboto</option>
// // // //                                                                         </select>
// // // //                                                                     </div>
// // // //                                                                     <div className='edit_setting_bg bgcolor'>
// // // //                                                                         <label>
// // // //                                                                             Background Color:
// // // //                                                                         </label>
// // // //                                                                         <div
// // // //                                                                             style={{
// // // //                                                                                 height: "50px",
// // // //                                                                                 width: "50px",
// // // //                                                                                 borderRadius: "50%",
// // // //                                                                                 backgroundColor: backgroundColor,
// // // //                                                                                 border: "1px solid #ccc",
// // // //                                                                                 cursor: "pointer",
// // // //                                                                             }}
// // // //                                                                             onClick={() => document.getElementById('colorInput').click()}
// // // //                                                                         >
// // // //                                                                         </div>
// // // //                                                                         <input
// // // //                                                                             id="colorInput"
// // // //                                                                             type="color"
// // // //                                                                             style={{
// // // //                                                                                 display: "none"
// // // //                                                                             }}
// // // //                                                                             value={backgroundColor}
// // // //                                                                             onChange={(e) => setBackgroundColor(e.target.value)}
// // // //                                                                         />
// // // //                                                                     </div>
// // // //                                                                     <div className='edit_setting_bg'>
// // // //                                                                         <label>Border-Radious:</label>
// // // //                                                                         <input
// // // //                                                                             type="text"
// // // //                                                                             id="Border-radious"
// // // //                                                                             value={borderRadious}
// // // //                                                                             onChange={(e) => setBorderRadious(e.target.value)}
// // // //                                                                         />
// // // //                                                                     </div>

// // // //                                                                     <div className='edit_setting_bg'>
// // // //                                                                         <label>Padding:</label>
// // // //                                                                         <input
// // // //                                                                             type="text"
// // // //                                                                             id="Padding"
// // // //                                                                             value={templatePadding}
// // // //                                                                             onChange={(e) => setTemplatePadding(e.target.value)}
// // // //                                                                         />
// // // //                                                                     </div>

// // // //                                                                     <div className='edit_setting_bg'>
// // // //                                                                         <label htmlFor="textAlign">Text Alignment:</label>
// // // //                                                                         <select
// // // //                                                                             id="textAlign"
// // // //                                                                             value={textAlign}
// // // //                                                                             onChange={(e) => setTextAlign(e.target.value)}
// // // //                                                                         >
// // // //                                                                             <option value="left">Left</option>
// // // //                                                                             <option value="center">Center</option>
// // // //                                                                             <option value="right">Right</option>
// // // //                                                                         </select>
// // // //                                                                     </div>

// // // //                                                                     <div className='edit_setting_bg'>
// // // //                                                                         <label htmlFor="backgroundImage">Background Image:</label>
// // // //                                                                         <input
// // // //                                                                             type="file"
// // // //                                                                             accept="image/*"
// // // //                                                                             onChange={handleBackgroundImageUpload}
// // // //                                                                         />
// // // //                                                                         {backgroundImage && (
// // // //                                                                             <button
// // // //                                                                                 type="button"
// // // //                                                                                 onClick={handleRemoveBackgroundImage}
// // // //                                                                                 style={{
// // // //                                                                                     margin: '10px 0',
// // // //                                                                                     padding: '5px 10px',
// // // //                                                                                     cursor: 'pointer',
// // // //                                                                                     background: 'white',
// // // //                                                                                     color: 'black',
// // // //                                                                                     border: 'none',
// // // //                                                                                     borderRadius: '5px',
// // // //                                                                                     border: '1px solid rgb(221, 221, 221)'
// // // //                                                                                 }}
// // // //                                                                             >

// // // //                                                                                 Remove Background
// // // //                                                                             </button>
// // // //                                                                         )}
// // // //                                                                         {backgroundImage && (
// // // //                                                                             <div
// // // //                                                                                 className="edit_setting_bg"
// // // //                                                                                 style={{
// // // //                                                                                     backgroundImage: backgroundImage ? `url(${backgroundImage})` : 'none',
// // // //                                                                                     backgroundRepeat: 'no-repeat',
// // // //                                                                                     backgroundSize: 'contain',
// // // //                                                                                     backgroundPosition: 'center',
// // // //                                                                                     height: '200px',
// // // //                                                                                     width: '100%',
// // // //                                                                                     border: '1px solid #ddd',
// // // //                                                                                 }}
// // // //                                                                             >

// // // //                                                                             </div>
// // // //                                                                         )}
// // // //                                                                     </div>
// // // //                                                                 </div>
// // // //                                                             </div>
// // // //                                                         </div>
// // // //                                                     </div>
// // // //                                                 </div>
// // // //                                             )}

// // // //                                         </div>
// // // //                                     </div>
// // // //                                     )}
// // // //                                 </div>

// // // //                                 <div className='form_builder_build'>
// // // //                                     <div id='bg_change' className="form-builder-wrp email-temp" >
// // // //                                         <div className='btn-email-templates'>
// // // //                                             <button className={`btn-templates ${(viewMode === 'desktop' || emailWidth === '800px') && emailWidth !== '400px' ? 'active' : ''}`} onClick={() => toggleViewMode('desktop')}>
// // // //                                                 <img src={desk} alt="Desktop" /> Desktop
// // // //                                             </button>
// // // //                                             <button className={`btn-templates ${(viewMode === 'mobile' || emailWidth === '400px') && emailWidth !== '800px' ? 'active' : ''}`} onClick={() => toggleViewMode('mobile')}>
// // // //                                                 <img src={phonem} alt="Mobile" /> Mobile
// // // //                                             </button>
// // // //                                         </div>

// // // //                                         <div
// // // //                                             className="form-builder email-template"
// // // //                                             ref={formBuilderRef}
// // // //                                             style={{
// // // //                                                 backgroundColor,
// // // //                                                 width: emailWidth,
// // // //                                                 textAlign,
// // // //                                                 padding: `${templatePadding}px`,
// // // //                                                 borderRadius: `${borderRadious}px`,
// // // //                                                 backgroundImage: backgroundImage ? `url(${backgroundImage})` : 'none',
// // // //                                                 backgroundSize: 'cover',
// // // //                                                 backgroundPosition: 'center',
// // // //                                                 margin: 'auto',
// // // //                                                 fontFamily
// // // //                                             }}
// // // //                                         >
// // // //                                             {fields.length === 0 ? (
// // // //                                                 <div>

// // // //                                                     <div className="builder-block-img-forms">
// // // //                                                         <div className='builder_block_blank'>
// // // //                                                             <img src={emailtemp} alt="Email Template" />
// // // //                                                             <div className='builder-block-img-forms-paragraph'>
// // // //                                                                 <p>Let's create the Email.</p>
// // // //                                                             </div>
// // // //                                                         </div>
// // // //                                                     </div>
// // // //                                                 </div>
// // // //                                             ) : (
// // // //                                                 <>
// // // //                                                     {fields
// // // //                                                         .filter((field) => field && field.id && field.type)
// // // //                                                         .map((field) => {
// // // //                                                             console.log('Rendering field:', field);
// // // //                                                             if (field.type === 'heading') {
// // // //                                                                 const HeadingTag = field.headingLevel || 'h1';

// // // //                                                                 return (
// // // //                                                                     <div
// // // //                                                                         key={field.id}
// // // //                                                                         onClick={() => handleFieldClick(field.id)}
// // // //                                                                         className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
// // // //                                                                     >
// // // //                                                                         <div className='email-input-field'
// // // //                                                                             style={{
// // // //                                                                                 fontWeight: field.headingFontWeight,
// // // //                                                                                 backgroundColor: field.headingbg,
// // // //                                                                                 borderWidth: `${field.headingBorderWidth}px`,
// // // //                                                                                 borderStyle: field.headingBorderStyle,
// // // //                                                                                 borderColor: field.headingBorderColor,
// // // //                                                                                 backgroundImage: field.headingbgImage ? `url(${field.headingbgImage})` : 'none',
// // // //                                                                                 backgroundRepeat: 'no-repeat',
// // // //                                                                                 backgroundSize: 'cover',

// // // //                                                                             }}
// // // //                                                                         >
// // // //                                                                             {React.createElement(HeadingTag, {
// // // //                                                                                 style: {
// // // //                                                                                     fontSize: `${field.headingFontSize}px`,
// // // //                                                                                     color: field.headingColor,
// // // //                                                                                     padding: `${field.headingPadding}px`,
// // // //                                                                                     letterSpacing: `${field.headingLetterSpacing}px`,
// // // //                                                                                     textAlign: field.headingTextAlign || '',
// // // //                                                                                 }
// // // //                                                                             }, field.headingText || field.value)}
// // // //                                                                             {field.imageUrl && (
// // // //                                                                                 <div className="heading-image" style={{ textAlign: field.bannerImageTextAlign || '' }} >
// // // //                                                                                     <img
// // // //                                                                                         src={field.imageUrl}
// // // //                                                                                         alt="Heading Image"
// // // //                                                                                         style={{
// // // //                                                                                             width: `${field.bannerImageWidth}%`,
// // // //                                                                                             height: field.bannerImageHeight || 'auto',
// // // //                                                                                         }}
// // // //                                                                                     />
// // // //                                                                                 </div>
// // // //                                                                             )}
// // // //                                                                             {(field.editorContent || editorValue) && (
// // // //                                                                                 <div
// // // //                                                                                     className="heading-editor-content"
// // // //                                                                                     dangerouslySetInnerHTML={{
// // // //                                                                                         __html: field.editorContent || editorValue
// // // //                                                                                     }}
// // // //                                                                                 />
// // // //                                                                             )}
// // // //                                                                             {field.headingUrl && (
// // // //                                                                                 <a href={field.headingUrl} target="_blank" rel="noopener noreferrer" onClick={(e) => e.preventDefault()}>
// // // //                                                                                     <button
// // // //                                                                                         onClick={(e) => {
// // // //                                                                                             e.preventDefault();
// // // //                                                                                             console.log("Button clicked, but no navigation.");
// // // //                                                                                         }}
// // // //                                                                                         style={{
// // // //                                                                                             background: field.headerbtnbg,
// // // //                                                                                             color: field.headerbtncolor,
// // // //                                                                                             height: `${field.headingbtnheight}px`,
// // // //                                                                                             width: `${field.headingbtnwidth}px`,
// // // //                                                                                             fontSize: `${field.headingbtnFontSize}px`,
// // // //                                                                                             borderRadius: `${field.headingbtnradious}px`,
// // // //                                                                                             padding: `${field.headingbtnPadding}px`,
// // // //                                                                                             borderWidth: `${field.headingbtnBorderWidth}px`,
// // // //                                                                                             borderStyle: field.headingbtnBorderStyle,
// // // //                                                                                             borderColor: field.headingbtnBorderColor,
// // // //                                                                                         }}
// // // //                                                                                     >
// // // //                                                                                         {field.headerbtn}
// // // //                                                                                     </button>
// // // //                                                                                 </a>
// // // //                                                                             )}
// // // //                                                                             <div className='form-builder-radio-btn email'>
// // // //                                                                                 <button className='remove-btn' onClick={() => removeField(field.id)}>
// // // //                                                                                     <img src={delete1} alt="delete" />
// // // //                                                                                 </button>
// // // //                                                                                 <button className="copy-btn" onClick={() => addInputField(field.type)}>
// // // //                                                                                     <img src={maximizesize} alt="copy" />
// // // //                                                                                 </button>
// // // //                                                                             </div>
// // // //                                                                         </div>
// // // //                                                                     </div>
// // // //                                                                 );
// // // //                                                             }

// // // //                                                             if (field.type === 'description') {
// // // //                                                                 return (
// // // //                                                                     <div key={field.id} onClick={() => handleFieldClick(field.id)}
// // // //                                                                         className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}

// // // //                                                                     >
// // // //                                                                         <div style={{
// // // //                                                                             backgroundColor: field.descriptionbg,
// // // //                                                                             padding: `${field.descriptionPadding}px`,
// // // //                                                                         }}>
// // // //                                                                             <p style={{
// // // //                                                                                 fontSize: `${field.descritionFontSize}px`,
// // // //                                                                                 letterSpacing: `${field.descriptionLetterSpacing}px`,
// // // //                                                                                 textAlign: field.descriptionTextAlign || '',
// // // //                                                                                 borderWidth: `${field.descriptionBorderWidth}px`,
// // // //                                                                                 borderStyle: field.descriptionBorderStyle,
// // // //                                                                                 borderColor: field.descriptionBorderColor,
// // // //                                                                                 fontWeight: field.descritionFontWeight,
// // // //                                                                                 color: field.descritionColor
// // // //                                                                             }}>{field.descriptionText || field.value || ''}</p>

// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-radio-btn email'>
// // // //                                                                             <button className='remove-btn' onClick={() => removeField(field.id)}>
// // // //                                                                                 <img src={delete1} alt="delete" />
// // // //                                                                             </button>
// // // //                                                                             <button className="copy-btn" onClick={() => addInputField(field.type)}>
// // // //                                                                                 <img src={maximizesize} alt="copy" />
// // // //                                                                             </button>
// // // //                                                                         </div>
// // // //                                                                     </div>
// // // //                                                                 );
// // // //                                                             }

// // // //                                                             if (field.type === 'images') {
// // // //                                                                 return (
// // // //                                                                     <div key={field.id} onClick={() => handleFieldClick(field.id)}
// // // //                                                                         className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
// // // //                                                                         ref={emailFieldRef}
// // // //                                                                     >
// // // //                                                                         <div className='email_field-images'
// // // //                                                                             style={{
// // // //                                                                                 width: `${field.imgWidth}%`,
// // // //                                                                                 textAlign: field.imgTextAlign ? field.imgTextAlign : '',
// // // //                                                                                 backgroundColor: field.imgbg,
// // // //                                                                                 padding: `${field.imgPadding}px`,
// // // //                                                                                 borderWidth: `${field.imgBorderWidth}px`,
// // // //                                                                                 borderStyle: field.imgBorderStyle,
// // // //                                                                                 borderColor: field.imgBorderColor,
// // // //                                                                                 margin: 'auto'
// // // //                                                                             }}>
// // // //                                                                             {field.value ? (
// // // //                                                                                 <img src={field.value} alt="Dynamic" style={{ maxWidth: '100%', height: 'auto' }} />
// // // //                                                                             ) : (
// // // //                                                                                 <p>No Image Provided</p>
// // // //                                                                             )}
// // // //                                                                         </div>

// // // //                                                                         <div className='form-builder-radio-btn email'>
// // // //                                                                             <button className='remove-btn' onClick={() => removeField(field.id)}>
// // // //                                                                                 <img src={delete1} alt="delete" />
// // // //                                                                             </button>
// // // //                                                                             <button className="copy-btn" onClick={() => addInputField(field.type)}>
// // // //                                                                                 <img src={maximizesize} alt="copy" />
// // // //                                                                             </button>
// // // //                                                                         </div>
// // // //                                                                     </div>
// // // //                                                                 );
// // // //                                                             }
// // // //                                                             if (field.type === 'divider') {
// // // //                                                                 return (
// // // //                                                                     <div key={field.id} onClick={() => handleFieldClick(field.id)}
// // // //                                                                         className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
// // // //                                                                         ref={emailFieldRef}
// // // //                                                                     >
// // // //                                                                         <hr style={{
// // // //                                                                             border: `1px solid ${field.dividerColor}`, width: `${field.dividerWidth}%`,
// // // //                                                                             height: `${field.dividerheight}px`
// // // //                                                                         }} />
// // // //                                                                         <div className='form-builder-radio-btn email'>
// // // //                                                                             <button className='remove-btn' onClick={() => removeField(field.id)}>
// // // //                                                                                 <img src={delete1} alt="delete" />
// // // //                                                                             </button>
// // // //                                                                             <button className="copy-btn" onClick={() => addInputField(field.type)}>
// // // //                                                                                 <img src={maximizesize} alt="copy" />
// // // //                                                                             </button>
// // // //                                                                         </div>
// // // //                                                                     </div>
// // // //                                                                 );
// // // //                                                             }

// // // //                                                             if (field.type === 'split') {
// // // //                                                                 const isImageUploaded = field.value && field.value.startsWith('data:image');
// // // //                                                                 return (
// // // //                                                                     <div key={field.id} onClick={() => handleFieldClick(field.id)}
// // // //                                                                         className={`email_field split-width ${activeFieldId === field.id ? 'active' : ''}`}
// // // //                                                                         ref={emailFieldRef}
// // // //                                                                         style={{
// // // //                                                                             width: field.width,
// // // //                                                                             backgroundColor: field.splitbg,
// // // //                                                                             padding: `${field.splitPadding}px`
// // // //                                                                         }}
// // // //                                                                     >
// // // //                                                                         {!isImageUploaded && (
// // // //                                                                             <div
// // // //                                                                                 onClick={() => setSelectedFieldId(field.id)}
// // // //                                                                                 style={{
// // // //                                                                                     padding: '10px',
// // // //                                                                                     minHeight: '30px',
// // // //                                                                                     border: '1px solid #ccc',
// // // //                                                                                     display: 'flex',
// // // //                                                                                     alignItems: 'center',
// // // //                                                                                     justifyContent: 'center',
// // // //                                                                                 }}
// // // //                                                                                 dangerouslySetInnerHTML={{ __html: field.value || 'Add text...' }}
// // // //                                                                             />
// // // //                                                                         )}
// // // //                                                                         {isImageUploaded && (
// // // //                                                                             <div>
// // // //                                                                                 <img
// // // //                                                                                     src={field.value}
// // // //                                                                                     alt="Uploaded Preview"
// // // //                                                                                     style={{ maxWidth: '100%', maxHeight: '200px' }}
// // // //                                                                                 />
// // // //                                                                             </div>
// // // //                                                                         )}
// // // //                                                                         <div className='form-builder-radio-btn email'>
// // // //                                                                             <button className='remove-btn' onClick={() => removeField(field.id)}>
// // // //                                                                                 <img src={delete1} alt="delete" />
// // // //                                                                             </button>
// // // //                                                                             <button className="copy-btn" onClick={() => addInputField(field.type)}>
// // // //                                                                                 <img src={maximizesize} alt="copy" />
// // // //                                                                             </button>
// // // //                                                                         </div>
// // // //                                                                     </div>
// // // //                                                                 )
// // // //                                                             }
// // // //                                                             if (field.type === 'richtext') {
// // // //                                                                 return (
// // // //                                                                     <div key={field.id} onClick={() => handleFieldClick(field.id)}
// // // //                                                                         className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
// // // //                                                                     >
// // // //                                                                         <div dangerouslySetInnerHTML={{ __html: field.content }} />
// // // //                                                                         <div className='form-builder-radio-btn email'>
// // // //                                                                             <button className='remove-btn' onClick={() => removeField(field.id)}>
// // // //                                                                                 <img src={delete1} alt="delete" />
// // // //                                                                             </button>
// // // //                                                                             <button className="copy-btn" onClick={() => addInputField(field.type)}>
// // // //                                                                                 <img src={maximizesize} alt="copy" />
// // // //                                                                             </button>
// // // //                                                                         </div>
// // // //                                                                     </div>
// // // //                                                                 );
// // // //                                                             }
// // // //                                                             if (field.type === 'spacer') {
// // // //                                                                 return (
// // // //                                                                     <div key={field.id} onClick={() => handleFieldClick(field.id)}
// // // //                                                                         className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
// // // //                                                                         ref={emailFieldRef}
// // // //                                                                     >
// // // //                                                                         <div className='spacer-height-show' style={{ height: `${field.spacerHeight}px`, backgroundColor: field.spacerbg }}></div>
// // // //                                                                         <div className='form-builder-radio-btn email'>
// // // //                                                                             <button className='remove-btn' onClick={() => removeField(field.id)}>
// // // //                                                                                 <img src={delete1} alt="delete" />
// // // //                                                                             </button>
// // // //                                                                             <button className="copy-btn" onClick={() => addInputField(field.type)}>
// // // //                                                                                 <img src={maximizesize} alt="copy" />
// // // //                                                                             </button>
// // // //                                                                         </div>
// // // //                                                                     </div>
// // // //                                                                 );

// // // //                                                             }
// // // //                                                             if (field.type === 'video') {

// // // //                                                                 return (
// // // //                                                                     <div key={field.id} onClick={() => handleFieldClick(field.id)}
// // // //                                                                         className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
// // // //                                                                         ref={emailFieldRef}
// // // //                                                                     >
// // // //                                                                         <div className='email-tempalte-video-show' style={{ padding: `${field.videoPadding}px`, borderWidth: `${field.videoBorderWidth}px`, borderStyle: field.videoBorderStyle, borderColor: field.videoBorderColor }}>
// // // //                                                                             {field.value && getVideoEmbedUrl(field.value) ? (
// // // //                                                                                 <iframe
// // // //                                                                                     height="250px"
// // // //                                                                                     width="500px"
// // // //                                                                                     src={getVideoEmbedUrl(field.value)}
// // // //                                                                                     title="Video Preview"
// // // //                                                                                     frameBorder="0"
// // // //                                                                                     allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
// // // //                                                                                     allowFullScreen
// // // //                                                                                 ></iframe>) : (
// // // //                                                                                 <div className='email-tempalte-img'>
// // // //                                                                                     <img src={videoplay} alt="" />
// // // //                                                                                 </div>
// // // //                                                                             )}
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-radio-btn email'>
// // // //                                                                             <button className='remove-btn' onClick={() => removeField(field.id)}>
// // // //                                                                                 <img src={delete1} alt="delete" />
// // // //                                                                             </button>
// // // //                                                                             <button className="copy-btn" onClick={() => addInputField(field.type)}>
// // // //                                                                                 <img src={maximizesize} alt="copy" />
// // // //                                                                             </button>
// // // //                                                                         </div>

// // // //                                                                     </div>
// // // //                                                                 );
// // // //                                                             }

// // // //                                                             if (field.type === 'button') {
// // // //                                                                 return (
// // // //                                                                     <div key={field.id} onClick={() => handleFieldClick(field.id)}
// // // //                                                                         className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
// // // //                                                                         ref={emailFieldRef}
// // // //                                                                     >
// // // //                                                                         <a href={field.buttonUrll}>
// // // //                                                                             <button
// // // //                                                                                 type="button"
// // // //                                                                                 style={{
// // // //                                                                                     fontSize: `${fontSize}px`,
// // // //                                                                                     color: field.buttonTextColor,
// // // //                                                                                     backgroundColor: btnbackgroundColor,
// // // //                                                                                     width: `${width}px`,
// // // //                                                                                     height: `${height}px`,
// // // //                                                                                     padding: `${padding}px`,
// // // //                                                                                     borderWidth: `${field.buttonBorderWidth}px`,
// // // //                                                                                     borderStyle: field.buttonBorderStyle,
// // // //                                                                                     borderColor: field.buttonBorderColor,
// // // //                                                                                     letterSpacing: `${field.buttonLetterSpacing}px`,
// // // //                                                                                     borderRadius: `${field.buttonradious}px`
// // // //                                                                                 }}
// // // //                                                                             >
// // // //                                                                                 {buttonLabel}
// // // //                                                                             </button>
// // // //                                                                         </a>
// // // //                                                                         <div className='form-builder-radio-btn email'>
// // // //                                                                             <button className='remove-btn' onClick={() => removeField(field.id)}>
// // // //                                                                                 <img src={delete1} alt="delete" />
// // // //                                                                             </button>
// // // //                                                                             <button className="copy-btn" onClick={() => addInputField(field.type)}>
// // // //                                                                                 <img src={maximizesize} alt="copy" />
// // // //                                                                             </button>
// // // //                                                                         </div>
// // // //                                                                     </div>
// // // //                                                                 );
// // // //                                                             }

// // // //                                                             if (field.type === 'html convert') {
// // // //                                                                 return (
// // // //                                                                     <div className="form-builder-and-preview">
// // // //                                                                         <div key={field.id} onClick={() => handleFieldClick(field.id)}
// // // //                                                                             className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
// // // //                                                                             ref={emailFieldRef}
// // // //                                                                         >
// // // //                                                                             <div>
// // // //                                                                                 <div style={{ color: field.htmlColor, fontSize: `${field.htmlFontSize}px`, padding: `${field.htmlPadding}px` }}
// // // //                                                                                     className="preview-content"
// // // //                                                                                     dangerouslySetInnerHTML={{ __html: field.value }}
// // // //                                                                                 />
// // // //                                                                                 <div className='form-builder-radio-btn email'>
// // // //                                                                                     <button className='remove-btn' onClick={() => removeField(field.id)}>
// // // //                                                                                         <img src={delete1} alt="delete" />
// // // //                                                                                     </button>
// // // //                                                                                     <button className="copy-btn" onClick={() => addInputField(field.type)}>
// // // //                                                                                         <img src={maximizesize} alt="copy" />
// // // //                                                                                     </button>
// // // //                                                                                 </div>
// // // //                                                                             </div>
// // // //                                                                         </div>
// // // //                                                                     </div>
// // // //                                                                 );
// // // //                                                             }
// // // //                                                             if (field.type === 'Multicolumn') {
// // // //                                                                 console.log("Column Images:", columnImages);
// // // //                                                                 console.log("Editor Values:", editorValues);

// // // //                                                                 return (
// // // //                                                                     <div key={field.id} onClick={() => handleFieldClick(field.id)}
// // // //                                                                         className={`email_field  columns-container ${activeFieldId === field.id ? 'active' : ''}`}
// // // //                                                                         data-columns={columnCount}
// // // //                                                                         ref={emailFieldRef}

// // // //                                                                     >
// // // //                                                                         {Array.from({ length: columnCount }, (_, i) => (
// // // //                                                                             <div
// // // //                                                                                 key={i}
// // // //                                                                                 className={`column ${selectedColumn === i ? 'active-column' : ''}`}
// // // //                                                                                 onClick={() => setSelectedColumn(i)}
// // // //                                                                                 style={{
// // // //                                                                                     border: selectedColumn === i ? '2px solid red' : '1px solid gray',
// // // //                                                                                     cursor: 'pointer',
// // // //                                                                                 }}
// // // //                                                                             >
// // // //                                                                                 {columnImages[i] || editorValues[i] ? (
// // // //                                                                                     <>
// // // //                                                                                         {columnImages[i] ? (
// // // //                                                                                             <img
// // // //                                                                                                 src={columnImages[i]}
// // // //                                                                                                 alt={`Uploaded for Column ${i + 1}`}
// // // //                                                                                                 style={{ width: '100px', height: '100px', marginTop: '10px' }}
// // // //                                                                                             />
// // // //                                                                                         ) : null}

// // // //                                                                                         {editorValues[i] ? (
// // // //                                                                                             <div
// // // //                                                                                                 dangerouslySetInnerHTML={{
// // // //                                                                                                     __html: editorValues[i],
// // // //                                                                                                 }}
// // // //                                                                                             />
// // // //                                                                                         ) : null}
// // // //                                                                                     </>
// // // //                                                                                 ) : (
// // // //                                                                                     <div style={{ color: 'gray' }}>
// // // //                                                                                         <h2>Column {i + 1}</h2>
// // // //                                                                                         Elevate your online store with our easy-to-use Text Box feature.
// // // //                                                                                         It's a game-changer for personalization, allowing customers to add their
// // // //                                                                                         special touch directly from a user-friendly drop-down menu. This added layer of customization not only
// // // //                                                                                         delights your customers.
// // // //                                                                                     </div>
// // // //                                                                                 )}
// // // //                                                                             </div>
// // // //                                                                         ))}

// // // //                                                                         <div className='form-builder-radio-btn email'>
// // // //                                                                             <button className='remove-btn' onClick={() => removeField(field.id)}>
// // // //                                                                                 <img src={delete1} alt="delete" />
// // // //                                                                             </button>
// // // //                                                                             <button className="copy-btn" onClick={() => addInputField(field.type)}>
// // // //                                                                                 <img src={maximizesize} alt="copy" />
// // // //                                                                             </button>
// // // //                                                                         </div>
// // // //                                                                     </div>
// // // //                                                                 );
// // // //                                                             }
// // // //                                                             if (field.type === 'product' && field.products) {
// // // //                                                                 return (
// // // //                                                                     <div onClick={() => handleAddProductToSelected(field.id, field.title, field.image, field.products)}>
// // // //                                                                         <div key={field.id} onClick={() => handleFieldClick(field.id)}
// // // //                                                                             className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
// // // //                                                                             ref={emailFieldRef}
// // // //                                                                         >
// // // //                                                                             <div className={`template-products ${productsPerRow ? `row-${productsPerRow}` : 'row-3'} ${viewMode === 'mobile' ? 'mobile' : ''}`}
// // // //                                                                                 style={{
// // // //                                                                                     padding: `${field.productPadding}px`,
// // // //                                                                                     backgroundColor: field.productbg,
// // // //                                                                                     borderWidth: `${field.productBorderWidth}px`,
// // // //                                                                                     borderStyle: field.productBorderStyle,
// // // //                                                                                     borderColor: field.productBorderColor,
// // // //                                                                                     fontSize: `${field.productFontSize}px`,
// // // //                                                                                     color: field.productTextColor,

// // // //                                                                                 }}
// // // //                                                                             >
// // // //                                                                                 {field.products.map((product) => (
// // // //                                                                                     <div className='product-show' key={product.id}>

// // // //                                                                                         {product.images && product.images.length > 0 && (
// // // //                                                                                             <div className="images-gallery">
// // // //                                                                                                 <img
// // // //                                                                                                     src={product.images[0].src}
// // // //                                                                                                     alt={product.images[0].alt || 'Product Image'}
// // // //                                                                                                     style={{ width: '150px', height: '150px', objectFit: 'cover' }}
// // // //                                                                                                 />
// // // //                                                                                             </div>
// // // //                                                                                         )}
// // // //                                                                                         <div>
// // // //                                                                                             <h4 style={{ letterSpacing: `${field.productLetterSpacing}px`, fontWeight: field.productWeight, }}>{product.title}</h4>
// // // //                                                                                             {showPrice && product.variants && product.variants.length > 0 && (
// // // //                                                                                                 <p style={{ fontWeight: field.productWeight, letterSpacing: `${field.productLetterSpacing}px` }}> ${product.variants[0].price}</p>
// // // //                                                                                             )}
// // // //                                                                                         </div>

// // // //                                                                                         {showbtnn && (
// // // //                                                                                             <a href={`https://${shop}/admin/products?selectedView=all`} target="_blank" rel="noopener noreferrer">
// // // //                                                                                                 <button
// // // //                                                                                                     style={{
// // // //                                                                                                         fontSize: `${field.productfontSize}px`,
// // // //                                                                                                         width: `${field.productwidth}px`,
// // // //                                                                                                         height: `${field.productheight}px`,
// // // //                                                                                                         backgroundColor: field.productbackgroundColor,
// // // //                                                                                                         borderWidth: `${field.productbtnBorderWidth}px`,
// // // //                                                                                                         borderStyle: field.productbtnBorderStyle,
// // // //                                                                                                         borderColor: field.productbtnBorderColor,
// // // //                                                                                                         color: field.productbtnbg,
// // // //                                                                                                         borderRadius: `${field.productradious}px`,
// // // //                                                                                                     }}
// // // //                                                                                                     className='show-bnt-prodcut'>{field.productLabel}</button>
// // // //                                                                                             </a>
// // // //                                                                                         )}
// // // //                                                                                     </div>
// // // //                                                                                 ))}
// // // //                                                                             </div>
// // // //                                                                             <div className='form-builder-radio-btn email'>
// // // //                                                                                 <button className='remove-btn' onClick={() => removeField(field.id)}>
// // // //                                                                                     <img src={delete1} alt="delete" />
// // // //                                                                                 </button>
// // // //                                                                                 <button className="copy-btn" onClick={() => addInputField(field.type)}>
// // // //                                                                                     <img src={maximizesize} alt="copy" />
// // // //                                                                                 </button>
// // // //                                                                             </div>
// // // //                                                                         </div>
// // // //                                                                     </div>
// // // //                                                                 );
// // // //                                                             }

// // // //                                                             if (field.type === 'socalicon') {
// // // //                                                                 return (
// // // //                                                                     <div onClick={() => handleEdit(field)}>
// // // //                                                                         <div key={field.id} onClick={() => handleFieldClick(field.id)}
// // // //                                                                             className={`email_field  ${activeFieldId === field.id ? 'active' : ''}`}
// // // //                                                                             ref={emailFieldRef}

// // // //                                                                         >
// // // //                                                                             <div style={{ textAlign: field.socaliconTextAlign || '', padding: `${field.socalIconPadding}px` }} >
// // // //                                                                                 <div className="social-icons" >
// // // //                                                                                     {field.icons.facebook && field.icons.facebook.url && !field.icons.facebook.isHidden && (
// // // //                                                                                         <a href={field.icons.facebook.url} onClick={(e) => e.preventDefault()}>
// // // //                                                                                             <img src={facebook} alt="" style={{ width: `${socalIconWidth}px`, height: `${socalIconHeight}px` }} />
// // // //                                                                                         </a>
// // // //                                                                                     )}
// // // //                                                                                     {field.icons.twitter && field.icons.twitter.url && !field.icons.twitter.isHidden && (
// // // //                                                                                         <a href={field.icons.twitter.url} onClick={(e) => e.preventDefault()}>
// // // //                                                                                             <img src={twitter} alt="" style={{ width: `${socalIconWidth}px`, height: `${socalIconHeight}px` }} />
// // // //                                                                                         </a>
// // // //                                                                                     )}
// // // //                                                                                     {field.icons.instagram && field.icons.instagram.url && !field.icons.instagram.isHidden && (
// // // //                                                                                         <a href={field.icons.instagram.url} onClick={(e) => e.preventDefault()}>
// // // //                                                                                             <img src={instagram} alt="" style={{ width: `${socalIconWidth}px`, height: `${socalIconHeight}px` }} />
// // // //                                                                                         </a>
// // // //                                                                                     )}
// // // //                                                                                     {field.customIcons.map((icon, index) =>
// // // //                                                                                         icon.url && !icon.isHidden ? (
// // // //                                                                                             <a key={index} href={icon.url} target="_blank" rel="noopener noreferrer" onClick={(e) => e.preventDefault()}>
// // // //                                                                                                 <img src={icon.src} alt={`Custom Icon ${index}`} style={{ width: `${socalIconWidth}px`, }} />
// // // //                                                                                             </a>
// // // //                                                                                         ) : null
// // // //                                                                                     )}
// // // //                                                                                 </div>
// // // //                                                                             </div>
// // // //                                                                             <div className='form-builder-radio-btn email'>
// // // //                                                                                 <button className='remove-btn' onClick={() => removeField(field.id)}>
// // // //                                                                                     <img src={delete1} alt="delete" />
// // // //                                                                                 </button>
// // // //                                                                                 <button className="copy-btn" onClick={() => addInputField(field.type)}>
// // // //                                                                                     <img src={maximizesize} alt="copy" />
// // // //                                                                                 </button>
// // // //                                                                             </div>
// // // //                                                                         </div>
// // // //                                                                     </div>
// // // //                                                                 )
// // // //                                                             }
// // // //                                                         })
// // // //                                                     }

// // // //                                                 </>
// // // //                                             )}
// // // //                                         </div>
// // // //                                     </div>
// // // //                                 </div>

// // // //                                 <div className='email-template-input-setting'>
// // // //                                     {emailFieldPopup && (<div className='form-builder-change-propertites' ref={popupRef}>
// // // //                                         <div className='form-builder-change_show_all'>
// // // //                                             <div className='form_qucik'>
// // // //                                                 <p>Quick setup Settings</p>
// // // //                                             </div>
// // // //                                             <div className='form_build_propertities'>

// // // //                                                 {fields.length > 0 && selectedFieldId && (
// // // //                                                     <div className='quick-setup-settings'>
// // // //                                                         {fields.map((field) => {
// // // //                                                             if (field.id === selectedFieldId && field.type === 'Multicolumn') {
// // // //                                                                 return (
// // // //                                                                     <div>
// // // //                                                                         <div className="popupp">
// // // //                                                                             <div className="form-builder-chaneging-wrap select">
// // // //                                                                                 <label>Select Columns</label>
// // // //                                                                                 <div className="column-options">
// // // //                                                                                     <select value={columnCount} onChange={(e) => handleColumnSelection(e.target.value)}>
// // // //                                                                                         {[1, 2, 3, 4, 5, 6].map((column) => (
// // // //                                                                                             <option key={column} value={column}>
// // // //                                                                                                 {column} Columns
// // // //                                                                                             </option>
// // // //                                                                                         ))}
// // // //                                                                                     </select>
// // // //                                                                                 </div>
// // // //                                                                             </div>

// // // //                                                                         </div>

// // // //                                                                         <div className="popupp">
// // // //                                                                             <div className="form-builder-chaneging-wrap file">
// // // //                                                                                 <label>Column {selectedColumn + 1} Selected</label>
// // // //                                                                                 <input
// // // //                                                                                     type="file"
// // // //                                                                                     accept="image/*"
// // // //                                                                                     onChange={handleImageUploaded}
// // // //                                                                                 />
// // // //                                                                                 {columnImages[selectedColumn] && (
// // // //                                                                                     <div className="image-preview">
// // // //                                                                                         <img
// // // //                                                                                             src={columnImages[selectedColumn]}
// // // //                                                                                             alt={`Preview for Column ${selectedColumn + 1}`}
// // // //                                                                                             style={{ width: '100px', height: '100px', marginTop: '10px' }}
// // // //                                                                                         />
// // // //                                                                                         <button
// // // //                                                                                             onClick={() => {
// // // //                                                                                                 setColumnImages((prevImages) => ({
// // // //                                                                                                     ...prevImages,
// // // //                                                                                                     [selectedColumn]: null,
// // // //                                                                                                 }));
// // // //                                                                                             }}
// // // //                                                                                             style={{
// // // //                                                                                                 display: 'block',
// // // //                                                                                                 marginTop: '10px',
// // // //                                                                                                 backgroundColor: 'red',
// // // //                                                                                                 color: 'white',
// // // //                                                                                                 padding: '5px',
// // // //                                                                                                 border: 'none',
// // // //                                                                                                 cursor: 'pointer',
// // // //                                                                                                 borderRadius: '4px'
// // // //                                                                                             }}
// // // //                                                                                         >
// // // //                                                                                             Remove Image
// // // //                                                                                         </button>
// // // //                                                                                     </div>
// // // //                                                                                 )}
// // // //                                                                             </div>
// // // //                                                                             <ReactQuill
// // // //                                                                                 value={editorValues[selectedColumn] || ''}
// // // //                                                                                 onChange={(value) => handleEditorChangeed(value, selectedColumn)}
// // // //                                                                                 modules={{ toolbar: toolbarOptions }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                     </div>
// // // //                                                                 )
// // // //                                                             }
// // // //                                                             if (field.id === selectedFieldId && field.type === 'richtext') {
// // // //                                                                 return (
// // // //                                                                     <div>
// // // //                                                                         <ReactQuill
// // // //                                                                             value={editorValueed || field.content}
// // // //                                                                             onChange={handleEditChange}
// // // //                                                                             modules={{ toolbar: toolbarOptions }}
// // // //                                                                         />

// // // //                                                                     </div>
// // // //                                                                 )
// // // //                                                             }
// // // //                                                             if (field.id === selectedFieldId && field.type === 'product') {
// // // //                                                                 return (
// // // //                                                                     <div>

// // // //                                                                         <div>
// // // //                                                                             <div className="show-select-product">
// // // //                                                                                 <h3>Products</h3>
// // // //                                                                                 {productTitles.length > 0 ? (
// // // //                                                                                     productTitles.map((title, index) => (
// // // //                                                                                         <div className='show-product-details' key={index}>
// // // //                                                                                             <div style={{ display: 'flex', alignItems: 'center' }}>
// // // //                                                                                                 {productImage[index] && (
// // // //                                                                                                     <img
// // // //                                                                                                         src={productImage[index]}
// // // //                                                                                                         alt={title}
// // // //                                                                                                         style={{ width: '50px', height: '50px', objectFit: 'cover', marginRight: '10px' }}
// // // //                                                                                                     />
// // // //                                                                                                 )}

// // // //                                                                                                 <h4>{title.length > 35 ? title.slice(0, 35) + '...' : title}</h4>
// // // //                                                                                             </div>
// // // //                                                                                             <div style={{ cursor: "pointer" }} onClick={() => handleRemoveProductFromForm(index)}>
// // // //                                                                                                 <img src={deletep} alt="" style={{ width: '70%' }} />
// // // //                                                                                             </div>
// // // //                                                                                         </div>
// // // //                                                                                     ))
// // // //                                                                                 ) : (
// // // //                                                                                     <p>No products selected</p>
// // // //                                                                                 )}

// // // //                                                                                 <button className='product-btn-addproduct' onClick={AddProduct}>Add Product</button>
// // // //                                                                             </div>
// // // //                                                                         </div>
// // // //                                                                         <div className='product-detalis-all'>
// // // //                                                                             <h3>Product details</h3>
// // // //                                                                             <label className="custom-checkbox">
// // // //                                                                                 <input
// // // //                                                                                     type="checkbox"
// // // //                                                                                     checked={showPrice}
// // // //                                                                                     onChange={togglePrice}
// // // //                                                                                 />
// // // //                                                                                 Price
// // // //                                                                             </label>
// // // //                                                                             <label className="custom-checkbox">
// // // //                                                                                 <input
// // // //                                                                                     type="checkbox"
// // // //                                                                                     checked={showbtnn}
// // // //                                                                                     onChange={togglebtnn}
// // // //                                                                                 />
// // // //                                                                                 Button
// // // //                                                                             </label>
// // // //                                                                         </div>
// // // //                                                                         <div className="product-detalis-all">
// // // //                                                                             <h3>Product layout</h3>
// // // //                                                                             <div className='form-builder-chaneging-wrap select'>
// // // //                                                                                 <select onChange={handleProductsPerRowChange} defaultValue={3}>
// // // //                                                                                     {[...Array(6).keys()].map(i => (
// // // //                                                                                         <option key={i + 1} value={i + 1}>{i + 1} per row</option>
// // // //                                                                                     ))}
// // // //                                                                                 </select>
// // // //                                                                             </div>

// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap number' >
// // // //                                                                             <label>Padding (px)</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.productPadding}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, productPadding: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // // //                                                                             <label> Background Color</label>
// // // //                                                                             <input
// // // //                                                                                 type="color"
// // // //                                                                                 value={field.productbg || '#ffffff'}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, productbg: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // // //                                                                             <label>Border Color</label>
// // // //                                                                             <input
// // // //                                                                                 type="color"
// // // //                                                                                 value={field.productBorderColor}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, productBorderColor: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>

// // // //                                                                         <div className='form-builder-chaneging-wrap number' >
// // // //                                                                             <label>Border Width (px)</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.productBorderWidth}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, productBorderWidth: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap'>
// // // //                                                                             <label>Border Style</label>
// // // //                                                                             <select
// // // //                                                                                 value={field.productBorderStyle}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, productBorderStyle: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             >
// // // //                                                                                 <option value="solid">Solid</option>
// // // //                                                                                 <option value="dashed">Dashed</option>
// // // //                                                                                 <option value="dotted">Dotted</option>
// // // //                                                                             </select>
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // // //                                                                             <label>Font Size (px)</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.productFontSize}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, productFontSize: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // // //                                                                             <label> Color</label>
// // // //                                                                             <input
// // // //                                                                                 type="color"
// // // //                                                                                 value={field.productTextColor}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, productTextColor: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // // //                                                                             <label> Font-Weight</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.productWeight}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, productWeight: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}

// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // // //                                                                             <label> Letter Spacing</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.productLetterSpacing}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, productLetterSpacing: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                                 placeholder="Letter Spacing"
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap all-btn'>
// // // //                                                                             <label> Button</label>
// // // //                                                                             <div className='form-builder-chaneging-wrap'>
// // // //                                                                                 <label>Button Label</label>
// // // //                                                                                 <input
// // // //                                                                                     type="text"
// // // //                                                                                     value={field.productLabel}
// // // //                                                                                     onChange={(e) => {
// // // //                                                                                         setFields(prevFields =>
// // // //                                                                                             prevFields.map(f =>
// // // //                                                                                                 f.id === field.id ? { ...f, productLabel: e.target.value } : f
// // // //                                                                                             )
// // // //                                                                                         );
// // // //                                                                                     }}
// // // //                                                                                 />
// // // //                                                                             </div>
// // // //                                                                             <div className='form-builder-chaneging-wrap number'>
// // // //                                                                                 <label>Font Size (px)</label>
// // // //                                                                                 <input
// // // //                                                                                     type="number"
// // // //                                                                                     value={field.productfontSize}
// // // //                                                                                     onChange={(e) => {
// // // //                                                                                         setFields(prevFields =>
// // // //                                                                                             prevFields.map(f =>
// // // //                                                                                                 f.id === field.id ? { ...f, productfontSize: e.target.value } : f
// // // //                                                                                             )
// // // //                                                                                         );
// // // //                                                                                     }}
// // // //                                                                                 />
// // // //                                                                             </div>
// // // //                                                                             <div className='form-builder-chaneging-wrap number'>
// // // //                                                                                 <label>Width (px)</label>
// // // //                                                                                 <input
// // // //                                                                                     type="number"
// // // //                                                                                     value={field.productwidth}
// // // //                                                                                     onChange={(e) => {
// // // //                                                                                         setFields(prevFields =>
// // // //                                                                                             prevFields.map(f =>
// // // //                                                                                                 f.id === field.id ? { ...f, productwidth: e.target.value } : f
// // // //                                                                                             )
// // // //                                                                                         );
// // // //                                                                                     }}
// // // //                                                                                 />
// // // //                                                                             </div>

// // // //                                                                             <div className='form-builder-chaneging-wrap number'>
// // // //                                                                                 <label>Height (px)</label>
// // // //                                                                                 <input
// // // //                                                                                     type="number"
// // // //                                                                                     value={field.productheight}
// // // //                                                                                     onChange={(e) => {
// // // //                                                                                         setFields(prevFields =>
// // // //                                                                                             prevFields.map(f =>
// // // //                                                                                                 f.id === field.id ? { ...f, productheight: e.target.value } : f
// // // //                                                                                             )
// // // //                                                                                         );
// // // //                                                                                     }}
// // // //                                                                                 />
// // // //                                                                             </div>
// // // //                                                                             <div className='form-builder-chaneging-wrap color'>
// // // //                                                                                 <label>Background Color</label>
// // // //                                                                                 <input
// // // //                                                                                     type="color"
// // // //                                                                                     value={field.productbackgroundColor}
// // // //                                                                                     onChange={(e) => {
// // // //                                                                                         setFields(prevFields =>
// // // //                                                                                             prevFields.map(f =>
// // // //                                                                                                 f.id === field.id ? { ...f, productbackgroundColor: e.target.value } : f
// // // //                                                                                             )
// // // //                                                                                         );
// // // //                                                                                     }}
// // // //                                                                                 />
// // // //                                                                             </div>
// // // //                                                                             <div className='form-builder-chaneging-wrap color'>
// // // //                                                                                 <label>Border Color</label>
// // // //                                                                                 <input
// // // //                                                                                     type="color"
// // // //                                                                                     value={field.productbtnBorderColor}
// // // //                                                                                     onChange={(e) => {
// // // //                                                                                         setFields(prevFields =>
// // // //                                                                                             prevFields.map(f =>
// // // //                                                                                                 f.id === field.id ? { ...f, productbtnBorderColor: e.target.value } : f
// // // //                                                                                             )
// // // //                                                                                         );
// // // //                                                                                     }}
// // // //                                                                                 />
// // // //                                                                             </div>

// // // //                                                                             <div className='form-builder-chaneging-wrap number' >
// // // //                                                                                 <label>Border Width (px)</label>
// // // //                                                                                 <input
// // // //                                                                                     type="number"
// // // //                                                                                     value={field.productbtnBorderWidth}
// // // //                                                                                     onChange={(e) => {
// // // //                                                                                         setFields(prevFields =>
// // // //                                                                                             prevFields.map(f =>
// // // //                                                                                                 f.id === field.id ? { ...f, productbtnBorderWidth: e.target.value } : f
// // // //                                                                                             )
// // // //                                                                                         );
// // // //                                                                                     }}
// // // //                                                                                 />
// // // //                                                                             </div>
// // // //                                                                             <div className='form-builder-chaneging-wrap'>
// // // //                                                                                 <label>Border Style</label>
// // // //                                                                                 <select
// // // //                                                                                     value={field.productbtnBorderStyle}
// // // //                                                                                     onChange={(e) => {
// // // //                                                                                         setFields(prevFields =>
// // // //                                                                                             prevFields.map(f =>
// // // //                                                                                                 f.id === field.id ? { ...f, productbtnBorderStyle: e.target.value } : f
// // // //                                                                                             )
// // // //                                                                                         );
// // // //                                                                                     }}
// // // //                                                                                 >
// // // //                                                                                     <option value="solid">Solid</option>
// // // //                                                                                     <option value="dashed">Dashed</option>
// // // //                                                                                     <option value="dotted">Dotted</option>
// // // //                                                                                 </select>
// // // //                                                                             </div>
// // // //                                                                             <div className='form-builder-chaneging-wrap color'>
// // // //                                                                                 <label>Color</label>
// // // //                                                                                 <input
// // // //                                                                                     type="color"
// // // //                                                                                     value={field.productbtnbg || '#ffffff'}
// // // //                                                                                     onChange={(e) => {
// // // //                                                                                         setFields(prevFields =>
// // // //                                                                                             prevFields.map(f =>
// // // //                                                                                                 f.id === field.id ? { ...f, productbtnbg: e.target.value } : f
// // // //                                                                                             )
// // // //                                                                                         );
// // // //                                                                                     }}
// // // //                                                                                 />
// // // //                                                                             </div>
// // // //                                                                             <div className='form-builder-chaneging-wrap number'>
// // // //                                                                                 <label>Border-Radious</label>
// // // //                                                                                 <input
// // // //                                                                                     type="number"
// // // //                                                                                     value={field.productradious || '#ffffff'}
// // // //                                                                                     onChange={(e) => {
// // // //                                                                                         setFields(prevFields =>
// // // //                                                                                             prevFields.map(f =>
// // // //                                                                                                 f.id === field.id ? { ...f, productradious: e.target.value } : f
// // // //                                                                                             )
// // // //                                                                                         );
// // // //                                                                                     }}
// // // //                                                                                 />
// // // //                                                                             </div>
// // // //                                                                         </div>

// // // //                                                                     </div>
// // // //                                                                 )
// // // //                                                             }
// // // //                                                             if (field.id === selectedFieldId && field.type === 'heading') {
// // // //                                                                 return (
// // // //                                                                     <div key={field.id}>
// // // //                                                                         <div className='form-builder-chaneging-wrap'>
// // // //                                                                             <label>Heading Text:</label>
// // // //                                                                             <input
// // // //                                                                                 type="text"
// // // //                                                                                 value={field.headingText || field.value}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, headingText: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                                 placeholder="Enter Heading Text"
// // // //                                                                             />
// // // //                                                                         </div>

// // // //                                                                         <div className='form-builder-chaneging-wrap'>
// // // //                                                                             <label>Heading Level:</label>
// // // //                                                                             <select
// // // //                                                                                 value={field.headingLevel}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, headingLevel: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             >
// // // //                                                                                 <option value="h1">H1</option>
// // // //                                                                                 <option value="h2">H2</option>
// // // //                                                                                 <option value="h3">H3</option>
// // // //                                                                                 <option value="h4">H4</option>
// // // //                                                                                 <option value="h5">H5</option>
// // // //                                                                                 <option value="h6">H6</option>
// // // //                                                                             </select>
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // // //                                                                             <label>Heading Font Size:</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.headingFontSize}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, headingFontSize: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                                 placeholder="Font Size"
// // // //                                                                             />
// // // //                                                                         </div>

// // // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // // //                                                                             <label> Color</label>
// // // //                                                                             <input
// // // //                                                                                 type="color"
// // // //                                                                                 value={field.headingColor}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, headingColor: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         {field.imageUrl ? (
// // // //                                                                             <div>
// // // //                                                                                 <div className="form-builder-chaneging-wrap">
// // // //                                                                                     <div className="image-preview">
// // // //                                                                                         <img
// // // //                                                                                             src={field.imageUrl || field.value}
// // // //                                                                                             alt="Heading Image"
// // // //                                                                                             style={{ width: "150px" }}
// // // //                                                                                         />
// // // //                                                                                     </div>
// // // //                                                                                 </div>
// // // //                                                                                 <button onClick={() => RemoveImage(field.id)}>Remove Image</button>
// // // //                                                                                 <div className='form-builder-chaneging-wrap number'>
// // // //                                                                                     <label>Image Width:</label>
// // // //                                                                                     <input
// // // //                                                                                         type="number"
// // // //                                                                                         value={field.bannerImageWidth}
// // // //                                                                                         onChange={(e) => {
// // // //                                                                                             setFields(prevFields =>
// // // //                                                                                                 prevFields.map(f =>
// // // //                                                                                                     f.id === field.id ? { ...f, bannerImageWidth: e.target.value } : f
// // // //                                                                                                 )
// // // //                                                                                             );
// // // //                                                                                         }}
// // // //                                                                                         placeholder="Enter Heading Text"
// // // //                                                                                     />
// // // //                                                                                 </div>
// // // //                                                                                 <div className="form-builder-chaneging-wrap number">
// // // //                                                                                     <label>Image Height:</label>
// // // //                                                                                     <select
// // // //                                                                                         value={
// // // //                                                                                             field.bannerImageHeight === '100px'
// // // //                                                                                                 ? 'small'
// // // //                                                                                                 : field.bannerImageHeight === '200px'
// // // //                                                                                                     ? 'medium'
// // // //                                                                                                     : field.bannerImageHeight === '300px'
// // // //                                                                                                         ? 'large'
// // // //                                                                                                         : 'default'
// // // //                                                                                         }
// // // //                                                                                         onChange={(e) => {
// // // //                                                                                             const selectedValue = e.target.value;
// // // //                                                                                             const heightMapping = {
// // // //                                                                                                 default: 'auto',
// // // //                                                                                                 small: '100px',
// // // //                                                                                                 medium: '200px',
// // // //                                                                                                 large: '300px',
// // // //                                                                                             };

// // // //                                                                                             setFields((prevFields) =>
// // // //                                                                                                 prevFields.map((f) =>
// // // //                                                                                                     f.id === field.id
// // // //                                                                                                         ? {
// // // //                                                                                                             ...f,
// // // //                                                                                                             bannerImageHeight: heightMapping[selectedValue],
// // // //                                                                                                         }
// // // //                                                                                                         : f
// // // //                                                                                                 )
// // // //                                                                                             );
// // // //                                                                                         }}
// // // //                                                                                     >
// // // //                                                                                         <option value="default">Default</option>
// // // //                                                                                         <option value="small">Small</option>
// // // //                                                                                         <option value="medium">Medium</option>
// // // //                                                                                         <option value="large">Large</option>
// // // //                                                                                     </select>
// // // //                                                                                 </div>
// // // //                                                                                 <div className='form-builder-chaneging-wrap'>
// // // //                                                                                     <label>Text Align </label>
// // // //                                                                                     <select
// // // //                                                                                         value={field.bannerImageTextAlign}
// // // //                                                                                         onChange={(e) => {
// // // //                                                                                             setFields(prevFields =>
// // // //                                                                                                 prevFields.map(f =>
// // // //                                                                                                     f.id === field.id ? { ...f, bannerImageTextAlign: e.target.value } : f
// // // //                                                                                                 )
// // // //                                                                                             );
// // // //                                                                                         }}
// // // //                                                                                     >
// // // //                                                                                         <option value="">Select text align</option>
// // // //                                                                                         <option value="left">left</option>
// // // //                                                                                         <option value="center">center</option>
// // // //                                                                                         <option value="right">right</option>
// // // //                                                                                     </select>
// // // //                                                                                 </div>
// // // //                                                                             </div>
// // // //                                                                         ) : null}

// // // //                                                                         <div className="form-builder-chaneging-wrap">
// // // //                                                                             {(editorValue || field.editorContent) && (
// // // //                                                                                 <ReactQuill
// // // //                                                                                     value={editorValue || field.editorContent}
// // // //                                                                                     onChange={handleEditorChange}
// // // //                                                                                     modules={{ toolbar: toolbarOptions }}
// // // //                                                                                 />
// // // //                                                                             )}
// // // //                                                                         </div>
// // // //                                                                         <div className="form-builder-changing-wrap url">
// // // //                                                                             {field.headingUrl && (
// // // //                                                                                 <>
// // // //                                                                                     <label>Button Url:</label>
// // // //                                                                                     <input
// // // //                                                                                         type="url"
// // // //                                                                                         value={field.headingUrl}
// // // //                                                                                         onChange={(e) => handleUpdateUrl(field.id, e.target.value)}
// // // //                                                                                         placeholder="Update URL"
// // // //                                                                                     />

// // // //                                                                                     <div className='form-builder-chaneging-wrap'>
// // // //                                                                                         <label>Button Label</label>
// // // //                                                                                         <input
// // // //                                                                                             type="text"
// // // //                                                                                             value={field.headerbtn}
// // // //                                                                                             onChange={(e) => {
// // // //                                                                                                 setFields(prevFields =>
// // // //                                                                                                     prevFields.map(f =>
// // // //                                                                                                         f.id === field.id ? { ...f, headerbtn: e.target.value } : f
// // // //                                                                                                     )
// // // //                                                                                                 );
// // // //                                                                                             }}
// // // //                                                                                         />
// // // //                                                                                     </div>

// // // //                                                                                     <div className='form-builder-chaneging-wrap color'>
// // // //                                                                                         <label>Button Background</label>
// // // //                                                                                         <input
// // // //                                                                                             type="color"
// // // //                                                                                             value={field.headerbtnbg}
// // // //                                                                                             onChange={(e) => {
// // // //                                                                                                 setFields(prevFields =>
// // // //                                                                                                     prevFields.map(f =>
// // // //                                                                                                         f.id === field.id ? { ...f, headerbtnbg: e.target.value } : f
// // // //                                                                                                     )
// // // //                                                                                                 );
// // // //                                                                                             }}
// // // //                                                                                         />
// // // //                                                                                     </div>
// // // //                                                                                     <div className='form-builder-chaneging-wrap color'>
// // // //                                                                                         <label>Border Color</label>
// // // //                                                                                         <input
// // // //                                                                                             type="color"
// // // //                                                                                             value={field.headingbtnBorderColor}
// // // //                                                                                             onChange={(e) => {
// // // //                                                                                                 setFields(prevFields =>
// // // //                                                                                                     prevFields.map(f =>
// // // //                                                                                                         f.id === field.id ? { ...f, headingbtnBorderColor: e.target.value } : f
// // // //                                                                                                     )
// // // //                                                                                                 );
// // // //                                                                                             }}
// // // //                                                                                         />
// // // //                                                                                     </div>

// // // //                                                                                     <div className='form-builder-chaneging-wrap number' >
// // // //                                                                                         <label>Border Width (px)</label>
// // // //                                                                                         <input
// // // //                                                                                             type="number"
// // // //                                                                                             value={field.headingbtnBorderWidth}
// // // //                                                                                             onChange={(e) => {
// // // //                                                                                                 setFields(prevFields =>
// // // //                                                                                                     prevFields.map(f =>
// // // //                                                                                                         f.id === field.id ? { ...f, headingbtnBorderWidth: e.target.value } : f
// // // //                                                                                                     )
// // // //                                                                                                 );
// // // //                                                                                             }}
// // // //                                                                                         />
// // // //                                                                                     </div>
// // // //                                                                                     <div className='form-builder-chaneging-wrap'>
// // // //                                                                                         <label>Border Style</label>
// // // //                                                                                         <select
// // // //                                                                                             value={field.headingbtnBorderStyle}
// // // //                                                                                             onChange={(e) => {
// // // //                                                                                                 setFields(prevFields =>
// // // //                                                                                                     prevFields.map(f =>
// // // //                                                                                                         f.id === field.id ? { ...f, headingbtnBorderStyle: e.target.value } : f
// // // //                                                                                                     )
// // // //                                                                                                 );
// // // //                                                                                             }}
// // // //                                                                                         >
// // // //                                                                                             <option value="solid">Solid</option>
// // // //                                                                                             <option value="dashed">Dashed</option>
// // // //                                                                                             <option value="dotted">Dotted</option>
// // // //                                                                                         </select>
// // // //                                                                                     </div>
// // // //                                                                                     <div className='form-builder-chaneging-wrap color'>
// // // //                                                                                         <label>Button Color</label>
// // // //                                                                                         <input
// // // //                                                                                             type="color"
// // // //                                                                                             value={field.headerbtncolor}
// // // //                                                                                             onChange={(e) => {
// // // //                                                                                                 setFields(prevFields =>
// // // //                                                                                                     prevFields.map(f =>
// // // //                                                                                                         f.id === field.id ? { ...f, headerbtncolor: e.target.value } : f
// // // //                                                                                                     )
// // // //                                                                                                 );
// // // //                                                                                             }}
// // // //                                                                                         />
// // // //                                                                                     </div>
// // // //                                                                                     <div className='form-builder-chaneging-wrap number'>
// // // //                                                                                         <label>Button Padding</label>
// // // //                                                                                         <input
// // // //                                                                                             type="number"
// // // //                                                                                             value={field.headingbtnPadding}
// // // //                                                                                             onChange={(e) => {
// // // //                                                                                                 setFields(prevFields =>
// // // //                                                                                                     prevFields.map(f =>
// // // //                                                                                                         f.id === field.id ? { ...f, headingbtnPadding: e.target.value } : f
// // // //                                                                                                     )
// // // //                                                                                                 );
// // // //                                                                                             }}
// // // //                                                                                             placeholder="Padding"
// // // //                                                                                         />
// // // //                                                                                     </div>
// // // //                                                                                     <div className='form-builder-chaneging-wrap number'>
// // // //                                                                                         <label>Button Radious</label>
// // // //                                                                                         <input
// // // //                                                                                             type="number"
// // // //                                                                                             value={field.headingbtnradious}
// // // //                                                                                             onChange={(e) => {
// // // //                                                                                                 setFields(prevFields =>
// // // //                                                                                                     prevFields.map(f =>
// // // //                                                                                                         f.id === field.id ? { ...f, headingbtnradious: e.target.value } : f
// // // //                                                                                                     )
// // // //                                                                                                 );
// // // //                                                                                             }}
// // // //                                                                                             placeholder="Padding"
// // // //                                                                                         />
// // // //                                                                                     </div>
// // // //                                                                                     <div className='form-builder-chaneging-wrap number'>
// // // //                                                                                         <label>Button Height</label>
// // // //                                                                                         <input
// // // //                                                                                             type="number"
// // // //                                                                                             value={field.headingbtnheight}
// // // //                                                                                             onChange={(e) => {
// // // //                                                                                                 setFields(prevFields =>
// // // //                                                                                                     prevFields.map(f =>
// // // //                                                                                                         f.id === field.id ? { ...f, headingbtnheight: e.target.value } : f
// // // //                                                                                                     )
// // // //                                                                                                 );
// // // //                                                                                             }}
// // // //                                                                                             placeholder="Padding"
// // // //                                                                                         />
// // // //                                                                                     </div>
// // // //                                                                                     <div className='form-builder-chaneging-wrap number'>
// // // //                                                                                         <label>Button Width</label>
// // // //                                                                                         <input
// // // //                                                                                             type="number"
// // // //                                                                                             value={field.headingbtnwidth}
// // // //                                                                                             onChange={(e) => {
// // // //                                                                                                 setFields(prevFields =>
// // // //                                                                                                     prevFields.map(f =>
// // // //                                                                                                         f.id === field.id ? { ...f, headingbtnwidth: e.target.value } : f
// // // //                                                                                                     )
// // // //                                                                                                 );
// // // //                                                                                             }}
// // // //                                                                                             placeholder="Padding"
// // // //                                                                                         />
// // // //                                                                                     </div>

// // // //                                                                                     <div className='form-builder-chaneging-wrap number'>
// // // //                                                                                         <label>Button Font-Size</label>
// // // //                                                                                         <input
// // // //                                                                                             type="number"
// // // //                                                                                             value={field.headingbtnFontSize}
// // // //                                                                                             onChange={(e) => {
// // // //                                                                                                 setFields(prevFields =>
// // // //                                                                                                     prevFields.map(f =>
// // // //                                                                                                         f.id === field.id ? { ...f, headingbtnFontSize: e.target.value } : f
// // // //                                                                                                     )
// // // //                                                                                                 );
// // // //                                                                                             }}
// // // //                                                                                             placeholder="Padding"
// // // //                                                                                         />
// // // //                                                                                     </div>

// // // //                                                                                 </>

// // // //                                                                             )}
// // // //                                                                         </div>

// // // //                                                                         <div className='form-builder-chaneging-wrap image'>
// // // //                                                                             <label>Background Image</label>
// // // //                                                                             <input
// // // //                                                                                 type="file"
// // // //                                                                                 accept="image/*"
// // // //                                                                                 onChange={(e) => handleFileChange(e, field.id)}
// // // //                                                                             />

// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap preview '>
// // // //                                                                             {field.headingbgImage && (
// // // //                                                                                 <div className="image-preview">
// // // //                                                                                     <img
// // // //                                                                                         src={field.headingbgImage}
// // // //                                                                                         alt="Background Preview"
// // // //                                                                                         style={{ maxWidth: '100%', maxHeight: '150px', objectFit: 'cover' }}
// // // //                                                                                     />
// // // //                                                                                 </div>
// // // //                                                                             )}
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // // //                                                                             <label> Background Color</label>
// // // //                                                                             <input
// // // //                                                                                 type="color"
// // // //                                                                                 value={field.headingbg || '#ffffff'}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, headingbg: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // // //                                                                             <label> Padding</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.headingPadding}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, headingPadding: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                                 placeholder="Padding"
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // // //                                                                             <label> Letter Spacing</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.headingLetterSpacing}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, headingLetterSpacing: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                                 placeholder="Letter Spacing"
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap'>
// // // //                                                                             <label>Text Align </label>
// // // //                                                                             <select
// // // //                                                                                 value={field.headingTextAlign}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, headingTextAlign: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             >
// // // //                                                                                 <option value="">Select text align</option>
// // // //                                                                                 <option value="left">left</option>
// // // //                                                                                 <option value="center">center</option>
// // // //                                                                                 <option value="right">right</option>
// // // //                                                                             </select>
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // // //                                                                             <label> Font-Weight</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.headingFontWeight}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, headingFontWeight: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}

// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // // //                                                                             <label>Border Color</label>
// // // //                                                                             <input
// // // //                                                                                 type="color"
// // // //                                                                                 value={field.headingBorderColor}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, headingBorderColor: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>

// // // //                                                                         <div className='form-builder-chaneging-wrap number' >
// // // //                                                                             <label>Border Width (px)</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.headingBorderWidth}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, headingBorderWidth: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap'>
// // // //                                                                             <label>Border Style</label>
// // // //                                                                             <select
// // // //                                                                                 value={field.headingBorderStyle}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, headingBorderStyle: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             >
// // // //                                                                                 <option value="solid">Solid</option>
// // // //                                                                                 <option value="dashed">Dashed</option>
// // // //                                                                                 <option value="dotted">Dotted</option>
// // // //                                                                             </select>
// // // //                                                                         </div>
// // // //                                                                     </div>
// // // //                                                                 );
// // // //                                                             }

// // // //                                                             if (field.id === selectedFieldId && field.type === 'description') {
// // // //                                                                 return (
// // // //                                                                     <div key={field.id} className="form-builder-chaneging-wrap">
// // // //                                                                         <label>Description Text</label>
// // // //                                                                         <textarea
// // // //                                                                             type="text"
// // // //                                                                             value={field.descriptionText || field.value || ''}
// // // //                                                                             onChange={(e) => handleDescriptionChange(field.id, e.target.value)}
// // // //                                                                             placeholder="Enter Description"
// // // //                                                                         />

// // // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // // //                                                                             <label>Font Size (px)</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.descritionFontSize}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, descritionFontSize: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // // //                                                                             <label>Font-Weight</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.descritionFontWeight}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, descritionFontWeight: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // // //                                                                             <label> Color</label>
// // // //                                                                             <input
// // // //                                                                                 type="color"
// // // //                                                                                 value={field.descritionColor}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, descritionColor: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // // //                                                                             <label> Background Color</label>
// // // //                                                                             <input
// // // //                                                                                 type="color"
// // // //                                                                                 value={field.descriptionbg || '#ffffff'}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, descriptionbg: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // // //                                                                             <label> Padding</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.descriptionPadding}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, descriptionPadding: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                                 placeholder="Padding"
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // // //                                                                             <label> Letter Spacing</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.descriptionLetterSpacing}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, descriptionLetterSpacing: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                                 placeholder="Letter Spacing"
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap'>
// // // //                                                                             <label>Text Align </label>
// // // //                                                                             <select
// // // //                                                                                 value={field.descriptionTextAlign}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, descriptionTextAlign: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             >
// // // //                                                                                 <option value="">Select text align</option>
// // // //                                                                                 <option value="left">left</option>
// // // //                                                                                 <option value="center">center</option>
// // // //                                                                                 <option value="right">right</option>
// // // //                                                                             </select>
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // // //                                                                             <label>Border Color</label>
// // // //                                                                             <input
// // // //                                                                                 type="color"
// // // //                                                                                 value={field.descriptionBorderColor}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, descriptionBorderColor: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>

// // // //                                                                         <div className='form-builder-chaneging-wrap number' >
// // // //                                                                             <label>Border Width (px)</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.descriptionBorderWidth}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, descriptionBorderWidth: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap'>
// // // //                                                                             <label>Border Style</label>
// // // //                                                                             <select
// // // //                                                                                 value={field.descriptionBorderStyle}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, descriptionBorderStyle: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             >
// // // //                                                                                 <option value="solid">Solid</option>
// // // //                                                                                 <option value="dashed">Dashed</option>
// // // //                                                                                 <option value="dotted">Dotted</option>
// // // //                                                                             </select>
// // // //                                                                         </div>
// // // //                                                                     </div>

// // // //                                                                 );
// // // //                                                             }
// // // //                                                             if (field.id === selectedFieldId && field.type === "images") {
// // // //                                                                 return (
// // // //                                                                     <div key={field.id} className="form-builder-chaneging-wrap file">
// // // //                                                                         <div>
// // // //                                                                             {field.value ? (
// // // //                                                                                 <img src={field.value} alt="Uploaded" style={{ maxWidth: '100%', height: 'auto' }} />
// // // //                                                                             ) : (
// // // //                                                                                 <p>No Image Provided</p>
// // // //                                                                             )}
// // // //                                                                         </div>
// // // //                                                                         <button className='update-image' onClick={() => setImageFieldId(field.id)}>Update Image</button>
// // // //                                                                         <button className='update-image' onClick={() => removeField(field.id)}>Remove Image</button>
// // // //                                                                         {imageFieldId === field.id && (
// // // //                                                                             <input type="file" accept="image/*" onChange={(e) => handleImageUpload(e, field.id)} />
// // // //                                                                         )}
// // // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // // //                                                                             <label>Width</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.imgWidth}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, imgWidth: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap'>
// // // //                                                                             <label>Text Align </label>
// // // //                                                                             <select
// // // //                                                                                 value={field.imgTextAlign}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, imgTextAlign: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             >
// // // //                                                                                 <option value="">Select text align</option>
// // // //                                                                                 <option value="left">left</option>
// // // //                                                                                 <option value="center">center</option>
// // // //                                                                                 <option value="right">right</option>
// // // //                                                                             </select>
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // // //                                                                             <label> Background Color</label>
// // // //                                                                             <input
// // // //                                                                                 type="color"
// // // //                                                                                 value={field.imgbg || '#ffffff'}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, imgbg: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // // //                                                                             <label> Padding</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.imgPadding}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, imgPadding: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                                 placeholder="Padding"
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // // //                                                                             <label>Border Color</label>
// // // //                                                                             <input
// // // //                                                                                 type="color"
// // // //                                                                                 value={field.imgBorderColor}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, imgBorderColor: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>

// // // //                                                                         <div className='form-builder-chaneging-wrap number' >
// // // //                                                                             <label>Border Width (px)</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.imgBorderWidth}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, imgBorderWidth: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap'>
// // // //                                                                             <label>Border Style</label>
// // // //                                                                             <select
// // // //                                                                                 value={field.imgBorderStyle}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, imgBorderStyle: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             >
// // // //                                                                                 <option value="solid">Solid</option>
// // // //                                                                                 <option value="dashed">Dashed</option>
// // // //                                                                                 <option value="dotted">Dotted</option>
// // // //                                                                             </select>
// // // //                                                                         </div>
// // // //                                                                     </div>
// // // //                                                                 );
// // // //                                                             }
// // // //                                                             if (field.id === selectedFieldId && field.type === "divider") {
// // // //                                                                 return (
// // // //                                                                     <div key={field.id} className="form-builder-chaneging-wrap">
// // // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // // //                                                                             <label>Divider Color</label>
// // // //                                                                             <input
// // // //                                                                                 type="color"
// // // //                                                                                 value={field.dividerColor}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, dividerColor: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // // //                                                                             <label>Width</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.dividerWidth}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, dividerWidth: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // // //                                                                             <label>Height</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.dividerheight}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, dividerheight: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>

// // // //                                                                     </div>
// // // //                                                                 );
// // // //                                                             }

// // // //                                                             if (field.id === selectedFieldId && field.type === "html convert") {
// // // //                                                                 return (
// // // //                                                                     <div key={field.id} className="form-builder-chaneging-wrap color">
// // // //                                                                         <label>Html Convert</label>
// // // //                                                                         <div className="form-builder-and-preview">
// // // //                                                                             {fields.map((field) => renderField(field))}

// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // // //                                                                             <label> Color</label>
// // // //                                                                             <input
// // // //                                                                                 type="color"
// // // //                                                                                 value={field.htmlColor}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, htmlColor: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // // //                                                                             <label>Font Size (px)</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.htmlFontSize}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, htmlFontSize: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // // //                                                                             <label>Padding (px)</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.htmlPadding}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, htmlPadding: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>

// // // //                                                                     </div>
// // // //                                                                 );
// // // //                                                             }
// // // //                                                             if (field.id === selectedFieldId && field.type === "split") {
// // // //                                                                 return (
// // // //                                                                     <div key={field.id} className="form-builder-chaneging-wrap color">
// // // //                                                                         <div style={{ marginTop: '20px' }}>
// // // //                                                                             <label htmlFor="widthSelect">Adjust Width: </label>
// // // //                                                                             <select
// // // //                                                                                 id="widthSelect"
// // // //                                                                                 onChange={(e) => handleWidthChange(e.target.value)}
// // // //                                                                                 value={fields.find((f) => f.id === selectedFieldId)?.width || '50%'}
// // // //                                                                             >
// // // //                                                                                 <option value="25%">25%</option>
// // // //                                                                                 <option value="50%">50%</option>
// // // //                                                                                 <option value="75%">75%</option>
// // // //                                                                             </select>

// // // //                                                                             <div style={{ marginTop: '10px' }}>
// // // //                                                                                 <label htmlFor="contentType">Content Type: </label>
// // // //                                                                                 <select
// // // //                                                                                     id="contentType"
// // // //                                                                                     onChange={(e) =>
// // // //                                                                                         setFields((prevFields) =>
// // // //                                                                                             prevFields.map((f) =>
// // // //                                                                                                 f.id === selectedFieldId ? { ...f, contentType: e.target.value } : f
// // // //                                                                                             )
// // // //                                                                                         )
// // // //                                                                                     }
// // // //                                                                                     value={fields.find((f) => f.id === selectedFieldId)?.contentType || 'text'}
// // // //                                                                                 >
// // // //                                                                                     <option value="text">Text</option>
// // // //                                                                                     <option value="image">Image</option>
// // // //                                                                                 </select>
// // // //                                                                             </div>

// // // //                                                                             <div style={{ marginTop: '10px' }}>
// // // //                                                                                 {fields.find((f) => f.id === selectedFieldId)?.contentType === 'text' ? (
// // // //                                                                                     <div>
// // // //                                                                                         {ReactQuill ? (
// // // //                                                                                             <ReactQuill
// // // //                                                                                                 value={fields.find((f) => f.id === selectedFieldId)?.value || ''}
// // // //                                                                                                 onChange={(value) => {
// // // //                                                                                                     setFields((prevFields) =>
// // // //                                                                                                         prevFields.map((f) =>
// // // //                                                                                                             f.id === selectedFieldId ? { ...f, value: value } : f
// // // //                                                                                                         )
// // // //                                                                                                     );
// // // //                                                                                                 }}
// // // //                                                                                                 modules={{ toolbar: toolbarOptions }}
// // // //                                                                                             />
// // // //                                                                                         ) : (
// // // //                                                                                             <p>Loading editor...</p>
// // // //                                                                                         )}
// // // //                                                                                     </div>
// // // //                                                                                 ) : (
// // // //                                                                                     <input
// // // //                                                                                         type="file"
// // // //                                                                                         accept="image/*"
// // // //                                                                                         onChange={(e) => {
// // // //                                                                                             const file = e.target.files[0];
// // // //                                                                                             if (file) {
// // // //                                                                                                 const reader = new FileReader();
// // // //                                                                                                 reader.onload = () => {
// // // //                                                                                                     setFields((prevFields) =>
// // // //                                                                                                         prevFields.map((f) =>
// // // //                                                                                                             f.id === selectedFieldId
// // // //                                                                                                                 ? { ...f, value: reader.result }
// // // //                                                                                                                 : f
// // // //                                                                                                         )
// // // //                                                                                                     );
// // // //                                                                                                 };
// // // //                                                                                                 reader.readAsDataURL(file);
// // // //                                                                                             }
// // // //                                                                                         }}
// // // //                                                                                     />
// // // //                                                                                 )}
// // // //                                                                             </div>
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // // //                                                                             <label> Background color</label>
// // // //                                                                             <input
// // // //                                                                                 type="color"
// // // //                                                                                 value={field.splitbg}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, splitbg: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // // //                                                                             <label>Padding</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.splitPadding}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, splitPadding: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>

// // // //                                                                     </div>
// // // //                                                                 );
// // // //                                                             }

// // // //                                                             if (field.id === selectedFieldId && field.type === "video") {
// // // //                                                                 return (
// // // //                                                                     <div key={field.id} className="form-builder-chaneging-wrap file">
// // // //                                                                         <div className='form-builder-chaneging-wrap '>
// // // //                                                                             <label>Video Url</label>
// // // //                                                                             <input
// // // //                                                                                 type="text"
// // // //                                                                                 value={field.value}
// // // //                                                                                 onChange={(e) => handleVideoChange(e, field.id)}
// // // //                                                                                 placeholder="Enter video URL"
// // // //                                                                             />
// // // //                                                                             <iframe
// // // //                                                                                 src={getVideoEmbedUrl(field.value)}
// // // //                                                                                 title="Video Preview"
// // // //                                                                                 frameBorder="0"
// // // //                                                                                 allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
// // // //                                                                                 allowFullScreen
// // // //                                                                             ></iframe>
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // // //                                                                             <label>Padding</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.videoPadding}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, videoPadding: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // // //                                                                             <label>Border Color</label>
// // // //                                                                             <input
// // // //                                                                                 type="color"
// // // //                                                                                 value={field.videoBorderColor}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, videoBorderColor: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>

// // // //                                                                         <div className='form-builder-chaneging-wrap number' >
// // // //                                                                             <label>Border Width (px)</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.videoBorderWidth}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, videoBorderWidth: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap'>
// // // //                                                                             <label>Border Style</label>
// // // //                                                                             <select
// // // //                                                                                 value={field.videoBorderStyle}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, videoBorderStyle: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             >
// // // //                                                                                 <option value="solid">Solid</option>
// // // //                                                                                 <option value="dashed">Dashed</option>
// // // //                                                                                 <option value="dotted">Dotted</option>
// // // //                                                                             </select>
// // // //                                                                         </div>

// // // //                                                                     </div>
// // // //                                                                 );
// // // //                                                             }

// // // //                                                             if (field.id === selectedFieldId && field.type === "spacer") {
// // // //                                                                 return (
// // // //                                                                     <div key={field.id} className="form-builder-chaneging-wrap number">
// // // //                                                                         <div className='form-builder-chaneging-wrap number' >
// // // //                                                                             <label htmlFor="spacer-height-input">Spacer Height (px):</label>
// // // //                                                                             <input
// // // //                                                                                 id="spacer-height-input"
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.spacerHeight}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, spacerHeight: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                                 min="0"
// // // //                                                                             />
// // // //                                                                             <p style={{ color: '#A8A8A8' }} className='spacer-height-text'>Current Spacer Height: {field.spacerHeight}px</p>
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // // //                                                                             <label> Spacer Background color</label>
// // // //                                                                             <input
// // // //                                                                                 type="color"
// // // //                                                                                 value={field.spacerbg}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, spacerbg: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                     </div>
// // // //                                                                 );
// // // //                                                             }

// // // //                                                             if (field.id === selectedFieldId && field.type === 'button') {
// // // //                                                                 return (
// // // //                                                                     <div key={field.id}>
// // // //                                                                         <div className='form-builder-chaneging-wrap'>
// // // //                                                                             <label>Button Label</label>
// // // //                                                                             <input
// // // //                                                                                 type="text"
// // // //                                                                                 value={buttonLabel}
// // // //                                                                                 onChange={(e) => setButtonLabel(e.target.value)}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // // //                                                                             <label>Font Size (px)</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={fontSize}
// // // //                                                                                 onChange={(e) => setFontSize(e.target.value)}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap'>
// // // //                                                                             <label>Button Padding (px)</label>
// // // //                                                                             <input
// // // //                                                                                 type="text"
// // // //                                                                                 value={padding}
// // // //                                                                                 onChange={(e) => setPadding(e.target.value)}
// // // //                                                                             />
// // // //                                                                         </div>

// // // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // // //                                                                             <label>Width (px)</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={width}
// // // //                                                                                 onChange={(e) => setWidth(e.target.value)}
// // // //                                                                             />
// // // //                                                                         </div>

// // // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // // //                                                                             <label>Height (px)</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={height}
// // // //                                                                                 onChange={(e) => setHeight(e.target.value)}
// // // //                                                                             />
// // // //                                                                         </div>

// // // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // // //                                                                             <label>Background Color</label>
// // // //                                                                             <input
// // // //                                                                                 type="color"
// // // //                                                                                 value={btnbackgroundColor}
// // // //                                                                                 onChange={(e) => setBtnBackgroundColor(e.target.value)}
// // // //                                                                             />
// // // //                                                                         </div>

// // // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // // //                                                                             <label>Color</label>
// // // //                                                                             <input
// // // //                                                                                 type="color"
// // // //                                                                                 value={field.buttonTextColor}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, buttonTextColor: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap'>
// // // //                                                                             <label>
// // // //                                                                                 Button Url
// // // //                                                                                 <input
// // // //                                                                                     type="text"
// // // //                                                                                     value={field.buttonUrll}
// // // //                                                                                     onChange={(e) => {
// // // //                                                                                         setFields(prevFields =>
// // // //                                                                                             prevFields.map(f =>
// // // //                                                                                                 f.id === field.id ? { ...f, buttonUrll: e.target.value } : f
// // // //                                                                                             )
// // // //                                                                                         );
// // // //                                                                                     }}
// // // //                                                                                 />
// // // //                                                                             </label>
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // // //                                                                             <label> Letter Spacing</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.buttonLetterSpacing}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, buttonLetterSpacing: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                                 placeholder="Letter Spacing"
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // // //                                                                             <label> Border-Radious</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.buttonradious}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, buttonradious: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                                 placeholder=" Border-Radious"
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap color'>
// // // //                                                                             <label>Border Color</label>
// // // //                                                                             <input
// // // //                                                                                 type="color"
// // // //                                                                                 value={field.buttonBorderColor}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, buttonBorderColor: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>

// // // //                                                                         <div className='form-builder-chaneging-wrap number' >
// // // //                                                                             <label>Border Width (px)</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.buttonBorderWidth}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, buttonBorderWidth: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap'>
// // // //                                                                             <label>Border Style</label>
// // // //                                                                             <select
// // // //                                                                                 value={field.buttonBorderStyle}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, buttonBorderStyle: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             >
// // // //                                                                                 <option value="solid">Solid</option>
// // // //                                                                                 <option value="dashed">Dashed</option>
// // // //                                                                                 <option value="dotted">Dotted</option>
// // // //                                                                             </select>
// // // //                                                                         </div>

// // // //                                                                     </div>
// // // //                                                                 );
// // // //                                                             }
// // // //                                                             if (field.type === "socalicon" && field.id === selectedFieldId) {
// // // //                                                                 return (
// // // //                                                                     <div key={field.id} className="description-field">

// // // //                                                                         <div className="form-builder-chaneging-wrap">
// // // //                                                                             <h2>Edit Social Icons</h2>

// // // //                                                                             <div className='form-builder-chaneging-wrap'>
// // // //                                                                                 <label>
// // // //                                                                                     <div className='custom-checkbox socalicons'>
// // // //                                                                                         <input
// // // //                                                                                             type="checkbox"
// // // //                                                                                             checked={!selectedIcons.facebook.isHidden}
// // // //                                                                                             onChange={() => handleToggleIcon('facebook')}
// // // //                                                                                         />
// // // //                                                                                         <i class="fa fa-facebook-square" aria-hidden="true"></i>
// // // //                                                                                         Facebook URL
// // // //                                                                                     </div>
// // // //                                                                                     <input
// // // //                                                                                         type="text"
// // // //                                                                                         value={selectedIcons.facebook.url}
// // // //                                                                                         onChange={(e) => handleIconUrlChange(e, 'facebook')}
// // // //                                                                                         style={{ display: selectedIcons.facebook.isHidden ? 'none' : 'block' }}
// // // //                                                                                     />
// // // //                                                                                 </label>
// // // //                                                                             </div>
// // // //                                                                             <div className='form-builder-chaneging-wrap'>
// // // //                                                                                 <label>
// // // //                                                                                     <div className='custom-checkbox socalicons'>
// // // //                                                                                         <input
// // // //                                                                                             type="checkbox"
// // // //                                                                                             checked={!selectedIcons.twitter.isHidden}
// // // //                                                                                             onChange={() => handleToggleIcon('twitter')}
// // // //                                                                                         />
// // // //                                                                                         <i class="fa fa-twitter" aria-hidden="true"></i>
// // // //                                                                                         Twitter URL
// // // //                                                                                     </div>
// // // //                                                                                     <input
// // // //                                                                                         type="text"
// // // //                                                                                         value={selectedIcons.twitter.url}
// // // //                                                                                         onChange={(e) => handleIconUrlChange(e, 'twitter')}
// // // //                                                                                         style={{ display: selectedIcons.twitter.isHidden ? 'none' : 'block' }}
// // // //                                                                                     />
// // // //                                                                                 </label>
// // // //                                                                             </div>
// // // //                                                                             <div className='form-builder-chaneging-wrap'>
// // // //                                                                                 <label>
// // // //                                                                                     <div className='custom-checkbox socalicons'>
// // // //                                                                                         <input
// // // //                                                                                             type="checkbox"
// // // //                                                                                             checked={!selectedIcons.instagram.isHidden}
// // // //                                                                                             onChange={() => handleToggleIcon('instagram')}
// // // //                                                                                         />
// // // //                                                                                         <i class="fa fa-instagram" aria-hidden="true"></i>
// // // //                                                                                         Instagram URL
// // // //                                                                                     </div>
// // // //                                                                                     <input
// // // //                                                                                         type="text"
// // // //                                                                                         value={selectedIcons.instagram.url}
// // // //                                                                                         onChange={(e) => handleIconUrlChange(e, 'instagram')}
// // // //                                                                                         style={{ display: selectedIcons.instagram.isHidden ? 'none' : 'block' }}
// // // //                                                                                     />
// // // //                                                                                 </label>
// // // //                                                                             </div>
// // // //                                                                             <div className='form-builder-chaneging-wrap'>
// // // //                                                                                 <button onClick={() => setShowFileUpload((prev) => !prev)}> + </button>
// // // //                                                                                 {showFileUpload && (
// // // //                                                                                     <div className='form-builder-chaneging-wrap file'>
// // // //                                                                                         <input
// // // //                                                                                             type="file"
// // // //                                                                                             accept="image/*"
// // // //                                                                                             onChange={handleCustomIconUpload}
// // // //                                                                                             multiple
// // // //                                                                                         />
// // // //                                                                                     </div>
// // // //                                                                                 )}
// // // //                                                                                 {customIcons.length > 0 && (
// // // //                                                                                     <div>
// // // //                                                                                         {customIcons.map((icon, index) => (
// // // //                                                                                             <div key={index} className='form-builder-chaneging-wrap  '>
// // // //                                                                                                 <div className='form-builder-chaneging-wrap socal'>
// // // //                                                                                                     <div className='custom-checkbox'>
// // // //                                                                                                         <input
// // // //                                                                                                             type="checkbox"
// // // //                                                                                                             checked={!icon.isHidden}
// // // //                                                                                                             onChange={() => toggleCustomIconVisibility(index)}
// // // //                                                                                                         />

// // // //                                                                                                     </div>
// // // //                                                                                                     <div className='img-socal-costom'>
// // // //                                                                                                         <img src={icon.src} alt={icon.name} style={{ width: "100%" }} />
// // // //                                                                                                     </div>
// // // //                                                                                                 </div>

// // // //                                                                                                 <input
// // // //                                                                                                     type="text"
// // // //                                                                                                     value={icon.url}
// // // //                                                                                                     onChange={(e) => handleCustomIconUrlChange(e, index)}
// // // //                                                                                                     placeholder="Custom URL"
// // // //                                                                                                 />

// // // //                                                                                             </div>
// // // //                                                                                         ))}
// // // //                                                                                     </div>
// // // //                                                                                 )}
// // // //                                                                             </div>

// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // // //                                                                             <label>Social Icon Height (px)</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={socalIconHeight}
// // // //                                                                                 onChange={(e) => setSocalIconHeight(e.target.value)}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap number'>
// // // //                                                                             <label>Social Icon Width (px)</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={socalIconWidth}
// // // //                                                                                 onChange={(e) => setSocalIconWidth(e.target.value)}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap'>
// // // //                                                                             <label>Text Align </label>
// // // //                                                                             <select
// // // //                                                                                 value={field.socaliconTextAlign}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, socaliconTextAlign: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             >
// // // //                                                                                 <option value="">Select text align</option>
// // // //                                                                                 <option value="left">left</option>
// // // //                                                                                 <option value="center">center</option>
// // // //                                                                                 <option value="right">right</option>
// // // //                                                                             </select>
// // // //                                                                         </div>
// // // //                                                                         <div className='form-builder-chaneging-wrap number' >
// // // //                                                                             <label>Padding (px)</label>
// // // //                                                                             <input
// // // //                                                                                 type="number"
// // // //                                                                                 value={field.socalIconPadding}
// // // //                                                                                 onChange={(e) => {
// // // //                                                                                     setFields(prevFields =>
// // // //                                                                                         prevFields.map(f =>
// // // //                                                                                             f.id === field.id ? { ...f, socalIconPadding: e.target.value } : f
// // // //                                                                                         )
// // // //                                                                                     );
// // // //                                                                                 }}
// // // //                                                                             />
// // // //                                                                         </div>
// // // //                                                                     </div>
// // // //                                                                 );
// // // //                                                             }

// // // //                                                             return null;
// // // //                                                         })}
// // // //                                                     </div>
// // // //                                                 )}
// // // //                                             </div>
// // // //                                         </div>

// // // //                                     </div>)}
// // // //                                 </div>
// // // //                             </div>
// // // //                         </div>
// // // //                     </div>
// // // //                     <div className='btn_form_bulider'>
// // // //                         <div className="form-submission-wrp">
// // // //                             <button className="cancle-form-btn" >Cancle</button>
// // // //                         </div>
// // // //                         <div className="form-submission-wrp">
// // // //                             <button className="create-form-btn action_btn" onClick={createOrUpdateForm} >Save</button>
// // // //                         </div>
// // // //                     </div>
// // // //                 </div>

// // // //             </div>
// // // //             <div className='form-builder-wrap-popup-inputs'>
// // // //                 <div className="form-builder-prodcut-all">
// // // //                     {isPopupOpen && (
// // // //                         <div className="popup">
// // // //                             <div className="popup-content">
// // // //                                 <button className="heading_cancle" onClick={handleClosePopup}>
// // // //                                     Close
// // // //                                 </button>
// // // //                                 <div className="product-list">
// // // //                                     {currentProducts.length > 0 ? (
// // // //                                         currentProducts.map((product) => (
// // // //                                             <div key={product.id} className="product-item">
// // // //                                                 <div className='product-item-flex'>
// // // //                                                     <div className='custom-checkbox'>
// // // //                                                         <input
// // // //                                                             type="checkbox"
// // // //                                                             checked={selectedProducts.some((p) => p.id === product.id)}
// // // //                                                             onChange={(e) => handleProductClick(product, e.target.checked)}
// // // //                                                         />
// // // //                                                     </div>
// // // //                                                     <div>
// // // //                                                         {product.images && product.images.length > 0 && (
// // // //                                                             <div className="images-gallery">
// // // //                                                                 <img
// // // //                                                                     src={product.images[0].src}
// // // //                                                                     alt={product.images[0].alt || 'Product Image'}

// // // //                                                                 />
// // // //                                                             </div>
// // // //                                                         )}
// // // //                                                         <h6>{product.title}</h6>
// // // //                                                         {product.variants && product.variants.length > 0 && (
// // // //                                                             <p>Price: ${product.variants[0].price}</p>
// // // //                                                         )}
// // // //                                                     </div>

// // // //                                                 </div>


// // // //                                             </div>
// // // //                                         ))
// // // //                                     ) : (
// // // //                                         <p>No products available.</p>
// // // //                                     )}
// // // //                                 </div>

// // // //                                 {totalPages > 1 && (
// // // //                                     <div className="pagination">
// // // //                                         <nav>
// // // //                                             <ul className="xs:mt-0 mt-2 inline-flex items-center -space-x-px">
// // // //                                                 <li>
// // // //                                                     <button
// // // //                                                         type="button"
// // // //                                                         disabled={currentPage === 1}
// // // //                                                         onClick={() => handlePageChange(currentPage - 1)}
// // // //                                                     >
// // // //                                                         <img src={left} alt="Previous" />
// // // //                                                     </button>
// // // //                                                 </li>
// // // //                                                 {generatePageNumbers().map((page, index) => (
// // // //                                                     <li key={index} aria-current={currentPage === page ? 'page' : undefined}>
// // // //                                                         {page === '...' ? (
// // // //                                                             <span>...</span>
// // // //                                                         ) : (
// // // //                                                             <button
// // // //                                                                 type="button"
// // // //                                                                 onClick={() => handlePageChange(page)}
// // // //                                                                 className={`${currentPage === page ? 'active' : 'inactive'}`}
// // // //                                                             >
// // // //                                                                 {page}
// // // //                                                             </button>
// // // //                                                         )}
// // // //                                                     </li>
// // // //                                                 ))}
// // // //                                                 <li>
// // // //                                                     <button
// // // //                                                         type="button"
// // // //                                                         disabled={currentPage === totalPages}
// // // //                                                         onClick={() => handlePageChange(currentPage + 1)}
// // // //                                                     >
// // // //                                                         <img src={right} alt="Next" />
// // // //                                                     </button>
// // // //                                                 </li>
// // // //                                             </ul>
// // // //                                         </nav>
// // // //                                     </div>
// // // //                                 )}
// // // //                             </div>
// // // //                         </div>
// // // //                     )}
// // // //                 </div>
// // // //                 {showImagePopup && (
// // // //                     <div className="popup">
// // // //                         <div className="popup-content">
// // // //                             <h3>Upload Image</h3>
// // // //                             <input type="file" accept="image/*" onChange={handleImageUpload} />
// // // //                             <button onClick={() => setShowImagePopup(false)}>Close</button>
// // // //                         </div>
// // // //                     </div>
// // // //                 )}

// // // //                 {showHeadingPopup && (
// // // //                     <div className="popup">
// // // //                         <div className="popup-content">
// // // //                             <div className="options">
// // // //                                 <button style={{padding:'10px', color:'white', background:'#FD633E',fontSize:'14px', border:'none'}} onClick={() => setSelectedOption('heading')}>Heading</button>
// // // //                                 <button style={{padding:'10px', color:'white', background:'#F27F01',fontSize:'14px', border:'none'}} onClick={() => setSelectedOption('image')}>Image</button>
// // // //                                 <button style={{padding:'10px', color:'white', background:'#27A196',fontSize:'14px', border:'none'}} onClick={() => setSelectedOption('content')}>Content</button>
// // // //                                 <button style={{padding:'10px', color:'white', background:'#D9A425',fontSize:'14px', border:'none'}} onClick={() => setSelectedOption('url')}>Button URL</button>
// // // //                             </div>
// // // //                             {selectedOption === 'heading' && (
// // // //                                 <div className="heading-section">
// // // //                                     <label>
// // // //                                         <input
// // // //                                             type="text"
// // // //                                             value={headingText}
// // // //                                             onChange={(e) => setHeadingText(e.target.value)}
// // // //                                             placeholder="Heading Text"
// // // //                                         />
// // // //                                     </label>
// // // //                                     <label>
// // // //                                         <select value={headingLevel} onChange={(e) => setHeadingLevel(e.target.value)}>
// // // //                                             <option value="h1">H1</option>
// // // //                                             <option value="h2">H2</option>
// // // //                                             <option value="h3">H3</option>
// // // //                                             <option value="h4">H4</option>
// // // //                                             <option value="h5">H5</option>
// // // //                                             <option value="h6">H6</option>
// // // //                                         </select>
// // // //                                     </label>
// // // //                                     <label>
// // // //                                         <input
// // // //                                             type="text"
// // // //                                             value={headingFontSize}
// // // //                                             onChange={(e) => setHeadingFontSize(e.target.value)}
// // // //                                             placeholder="Font Size"
// // // //                                         />
// // // //                                     </label>
// // // //                                 </div>
// // // //                             )}
// // // //                             {selectedOption === 'content' && (
// // // //                                 <div className="content-section">
// // // //                                     <div className='admin-input email'>
// // // //                                         <div className='admin-label'>
// // // //                                             <label htmlFor="content">Content</label>
// // // //                                         </div>
// // // //                                         {ReactQuill ? (
// // // //                                             <ReactQuill
// // // //                                                 value={editorValue}
// // // //                                                 onChange={setEditorValue}
// // // //                                                 modules={{ toolbar: toolbarOptions }}
// // // //                                             />
// // // //                                         ) : (
// // // //                                             <p>Loading editor...</p>
// // // //                                         )}
// // // //                                     </div>
// // // //                                 </div>
// // // //                             )}
// // // //                             {selectedOption === 'url' && (
// // // //                                 <div className="form-builder-changing-wrap url url-section">
// // // //                                     <button style={{
// // // //                                         backgroundColor: '#9474ff',
// // // //                                         border: '1px solid black',
// // // //                                         color: 'white',
// // // //                                         padding: '10px',
// // // //                                         borderRadius: '4px',
// // // //                                         height: '40px',
// // // //                                         width: '100px',
// // // //                                         fontSize: '16px'

// // // //                                     }}>Vist Now</button>
// // // //                                     <label>
// // // //                                         URL:
// // // //                                         <input
// // // //                                             type="url"
// // // //                                             value={headingUrl}
// // // //                                             onChange={(e) => setHeadingUrl(e.target.value)}
// // // //                                             placeholder="Enter URL (optional)"
// // // //                                         />
// // // //                                     </label>
// // // //                                 </div>
// // // //                             )}

// // // //                             {selectedOption === 'image' && (
// // // //                                 <div className="form-builder-changing-wrap file section">
// // // //                                     <label> Image:
// // // //                                         <input
// // // //                                             type="file"
// // // //                                             accept="image/*"
// // // //                                             onChange={(e) => {
// // // //                                                 const file = e.target.files[0];
// // // //                                                 if (file) {
// // // //                                                     const reader = new FileReader();
// // // //                                                     reader.onloadend = () => {
// // // //                                                         setImageUrl(reader.result);
// // // //                                                     };
// // // //                                                     reader.readAsDataURL(file);
// // // //                                                 }
// // // //                                             }}
// // // //                                         />
// // // //                                         {imageUrl && <img src={imageUrl} alt="Preview" style={{ width: '100px', marginTop: '10px' }} />}
// // // //                                     </label>
// // // //                                 </div>
// // // //                             )}

// // // //                             <button onClick={handleAddHeading}>Add Heading</button>
// // // //                             <button className='heading_cancle' onClick={() => setShowHeadingPopup(false)}>Close</button>
// // // //                         </div>
// // // //                     </div>
// // // //                 )}
// // // //                 {showDescriptionPopup && (
// // // //                     <div className="popup">
// // // //                         <div className="popup-content">
// // // //                             <label>
// // // //                                 Description:
// // // //                                 <textarea
// // // //                                     value={descriptionText}
// // // //                                     onChange={(e) => setDescriptionText(e.target.value)}
// // // //                                     placeholder="Description"
// // // //                                 />
// // // //                             </label>
// // // //                             <button onClick={handleAddDescription}>Add Description</button>
// // // //                             <button className='heading_cancle' onClick={() => setShowDescriptionPopup(false)}>Close</button>
// // // //                         </div>
// // // //                     </div>
// // // //                 )}
// // // //                 {isPopupVisibleed && (
// // // //                     <div className="popup">
// // // //                         <div className="popup-content">
// // // //                             <h4>Edit Rich Text</h4>
// // // //                             <div className="content-section">
// // // //                                 <div className="admin-input email">
// // // //                                     <div className="admin-label">
// // // //                                         <label htmlFor="content">Content</label>
// // // //                                     </div>
// // // //                                     <ReactQuill
// // // //                                         value={editorValueed}
// // // //                                         onChange={handleEditorChangeee}
// // // //                                         modules={{ toolbar: toolbarOptions }}
// // // //                                     />
// // // //                                 </div>
// // // //                             </div>

// // // //                             <button onClick={handleSave}>Save</button>
// // // //                             <button onClick={() => setPopupVisibleed(false)}>Cancel</button>
// // // //                         </div>
// // // //                     </div>
// // // //                 )}
// // // //             </div>

// // // //         </div >
// // // //     );
// // // // };

// // // // export default EmailTemplateCreate;






// // import React, { useState, useEffect, useRef } from 'react';
// // import Sortable from 'sortablejs';
// // import { format } from 'date-fns';
// // import axios from 'axios';
// // import { useNavigate } from '@remix-run/react';
// // import { Navigate, useLocation } from 'react-router-dom';
// // import '../index.css';
// // import text from '../images/text.png';
// // import heading from '../images/heading.png';
// // import font from '../images/font-size.png';
// // import radio from '../images/radio-button.png';
// // import checkbox from '../images/checked-box.png';
// // import selection from '../images/selection.png';
// // import text1 from '../images/text1.png';
// // import upload from '../images/upload.png';
// // import number from '../images/number-input.png';
// // import phone from '../images/phone.png';
// // import email from '../images/email.png';
// // import location1 from '../images/location.png';
// // import password1 from '../images/password1.png';
// // import toggle from '../images/toggle.png';
// // import url1 from '../images/url1.png';
// // import date from '../images/date.png';
// // import slider from '../images/slider.png';
// // import image from '../images/image-.png';
// // import link1 from '../images/link1.png';
// // import time from '../images/time.png';
// // import detetime from '../images/detetime.png';
// // import divider2 from '../images/divider.png';
// // import btn from '../images/btn.png';
// // import drop from '../images/drop.png';
// // import bgim1 from '../images/bgim1.png';
// // import removee from '../images/removee.png';
// // import delete1 from '../images/delete.png';
// // import maximizesize from '../images/maximize-size.png';
// // import vecter1 from '../images/vecter1.png';
// // import cancleimg from '../images/cancleimg.png';
// // import bk from '../images/bk.png';
// // import editicon from '../images/editicon.png';
// // import 'react-quill/dist/quill.snow.css';
// // import sanitizeHtml from 'sanitize-html';
// // import { authenticate, apiVersion } from "../shopify.server";
// // import { useLoaderData } from "@remix-run/react";

// // export const loader = async ({ request }) => {
// //     const { session } = await authenticate.admin(request);
// //     const { shop, accessToken } = session;

// //     const response = {
// //         assets: [],
// //         shop,
// //         error: false,
// //         accessToken,
// //         errorMessage: ''
// //     };

// //     console.log(shop);

// //     try {

// //         const assetResponse = await fetch(`https://${shop}/admin/api/${apiVersion}/assets.json`, {
// //             method: 'GET',
// //             headers: {
// //                 'X-Shopify-Access-Token': accessToken,
// //                 'Content-Type': 'application/json',
// //             },
// //         });

// //         if (!assetResponse.ok) {
// //             const errorText = await assetResponse.text();
// //             throw new Error(`Failed to fetch assets: ${errorText}`);
// //         }

// //         const assetData = await assetResponse.json();
// //         response.assets = assetData.assets || [];

// //     } catch (err) {
// //         console.error("Error fetching data:", err.message);
// //         response.error = true;
// //         response.errorMessage = err.message;
// //     }

// //     return response;
// // };

// // const toolbarOptions = [
// //     [{ header: '1' }, { header: '2' }, { header: '3' }, { header: '4' }, { header: '5' }, { header: '6' }],
// //     ['bold', 'italic', 'underline'],
// //     ['link', 'image'],
// //     [{ list: 'ordered' }, { list: 'bullet' }],
// //     [{ script: 'sub' }, { script: 'super' }],
// //     [{ indent: '-1' }, { indent: '+1' }],
// //     [{ direction: 'rtl' }],
// //     [{ size: ['small', 'medium', 'large', 'huge'] }],
// //     [{ color: [] }, { background: [] }],
// //     [{ font: [] }],
// //     [{ align: [] }],
// //     [{ header: [] }],
// //     ['clean'],
// // ];

// // const generateUniqueId = (length = 22) => {
// //     const charset = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
// //     let uniqueId = '';
// //     for (let i = 0; i < length; i++) {
// //         const randomIndex = Math.floor(Math.random() * charset.length);
// //         uniqueId += charset[randomIndex];
// //     }
// //     return uniqueId;
// // };

// // const Formgenerated = () => {

// //     const ConfirmationPopup = ({ isVisible, onClose, onConfirm }) => {
// //         if (!isVisible) return null;

// //         return (
// //             <div className="confirmation-popup">
// //                 <div className="confirmation-popup-content">
// //                     <h4>Choose Form Status</h4>
// //                     <p>Do you want to save this form as a draft or publish it live?</p>
// //                     <div className="confirmation-popup-actions">
// //                         <button className='save_form' onClick={() => onConfirm('draft')}>Save as Draft</button>
// //                         <button onClick={() => onConfirm('live')}>Publish</button>
// //                         <button className='heading_cancle' onClick={onClose}>Cancel</button>
// //                     </div>
// //                 </div>
// //             </div>
// //         );
// //     };

// //     const CancelPopup = ({ isVisible, onClose, onConfirm }) => {
// //         const navigator = useNavigate();

// //         if (!isVisible) return null;
// //         const onConfirmto = () => {
// //             navigator('/app/formGenerator/list');
// //         };

// //         return (
// //             <div className="confirmation-popup">
// //                 <div className="confirmation-popup-content">
// //                     <h4>Choose Form Status</h4>
// //                     <p> Are you sure you want to cancel this form</p>
// //                     <div className="confirmation-popup-actions">
// //                         <button className='save_form' onClick={() => onConfirm('draft')}>Save as Draft</button>
// //                         <button onClick={onConfirmto}>Yes</button>
// //                         <button className='heading_cancle' onClick={onClose}>No</button>
// //                     </div>
// //                 </div>
// //             </div>
// //         );
// //     };

// //     const navigator = useNavigate();
// //     const location = useLocation();
// //     const [fields, setFields] = useState([]);
// //     const [formTitle, setFormTitle] = useState('My Form');
// //     const [showFormBuilder, setShowFormBuilder] = useState(false);
// //     const [createdForms, setCreatedForms] = useState([]);
// //     const [view, setView] = useState('live');
// //     const [currentFormId, setCurrentFormId] = useState(null);
// //     const [isEditing, setIsEditing] = useState(false);
// //     const [editingFormId, setEditingFormId] = useState(null);
// //     const [selectedField, setSelectedField] = useState(null);
// //     const [editMode, setEditMode] = useState(false);
// //     const [backgroundColor, setBackgroundColor] = useState('#ffffff');
// //     const [backgroundImage, setBackgroundImage] = useState(null);
// //     const [imageFile, setImageFile] = useState(null);
// //     const [boxShadow, setBoxShadow] = useState('');
// //     const [formWidth, setFormWidth] = useState('1200px');
// //     const [padding, setPadding] = useState('20');
// //     const [borderRadius, setBorderRadius] = useState('0');
// //     const [borderColor, setBorderColor] = useState('#ffffff');
// //     const [borderColorcode, setBorderColorcode] = useState('#ffffff');
// //     const formRef = useRef(null);
// //     const [isFieldEnabled, setIsFieldEnabled] = useState(false);
// //     const [showPopup, setShowPopup] = useState(false);
// //     const [showSelectPopup, setShowSelectPopup] = useState(false);
// //     const [selectedOption, setSelectedOption] = useState('');
// //     const [confirmationPopupType, setConfirmationPopupType] = useState('');
// //     const [showConfirmationPopup, setShowConfirmationPopup] = useState(false);
// //     const [showCancelPopup, setShowCancelPopup] = useState(false);
// //     const [radioOptions, setRadioOptions] = useState([{ id: generateUniqueId(), label: 'Radio 1', value: 'Radio 1' }]);
// //     const [checkboxOptions, setCheckboxOptions] = useState([{ id: 1, name: 'Checkbox1' }]);
// //     const [selectOptions, setSelectOptions] = useState([{ id: 1, name: 'Option1' }]);
// //     const [showCheckboxPopup, setShowCheckboxPopup] = useState(false);
// //     const [headingLevel, setHeadingLevel] = useState('h1');
// //     const [headingText, setHeadingText] = useState('');
// //     const [showHeadingPopup, setShowHeadingPopup] = useState(false);
// //     const [editingHeadingId, setEditingHeadingId] = useState(null);
// //     const [descriptionText, setDescriptionText] = useState('');
// //     const [showDescriptionPopup, setShowDescriptionPopup] = useState(false);
// //     const [editingDescriptionId, setEditingDescriptionId] = useState(null);
// //     const [showFields, setShowFields] = useState(true);
// //     const [hoveredFieldId, setHoveredFieldId] = useState(null);
// //     const [showField, setShowField] = useState(true);
// //     const propertiesPanelRef = useRef(null);
// //     const [isOptionsVisible, setIsOptionsVisible] = useState(false);
// //     const [headingFontSize, setHeadingFontSize] = useState('40px');
// //     const [isPropertiesVisible, setIsPropertiesVisible] = useState(false);
// //     const [editedFieldIndex, setEditedFieldIndex] = useState(null);
// //     const [currentEditingFieldIndex, setCurrentEditingFieldIndex] = useState(null);
// //     const [activeFieldIndex, setActiveFieldIndex] = useState(null);
// //     const [border, setBorder] = useState('none');
// //     const [borderWidth, setBorderWidth] = useState('');
// //     const [borderStyle, setBorderStyle] = useState('solid');
// //     const [isFormBuilderVisible, setIsFormBuilderVisible] = useState(false);
// //     const [submissionOption, setSubmissionOption] = useState('');
// //     const [thankYouTimer, setThankYouTimer] = useState('');
// //     const [editorValue, setEditorValue] = useState('');
// //     const [url, setUrl] = useState('');
// //     const [ReactQuill, setReactQuill] = useState(null);
// //     const [isDropdownVisible, setDropdownVisible] = useState(false);
// //     const { shop } = useLoaderData() || {};
// //     const [showFieldInput, setShowFieldInput] = useState(false);
// //     const [showFieldPro, setShowFieldPro] = useState(false);
// //     const [inputRadious, setInputRadious] = useState('4');
// //     const [inputwidth, setInputWidth] = useState('1');
// //     const [inputborderColor, setInputBorderColor] = useState('#B5B7C0');
// //     const [inputColorcode, setInputColorcode] = useState('#B5B7C0');
// //     const [inputstyle, setInputStyle] = useState('solid');
// //     const [labelColor, setLableColor] = useState('#000');
// //     const [lableCode, setLableCode] = useState('#ffffff');
// //     const [inputGap, setInputGap] = useState('10')
// //     const [colorCode, setColorCode] = useState('#ffffff');
// //     const [opacityForm, setOpacityForm] = useState('1');
// //     const [textHeading, setTextHeading] = useState('left');
// //     const [colorHeading, setColorHeading] = useState('#000');
// //     const [colorHeadingcode, setColorHeadingcode] = useState('#000');
// //     const [linkaline, setLinkaline] = useState('left');
// //     const [linkTarget, setLinkTarget] = useState('_self');

// //     useEffect(() => {

// //         const loadReactQuill = async () => {
// //             const { default: Quill } = await import('react-quill');
// //             setReactQuill(() => Quill);
// //         };

// //         loadReactQuill();
// //     }, []);

// //     useEffect(() => {
// //         const formBuilder = document.getElementById('bg_change');
// //         if (formBuilder) {
// //             formBuilder.style.backgroundColor = backgroundColor;
// //             formBuilder.style.backgroundImage = imageFile ? `url(${imageFile})` : backgroundImage || 'none';
// //             formBuilder.style.backgroundSize = 'cover';
// //             formBuilder.style.backgroundRepeat = 'no-repeat';
// //             formBuilder.style.boxShadow = boxShadow;
// //             formBuilder.style.width = formWidth;
// //             formBuilder.style.padding = `${padding}px`;
// //             formBuilder.style.borderRadius = `${borderRadius}px`;
// //             formBuilder.style.opacity = opacityForm;

// //             if (/^\d+px$/.test(borderWidth)) {
// //                 formBuilder.style.border = `${borderWidth} ${borderStyle} ${borderColor}`;
// //             } else {
// //                 formBuilder.style.border = 'none';
// //             }

// //         }

// //     }, [backgroundColor, imageFile, opacityForm, backgroundImage, borderWidth, borderStyle, borderColor, formWidth, padding, borderRadius, boxShadow, fields.length]);


// //     useEffect(() => {
// //         const formBuilder = document.getElementById('bg_image');
// //         if (formBuilder) {
// //             formBuilder.style.backgroundImage = imageFile ? `url(${imageFile})` : backgroundImage || 'none';
// //         }

// //     }, []);


// //     useEffect(() => {
// //         if (location.state) {
// //             const { formTitle, fields, formId, styles } = location.state;
// //             setFormTitle(formTitle);
// //             setFields(fields);
// //             setEditingFormId(formId);
// //             setIsEditing(true);
// //             setBackgroundColor(styles.backgroundColor);
// //             setBackgroundImage(styles.backgroundImage);
// //             setBoxShadow(styles.boxShadow || '');
// //             setFormWidth(styles.width || '100%');
// //             setPadding(styles.padding || '20px');
// //             setBorderRadius(styles.borderRadius || '0');
// //             setBorder(styles.border || '1px');
// //             const borderWidthValue = styles.border ? styles.border.split(' ')[0] : '1px';
// //             const borderStyleValue = styles.border ? styles.border.split(' ')[1] : 'solid';
// //             const borderColorValue = styles.border ? styles.border.split(' ')[2] : '#ffffff';
// //             setBorderWidth(styles.borderWidth || '1px');
// //             setBorderStyle(styles.borderStyle || 'solid');
// //             setBorderColor(styles.borderColor || '#ffffff');
// //             setInputRadious(styles.inputRadious);
// //             setInputStyle(styles.inputstyle);
// //             setInputWidth(styles.inputwidth);
// //             setInputBorderColor(styles.inputborderColor);
// //             setLableColor(styles.labelColor);
// //             setInputGap(styles.inputGap);
// //             setOpacityForm(styles.opacityForm);
// //             if (fields && fields.length > 0) {
// //                 setLinkaline(fields[0].linkaline);
// //                 setLinkTarget(fields[0].linkTarget);
// //             }
// //             console.log(styles.backgroundImage);
// //             console.log("show-all", location.state);
// //         }
// //     }, [location.state]);


// //     const createInputField = (type, options = [], isFieldEnabled = true, existingField = null) => {
// //         const baseField = {
// //             id: existingField ? existingField.id : generateUniqueId(),
// //             type,
// //             name: (type && type.charAt(0).toUpperCase() + type.slice(1)) || 'Text',
// //             label: type === 'name' ? 'Full name' : type.charAt(0).toUpperCase() + type.slice(1),
// //             description: '',
// //             disabled: !isFieldEnabled,
// //             width: "100%",
// //             required: false,
// //             readonly: false,
// //             customClass: '',
// //             options,
// //             level: existingField ? existingField.level : 'h1',
// //             text: existingField ? existingField.text : '',
// //             description: existingField ? existingField.description : '',
// //             level: type === 'heading' ? headingLevel : undefined,
// //             fontSize: type === 'heading' ? '40px' : undefined,
// //             level: 'h1',
// //             fontSize: '16px',
// //             customClass: '',
// //             color: '#DF0404',
// //             padding: '10px',
// //             dividerColor: '#000',
// //             btnbackgroundcolor: '#0561AF',
// //             backgroundColor: existingField ? existingField.backgroundColor : '#45A7F6',
// //             buttonWidth: existingField?.buttonWidth || '130px',
// //             buttonheight: existingField?.buttonheight || '40px',
// //             inputPadding: "10px",
// //             inputBorderRadious: "4",
// //             buttonBorderColor: type === 'button' ? '#000000' : undefined,
// //             buttonBorderWidth: type === 'button' ? '1' : undefined,
// //             buttonBorderStyle: type === 'button' ? 'solid' : undefined,
// //             btncolor: type === 'button' ? '#fff' : undefined,
// //             text: type === 'description' ? 'Add description' : undefined,
// //             headingText: type === 'heading' ? 'Add Heading' : undefined,
// //             linktext: type === 'link' ? 'Link' : undefined,
// //             linkUrl: type === 'link' ? '' : undefined,
// //             min: type === 'slider' ? 1 : undefined,  
// //             max: type === 'slider' ? 100 : undefined,
// //             step: type === 'slider' ? 10 : undefined,    
// //             value: type === 'slider' ? (existingField ? existingField.value : 0) : undefined, 
// //         };

// //         return existingField ? { ...baseField, ...existingField, id: generateUniqueId() } : baseField;
// //     };

// //     const handleAlignChange = (e) => {
// //         setLinkaline(e.target.value);
// //     };

// //     const handleTargetChange = (e) => {
// //         setLinkTarget(e.target.value);
// //     };

// //     const addInputField = (type) => {
// //         let newField = createInputField(type);
// //         if (type === 'radio') {
// //             newField = createInputField(type);
// //             setFields((prevFields) => [...prevFields, newField]);
// //         } else if (type === 'select') {
// //             newField = createInputField(type);
// //             setFields((prevFields) => [...prevFields, newField]);
// //         } else if (type === 'checkbox') {
// //             newField = createInputField(type);
// //             setFields((prevFields) => [...prevFields, newField]);
// //         } else if (type === 'heading') {
// //             newField = createInputField(type);
// //             setFields((prevFields) => [...prevFields, newField]);
// //         } else if (type === 'description') {
// //             newField = createInputField(type);
// //             setFields((prevFields) => [...prevFields, newField]);
// //         } else {
// //             newField = createInputField(type);
// //             setFields((prevFields) => [...prevFields, newField]);
// //         }
// //         setIsFormBuilderVisible(true);
// //         if (window.innerWidth > 1024) {
// //             handleFieldClick(newField, fields.length);
// //         }
// //     };

// //     const handleAddHeading = (level, text) => {
// //         const headingField = {
// //             id: generateUniqueId(),
// //             type: 'heading',
// //             level: headingLevel,
// //             text: headingText,
// //             fontSize: headingFontSize,
// //             label: headingText,
// //         };
// //         setFields((prevFields) => [...prevFields, headingField]);
// //         setShowHeadingPopup(false);
// //         setHeadingText('');
// //         setHeadingFontSize('16px');
// //     };

// //     const handleSubmit = (e) => {
// //         e.preventDefault();
// //         handleAddHeading(headingLevel, headingText);
// //         setShowHeadingPopup(false);
// //     };

// //     const saveEditedHeading = () => {
// //         if (selectedField) {
// //             setFields((prevFields) =>
// //                 prevFields.map((field) =>
// //                     field.id === selectedField.id ? { ...field, level: headingLevel, text: headingText } : field
// //                 )
// //             );
// //             setSelectedField(null);
// //         }
// //     };

// //     const handleRadioOptionChange = (e) => {
// //         setSelectedOption(e.target.value);
// //     };

// //     const addRadioOption = () => {
// //         const newOption = {
// //             id: generateUniqueId(),
// //             label: `Radio ${radioOptions.length + 1}`,
// //             value: `Radio ${radioOptions.length + 1}`,
// //         };

// //         console.log('Adding new radio option:', newOption);

// //         setRadioOptions(prevOptions => {
// //             const updatedOptions = [...prevOptions, newOption];
// //             console.log('Updated radio options:', updatedOptions);
// //             return updatedOptions;
// //         });

// //         if (selectedField?.id) {
// //             setFields(prevFields =>
// //                 prevFields.map(field =>
// //                     field.id === selectedField.id
// //                         ? { ...field, options: [...field.options, newOption] }
// //                         : field
// //                 )
// //             );
// //         } else {
// //             console.warn('No selectedField found, skipping field update');
// //         }
// //     };


// //     const removeRadioOption = (id) => {
// //         setRadioOptions((prevOptions) => {
// //             return prevOptions.filter(option => option.id !== id);
// //         });

// //         setFields((prevFields) => prevFields.map(field => {
// //             if (field.id === selectedField?.id) {
// //                 const updatedOptions = field.options.filter(option => option.id !== id);
// //                 return { ...field, options: updatedOptions };
// //             }
// //             return field;
// //         }));
// //     };


// //     const handleAddRadioOptions = () => {
// //         if (radioOptions.some(option => option.label.trim() === '')) {
// //             alert('Option names cannot be empty!');
// //             return;
// //         }

// //         const optionNames = radioOptions.map(option => {
// //             if (!option || !option.label || !option.value) {
// //                 console.error('Invalid option detected:', option);
// //                 return null;
// //             }
// //             return {
// //                 label: option.label,
// //                 value: option.value
// //             };
// //         }).filter(option => option !== null);

// //         if (optionNames.length === 0) {
// //             alert('There are no valid options to add.');
// //             return;
// //         }

// //         const newField = createInputField('radio', optionNames);

// //         setFields(prevFields => {
// //             const updatedFields = [...prevFields];
// //             if (currentEditingFieldIndex !== null) {
// //                 updatedFields[currentEditingFieldIndex] = newField;
// //             } else {
// //                 updatedFields.push(newField);
// //             }
// //             return updatedFields;
// //         });

// //         resetRadioOptions();
// //         setCurrentEditingFieldIndex(null);
// //         setShowPopup(false);
// //     };


// //     const handleOptionNameChange = (index, value) => {
// //         setRadioOptions((prevOptions) => {
// //             const updatedOptions = [...prevOptions];
// //             updatedOptions[index] = { ...updatedOptions[index], label: value };
// //             return updatedOptions;
// //         });

// //         if (selectedField?.id) {
// //             setFields(prevFields => {
// //                 return prevFields.map(field =>
// //                     field.id === selectedField.id
// //                         ? {
// //                             ...field,
// //                             options: field.options.map((option, idx) =>
// //                                 idx === index ? { ...option, label: value } : option
// //                             )
// //                         }
// //                         : field
// //                 );
// //             });
// //         } else {
// //             console.warn('No selectedField found, skipping field update');
// //         }
// //     };

// //     const resetRadioOptions = () => {
// //         setRadioOptions([{ id: generateUniqueId(), label: 'Radio 1', value: 'Radio 1' }]);
// //     };

// //     const resetCheckbox = () => {
// //         setCheckboxOptions([{ id: generateUniqueId(), name: 'Checkbox1', value: 'Checkbox1' }]);
// //     }

// //     const resetSelectbox = () => {
// //         setSelectOptions([{ id: generateUniqueId(), name: 'Option1', value: 'Option1' }]);
// //     }

// //     const handleOptionNameChanges = (index, value) => {
// //         setCheckboxOptions(prevOptions => {
// //             const updatedOptions = [...prevOptions];
// //             updatedOptions[index] = { ...updatedOptions[index], name: value };
// //             return updatedOptions;
// //         });

// //         if (selectedField?.id) {
// //             setFields(prevFields =>
// //                 prevFields.map(field =>
// //                     field.id === selectedField.id
// //                         ? {
// //                             ...field,
// //                             options: field.options.map((option, idx) =>
// //                                 idx === index ? { ...option, name: value } : option
// //                             )
// //                         }
// //                         : field
// //                 )
// //             );
// //         } else {
// //             console.warn('No selectedField found, skipping field update');
// //         }
// //     };

// //     const addCheckboxOption = () => {
// //         const newOption = {
// //             id: checkboxOptions.length + 1,
// //             name: `Checkbox${checkboxOptions.length + 1}`,
// //         };

// //         setCheckboxOptions(prevOptions => {
// //             const updatedOptions = [...prevOptions, newOption];
// //             console.log('Updated checkbox options:', updatedOptions);
// //             return updatedOptions;
// //         });

// //         if (selectedField?.id) {
// //             setFields(prevFields =>
// //                 prevFields.map(field =>
// //                     field.id === selectedField.id
// //                         ? { ...field, options: [...field.options, newOption] }
// //                         : field
// //                 )
// //             );
// //         } else {
// //             console.warn('No selectedField found, skipping field update');
// //         }
// //     };

// //     const removeCheckboxOption = (id) => {
// //         setCheckboxOptions((prevOptions) => {
// //             return prevOptions.filter(option => option.id !== id);
// //         });

// //         setFields((prevFields) => prevFields.map(field => {
// //             if (field.id === selectedField?.id) {
// //                 const updatedOptions = field.options.filter(option => option.id !== id);
// //                 return { ...field, options: updatedOptions };
// //             }
// //             return field;
// //         }));
// //     };


// //     const handleAddCheckboxOptions = () => {

// //         const newField = createInputField('checkbox', checkboxOptions);
// //         setFields(prevFields => {
// //             const updatedFields = [...prevFields];
// //             if (editedFieldIndex !== null) {
// //                 updatedFields[editedFieldIndex] = newField;
// //             } else {
// //                 updatedFields.push(newField);
// //             }
// //             return updatedFields;
// //         });
// //         resetCheckbox();
// //         setShowCheckboxPopup(false);
// //         setCheckboxOptions([{ id: 1, name: 'Checkbox1' }]);
// //         setEditedFieldIndex(null);

// //     };

// //     const handleOptionNameChangees = (index, value) => {
// //         setSelectOptions(prevOptions => {
// //             const updatedOptions = [...prevOptions];
// //             updatedOptions[index] = { ...updatedOptions[index], name: value };
// //             return updatedOptions;
// //         });

// //         if (selectedField?.id) {
// //             setFields(prevFields =>
// //                 prevFields.map(field =>
// //                     field.id === selectedField.id
// //                         ? {
// //                             ...field,
// //                             options: field.options.map((option, idx) =>
// //                                 idx === index ? { ...option, name: value } : option
// //                             )
// //                         }
// //                         : field
// //                 )
// //             );
// //         } else {
// //             console.warn('No selectedField found, skipping field update');
// //         }
// //     };

// //     const addSelectOption = () => {
// //         const newOption = {
// //             id: generateUniqueId(),
// //             id: selectOptions.length + 1,
// //             name: `Option${selectOptions.length + 1}`,
// //         };

// //         setSelectOptions(prevOptions => {
// //             const updatedOptions = [...prevOptions, newOption];
// //             console.log('Updated select options:', updatedOptions);
// //             return updatedOptions;
// //         });

// //         if (selectedField?.id) {
// //             setFields(prevFields =>
// //                 prevFields.map(field =>
// //                     field.id === selectedField.id
// //                         ? { ...field, options: [...field.options, newOption] }
// //                         : field
// //                 )
// //             );
// //         } else {
// //             console.warn('No selectedField found, skipping field update');
// //         }
// //     };

// //     const handleAddSelectOptions = () => {
// //         if (selectOptions.some(option => option.name.trim() === '')) {
// //             alert('Option names cannot be empty!');
// //             return;
// //         }

// //         const newField = createInputField('select', selectOptions);
// //         setFields(prevFields => {
// //             const updatedFields = [...prevFields];
// //             if (activeFieldIndex !== null) {
// //                 updatedFields[activeFieldIndex] = newField;
// //             } else {
// //                 updatedFields.push(newField);
// //             }
// //             return updatedFields;
// //         });
// //         resetSelectbox();
// //         setShowSelectPopup(false);
// //         setSelectOptions([{ id: 1, name: 'Option1' }]);
// //         setActiveFieldIndex(null);

// //     };

// //     const removeSelectOption = (id) => {
// //         setSelectOptions((prevOptions) => {
// //             return prevOptions.filter(option => option.id !== id);
// //         });

// //         setFields((prevFields) => prevFields.map(field => {
// //             if (field.id === selectedField?.id) {
// //                 const updatedOptions = field.options.filter(option => option.id !== id);
// //                 return { ...field, options: updatedOptions };
// //             }
// //             return field;
// //         }));
// //     };

// //     const removeField = (id) => {
// //         setFields((prevFields) => {
// //             const newFields = prevFields.filter(field => field && field.id !== id);

// //             if (newFields.length === 0) {
// //                 setBackgroundImage('');
// //                 setBackgroundColor('#ffffff');
// //                 setImageFile(null);
// //                 setBoxShadow('');
// //                 setFormWidth('100%');
// //                 setPadding('20px');
// //                 setBorderColor('#ffffff');
// //                 setBorderRadius('0');
// //             }

// //             if (selectedField && selectedField.id === id) {
// //                 setSelectedField(null);
// //             }

// //             return newFields;
// //         });
// //     };

// //     const handleCreate = () => {
// //         setShowConfirmationPopup(true);

// //     };

// //     const handleStatusChange = (status) => {
// //         setConfirmationPopupType(status);
// //         setShowConfirmationPopup(false);
// //         createOrUpdateForm(status);
// //     };

// //     const createOrUpdateForm = async (status = 'draft') => {
// //         const formId = generateUniqueId();
// //         const timestamp = format(new Date(), "yyyy-MM-dd HH:mm:ss a");

// //         console.log('Form status:', status);

// //         if (status !== 'live' && status !== 'draft') {
// //             alert('Invalid status. Please choose either "live" or "draft".');
// //             return;
// //         }

// //         if (!formTitle.trim()) {
// //             alert('Please enter a title for the form.');
// //             return;
// //         }

// //         const sanitizedContent = sanitizeHtml(editorValue, {
// //             allowedTags: sanitizeHtml.defaults.allowedTags.concat(['img']),
// //             allowedAttributes: {
// //                 'a': ['href', 'name', 'target'],
// //                 'img': ['src'],
// //             },
// //         });

// //         console.log('Sanitized Content:', sanitizedContent);

// //         const backgroundImageUrl = imageFile ? `url(${imageFile})` : backgroundImage || 'none';

// //         const newForm = {
// //             formId: isEditing ? editingFormId : formId,
// //             title: formTitle,
// //             shop,
// //             fields: fields.map(field => {
// //                 if (field.type === 'slider') {
// //                     return {
// //                         ...field,
// //                         min: field.min,
// //                         max: field.max,
// //                         step: field.step
// //                     };
// //                 }
// //                 if (field.type === 'link') {
// //                     return {
// //                         ...field,
// //                         linktext: field.linktext || '',
// //                         linkUrl: field.linkUrl || '',
// //                         linkTarget: linkTarget || '_self',
// //                         linkaline: linkaline || ''

// //                     };
// //                 }
// //                 if (field.type === 'checkbox') {
// //                     return {
// //                         ...field,
// //                         options: field.options.map(option => ({
// //                             id: option.id || generateUniqueId(),
// //                             label: option.name || '',
// //                             value: option.name || option.label
// //                         })).filter(option => option.label && option.value)
// //                     };
// //                 }
// //                 if (field.type === 'select') {
// //                     return {
// //                         ...field,
// //                         options: field.options.map(option => ({
// //                             id: option.id || generateUniqueId(),
// //                             label: option.name || '',
// //                             value: option.name || option.label
// //                         })).filter(option => option.label && option.value)
// //                     };
// //                 }
// //                 if (field.type === 'radio') {
// //                     return {
// //                         ...field,
// //                         options: field.options.map(option => ({
// //                             id: option.id || generateUniqueId(),
// //                             label: option.label || '',
// //                             value: option.value || option.label
// //                         })).filter(option => option.label && option.value)
// //                     };
// //                 }
// //                 if (field.type === 'heading') {
// //                     return {
// //                         ...field,
// //                         level: field.level,
// //                         fontSize: field.fontSize
// //                     };
// //                 }
// //                 if (field.type === 'button') {
// //                     return {
// //                         ...field,
// //                         padding: field.padding,
// //                         color: field.color,
// //                         fontSize: field.fontSize,
// //                         width: field.buttonWidth,
// //                         height: field.buttonHeight,
// //                         backgroundColor: field.backgroundColor,
// //                         buttonBorderWidth: field.buttonBorderWidth || 1,
// //                         buttonBorderStyle: field.buttonBorderStyle || 'solid',
// //                         buttonBorderColor: field.buttonBorderColor || '#000',
// //                         btncolor: field.btncolor || '#ffff',
// //                     };
// //                 }
// //                 return field;
// //             }),
// //             createdAt: timestamp,
// //             hidden: false,
// //             status: status,
// //             styles: {
// //                 backgroundColor: backgroundColor,
// //                 backgroundImage: backgroundImageUrl,
// //                 backgroundSize: 'cover',
// //                 backgroundRepeat: 'no-repeat',
// //                 boxShadow,
// //                 width: formWidth,
// //                 padding,
// //                 inputRadious,
// //                 inputstyle,
// //                 labelColor,
// //                 inputGap,
// //                 inputwidth,
// //                 opacityForm,
// //                 inputborderColor,
// //                 borderColor,
// //                 borderRadius,
// //                 borderColor: borderColor,
// //                 borderRadius: borderRadius,
// //                 borderWidth: borderWidth,
// //                 borderStyle: borderStyle,
// //                 textHeading,
// //                 colorHeading,
// //             },
// //             submissionOption: submissionOption || "defaultOption",
// //             thankYouTimer: thankYouTimer || 0,
// //             editorValue: sanitizedContent,
// //             url: url || "",
// //         };

// //         console.log('New form object:', JSON.stringify(newForm, null, 2));

// //         const request = isEditing
// //             ? axios.put(`http://localhost:4001/update-form/${editingFormId}`, newForm, {
// //                 headers: { 'Content-Type': 'application/json' }
// //             })
// //             : axios.post('http://localhost:4001/form-data', newForm, {
// //                 headers: { 'Content-Type': 'application/json' }
// //             });

// //         request
// //             .then(response => {
// //                 console.log(isEditing ? 'Form updated successfully:' : 'Form data saved successfully:', response.data);
// //                 const updatedForms = isEditing
// //                     ? createdForms.map(form => form.formId === editingFormId ? newForm : form)
// //                     : [...createdForms, newForm];

// //                 setCreatedForms(updatedForms);
// //                 setCurrentFormId(newForm.formId);
// //                 navigator('/app/formGenerator/list');
// //             })
// //             .catch(error => {
// //                 if (error.response && error.response.status === 400) {
// //                     alert(error.response.data);
// //                 } else {
// //                     console.error('Error saving/updating form data:', error);
// //                 }
// //             });

// //         setFields([]);
// //         setShowFormBuilder(false);
// //         setView('live');
// //         setIsEditing(false);
// //         setEditingFormId(null);
// //         setFormWidth('100%');
// //         setBackgroundImage(null);
// //         setImageFile('');
// //         setBorderColor('');
// //         setPadding('');
// //         setBorderRadius('');
// //     };

// //     const handleCancelStatusChange = () => {
// //         setShowConfirmationPopup(false);
// //         setShowCancelPopup(false);

// //     };

// //     const handleFieldClick = (field, index) => {
// //         const isCurrentlySelected = selectedField && selectedField.id === field.id;

// //         setSelectedField(isCurrentlySelected ? null : field);
// //         setHoveredFieldId(field.id);

// //         if (!isCurrentlySelected) {
// //             setIsPropertiesVisible(true);

// //             if (field.type === 'radio') {
// //                 setRadioOptions(field.options || []);
// //                 setRadioOptions(field.options.map(option => ({
// //                     id: option.id || generateUniqueId(),
// //                     label: option.label,
// //                     value: option.value
// //                 })));
// //                 setCurrentEditingFieldIndex(index);

// //             } else if (field.type === 'checkbox') {
// //                 setShowCheckboxPopup(false);
// //                 setCheckboxOptions(field.options || []);
// //                 setEditedFieldIndex(index);

// //             } else if (field.type === 'heading') {
// //                 setHeadingLevel(field.level);
// //                 setHeadingText(field.text);
// //                 setDescriptionText('');
// //                 setHeadingFontSize(field.fontSize);

// //             } else if (field.type === 'description') {
// //                 setDescriptionText(field.text);
// //                 setHeadingText('');

// //             } else if (field.type === 'select') {
// //                 setSelectOptions(field.options);
// //                 setShowSelectPopup(false);
// //                 setActiveFieldIndex(index);
// //             }
// //             handleFieldPro(field, index);
// //         } else {
// //             setIsPropertiesVisible(false);
// //         }

// //     };

// //     useEffect(() => {
// //         const handleBeforeUnload = (event) => {
// //             if (editedFieldIndex !== null) {
// //                 event.preventDefault();
// //                 event.returnValue = '';
// //             }
// //         };

// //         window.addEventListener('beforeunload', handleBeforeUnload);

// //         return () => {
// //             window.removeEventListener('beforeunload', handleBeforeUnload);
// //         };
// //     }, [editedFieldIndex]);

// //     useEffect(() => {
// //         console.log('selectedField', selectedField);
// //         console.log('headingText', headingText);

// //         if (selectedField) {
// //             const updatedField = {
// //                 ...selectedField,
// //                 ...(selectedField.type === 'heading'
// //                     ? {
// //                         level: headingLevel,
// //                         headingText: headingText || selectedField.headingText,
// //                         text: headingText || selectedField.headingText,
// //                         fontSize: headingFontSize
// //                     }
// //                     : { text: descriptionText }),
// //             };

// //             if (Array.isArray(fields)) {
// //                 setFields(prevFields =>
// //                     prevFields.map(field => field?.id === selectedField.id ? updatedField : field)
// //                 );
// //             } else {
// //                 console.error('Fields is not an array or is undefined', fields);
// //             }
// //         }
// //     }, [headingLevel, headingText, headingFontSize, descriptionText, selectedField]);

// //     const updateFieldProperty = (property, value) => {
// //         if (selectedField) {
// //             setFields((prevFields) =>
// //                 prevFields.map((field) =>
// //                     field.id === selectedField.id ? { ...field, [property]: value } : field
// //                 )
// //             );
// //             setSelectedField((prevField) => ({ ...prevField, [property]: value }));
// //         }
// //     };

// //     useEffect(() => {
// //         const handleClickOutside = (event) => {
// //             if (window.innerWidth > 1024 &&
// //                 propertiesPanelRef.current &&
// //                 !propertiesPanelRef.current.contains(event.target)) {
// //                 setSelectedField(null);
// //                 setIsOptionsVisible(null);
// //             }
// //         };

// //         document.addEventListener('mousedown', handleClickOutside);
// //         return () => {
// //             document.removeEventListener('mousedown', handleClickOutside);
// //         };
// //     }, []);


// //     useEffect(() => {
// //         const formBuilder = document.getElementById('formBuilder');
// //         if (formBuilder) {
// //             const sortable = Sortable.create(formBuilder, {
// //                 animation: 150,
// //                 ghostClass: 'dragging',
// //                 onEnd: (event) => {
// //                     const updatedFields = [...fields];
// //                     const [movedItem] = updatedFields.splice(event.oldIndex, 1);
// //                     updatedFields.splice(event.newIndex, 0, movedItem);
// //                     setFields(updatedFields);
// //                 },
// //             });

// //             return () => sortable.destroy();
// //         }
// //     }, [fields]);

// //     const handleClickOutside = (event) => {
// //         if (formRef.current && !formRef.current.contains(event.target)) {
// //             setEditMode(false);
// //         }
// //     };

// //     useEffect(() => {
// //         if (editMode) {
// //             document.addEventListener('mousedown', handleClickOutside);
// //         } else {
// //             document.removeEventListener('mousedown', handleClickOutside);
// //         }

// //         return () => {
// //             document.removeEventListener('mousedown', handleClickOutside);
// //         };
// //     }, [editMode]);

// //     const handleFileChange = (event) => {
// //         if (event.target.files && event.target.files[0]) {
// //             const file = event.target.files[0];
// //             const reader = new FileReader();

// //             reader.onloadend = () => {
// //                 setImageFile(reader.result);
// //                 localStorage.setItem('backgroundImage', reader.result);
// //             };

// //             reader.readAsDataURL(file);
// //         }
// //     };

// //     const handleBoxShadowChange = (e) => {
// //         const selectedShadow = e.target.value;
// //         setBoxShadow(selectedShadow);

// //         const formBuilder = document.getElementById('bg_change');
// //         if (formBuilder) {
// //             formBuilder.style.boxShadow = selectedShadow;
// //         }
// //     };
// //     const updateFormWidth = (width) => {
// //         setFormWidth(width);
// //         const formBuilder = document.getElementById('bg_change');
// //         if (formBuilder) {
// //             formBuilder.style.width = width;
// //         }
// //     };

// //     const updateOpacity = (opacityForm) => {
// //         setOpacityForm(opacityForm);
// //         const formBuilder = document.getElementById('bg_change');
// //         if (formBuilder) {
// //             formBuilder.style.opacityForm = opacityForm;
// //         }
// //     }

// //     const updatePadding = (padding) => {
// //         setPadding(padding);
// //         const formBuilder = document.getElementById('bg_change');
// //         if (formBuilder) {
// //             formBuilder.style.padding = `${padding}px`;
// //         }
// //     }

// //     const handleBorderColorChange = (e) => {
// //         const newColor = e.target.value;
// //         setBorderColor(newColor);
// //         setBorderColorcode(newColor)
// //     };
// //     const handleheadingColorChange = (e) => {
// //         const newColor = e.target.value;
// //         setColorHeading(newColor);
// //         setColorHeadingcode(newColor)
// //     };

// //     const handleBorderWidthChange = (e) => {
// //         const value = e.target.value;
// //         setBorderWidth(value);
// //     };

// //     const handleBorderStyleChange = (e) => {
// //         setBorderStyle(e.target.value);
// //     };

// //     const updateBorderRadius = (borderRadius) => {
// //         setBorderRadius(borderRadius);
// //         const formBuilder = document.getElementById('bg_change');
// //         if (formBuilder) {
// //             formBuilder.style.borderRadius = borderRadius;
// //         }
// //     }

// //     const toggleFieldEnabled = () => {
// //         setIsFieldEnabled(!isFieldEnabled);
// //     };

// //     const handleSubmits = (e) => {
// //         e.preventDefault();
// //         handleAddDescription(descriptionText);
// //     };

// //     const handleAddDescription = (text) => {
// //         const descriptionField = {
// //             id: editingDescriptionId || generateUniqueId(),
// //             type: 'description',
// //             text: descriptionText,
// //             label: 'Description',
// //         };
// //         setFields((prevFields) => [...prevFields, descriptionField]);
// //         setShowDescriptionPopup(false);
// //         setDescriptionText('');
// //         setEditingDescriptionId(null)

// //     };

// //     const toggleFields = () => {
// //         setShowFields(true);
// //         setDropdownVisible(false);
// //     };

// //     const toggleSettings = () => {
// //         setShowFields(false);
// //     };

// //     const hanldeField = () => {
// //         setShowField(!showField);
// //     }

// //     const capitalizeFirstLetter = (string) => {
// //         if (!string) return "";
// //         return string.charAt(0).toUpperCase() + string.slice(1);
// //     };

// //     const toggleOptions = () => {
// //         setIsOptionsVisible(prev => !prev);
// //     };

// //     const handleCloseProperties = () => {
// //         setIsPropertiesVisible(false);
// //         setSelectedField(null);
// //     };

// //     const handlelistForm = () => {
// //         setShowCancelPopup(true)
// //     }

// //     const handleOptionChange = (event) => {
// //         setSubmissionOption(event.target.value);
// //         if (event.target.value !== 'Allow only one entry at a time') {
// //             setThankYouTimer('');
// //         }
// //     };

// //     const handleTimerChange = (event) => {
// //         const value = event.target.value;
// //         if (value <= 30 && value >= 0) {
// //             setThankYouTimer(value);
// //         }
// //     };

// //     const handleRemoveBackgroundImage = () => {
// //         setBackgroundImage('');
// //         setImageFile('');
// //     };

// //     useEffect(() => {
// //         if (window.innerWidth > 1024) {
// //             setShowFieldInput(true);
// //         } else {
// //             setShowFieldInput(false);
// //         }

// //         const handleResize = () => {
// //             if (window.innerWidth > 1024) {
// //                 setShowFieldInput(true);
// //             } else {
// //                 setShowFieldInput(false);
// //             }
// //         };

// //         window.addEventListener("resize", handleResize);
// //         return () => window.removeEventListener("resize", handleResize);
// //     }, []);

// //     const handleFieldInput = () => {
// //         if (window.innerWidth <= 1024) {
// //             setShowFieldInput(true);
// //         }
// //     };
// //     const hanldeCancleBtn = () => {
// //         setShowFieldInput(false);
// //     }

// //     useEffect(() => {
// //         if (window.innerWidth > 1024) {
// //             setShowFieldPro(true);
// //         } else {
// //             setShowFieldPro(false);
// //         }

// //         const handleResize = () => {
// //             if (window.innerWidth > 1024) {
// //                 setShowFieldPro(true);
// //             } else {
// //                 setShowFieldPro(false);
// //             }
// //         };

// //         window.addEventListener("resize", handleResize);
// //         return () => window.removeEventListener("resize", handleResize);
// //     }, []);

// //     const handleFieldPro = () => {
// //         if (window.innerWidth <= 1024) {
// //             setShowFieldPro(true);
// //         }
// //     };

// //     const hanldeCanclepro = () => {
// //         setShowFieldPro(false);
// //     }

// //     const handleColorChange = (e) => {
// //         const newColor = e.target.value;
// //         setBackgroundColor(newColor);
// //         setColorCode(newColor);
// //     };

// //     const handleLableColor = (e) => {
// //         const newColor = e.target.value;
// //         setLableColor(newColor);
// //         setLableCode(newColor);
// //     }

// //     const handleborderColor = (e) => {
// //         const newColor = e.target.value;
// //         setInputBorderColor(newColor);
// //         setInputColorcode(newColor);
// //     }

// //     return (
// //         <div>
// //             <div className="builder-container">
// //                 <h3>Forms</h3>
// //                 <div className='builder_form_name'>
// //                     <h1>Form Name</h1>
// //                     <input
// //                         type="text"
// //                         value={formTitle}
// //                         onChange={(e) => setFormTitle(e.target.value)}
// //                         placeholder="Enter Name"
// //                     />
// //                 </div>
// //                 <div className='form-Elements-btn email' onClick={handleFieldInput}>Form Elements</div>
// //                 <div className='builder-forms_rapp'>
// //                     <div className="builder-wrp">
// //                         <div className="controls-main-wrp">

// //                             {showFieldInput && (<div className="controls-wrp">

// //                                 {showField && (<div className="controls">
// //                                     <div className='builder-form-element'>
// //                                         <div className='buil_form_texttt'>
// //                                             <div className='buil_form_texttt_p'>
// //                                                 <h2>Form Elements</h2>
// //                                             </div>
// //                                         </div>
// //                                         {/* <div className='builder_element_close' style={{ cursor: "pointer" }} onClick={hanldeField}>
// //                                             <img src={close} alt="" />
// //                                         </div> */}
// //                                     </div>
// //                                     <div className='controls-wrpping cancleimg pro' onClick={hanldeCancleBtn}><img src={cancleimg} alt="" /></div>
// //                                     <div className='builder_fieldes'>
// //                                         <div className='builder_form_select_control'>
// //                                             <div
// //                                                 className={`builder_form_fields ${showFields ? 'active' : ''}`}
// //                                                 onClick={toggleFields}
// //                                             >
// //                                                 <h2>Fields</h2>
// //                                             </div>
// //                                             <div
// //                                                 className={`builder_form_setting ${!showFields ? 'active' : ''}`}
// //                                                 onClick={toggleSettings}
// //                                             >
// //                                                 <h2>Settings</h2>
// //                                             </div>

// //                                         </div>
// //                                         {showFields ? (
// //                                             <div className='build_form_btns'>
// //                                                 <div className='builderr_field_wrpp'> <button onClick={() => addInputField('name')}><span className='form_builder_field_img'><img src={text} alt="" /></span> <span><h4>Name</h4></span></button></div>
// //                                                 <div className='builderr_field_wrpp'> <button onClick={() => addInputField('text')}><span className='form_builder_field_img'><img src={text} alt="" /></span> <span><h4>Text Input</h4></span></button></div>
// //                                                 <div className='builderr_field_wrpp'> <button onClick={() => addInputField('heading')}><span className='form_builder_field_img'><img src={heading} alt="" /></span> <span><h4>Heading</h4></span></button></div>
// //                                                 <div className='builderr_field_wrpp'> <button onClick={() => addInputField('description')}><span className='form_builder_field_img'><img src={font} alt="" /></span> <span><h4>Description</h4></span></button></div>
// //                                                 <div className='builderr_field_wrpp'> <button onClick={() => addInputField('radio')}><span className='form_builder_field_img'><img src={radio} alt="" /></span> <span><h4>Radio Button</h4></span></button></div>
// //                                                 <div className='builderr_field_wrpp'> <button onClick={() => addInputField('checkbox')}><span className='form_builder_field_img'><img src={checkbox} alt="" /></span> <span><h4>Checkbox</h4></span></button></div>
// //                                                 <div className='builderr_field_wrpp'> <button onClick={() => addInputField('select')}><span className='form_builder_field_img'><img src={selection} alt="" /></span> <span><h4>Select Box</h4></span></button></div>
// //                                                 <div className='builderr_field_wrpp'> <button onClick={() => addInputField('textarea')}><span className='form_builder_field_img'><img src={text1} alt="" /></span> <span><h4>Textarea</h4></span></button></div>
// //                                                 <div className='builderr_field_wrpp'> <button onClick={() => addInputField('file')}><span className='form_builder_field_img'><img src={upload} alt="" /></span> <span><h4>File Upload</h4></span></button></div>
// //                                                 <div className='builderr_field_wrpp'> <button onClick={() => addInputField('number')}><span className='form_builder_field_img'><img src={number} alt="" /></span> <span><h4>Number Input</h4></span></button></div>
// //                                                 <div className='builderr_field_wrpp'> <button onClick={() => addInputField('email')}><span className='form_builder_field_img'><img src={email} alt="" /></span> <span><h4>Email address</h4></span></button></div>
// //                                                 <div className='builderr_field_wrpp'> <button onClick={() => addInputField('phone')}><span className='form_builder_field_img'><img src={phone} alt="" /></span> <span><h4>Phone number</h4></span></button></div>
// //                                                 <div className='builderr_field_wrpp'> <button onClick={() => addInputField('password')}><span className='form_builder_field_img'><img src={password1} alt="" /></span> <span><h4>Password</h4></span></button></div>
// //                                                 <div className='builderr_field_wrpp'> <button onClick={() => addInputField('url')}><span className='form_builder_field_img'><img src={url1} alt="" /></span> <span><h4>Url</h4></span></button></div>
// //                                                 <div className='builderr_field_wrpp'> <button onClick={() => addInputField('location')}><span className='form_builder_field_img'><img src={location1} alt="" /></span> <span><h4>Location</h4></span></button></div>
// //                                                 <div className='builderr_field_wrpp'> <button onClick={() => addInputField('toggle')}><span className='form_builder_field_img'><img src={toggle} alt="" /></span> <span><h4>Toggle</h4></span></button></div>
// //                                                 <div className='builderr_field_wrpp'> <button onClick={() => addInputField('date')}><span className='form_builder_field_img'><img src={date} alt="" /></span> <span><h4>Date</h4></span></button></div>
// //                                                 <div className='builderr_field_wrpp'> <button onClick={() => addInputField('datetime')}><span className='form_builder_field_img'><img src={detetime} alt="" /></span> <span><h4>Datetime</h4></span></button></div>
// //                                                 <div className='builderr_field_wrpp'> <button onClick={() => addInputField('time')}><span className='form_builder_field_img'><img src={time} alt="" /></span> <span><h4>Time</h4></span></button></div>
// //                                                 <div className='builderr_field_wrpp'> <button onClick={() => addInputField('slider')}><span className='form_builder_field_img'><img src={slider} alt="" /></span> <span><h4>Slider</h4></span></button></div>
// //                                                 <div className='builderr_field_wrpp'> <button onClick={() => addInputField('images')}><span className='form_builder_field_img'><img src={image} alt="" /></span> <span><h4>Images</h4></span></button></div>
// //                                                 <div className='builderr_field_wrpp'> <button onClick={() => addInputField('button')}><span className='form_builder_field_img'><img src={btn} alt="" /></span> <span><h4>Button</h4></span></button></div>
// //                                                 <div className='builderr_field_wrpp'> <button onClick={() => addInputField('divider')}><span className='form_builder_field_img'><img src={divider2} alt="" /></span> <span><h4>Divider</h4></span></button></div>
// //                                                 <div className='builderr_field_wrpp'> <button onClick={() => addInputField('link')}><span className='form_builder_field_img'><img src={link1} alt="" /></span> <span><h4>Link</h4></span></button></div>
// //                                             </div>
// //                                         ) : (
// //                                             <div>
// //                                                 <div className='edit_form_close'>
// //                                                     <div className='edit-formwrap'>
// //                                                         <h3>Edit Form Properties</h3>
// //                                                         <div className='form_builder_submission'>
// //                                                             <h2> Form Submission</h2>

// //                                                             <div className='dropdown-content'>
// //                                                                 <select className='submission-select' value={submissionOption} onChange={handleOptionChange}>
// //                                                                     <option value="">Select Submission Option</option>
// //                                                                     <option value="Clear the form and allow another submission">Clear the form and allow another submission</option>
// //                                                                     <option value="Redirect to other page">Redirect to other page</option>
// //                                                                     <option value="Hide form and show thank you message">Hide form and show thank you message</option>
// //                                                                 </select>
// //                                                                 {submissionOption === 'Clear the form and allow another submission' && (
// //                                                                     <div className='option-content'>
// //                                                                         <div className='admin-input'>
// //                                                                             <div className='admin-label'>
// //                                                                                 <label htmlFor="content">Content</label>
// //                                                                             </div>
// //                                                                             {ReactQuill ? (
// //                                                                                 <ReactQuill
// //                                                                                     value={editorValue}
// //                                                                                     onChange={setEditorValue}
// //                                                                                     modules={{ toolbar: toolbarOptions }}
// //                                                                                 />
// //                                                                             ) : (
// //                                                                                 <p>Loading editor...</p>
// //                                                                             )}
// //                                                                         </div>
// //                                                                         <div>
// //                                                                             <label htmlFor="thankYouTimer">Thank You Message Timer (max 30s): </label>
// //                                                                             <input
// //                                                                                 type="number"
// //                                                                                 id="thankYouTimer"
// //                                                                                 value={thankYouTimer}
// //                                                                                 onChange={handleTimerChange}
// //                                                                                 min="0"
// //                                                                                 max="30"

// //                                                                             />
// //                                                                         </div>
// //                                                                     </div>
// //                                                                 )}
// //                                                                 {submissionOption === 'Redirect to other page' && (
// //                                                                     <div className='option-content'>
// //                                                                         <label htmlFor="Redirect Page URL">Redirect Page URL</label>
// //                                                                         <input
// //                                                                             type="url"

// //                                                                             value={url}
// //                                                                             onChange={(e) => setUrl(e.target.value)}
// //                                                                             className='url-input'
// //                                                                             placeholder="https://example.com"
// //                                                                         />
// //                                                                     </div>
// //                                                                 )}

// //                                                                 {submissionOption === 'Hide form and show thank you message' && (
// //                                                                     <div className='option-content'>
// //                                                                         <div className='admin-input'>
// //                                                                             <div className='admin-label'>
// //                                                                                 <label htmlFor="content">Content</label>
// //                                                                             </div>
// //                                                                             {ReactQuill ? (
// //                                                                                 <ReactQuill
// //                                                                                     value={editorValue}
// //                                                                                     onChange={setEditorValue}
// //                                                                                     modules={{ toolbar: toolbarOptions }}
// //                                                                                 />
// //                                                                             ) : (
// //                                                                                 <p>Loading editor...</p>
// //                                                                             )}
// //                                                                         </div>
// //                                                                     </div>
// //                                                                 )}
// //                                                             </div>
// //                                                         </div>

// //                                                         <div className='edit-form-options form'>
// //                                                             <div className='edit_setting_bg form bgcolor'>
// //                                                                 <label>
// //                                                                     Background Color:
// //                                                                 </label>
// //                                                                 <div className='edit_setting_bg_cls'>
// //                                                                     <p>{colorCode}</p>
// //                                                                     <div className='edit_setting_bg--form bgcolor'
// //                                                                         style={{
// //                                                                             height: "30px",
// //                                                                             width: "30px",
// //                                                                             borderRadius: "4px",
// //                                                                             backgroundColor: backgroundColor,
// //                                                                             border: "1px solid #ccc",
// //                                                                             cursor: "pointer",
// //                                                                         }}
// //                                                                         onClick={() => document.getElementById('colorInput').click()}
// //                                                                     >
// //                                                                     </div>
// //                                                                 </div>
// //                                                                 <input
// //                                                                     id="colorInput"
// //                                                                     type="color"
// //                                                                     style={{
// //                                                                         display: "none"
// //                                                                     }}
// //                                                                     value={backgroundColor}
// //                                                                     onChange={handleColorChange}
// //                                                                 />

// //                                                             </div>
// //                                                             <div className='edit_setting_bg form'>
// //                                                                 <label>Upload Background Image:</label>
// //                                                                 <input
// //                                                                     type="file"
// //                                                                     accept="image/*"
// //                                                                     onChange={handleFileChange}
// //                                                                 />

// //                                                             </div>
// //                                                             {imageFile && (
// //                                                                 <button
// //                                                                     className='rm-btn'
// //                                                                     type="button"
// //                                                                     onClick={handleRemoveBackgroundImage}
// //                                                                 >
// //                                                                     <img src={bk} alt="" />
// //                                                                 </button>
// //                                                             )}
// //                                                             {backgroundImage && (
// //                                                                 <button
// //                                                                     className='rm-btn'
// //                                                                     type="button"
// //                                                                     onClick={handleRemoveBackgroundImage}
// //                                                                 >
// //                                                                     <img src={bk} alt="" />
// //                                                                 </button>
// //                                                             )}
// //                                                             <div
// //                                                                 className="edit_setting_bg form"
// //                                                                 style={{
// //                                                                     backgroundImage: backgroundImage && !imageFile ? backgroundImage : 'none',
// //                                                                     backgroundRepeat: 'no-repeat',
// //                                                                     backgroundSize: 'contain',
// //                                                                     backgroundPosition: 'center',
// //                                                                     height: '150px',
// //                                                                     width: '100%',
// //                                                                     border: '1px solid #ddd',
// //                                                                     display: 'flex',
// //                                                                     justifyContent: 'center',
// //                                                                 }}
// //                                                             >
// //                                                                 {!backgroundImage && !imageFile && (
// //                                                                     <img src={bgim1} alt="Placeholder" style={{ padding: '10px', maxWidth: '100%', height: '150px' }} />
// //                                                                 )}
// //                                                                 {imageFile && (
// //                                                                     <img
// //                                                                         src={imageFile}
// //                                                                         alt="Uploaded Background Preview"
// //                                                                         style={{ padding: '10px', maxWidth: '100%', height: '150px' }}
// //                                                                     />
// //                                                                 )}
// //                                                             </div>
// //                                                             <div className='edit_setting_bg form'>
// //                                                                 <label>Opacity:</label>
// //                                                                 <input
// //                                                                     type='text'
// //                                                                     value={opacityForm}
// //                                                                     onChange={(e) => updateOpacity(e.target.value)}
// //                                                                 />
// //                                                             </div>

// //                                                             <div className="edit_setting_bg form">
// //                                                                 <label htmlFor="boxShadowSelect">Background Shadow:</label>
// //                                                                 <select
// //                                                                     id="boxShadowSelect"
// //                                                                     className="edit_shadowselect"
// //                                                                     onChange={handleBoxShadowChange}
// //                                                                     value={boxShadow}
// //                                                                 >
// //                                                                     <option value="">Select a shadow</option>
// //                                                                     <option value="rgba(0, 0, 0, 0.35) 0px 5px 15px">Subtle Shadow</option>
// //                                                                     <option value="rgba(0, 0, 0, 0.5) 0px 10px 20px">Medium Shadow</option>
// //                                                                     <option value=" rgba(0, 0, 0, 0.56) 0px 22px 70px 4px">Dark Shadow</option>
// //                                                                     <option value="none">No Shadow</option>
// //                                                                 </select>
// //                                                             </div>
// //                                                             <div className="edit_setting_bg form">
// //                                                                 <label>Form Width:</label>
// //                                                                 <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>
// //                                                                     <input
// //                                                                         type="range"
// //                                                                         min="360"
// //                                                                         max="1200"
// //                                                                         value={parseInt(formWidth.replace('px', '')) || 360}
// //                                                                         onChange={(e) => updateFormWidth(`${e.target.value}px`)}
// //                                                                         className="form-width-slider"
// //                                                                         style={{ flex: 1 }}
// //                                                                     />
// //                                                                     <span>{formWidth}</span>
// //                                                                 </div>
// //                                                             </div>

// //                                                             <div className='edit_setting_bg form'>
// //                                                                 <label>Padding:</label>
// //                                                                 <input
// //                                                                     type='text'
// //                                                                     value={padding}
// //                                                                     onChange={(e) => updatePadding(e.target.value)}
// //                                                                 />
// //                                                             </div>
// //                                                             <div className='edit_setting_bg form'>
// //                                                                 <label>Gap</label>
// //                                                                 <input
// //                                                                     type='text'
// //                                                                     value={inputGap}
// //                                                                     onChange={(e) => setInputGap(e.target.value)}
// //                                                                 />
// //                                                             </div>

// //                                                             <div className='edit_setting_bg form bgcolor'>
// //                                                                 <label>Lable Color:</label>
// //                                                                 <div className='edit_setting_bg_cls'>
// //                                                                     <p>{lableCode}</p>
// //                                                                     <div className='edit_setting_bg--form bgcolor'
// //                                                                         style={{
// //                                                                             height: "30px",
// //                                                                             width: "30px",
// //                                                                             borderRadius: "4px",
// //                                                                             backgroundColor: labelColor,
// //                                                                             border: "1px solid #ccc",
// //                                                                             cursor: "pointer",
// //                                                                         }}
// //                                                                         onClick={() => document.getElementById('labelColorInput').click()}
// //                                                                     >
// //                                                                     </div>
// //                                                                 </div>
// //                                                                 <input
// //                                                                     id="labelColorInput"
// //                                                                     type="color"
// //                                                                     style={{
// //                                                                         display: "none"
// //                                                                     }}
// //                                                                     value={labelColor}
// //                                                                     onChange={handleLableColor}
// //                                                                 />
// //                                                             </div>
// //                                                             <div className='edit_setting_bg form'>
// //                                                                 <label>Input Border:</label>
// //                                                                 <input
// //                                                                     type='text'
// //                                                                     value={inputwidth}
// //                                                                     onChange={(e) => setInputWidth(e.target.value)}
// //                                                                 />
// //                                                             </div>
// //                                                             <div className='edit_setting_bg form bgcolor'>
// //                                                                 <label>Input Border Color:</label>
// //                                                                 <div className='edit_setting_bg_cls'>
// //                                                                     <p>{inputColorcode}</p>
// //                                                                     <div className='edit_setting_bg--form bgcolor'
// //                                                                         style={{
// //                                                                             height: "30px",
// //                                                                             width: "30px",
// //                                                                             borderRadius: "4px",
// //                                                                             backgroundColor: inputborderColor,
// //                                                                             border: "1px solid #ccc",
// //                                                                             cursor: "pointer",
// //                                                                         }}
// //                                                                         onClick={() => document.getElementById('inputborderColorInput').click()}
// //                                                                     >
// //                                                                     </div>
// //                                                                 </div>
// //                                                                 <input
// //                                                                     id="inputborderColorInput"
// //                                                                     type="color"
// //                                                                     style={{
// //                                                                         display: "none"
// //                                                                     }}
// //                                                                     value={inputborderColor}
// //                                                                     onChange={handleborderColor}
// //                                                                 />
// //                                                             </div>
// //                                                             <div className="edit_setting_bg form">
// //                                                                 <label>Input Border Style:</label>
// //                                                                 <select
// //                                                                     value={inputstyle}
// //                                                                     onChange={(e) => setInputStyle(e.target.value)}
// //                                                                 >
// //                                                                     <option value="solid">Solid</option>
// //                                                                     <option value="dotted">Dotted</option>
// //                                                                     <option value="dashed">Dashed</option>
// //                                                                 </select>
// //                                                             </div>

// //                                                             <div className='edit_setting_bg form'>
// //                                                                 <label>Input Border Radious:</label>
// //                                                                 <input
// //                                                                     type='text'
// //                                                                     value={inputRadious}
// //                                                                     onChange={(e) => setInputRadious(e.target.value)}
// //                                                                 />
// //                                                             </div>


// //                                                             {/* <div className='edit_setting_bg form padding'>
// //                                                                 <label>Padding:</label>
// //                                                                 <input
// //                                                                     type="range"
// //                                                                     min="0"
// //                                                                     max="300"
// //                                                                     value={padding}
// //                                                                     onChange={(e) => updatePadding(e.target.value)}
// //                                                                     style={{ width: '250px' }}
// //                                                                     className="custom-range"
// //                                                                 />
                                                               
// //                                                             </div> */}

// //                                                             <div className='edit_setting_bg form'>
// //                                                                 <label>Border Width:</label>
// //                                                                 <input
// //                                                                     type='text'
// //                                                                     value={borderWidth}
// //                                                                     onChange={handleBorderWidthChange}
// //                                                                     placeholder="e.g., 1px"
// //                                                                 />

// //                                                             </div>
// //                                                             <div className='edit_setting_bg form'>
// //                                                                 <label>Style:</label>
// //                                                                 <select onChange={handleBorderStyleChange} value={borderStyle} style={{ marginRight: '10px' }}>
// //                                                                     <option value="solid">Solid</option>
// //                                                                     <option value="dashed">Dashed</option>
// //                                                                     <option value="dotted">Dotted</option>

// //                                                                 </select>
// //                                                             </div>
// //                                                             <div className='edit_setting_bg form bgcolor'>
// //                                                                 <label>Border-Color:</label>
// //                                                                 <div className='edit_setting_bg_cls'>
// //                                                                     <p>{borderColorcode}</p>
// //                                                                     <div className='edit_setting_bg--form bgcolor'
// //                                                                         style={{
// //                                                                             height: "30px",
// //                                                                             width: "30px",
// //                                                                             borderRadius: "4px",
// //                                                                             backgroundColor: borderColor,
// //                                                                             border: "1px solid #ccc",
// //                                                                             cursor: "pointer",
// //                                                                         }}
// //                                                                         onClick={() => document.getElementById('borderColorInput').click()}
// //                                                                     >
// //                                                                     </div>
// //                                                                 </div>
// //                                                                 <input
// //                                                                     id="borderColorInput"
// //                                                                     type="color"
// //                                                                     style={{
// //                                                                         display: "none"
// //                                                                     }}
// //                                                                     value={borderColor}
// //                                                                     onChange={handleBorderColorChange}
// //                                                                 />
// //                                                             </div>
// //                                                             <div className='edit_setting_bg form'>
// //                                                                 <label>Border-Radius:</label>
// //                                                                 <input
// //                                                                     type='text'
// //                                                                     value={borderRadius}
// //                                                                     onChange={(e) => updateBorderRadius(e.target.value)}
// //                                                                 />
// //                                                             </div>
// //                                                         </div>
// //                                                     </div>
// //                                                 </div>
// //                                             </div>
// //                                         )}

// //                                     </div>
// //                                 </div>
// //                                 )}
// //                             </div>)}

// //                             <div className='form_builder_build'>
// //                                 <div id='bg_change' className="form-builder-wrp" >
// //                                     <div id="formBuilder" className="form-builder" >
// //                                         {fields.length > 0 ? (fields.map((field, index) => {
// //                                             if (!field) {
// //                                                 console.error(`Field at index ${index} is undefined`);
// //                                                 return null;
// //                                             }
// //                                             return (
// //                                                 <div
// //                                                     key={field.id}
// //                                                     className={`input-field input-gap ${parseFloat(field.width || '100') <= 50 ? 'small-width' : ''}`}
// //                                                     style={{ width: field.width || '100%', marginBottom: `${inputGap}px` }}
// //                                                     onClick={() => handleFieldClick(field, index)}
// //                                                 >
// //                                                     {field.type === 'name' && (
// //                                                         <div className={`input-field`} style={{
// //                                                             width: "100%",
// //                                                             border: (selectedField && selectedField.id === field.id) || (hoveredFieldId === field.id)
// //                                                                 ? '1px solid #33cba2'
// //                                                                 : '1px solid transparent',
// //                                                             backgroundColor: selectedField && selectedField.id === field.id
// //                                                                 ? '#e7f9f4'
// //                                                                 : hoveredFieldId === field.id
// //                                                                     ? '#e7f9f4'
// //                                                                     : 'transparent',
// //                                                         }}
// //                                                             onMouseEnter={() => setHoveredFieldId(field.id)}
// //                                                             onMouseLeave={() => {
// //                                                                 if (!(selectedField && selectedField.id === field.id)) {
// //                                                                     setHoveredFieldId(null);
// //                                                                 }
// //                                                             }} >
// //                                                             <div>
// //                                                                 <label style={{ color: labelColor }}>
// //                                                                     {field.label || "Name"}
// //                                                                     <input
// //                                                                         style={{
// //                                                                             width: '100%',
// //                                                                             padding: field.inputPadding,
// //                                                                             borderRadius: `${inputRadious}px`,
// //                                                                             borderWidth: `${inputwidth}px`,
// //                                                                             borderStyle: inputstyle,
// //                                                                             borderColor: inputborderColor,
// //                                                                             opacity: field.opacity || 1,
// //                                                                         }}
// //                                                                         onMouseEnter={() => setHoveredFieldId(field.id)}
// //                                                                         onMouseLeave={() => {
// //                                                                             if (!(selectedField && selectedField.id === field.id)) {
// //                                                                                 setHoveredFieldId(null);
// //                                                                             }
// //                                                                         }}
// //                                                                         type="text"
// //                                                                         className="name"
// //                                                                         name={field.name}
// //                                                                         placeholder={field.placeholder}
// //                                                                         required={field.required}
// //                                                                         disabled={field.disabled}
// //                                                                         readOnly={field.readonly}
// //                                                                         onChange={(e) => updateFieldProperty('name', e.target.value, field.id)}

// //                                                                     />
// //                                                                 </label>
// //                                                                 <div className='description'>
// //                                                                     {field.description}
// //                                                                 </div>
// //                                                             </div>
// //                                                         </div>
// //                                                     )}

// //                                                     {field.type === 'text' && (
// //                                                         <div className={`input-field ${field.customClass}`} style={{
// //                                                             width: "100%",
// //                                                             border: (selectedField && selectedField.id === field.id) || (hoveredFieldId === field.id)
// //                                                                 ? '1px solid #33cba2'
// //                                                                 : '1px solid transparent',
// //                                                             backgroundColor: selectedField && selectedField.id === field.id
// //                                                                 ? '#e7f9f4'
// //                                                                 : hoveredFieldId === field.id
// //                                                                     ? '#e7f9f4'
// //                                                                     : 'transparent',
// //                                                         }}
// //                                                             onMouseEnter={() => setHoveredFieldId(field.id)}
// //                                                             onMouseLeave={() => {
// //                                                                 if (!(selectedField && selectedField.id === field.id)) {
// //                                                                     setHoveredFieldId(null);
// //                                                                 }
// //                                                             }} >
// //                                                             <div>
// //                                                                 <label style={{ color: labelColor }}>
// //                                                                     {field.label || "Text Input"}
// //                                                                     <input
// //                                                                         style={{
// //                                                                             width: '100%', padding: field.inputPadding, borderRadius: `${inputRadious}px`, borderWidth: `${inputwidth}px`,
// //                                                                             borderStyle: inputstyle,
// //                                                                             borderColor: inputborderColor, opacity: field.opacity || 1,
// //                                                                         }}
// //                                                                         type="text"
// //                                                                         className="name"
// //                                                                         name={field.name}
// //                                                                         placeholder={field.placeholder}
// //                                                                         required={field.required}
// //                                                                         disabled={field.disabled}
// //                                                                         readOnly={field.readonly}
// //                                                                         onChange={(e) => updateFieldProperty('name', e.target.value, field.id)}

// //                                                                     />
// //                                                                 </label>
// //                                                                 <div className='description'>
// //                                                                     {field.description}
// //                                                                 </div>
// //                                                             </div>
// //                                                         </div>
// //                                                     )}

// //                                                     {field.type === 'heading' && (
// //                                                         <div className={`input-field ${field.customClass || ''}`} style={{
// //                                                             width: "100%",
// //                                                             border: (selectedField && selectedField.id === field.id) || (hoveredFieldId === field.id)
// //                                                                 ? '1px solid #33cba2'
// //                                                                 : '1px solid transparent',
// //                                                             backgroundColor: selectedField && selectedField.id === field.id
// //                                                                 ? '#e7f9f4'
// //                                                                 : hoveredFieldId === field.id
// //                                                                     ? '#e7f9f4'
// //                                                                     : 'transparent',
// //                                                         }}
// //                                                             onMouseEnter={() => setHoveredFieldId(field.id)}
// //                                                             onMouseLeave={() => {
// //                                                                 if (!(selectedField && selectedField.id === field.id)) {
// //                                                                     setHoveredFieldId(null);
// //                                                                 }

// //                                                             }}>
// //                                                             <div className='form_builder_heading_hover'>
// //                                                                 <label>
// //                                                                     <div style={{
// //                                                                         fontSize: field.fontSize || '16px', width: field.width, opacity: field.opacity || 1,
// //                                                                         textAlign: textHeading, color: colorHeading,
// //                                                                     }}>
// //                                                                         {React.createElement(
// //                                                                             field.level || 'h1',
// //                                                                             null,
// //                                                                             field.headingText || field.text
// //                                                                         )}
// //                                                                     </div>
// //                                                                 </label>
// //                                                             </div>
// //                                                         </div>
// //                                                     )}
// //                                                     {field.type === 'description' && (
// //                                                         <div className={`input-field ${field.customClass || ''}`} style={{
// //                                                             width: field.width || '100%', border: (selectedField && selectedField.id === field.id) || (hoveredFieldId === field.id)
// //                                                                 ? '1px solid #33cba2'
// //                                                                 : '1px solid transparent',
// //                                                             backgroundColor: selectedField && selectedField.id === field.id
// //                                                                 ? '#e7f9f4'
// //                                                                 : hoveredFieldId === field.id
// //                                                                     ? '#e7f9f4'
// //                                                                     : 'transparent',
// //                                                         }}
// //                                                             onMouseEnter={() => setHoveredFieldId(field.id)}
// //                                                             onMouseLeave={() => {
// //                                                                 if (!(selectedField && selectedField.id === field.id)) {
// //                                                                     setHoveredFieldId(null);
// //                                                                 }
// //                                                             }}>
// //                                                             <div className='form_builder_heading_hover'>
// //                                                                 <label>
// //                                                                     <div className="description-field" style={{ fontSize: field.fontSize || '16px', width: field.width, opacity: field.opacity || 1 }}
// //                                                                     >
// //                                                                         <p>{field.text}</p>
// //                                                                     </div>
// //                                                                 </label>
// //                                                             </div>
// //                                                         </div>
// //                                                     )}
// //                                                     <div className='form-build-radio-wrp-options'>
// //                                                         {field.type === 'radio' && (
// //                                                             <div
// //                                                                 className={`input-field ${field.customClass}`}
// //                                                                 style={{
// //                                                                     width: "100%", border: (selectedField && selectedField.id === field.id) || (hoveredFieldId === field.id)
// //                                                                         ? '1px solid #33cba2'
// //                                                                         : '1px solid transparent',
// //                                                                     backgroundColor: selectedField && selectedField.id === field.id
// //                                                                         ? '#e7f9f4'
// //                                                                         : hoveredFieldId === field.id
// //                                                                             ? '#e7f9f4'
// //                                                                             : 'transparent',
// //                                                                 }}

// //                                                             >
// //                                                                 <label style={{ color: labelColor }}>
// //                                                                     {field.label || "Radio Button"}
// //                                                                 </label>
// //                                                                 <div className='form-build-box' style={{
// //                                                                     width: '100%', padding: field.inputPadding, borderRadius: `${inputRadious}px`, borderWidth: `${inputwidth}px`,
// //                                                                     borderStyle: inputstyle,
// //                                                                     borderColor: inputborderColor, opacity: field.opacity || 1
// //                                                                 }}
// //                                                                 >
// //                                                                     {field.options.length > 0 ? (
// //                                                                         field.options.map((option, index) => (
// //                                                                             <div key={option.id || index} className='form_radio_flex'>
// //                                                                                 <input
// //                                                                                     type="radio"
// //                                                                                     name={field.name}
// //                                                                                     value={option.value}
// //                                                                                     disabled={field.disabled}
// //                                                                                     readOnly={field.readonly}
// //                                                                                 />
// //                                                                                 <label>{option.label}</label>
// //                                                                             </div>
// //                                                                         ))
// //                                                                     ) : (
// //                                                                         <div className="form_radio_flex">
// //                                                                             <label>Add Radio Button</label>
// //                                                                         </div>
// //                                                                     )}
// //                                                                     <div className='description'>
// //                                                                         {field.description}
// //                                                                     </div>
// //                                                                 </div>
// //                                                             </div>
// //                                                         )}

// //                                                     </div>
// //                                                     <div className='form-build-checkbox-wrp-options'>
// //                                                         {field.type === 'checkbox' && (
// //                                                             <div className={`input-field ${field.customClass}`} style={{
// //                                                                 width: "100%", border: (selectedField && selectedField.id === field.id) || (hoveredFieldId === field.id)
// //                                                                     ? '1px solid #33cba2'
// //                                                                     : '1px solid transparent',
// //                                                                 backgroundColor: selectedField && selectedField.id === field.id
// //                                                                     ? '#e7f9f4'
// //                                                                     : hoveredFieldId === field.id
// //                                                                         ? '#e7f9f4'
// //                                                                         : 'transparent',
// //                                                             }}>
// //                                                                 <label style={{ color: labelColor }}>
// //                                                                     {field.label || "Checkbox Group"}</label>
// //                                                                 <div className='form-build-box' style={{ opacity: field.opacity || 1, }}
// //                                                                 >
// //                                                                     {field.options.length > 0 ? (
// //                                                                         field.options.map(option => (
// //                                                                             <div key={option.id}>
// //                                                                                 <input
// //                                                                                     type="checkbox"
// //                                                                                     name={field.name}
// //                                                                                     disabled={field.disabled}
// //                                                                                     readOnly={field.readonly}
// //                                                                                 />
// //                                                                                 <span>{option.name}</span>
// //                                                                             </div>
// //                                                                         ))
// //                                                                     ) : (
// //                                                                         <div className="form_radio_flex">
// //                                                                             <label>Add Checkbox Button</label>
// //                                                                         </div>
// //                                                                     )}

// //                                                                     <div className='description'>{field.description}</div>
// //                                                                 </div>
// //                                                             </div>
// //                                                         )}
// //                                                     </div>
// //                                                     <div className='form-build-checkbox-wrp-options select'>
// //                                                         {field.type === 'select' && (
// //                                                             <div className={`input-field ${field.customClass}`} style={{
// //                                                                 width: "100%", border: (selectedField && selectedField.id === field.id) || (hoveredFieldId === field.id)
// //                                                                     ? '1px solid #33cba2'
// //                                                                     : '1px solid transparent',
// //                                                                 backgroundColor: selectedField && selectedField.id === field.id
// //                                                                     ? '#e7f9f4'
// //                                                                     : hoveredFieldId === field.id
// //                                                                         ? '#e7f9f4'
// //                                                                         : 'transparent',
// //                                                             }}>
// //                                                                 <div>
// //                                                                     <label style={{ color: labelColor }}>

// //                                                                         {field.label || "Select Option"}</label>
// //                                                                     <select
// //                                                                         style={{
// //                                                                             width: '100%', padding: field.inputPadding, borderRadius: `${inputRadious}px`, borderWidth: `${inputwidth}px`,
// //                                                                             borderStyle: inputstyle,
// //                                                                             borderColor: inputborderColor, opacity: field.opacity || 1,
// //                                                                         }}

// //                                                                         name={field.name}
// //                                                                         disabled={field.disabled}
// //                                                                         readOnly={field.readonly}
// //                                                                     >
// //                                                                         <option disabled>{field.options.length === 0 ? 'Add Select Button' : ''}</option>
// //                                                                         {field.options.length > 0 && field.options.map((option, index) => (
// //                                                                             <option key={option.id} value={option.name}>
// //                                                                                 {option.name}
// //                                                                             </option>
// //                                                                         ))}
// //                                                                     </select>

// //                                                                     <div className='description'>
// //                                                                         {field.description}
// //                                                                     </div>
// //                                                                 </div>
// //                                                             </div>
// //                                                         )}
// //                                                     </div>
// //                                                     <div className='form-build-checkbox-wrp-options'>
// //                                                         {field.type === 'textarea' && (
// //                                                             <div className={`input-field ${field.customClass}`} style={{
// //                                                                 width: "100%",
// //                                                                 maxWidth: "100%",
// //                                                                 border: (selectedField && selectedField.id === field.id) || (hoveredFieldId === field.id)
// //                                                                     ? '1px solid #33cba2'
// //                                                                     : '1px solid transparent',
// //                                                                 backgroundColor: selectedField && selectedField.id === field.id
// //                                                                     ? '#e7f9f4'
// //                                                                     : hoveredFieldId === field.id
// //                                                                         ? '#e7f9f4'
// //                                                                         : 'transparent',
// //                                                                 overflow: "hidden",
// //                                                             }}>

// //                                                                 <label style={{ color: labelColor }}>
// //                                                                     {field.label || "Enter text:"}
// //                                                                     <textarea
// //                                                                         style={{
// //                                                                             width: '100%',
// //                                                                             maxWidth: '100%', borderRadius: `${inputRadious}px`, borderWidth: `${inputwidth}px`,
// //                                                                             borderStyle: inputstyle,
// //                                                                             borderColor: inputborderColor, opacity: field.opacity || 1,
// //                                                                         }}
// //                                                                         onMouseEnter={() => setHoveredFieldId(field.id)}
// //                                                                         onMouseLeave={() => {
// //                                                                             if (!(selectedField && selectedField.id === field.id)) {
// //                                                                                 setHoveredFieldId(null);
// //                                                                             }
// //                                                                         }}
// //                                                                         placeholder={field.placeholder}
// //                                                                         name={field.name}
// //                                                                         disabled={field.disabled}
// //                                                                         readOnly={field.readonly}
// //                                                                     />
// //                                                                 </label>
// //                                                                 <div className='description'>
// //                                                                     {field.description}
// //                                                                 </div>

// //                                                             </div>
// //                                                         )}
// //                                                     </div>
// //                                                     <div className='form-build-checkbox-wrp-options'>
// //                                                         {field.type === 'file' && (
// //                                                             <div className={`input-field ${field.customClass}`} style={{
// //                                                                 width: "100%", border: (selectedField && selectedField.id === field.id) || (hoveredFieldId === field.id)
// //                                                                     ? '1px solid #33cba2'
// //                                                                     : '1px solid transparent',
// //                                                                 backgroundColor: selectedField && selectedField.id === field.id
// //                                                                     ? '#e7f9f4'
// //                                                                     : hoveredFieldId === field.id
// //                                                                         ? '#e7f9f4'
// //                                                                         : 'transparent',
// //                                                             }}>
// //                                                                 <div>
// //                                                                     <label style={{ color: labelColor }}>

// //                                                                         {field.label || "Upload file:"}
// //                                                                         <input
// //                                                                             style={{
// //                                                                                 width: '100%', padding: field.inputPadding, borderRadius: `${inputRadious}px`, borderWidth: `${inputwidth}px`,
// //                                                                                 borderStyle: inputstyle,
// //                                                                                 borderColor: inputborderColor, opacity: field.opacity || 1
// //                                                                             }}
// //                                                                             onMouseEnter={() => setHoveredFieldId(field.id)}
// //                                                                             onMouseLeave={() => {
// //                                                                                 if (!(selectedField && selectedField.id === field.id)) {
// //                                                                                     setHoveredFieldId(null);
// //                                                                                 }
// //                                                                             }}
// //                                                                             type="file"
// //                                                                             name={field.name}
// //                                                                             disabled={field.disabled}
// //                                                                             readOnly={field.readonly}
// //                                                                         />
// //                                                                     </label>
// //                                                                     <div className='description'>
// //                                                                         {field.description}
// //                                                                     </div>
// //                                                                 </div>
// //                                                             </div>
// //                                                         )}
// //                                                     </div>
// //                                                     {field.type === 'number' && (
// //                                                         <div className={`input-field ${field.customClass}`} style={{
// //                                                             width: "100%", border: (selectedField && selectedField.id === field.id) || (hoveredFieldId === field.id)
// //                                                                 ? '1px solid #33cba2'
// //                                                                 : '1px solid transparent',
// //                                                             backgroundColor: selectedField && selectedField.id === field.id
// //                                                                 ? '#e7f9f4'
// //                                                                 : hoveredFieldId === field.id
// //                                                                     ? '#e7f9f4'
// //                                                                     : 'transparent',
// //                                                         }}>
// //                                                             <div>
// //                                                                 <label style={{ color: labelColor }}>
// //                                                                     {field.label || "Number"}
// //                                                                     <input
// //                                                                         style={{
// //                                                                             width: '100%', padding: field.inputPadding, borderRadius: `${inputRadious}px`, borderWidth: `${inputwidth}px`,
// //                                                                             borderStyle: inputstyle,
// //                                                                             borderColor: inputborderColor, opacity: field.opacity || 1,
// //                                                                         }}
// //                                                                         onMouseEnter={() => setHoveredFieldId(field.id)}
// //                                                                         onMouseLeave={() => {
// //                                                                             if (!(selectedField && selectedField.id === field.id)) {
// //                                                                                 setHoveredFieldId(null);
// //                                                                             }
// //                                                                         }}
// //                                                                         type="number"
// //                                                                         className="name"
// //                                                                         name={field.name}
// //                                                                         placeholder={field.placeholder}
// //                                                                         required={field.required}
// //                                                                         disabled={field.disabled}
// //                                                                         readOnly={field.readonly}
// //                                                                         onChange={(e) => updateFieldProperty('Number', e.target.value, field.id)}
// //                                                                     />
// //                                                                 </label>
// //                                                                 <div className='description'>
// //                                                                     {field.description}
// //                                                                 </div>
// //                                                             </div>
// //                                                         </div>
// //                                                     )}
// //                                                     {field.type === 'email' && (
// //                                                         <div className={`input-field ${field.customClass}`} style={{
// //                                                             width: "100%", border: (selectedField && selectedField.id === field.id) || (hoveredFieldId === field.id)
// //                                                                 ? '1px solid #33cba2'
// //                                                                 : '1px solid transparent',
// //                                                             backgroundColor: selectedField && selectedField.id === field.id
// //                                                                 ? '#e7f9f4'
// //                                                                 : hoveredFieldId === field.id
// //                                                                     ? '#e7f9f4'
// //                                                                     : 'transparent',
// //                                                         }}>
// //                                                             <div>
// //                                                                 <label style={{ color: labelColor }}>

// //                                                                     {field.label || "Email"}
// //                                                                     <input
// //                                                                         style={{
// //                                                                             width: '100%', padding: field.inputPadding, borderRadius: `${inputRadious}px`, borderWidth: `${inputwidth}px`,
// //                                                                             borderStyle: inputstyle,
// //                                                                             borderColor: inputborderColor, opacity: field.opacity || 1,
// //                                                                         }}
// //                                                                         onMouseEnter={() => setHoveredFieldId(field.id)}
// //                                                                         onMouseLeave={() => {
// //                                                                             if (!(selectedField && selectedField.id === field.id)) {
// //                                                                                 setHoveredFieldId(null);
// //                                                                             }
// //                                                                         }}
// //                                                                         type="email"
// //                                                                         className="name"
// //                                                                         name={field.name}
// //                                                                         placeholder={field.placeholder}
// //                                                                         required={field.required}
// //                                                                         disabled={field.disabled}
// //                                                                         readOnly={field.readonly}
// //                                                                         onChange={(e) => updateFieldProperty('email', e.target.value, field.id)}
// //                                                                     />
// //                                                                 </label>
// //                                                                 <div className='description'>
// //                                                                     {field.description}
// //                                                                 </div>
// //                                                             </div>
// //                                                         </div>
// //                                                     )}
// //                                                     {field.type === 'phone' && (
// //                                                         <div className={`input-field ${field.customClass}`} style={{
// //                                                             width: "100%", border: (selectedField && selectedField.id === field.id) || (hoveredFieldId === field.id)
// //                                                                 ? '1px solid #33cba2'
// //                                                                 : '1px solid transparent',
// //                                                             backgroundColor: selectedField && selectedField.id === field.id
// //                                                                 ? '#e7f9f4'
// //                                                                 : hoveredFieldId === field.id
// //                                                                     ? '#e7f9f4'
// //                                                                     : 'transparent',
// //                                                         }}>
// //                                                             <div>
// //                                                                 <label style={{ color: labelColor }}>

// //                                                                     {field.label || "Phone Number"}
// //                                                                     <input
// //                                                                         style={{
// //                                                                             width: '100%', padding: field.inputPadding, borderRadius: `${inputRadious}px`, borderWidth: `${inputwidth}px`,
// //                                                                             borderStyle: inputstyle,
// //                                                                             borderColor: inputborderColor, opacity: field.opacity || 1,
// //                                                                         }}
// //                                                                         onMouseEnter={() => setHoveredFieldId(field.id)}
// //                                                                         onMouseLeave={() => {
// //                                                                             if (!(selectedField && selectedField.id === field.id)) {
// //                                                                                 setHoveredFieldId(null);
// //                                                                             }
// //                                                                         }}
// //                                                                         type="tel"
// //                                                                         className="name"
// //                                                                         name={field.name}
// //                                                                         placeholder={field.placeholder || 'e.g +1-416-555-112'}
// //                                                                         required={field.required}
// //                                                                         disabled={field.disabled}
// //                                                                         readOnly={field.readonly}
// //                                                                         onChange={(e) => updateFieldProperty('phone', e.target.value, field.id)}
// //                                                                     />
// //                                                                 </label>
// //                                                                 <div className='description'>
// //                                                                     {field.description}
// //                                                                 </div>
// //                                                             </div>
// //                                                         </div>
// //                                                     )}

// //                                                     {field.type === 'password' && (
// //                                                         <div className={`input-field ${field.customClass}`} style={{
// //                                                             width: "100%", border: (selectedField && selectedField.id === field.id) || (hoveredFieldId === field.id)
// //                                                                 ? '1px solid #33cba2'
// //                                                                 : '1px solid transparent',
// //                                                             backgroundColor: selectedField && selectedField.id === field.id
// //                                                                 ? '#e7f9f4'
// //                                                                 : hoveredFieldId === field.id
// //                                                                     ? '#e7f9f4'
// //                                                                     : 'transparent',
// //                                                         }}>
// //                                                             <div>
// //                                                                 <label style={{ color: labelColor }}>

// //                                                                     {field.label || "Password"}
// //                                                                     <input
// //                                                                         style={{
// //                                                                             padding: field.inputPadding, borderRadius: `${inputRadious}px`, borderWidth: `${inputwidth}px`,
// //                                                                             borderStyle: inputstyle,
// //                                                                             borderColor: inputborderColor, opacity: field.opacity || 1,
// //                                                                         }}
// //                                                                         onMouseEnter={() => setHoveredFieldId(field.id)}
// //                                                                         onMouseLeave={() => {
// //                                                                             if (!(selectedField && selectedField.id === field.id)) {
// //                                                                                 setHoveredFieldId(null);
// //                                                                             }
// //                                                                         }}
// //                                                                         type="password"
// //                                                                         className="name"
// //                                                                         name={field.name}
// //                                                                         placeholder={field.placeholder}
// //                                                                         required={field.required}
// //                                                                         disabled={field.disabled}
// //                                                                         readOnly={field.readonly}
// //                                                                         onChange={(e) => updateFieldProperty('password', e.target.value, field.id)}
// //                                                                     />
// //                                                                 </label>
// //                                                                 <div className='description'>
// //                                                                     {field.description}
// //                                                                 </div>
// //                                                             </div>
// //                                                         </div>
// //                                                     )}
// //                                                     {field.type === 'url' && (
// //                                                         <div className={`input-field ${field.customClass}`} style={{
// //                                                             width: "100%", border: (selectedField && selectedField.id === field.id) || (hoveredFieldId === field.id)
// //                                                                 ? '1px solid #33cba2'
// //                                                                 : '1px solid transparent',
// //                                                             backgroundColor: selectedField && selectedField.id === field.id
// //                                                                 ? '#e7f9f4'
// //                                                                 : hoveredFieldId === field.id
// //                                                                     ? '#e7f9f4'
// //                                                                     : 'transparent',
// //                                                         }}>
// //                                                             <div>
// //                                                                 <label style={{ color: labelColor }}>
// //                                                                     {field.label || "Url"}
// //                                                                     <input
// //                                                                         style={{
// //                                                                             width: '100%', padding: field.inputPadding, borderRadius: `${inputRadious}px`, borderWidth: `${inputwidth}px`,
// //                                                                             borderStyle: inputstyle,
// //                                                                             borderColor: inputborderColor, opacity: field.opacity || 1,
// //                                                                         }}
// //                                                                         onMouseEnter={() => setHoveredFieldId(field.id)}
// //                                                                         onMouseLeave={() => {
// //                                                                             if (!(selectedField && selectedField.id === field.id)) {
// //                                                                                 setHoveredFieldId(null);
// //                                                                             }
// //                                                                         }}
// //                                                                         type="url"
// //                                                                         className="name"
// //                                                                         name={field.name}
// //                                                                         placeholder={field.placeholder}
// //                                                                         required={field.required}
// //                                                                         disabled={field.disabled}
// //                                                                         readOnly={field.readonly}
// //                                                                         onChange={(e) => updateFieldProperty('url', e.target.value, field.id)}
// //                                                                     />
// //                                                                 </label>
// //                                                                 <div className='description'>
// //                                                                     {field.description}
// //                                                                 </div>
// //                                                             </div>
// //                                                         </div>
// //                                                     )}
// //                                                     {field.type === 'location' && (
// //                                                         <div className={`input-field ${field.customClass}`} style={{
// //                                                             width: "100%", border: (selectedField && selectedField.id === field.id) || (hoveredFieldId === field.id)
// //                                                                 ? '1px solid #33cba2'
// //                                                                 : '1px solid transparent',
// //                                                             backgroundColor: selectedField && selectedField.id === field.id
// //                                                                 ? '#e7f9f4'
// //                                                                 : hoveredFieldId === field.id
// //                                                                     ? '#e7f9f4'
// //                                                                     : 'transparent',
// //                                                         }}>
// //                                                             <div>
// //                                                                 <label style={{ color: labelColor }}>

// //                                                                     {field.label || "Location"}
// //                                                                     <input
// //                                                                         style={{
// //                                                                             width: '100%', padding: field.inputPadding, borderRadius: `${inputRadious}px`, borderWidth: `${inputwidth}px`,
// //                                                                             borderStyle: inputstyle,
// //                                                                             borderColor: inputborderColor, opacity: field.opacity || 1,
// //                                                                         }}
// //                                                                         onMouseEnter={() => setHoveredFieldId(field.id)}
// //                                                                         onMouseLeave={() => {
// //                                                                             if (!(selectedField && selectedField.id === field.id)) {
// //                                                                                 setHoveredFieldId(null);
// //                                                                             }
// //                                                                         }}
// //                                                                         type="location"
// //                                                                         className="name"
// //                                                                         name={field.name}
// //                                                                         placeholder={field.placeholder}
// //                                                                         required={field.required}
// //                                                                         disabled={field.disabled}
// //                                                                         readOnly={field.readonly}
// //                                                                         onChange={(e) => updateFieldProperty('location', e.target.value, field.id)}
// //                                                                     />
// //                                                                 </label>
// //                                                                 <div className='description'>
// //                                                                     {field.description}
// //                                                                 </div>
// //                                                             </div>
// //                                                         </div>
// //                                                     )}
// //                                                     {field.type === 'toggle' && (
// //                                                         <div className={`input-field ${field.customClass}`} style={{
// //                                                             width: "100%", border: (selectedField && selectedField.id === field.id) || (hoveredFieldId === field.id)
// //                                                                 ? '1px solid #33cba2'
// //                                                                 : '1px solid transparent',
// //                                                             backgroundColor: selectedField && selectedField.id === field.id
// //                                                                 ? '#e7f9f4'
// //                                                                 : hoveredFieldId === field.id
// //                                                                     ? '#e7f9f4'
// //                                                                     : 'transparent',
// //                                                         }}>
// //                                                             <div style={{ width: '100%', opacity: field.opacity || 1, }}
// //                                                                 onMouseEnter={() => setHoveredFieldId(field.id)}
// //                                                                 onMouseLeave={() => {
// //                                                                     if (!(selectedField && selectedField.id === field.id)) {
// //                                                                         setHoveredFieldId(null);
// //                                                                     }
// //                                                                 }}>
// //                                                                 <label className="toggle-switch" style={{ color: labelColor }}>
// //                                                                     {field.label || "Toggle"}
// //                                                                     <input

// //                                                                         type="checkbox"
// //                                                                         checked={isFieldEnabled}
// //                                                                         onChange={toggleFieldEnabled}
// //                                                                         name={field.name}
// //                                                                     />
// //                                                                     <span className="slider"></span>
// //                                                                 </label>
// //                                                                 <div className='description'>
// //                                                                     {field.description}
// //                                                                 </div>
// //                                                             </div>
// //                                                         </div>
// //                                                     )}
// //                                                     <div className='form-build-checkbox-wrp-options'>
// //                                                         {field.type === 'date' && (
// //                                                             <div className={`input-field ${field.customClass}`} style={{
// //                                                                 width: "100%", border: (selectedField && selectedField.id === field.id) || (hoveredFieldId === field.id)
// //                                                                     ? '1px solid #33cba2'
// //                                                                     : '1px solid transparent',
// //                                                                 backgroundColor: selectedField && selectedField.id === field.id
// //                                                                     ? '#e7f9f4'
// //                                                                     : hoveredFieldId === field.id
// //                                                                         ? '#e7f9f4'
// //                                                                         : 'transparent',
// //                                                             }}>
// //                                                                 <div>
// //                                                                     <label style={{ color: labelColor }}>

// //                                                                         {field.label || "Date"}
// //                                                                         <input
// //                                                                             style={{
// //                                                                                 width: '100%', padding: field.inputPadding, borderRadius: `${inputRadious}px`, borderWidth: `${inputwidth}px`,
// //                                                                                 borderStyle: inputstyle,
// //                                                                                 borderColor: inputborderColor, opacity: field.opacity || 1,
// //                                                                             }}
// //                                                                             onMouseEnter={() => setHoveredFieldId(field.id)}
// //                                                                             onMouseLeave={() => {
// //                                                                                 if (!(selectedField && selectedField.id === field.id)) {
// //                                                                                     setHoveredFieldId(null);
// //                                                                                 }
// //                                                                             }}
// //                                                                             type="date"
// //                                                                             className="name"
// //                                                                             name={field.name}
// //                                                                             placeholder={field.placeholder}
// //                                                                             required={field.required}
// //                                                                             disabled={field.disabled}
// //                                                                             readOnly={field.readonly}
// //                                                                             onChange={(e) => updateFieldProperty('date', e.target.value, field.id)}
// //                                                                         />
// //                                                                     </label>
// //                                                                     <div className='description'>
// //                                                                         {field.description}
// //                                                                     </div>
// //                                                                 </div>
// //                                                             </div>
// //                                                         )}
// //                                                     </div>
// //                                                     <div className='form-build-checkbox-wrp-options'>
// //                                                         {field.type === 'datetime' && (
// //                                                             <div className={`input-field ${field.customClass}`} style={{
// //                                                                 width: "100%", border: (selectedField && selectedField.id === field.id) || (hoveredFieldId === field.id)
// //                                                                     ? '1px solid #33cba2'
// //                                                                     : '1px solid transparent',
// //                                                                 backgroundColor: selectedField && selectedField.id === field.id
// //                                                                     ? '#e7f9f4'
// //                                                                     : hoveredFieldId === field.id
// //                                                                         ? '#e7f9f4'
// //                                                                         : 'transparent',
// //                                                             }}>
// //                                                                 <div>
// //                                                                     <label style={{ color: labelColor }}>

// //                                                                         {field.label || "Datetime"}
// //                                                                         <input
// //                                                                             style={{
// //                                                                                 width: '100%', padding: field.inputPadding, borderRadius: `${inputRadious}px`, borderWidth: `${inputwidth}px`,
// //                                                                                 borderStyle: inputstyle,
// //                                                                                 borderColor: inputborderColor, opacity: field.opacity || 1,
// //                                                                             }}
// //                                                                             onMouseEnter={() => setHoveredFieldId(field.id)}
// //                                                                             onMouseLeave={() => {
// //                                                                                 if (!(selectedField && selectedField.id === field.id)) {
// //                                                                                     setHoveredFieldId(null);
// //                                                                                 }
// //                                                                             }}
// //                                                                             type="datetime-local"
// //                                                                             className="name"
// //                                                                             name={field.name}
// //                                                                             placeholder={field.placeholder}
// //                                                                             required={field.required}
// //                                                                             disabled={field.disabled}
// //                                                                             readOnly={field.readonly}
// //                                                                             onChange={(e) => updateFieldProperty('datetime', e.target.value, field.id)}
// //                                                                         />
// //                                                                     </label>
// //                                                                     <div className='description'>
// //                                                                         {field.description}
// //                                                                     </div>
// //                                                                 </div>
// //                                                             </div>
// //                                                         )}
// //                                                     </div>
// //                                                     <div className='form-build-checkbox-wrp-options'>
// //                                                         {field.type === 'time' && (
// //                                                             <div className={`input-field ${field.customClass}`} style={{
// //                                                                 width: "100%", border: (selectedField && selectedField.id === field.id) || (hoveredFieldId === field.id)
// //                                                                     ? '1px solid #33cba2'
// //                                                                     : '1px solid transparent',
// //                                                                 backgroundColor: selectedField && selectedField.id === field.id
// //                                                                     ? '#e7f9f4'
// //                                                                     : hoveredFieldId === field.id
// //                                                                         ? '#e7f9f4'
// //                                                                         : 'transparent',
// //                                                             }}>
// //                                                                 <div>
// //                                                                     <label style={{ color: labelColor }}>

// //                                                                         {field.label || "Time"}
// //                                                                         <input
// //                                                                             style={{
// //                                                                                 width: '100%', padding: field.inputPadding, borderRadius: `${inputRadious}px`, borderWidth: `${inputwidth}px`,
// //                                                                                 borderStyle: inputstyle,
// //                                                                                 borderColor: inputborderColor, opacity: field.opacity || 1,
// //                                                                             }}
// //                                                                             onMouseEnter={() => setHoveredFieldId(field.id)}
// //                                                                             onMouseLeave={() => {
// //                                                                                 if (!(selectedField && selectedField.id === field.id)) {
// //                                                                                     setHoveredFieldId(null);
// //                                                                                 }
// //                                                                             }}
// //                                                                             type="time"
// //                                                                             className="name"
// //                                                                             name={field.name}
// //                                                                             placeholder={field.placeholder}
// //                                                                             required={field.required}
// //                                                                             disabled={field.disabled}
// //                                                                             readOnly={field.readonly}
// //                                                                             onChange={(e) => updateFieldProperty('time', e.target.value, field.id)}
// //                                                                         />
// //                                                                     </label>
// //                                                                     <div className='description'>
// //                                                                         {field.description}
// //                                                                     </div>
// //                                                                 </div>
// //                                                             </div>
// //                                                         )}
// //                                                     </div>
// //                                                     <div className='form-build-checkbox-wrp-options'>
// //                                                         {field.type === 'slider' && (
// //                                                             <div className={`input-field ${field.customClass}`} style={{
// //                                                                 width: "100%", border: (selectedField && selectedField.id === field.id) || (hoveredFieldId === field.id)
// //                                                                     ? '1px solid #33cba2'
// //                                                                     : '1px solid transparent',
// //                                                                 backgroundColor: selectedField && selectedField.id === field.id
// //                                                                     ? '#e7f9f4'
// //                                                                     : hoveredFieldId === field.id
// //                                                                         ? '#e7f9f4'
// //                                                                         : 'transparent',
// //                                                             }}>
// //                                                                 <div>
// //                                                                     <label style={{ color: labelColor }}>
// //                                                                         {field.label || "Slider"}
// //                                                                         <div style={{
// //                                                                             width: '100%', opacity: field.opacity || 1, borderRadius: `${inputRadious}px`, borderWidth: `${inputwidth}px`,
// //                                                                             borderStyle: inputstyle,
// //                                                                             borderColor: inputborderColor,
// //                                                                         }}
// //                                                                             onMouseEnter={() => setHoveredFieldId(field.id)}
// //                                                                             onMouseLeave={() => {
// //                                                                                 if (!(selectedField && selectedField.id === field.id)) {
// //                                                                                     setHoveredFieldId(null);
// //                                                                                 }
// //                                                                             }}>

// //                                                                             <input
// //                                                                                 type="range"
// //                                                                                 className="name"
// //                                                                                 min={field.min}
// //                                                                                 max={field.max}
// //                                                                                 step={field.step}
// //                                                                                 value={field.value || 0} 
// //                                                                                 name={field.name}
// //                                                                                 placeholder={field.placeholder}
// //                                                                                 required={field.required}
// //                                                                                 disabled={field.disabled}
// //                                                                                 readOnly={field.readonly}
// //                                                                                 onChange={(e) => updateFieldProperty('slider', e.target.value, field.id)}
// //                                                                             />
// //                                                                         </div>
// //                                                                     </label>
// //                                                                     <div className='description'>
// //                                                                         {field.description}
// //                                                                     </div>
// //                                                                 </div>
// //                                                             </div>
// //                                                         )}
// //                                                     </div>
// //                                                     <div className='form-build-checkbox-wrp-options'>
// //                                                         {field.type === 'images' && (
// //                                                             <div className={`input-field ${field.customClass}`} style={{
// //                                                                 width: "100%", border: (selectedField && selectedField.id === field.id) || (hoveredFieldId === field.id)
// //                                                                     ? '1px solid #33cba2'
// //                                                                     : '1px solid transparent',
// //                                                                 backgroundColor: selectedField && selectedField.id === field.id
// //                                                                     ? '#e7f9f4'
// //                                                                     : hoveredFieldId === field.id
// //                                                                         ? '#e7f9f4'
// //                                                                         : 'transparent',
// //                                                             }}>
// //                                                                 <div>
// //                                                                     <label style={{ color: labelColor }}>

// //                                                                         {field.label || "Images"}
// //                                                                         <input
// //                                                                             style={{
// //                                                                                 width: '100%', padding: field.inputPadding, borderRadius: `${inputRadious}px`, borderWidth: `${inputwidth}px`,
// //                                                                                 borderStyle: inputstyle,
// //                                                                                 borderColor: inputborderColor, opacity: field.opacity || 1,
// //                                                                             }}
// //                                                                             onMouseEnter={() => setHoveredFieldId(field.id)}
// //                                                                             onMouseLeave={() => {
// //                                                                                 if (!(selectedField && selectedField.id === field.id)) {
// //                                                                                     setHoveredFieldId(null);
// //                                                                                 }
// //                                                                             }}
// //                                                                             type="file"
// //                                                                             name={field.name}
// //                                                                             disabled={field.disabled}
// //                                                                             readOnly={field.readonly}
// //                                                                         />
// //                                                                     </label>
// //                                                                     <div className='description'>
// //                                                                         {field.description}
// //                                                                     </div>
// //                                                                 </div>
// //                                                             </div>
// //                                                         )}
// //                                                     </div>
// //                                                     <div className='form-build-checkbox-wrp-options'>
// //                                                         {field.type === 'button' && (
// //                                                             <div
// //                                                                 className={`input-field btn ${field.customClass}`}
// //                                                                 style={{
// //                                                                     width: "100%", border: (selectedField && selectedField.id === field.id) || (hoveredFieldId === field.id)
// //                                                                         ? '1px solid #33cba2'
// //                                                                         : '1px solid transparent',
// //                                                                     backgroundColor: selectedField && selectedField.id === field.id
// //                                                                         ? '#e7f9f4'
// //                                                                         : hoveredFieldId === field.id
// //                                                                             ? '#e7f9f4'
// //                                                                             : 'transparent',
// //                                                                 }}
// //                                                                 onMouseEnter={() => setHoveredFieldId(field.id)}
// //                                                                 onMouseLeave={() => {
// //                                                                     if (!(selectedField && selectedField.id === field.id)) {
// //                                                                         setHoveredFieldId(null);
// //                                                                     }
// //                                                                 }}
// //                                                             >
// //                                                                 <button
// //                                                                     type="button"
// //                                                                     style={{
// //                                                                         width: field.buttonWidth,
// //                                                                         height: field.buttonheight,
// //                                                                         backgroundColor: field.backgroundColor,
// //                                                                         fontSize: `${field.fontSize}px`,
// //                                                                         color: field.btncolor,
// //                                                                         padding: field.padding,
// //                                                                         borderWidth: `${field.buttonBorderWidth}px`,
// //                                                                         borderStyle: field.buttonBorderStyle || 'solid',
// //                                                                         borderColor: field.buttonBorderColor || '#000',
// //                                                                     }}

// //                                                                 >
// //                                                                     {field.label}
// //                                                                 </button>

// //                                                                 <div className='description'>
// //                                                                     {field.description}
// //                                                                 </div>
// //                                                             </div>
// //                                                         )}
// //                                                     </div>
// //                                                     <div className='form-build-checkbox-wrp-options'>
// //                                                         {field.type === 'divider' && (
// //                                                             <div className={`input-field ${field.customClass}`} style={{
// //                                                                 width: '100%', opacity: field.opacity || 1, border: (selectedField && selectedField.id === field.id) || (hoveredFieldId === field.id)
// //                                                                     ? '1px solid #33cba2'
// //                                                                     : '1px solid transparent',
// //                                                                 backgroundColor: selectedField && selectedField.id === field.id
// //                                                                     ? '#e7f9f4'
// //                                                                     : hoveredFieldId === field.id
// //                                                                         ? '#e7f9f4'
// //                                                                         : 'transparent',
// //                                                             }}
// //                                                                 onMouseEnter={() => setHoveredFieldId(field.id)}
// //                                                                 onMouseLeave={() => {
// //                                                                     if (!(selectedField && selectedField.id === field.id)) {
// //                                                                         setHoveredFieldId(null);
// //                                                                     }
// //                                                                 }}>

// //                                                                 <hr style={{ margin: '20px 0', border: `1px solid ${field.dividerColor}`, width: '100%' }} />
// //                                                                 <div className='description'>
// //                                                                     {field.description}
// //                                                                 </div>
// //                                                             </div>
// //                                                         )}
// //                                                     </div>

// //                                                     {field.type === 'link' && (
// //                                                         <div className={`input-field ${field.customClass}`} style={{
// //                                                             width: "100%", border: (selectedField && selectedField.id === field.id) || (hoveredFieldId === field.id)
// //                                                                 ? '1px solid #33cba2'
// //                                                                 : '1px solid transparent',
// //                                                             backgroundColor: selectedField && selectedField.id === field.id
// //                                                                 ? '#e7f9f4'
// //                                                                 : hoveredFieldId === field.id
// //                                                                     ? '#e7f9f4'
// //                                                                     : 'transparent',
// //                                                         }}>
// //                                                             <div style={{ textAlign: linkaline }}>
// //                                                                 <a href={field.linkUrl} target={linkTarget} rel="noopener noreferrer">
// //                                                                     <div onClick={(e) => e.preventDefault()} dangerouslySetInnerHTML={{ __html: field.linktext }} />
// //                                                                 </a>
// //                                                             </div>
// //                                                             <div className='description'>
// //                                                                 {field.description}
// //                                                             </div>
// //                                                         </div>
// //                                                     )}

// //                                                     {(hoveredFieldId === field.id || (selectedField && selectedField.id === field.id)) && (
// //                                                         <div>
// //                                                             <div className='form-builder-radio-btn'>
// //                                                                 <button className="copy-btn edit" onClick={() => handleFieldClick(field, index)}>
// //                                                                     <img src={editicon} alt="copy" />
// //                                                                 </button>
// //                                                                 <button
// //                                                                     className="remove-btn"
// //                                                                     onClick={(e) => {
// //                                                                         e.stopPropagation();
// //                                                                         removeField(field.id);
// //                                                                     }}>
// //                                                                     <img src={delete1} alt="delete" />
// //                                                                 </button>
// //                                                                 <button className="copy-btn " onClick={() => addInputField(field.type)}>
// //                                                                     <img src={maximizesize} alt="copy" />
// //                                                                 </button>
// //                                                             </div>
// //                                                             <div className='form-builder-drag-drop'>
// //                                                                 <img src={drop} alt="" />
// //                                                             </div>
// //                                                         </div>

// //                                                     )}
// //                                                 </div>
// //                                             );
// //                                         })) : (
// //                                             <div className="builder-block-img-forms">
// //                                                 <div className='builder_block_blank'>
// //                                                     <img src={vecter1} alt="" />
// //                                                     <div className='builder-block-img-forms-paragraph'>
// //                                                         <p>Let's create the forms.</p>
// //                                                     </div>
// //                                                 </div>
// //                                             </div>
// //                                         )}
// //                                     </div>
// //                                 </div>
// //                             </div>
// //                             {showFieldPro && (
// //                                 <div className='form-builder-change-pro form'>
// //                                     <div className='controls-wrpping cancleimg pro' onClick={hanldeCanclepro}><img src={cancleimg} alt="" /></div>
// //                                     <div className="form-builder-change-propertites" ref={propertiesPanelRef} style={{ display: isPropertiesVisible ? 'block' : 'none' }}>
// //                                         {selectedField && (
// //                                             <div className='form-build-wrpped'>
// //                                                 <div className='form-builder-change_show_all'>

// //                                                     <div className='form_qucik'>
// //                                                         <p>Qucick setup Settings</p>
// //                                                     </div>
// //                                                     <div className='form_build_propertities'>
// //                                                         {selectedField.type !== 'heading' && selectedField.type !== 'link' && (
// //                                                             <div className="form-builder-chaneging-wrap">
// //                                                                 <label>Label</label>
// //                                                                 <input
// //                                                                     type="text"
// //                                                                     value={selectedField.label}
// //                                                                     onChange={(e) => updateFieldProperty('label', e.target.value)}
// //                                                                 />
// //                                                             </div>
// //                                                         )}
// //                                                         {selectedField.type === 'slider' && (
// //                                                             <div className="slider-settings">
// //                                                                 <div className="form-builder-chaneging-wrap sliders">
// //                                                                     <label>Min:</label>
// //                                                                     <input
// //                                                                         type="number"
// //                                                                         value={selectedField.min}
// //                                                                         onChange={(e) => updateFieldProperty('min', e.target.value, selectedField.id)}
                                                                      
// //                                                                     />
// //                                                                 </div>
// //                                                                 <div className="form-builder-chaneging-wrap sliders">
// //                                                                     <label>Max:</label>
// //                                                                     <input
// //                                                                         type="number"
// //                                                                         value={selectedField.max}
// //                                                                         onChange={(e) => updateFieldProperty('max', e.target.value, selectedField.id)}
                                                                      
// //                                                                     />
// //                                                                 </div>
// //                                                                 <div className="form-builder-chaneging-wrap sliders">
// //                                                                     <label>Step:</label>
// //                                                                     <input
// //                                                                         type="number"
// //                                                                         value={selectedField.step}
// //                                                                         onChange={(e) => updateFieldProperty('step', e.target.value, selectedField.id)}
                                                                      
// //                                                                     />
// //                                                                 </div>
// //                                                             </div>
// //                                                         )}
// //                                                         {selectedField.type === 'name' && (
// //                                                             <div className='form_build_name_custom'>
// //                                                                 <select onChange={(e) => {
// //                                                                     const newLabel = e.target.value;
// //                                                                     updateFieldProperty('label', newLabel);
// //                                                                 }}>
// //                                                                     <option value="Full name">Full name</option>
// //                                                                     <option value="First name">First name</option>
// //                                                                     <option value="Last name">Last name</option>
// //                                                                 </select>
// //                                                             </div>
// //                                                         )}
// //                                                         {selectedField.type === 'select' && (
// //                                                             <div className="popup-content">
// //                                                                 {selectOptions.map((option, index) => (
// //                                                                     <div key={option.id} className="select-option">
// //                                                                         <label style={{ display: 'flex', alignItems: 'center' }}>
// //                                                                             <input
// //                                                                                 type="text"
// //                                                                                 value={option.name}
// //                                                                                 onChange={(e) => handleOptionNameChangees(index, e.target.value, 'select')}
// //                                                                                 placeholder={`Enter option name`}
// //                                                                             />
// //                                                                         </label>
// //                                                                         <button onClick={() => removeSelectOption(option.id)} className="remove-options"> <img src={removee} alt="" /></button>
// //                                                                     </div>
// //                                                                 ))}
// //                                                                 <button className='btn-design' onClick={addSelectOption}>Add Select Input</button>

// //                                                             </div>
// //                                                         )}
// //                                                         {selectedField.type === 'radio' && (
// //                                                             <div>
// //                                                                 {radioOptions.map((option, index) => (
// //                                                                     <div key={option.id} className="radio-option">
// //                                                                         <label>
// //                                                                             <input
// //                                                                                 type="text"
// //                                                                                 value={option.label}
// //                                                                                 onChange={(e) => handleOptionNameChange(index, e.target.value)}
// //                                                                                 placeholder={`Enter option name`}
// //                                                                             />
// //                                                                         </label>
// //                                                                         <button onClick={() => removeRadioOption(option.id)} className="remove-options"><img src={removee} alt="" /></button>
// //                                                                     </div>
// //                                                                 ))}
// //                                                                 <button className='btn-design' onClick={addRadioOption}>Add Radio Button</button>

// //                                                             </div>
// //                                                         )}

// //                                                         {selectedField.type === 'checkbox' && (
// //                                                             <div>
// //                                                                 <div className="popup-content">
// //                                                                     {checkboxOptions.map((option, index) => (
// //                                                                         <div key={option.id} className="checkbox-option check">
// //                                                                             <label style={{ display: 'flex', alignItems: 'center' }}>
// //                                                                                 <input
// //                                                                                     type="text"
// //                                                                                     value={option.name}
// //                                                                                     onChange={(e) => handleOptionNameChanges(index, e.target.value)}
// //                                                                                     placeholder={`Enter option name`}

// //                                                                                 />

// //                                                                             </label>
// //                                                                             <button onClick={() => removeCheckboxOption(option.id)} className="remove-options"><img src={removee} alt="" /></button>
// //                                                                         </div>
// //                                                                     ))}
// //                                                                     <button className='btn-design' onClick={addCheckboxOption}>Add Checkbox Button</button>

// //                                                                 </div>
// //                                                             </div>
// //                                                         )}
// //                                                         {selectedField.type === 'divider' && (
// //                                                             <div className='form_builder_divider_lable'>
// //                                                                 <label>Divider Color</label>
// //                                                                 <input
// //                                                                     type="color"
// //                                                                     value={selectedField.dividerColor}
// //                                                                     onChange={(e) => updateFieldProperty('dividerColor', e.target.value)}
// //                                                                 />
// //                                                             </div>
// //                                                         )}

// //                                                         {selectedField.type === 'button' && (
// //                                                             <>
// //                                                                 <div className="form-builder-changing-wrap">
// //                                                                     <div>

// //                                                                         <div className='checkbox-option'>
// //                                                                             <label>Button Label</label>
// //                                                                             <input
// //                                                                                 type="text"
// //                                                                                 value={selectedField.label}
// //                                                                                 onChange={(e) => updateFieldProperty('label', e.target.value)}
// //                                                                             />
// //                                                                         </div>

// //                                                                         <div className='checkbox-option'>
// //                                                                             <label>Font Size (px)</label>
// //                                                                             <input
// //                                                                                 type="number"
// //                                                                                 value={selectedField.fontSize}
// //                                                                                 onChange={(e) => updateFieldProperty('fontSize', e.target.value)}
// //                                                                             />
// //                                                                         </div>
// //                                                                         <div className='form-builder-chaneging-wrap color'>
// //                                                                             <label> Color</label>
// //                                                                             <input
// //                                                                                 type="color"
// //                                                                                 value={selectedField.btncolor}
// //                                                                                 onChange={(e) => updateFieldProperty('btncolor', e.target.value)}
// //                                                                             />
// //                                                                         </div>
// //                                                                         <div className='checkbox-option'>
// //                                                                             <label>Button Padding (px)</label>
// //                                                                             <input
// //                                                                                 type="text"
// //                                                                                 value={selectedField.padding}
// //                                                                                 onChange={(e) => updateFieldProperty('padding', e.target.value)}
// //                                                                                 placeholder="e.g., 10px"
// //                                                                             />
// //                                                                         </div>
// //                                                                         <div className='checkbox-option'>
// //                                                                             <label>Width (px)</label>
// //                                                                             <input
// //                                                                                 type="number"
// //                                                                                 value={selectedField.buttonWidth ? selectedField.buttonWidth.replace('px', '') : '130'}
// //                                                                                 onChange={(e) => updateFieldProperty('buttonWidth', `${e.target.value}px`)}
// //                                                                                 placeholder="e.g., 150"
// //                                                                             />
// //                                                                         </div>
// //                                                                         <div className='checkbox-option'>
// //                                                                             <label>Height (px)</label>
// //                                                                             <input
// //                                                                                 type="number"
// //                                                                                 value={selectedField.buttonheight ? selectedField.buttonheight.replace('px', '') : '40'}
// //                                                                                 onChange={(e) => updateFieldProperty('buttonheight', `${e.target.value}px`)}
// //                                                                                 placeholder="e.g., 40"
// //                                                                             />
// //                                                                         </div>
// //                                                                         <div className='checkbox-option'>
// //                                                                             <label>Background Color</label>
// //                                                                             <input
// //                                                                                 type="color"
// //                                                                                 value={selectedField.backgroundColor}
// //                                                                                 onChange={(e) => updateFieldProperty('backgroundColor', e.target.value)}
// //                                                                             />
// //                                                                         </div>

// //                                                                         <div className='form-builder-chaneging-wrap color'>
// //                                                                             <label>Border Color</label>
// //                                                                             <input
// //                                                                                 type="color"
// //                                                                                 value={selectedField.buttonBorderColor}
// //                                                                                 onChange={(e) => updateFieldProperty('buttonBorderColor', e.target.value)}
// //                                                                             />
// //                                                                         </div>

// //                                                                         <div className='form-builder-chaneging-wrap number'>
// //                                                                             <label>Border Width (px)</label>
// //                                                                             <input
// //                                                                                 type="text"
// //                                                                                 value={selectedField.buttonBorderWidth}
// //                                                                                 onChange={(e) => {
// //                                                                                     updateFieldProperty('buttonBorderWidth', `${e.target.value}`);
// //                                                                                 }}
// //                                                                             />
// //                                                                         </div>

// //                                                                         <div className='form-builder-chaneging-wrap'>
// //                                                                             <label>Border Style</label>
// //                                                                             <select
// //                                                                                 value={selectedField.buttonBorderStyle}
// //                                                                                 onChange={(e) => updateFieldProperty('buttonBorderStyle', e.target.value)}
// //                                                                             >
// //                                                                                 <option value="solid">Solid</option>
// //                                                                                 <option value="dashed">Dashed</option>
// //                                                                                 <option value="dotted">Dotted</option>
// //                                                                             </select>
// //                                                                         </div>

// //                                                                     </div>
// //                                                                 </div>
// //                                                             </>
// //                                                         )}
// //                                                         {selectedField.type === 'link' && (
// //                                                             <div className="form-builder-chaneging-wrap">
// //                                                                 <div className='form-builder-chaneging-wrap'>
// //                                                                     <label>Link text</label>
// //                                                                     <ReactQuill
// //                                                                         value={selectedField.linktext}
// //                                                                         onChange={(value) => updateFieldProperty('linktext', value, selectedField.id)}
// //                                                                         modules={{
// //                                                                             toolbar: [
// //                                                                                 ['bold', 'italic', 'underline'],
// //                                                                                 ['link'],
// //                                                                             ],
// //                                                                         }}
// //                                                                         placeholder="Enter the URL"
// //                                                                     />
// //                                                                 </div>
// //                                                                 <div className='form-builder-chaneging-wrap'>
// //                                                                     <label>Link URL</label>
// //                                                                     <input
// //                                                                         type="text"
// //                                                                         value={selectedField.linkUrl || ''}
// //                                                                         onChange={(e) => updateFieldProperty('linkUrl', e.target.value, selectedField.id)}
// //                                                                         placeholder="Enter the URL"
// //                                                                     />
// //                                                                 </div>
// //                                                                 <div className='form-builder-chaneging-wrap'>
// //                                                                     <label>Text Align</label>
// //                                                                     <select
// //                                                                         name="textAlign"
// //                                                                         id="textAlign"
// //                                                                         value={linkaline}
// //                                                                         onChange={handleAlignChange}
// //                                                                     >
// //                                                                         <option value="left">Left</option>
// //                                                                         <option value="center">Center</option>
// //                                                                         <option value="right">Right</option>
// //                                                                     </select>
// //                                                                 </div>
// //                                                                 <div className='form-builder-chaneging-wrap'>
// //                                                                     <label>Open in</label>
// //                                                                     <select
// //                                                                         name="linkTarget"
// //                                                                         id="linkTarget"
// //                                                                         value={linkTarget}
// //                                                                         onChange={handleTargetChange}
// //                                                                     >
// //                                                                         <option value="_self">Same Tab</option>
// //                                                                         <option value="_blank">New Tab</option>
// //                                                                     </select>
// //                                                                 </div>
// //                                                             </div>

// //                                                         )}

// //                                                         {selectedField.type === 'heading' && (
// //                                                             <>
// //                                                                 <div className="form-builder-chaneging-wrap">
// //                                                                     <label>Heading Level</label>
// //                                                                     <select value={headingLevel} onChange={(e) => setHeadingLevel(e.target.value)}>
// //                                                                         {['h1', 'h2', 'h3', 'h4', 'h5', 'h6'].map(level => (
// //                                                                             <option key={level} value={level}>{level.toUpperCase()}</option>
// //                                                                         ))}
// //                                                                     </select>
// //                                                                 </div>
// //                                                                 <div className="form-builder-chaneging-wrap">
// //                                                                     <label>Heading Text</label>
// //                                                                     <input
// //                                                                         type="text"
// //                                                                         value={headingText}
// //                                                                         onChange={(e) => setHeadingText(e.target.value)}
// //                                                                     />
// //                                                                     <label>
// //                                                                         Font Size (px):
// //                                                                         <input
// //                                                                             type="text"
// //                                                                             value={headingFontSize}
// //                                                                             onChange={(e) => setHeadingFontSize(e.target.value)}
// //                                                                         />
// //                                                                     </label>
// //                                                                 </div>
// //                                                                 <div className="form-builder-chaneging-wrap">
// //                                                                     <label>Text Align </label>
// //                                                                     <select
// //                                                                         value={textHeading}
// //                                                                         onChange={(e) => setTextHeading(e.target.value)}
// //                                                                     >
// //                                                                         <option value="left">left</option>
// //                                                                         <option value="center">center</option>
// //                                                                         <option value="right">right</option>
// //                                                                     </select>
// //                                                                 </div>

// //                                                                 <div className='edit_setting_bg form bgcolor'>
// //                                                                     <label>Color:</label>
// //                                                                     <div className='edit_setting_bg_cls'>
// //                                                                         <p>{colorHeadingcode}</p>
// //                                                                         <div className='edit_setting_bg--form bgcolor'
// //                                                                             style={{
// //                                                                                 height: "30px",
// //                                                                                 width: "30px",
// //                                                                                 borderRadius: "4px",
// //                                                                                 backgroundColor: colorHeading,
// //                                                                                 border: "1px solid #ccc",
// //                                                                                 cursor: "pointer",
// //                                                                             }}
// //                                                                             onClick={() => document.getElementById('colorHeadingInput').click()}
// //                                                                         >
// //                                                                         </div>
// //                                                                     </div>
// //                                                                     <input
// //                                                                         id="colorHeadingInput"
// //                                                                         type="color"
// //                                                                         style={{
// //                                                                             display: "none"
// //                                                                         }}
// //                                                                         value={colorHeading}
// //                                                                         onChange={handleheadingColorChange}
// //                                                                     />
// //                                                                 </div>

// //                                                             </>
// //                                                         )}
// //                                                         {selectedField.type === 'description' && (
// //                                                             <>
// //                                                                 <div className="form-builder-chaneging-wrap">
// //                                                                     <label>Description Text</label>
// //                                                                     <textarea
// //                                                                         value={descriptionText}
// //                                                                         onChange={(e) => setDescriptionText(e.target.value)}
// //                                                                     />
// //                                                                 </div>

// //                                                             </>
// //                                                         )}
// //                                                         {selectedField.type !== 'heading' && selectedField.type !== 'radio' && selectedField.type !== 'checkbox' && selectedField.type !== 'link' && (<div className="form-builder-chaneging-wrap">
// //                                                             <label>Placeholder</label>
// //                                                             <input
// //                                                                 type="text"
// //                                                                 value={selectedField.placeholder}
// //                                                                 onChange={(e) => updateFieldProperty('placeholder', e.target.value)}
// //                                                             />
// //                                                         </div>
// //                                                         )}
// //                                                         {selectedField.type !== 'heading' && (
// //                                                             <div className="form-builder-chaneging-wrap">
// //                                                                 <label>Description</label>
// //                                                                 <input
// //                                                                     type="text"
// //                                                                     value={selectedField.description}
// //                                                                     onChange={(e) => updateFieldProperty('description', e.target.value)}
// //                                                                 />
// //                                                             </div>
// //                                                         )}
// //                                                         {selectedField.type !== 'heading' && (
// //                                                             <div className="form-builder-chaneging-wrap">
// //                                                                 <label>Input Width</label>
// //                                                                 <select
// //                                                                     value={selectedField.width}
// //                                                                     onChange={(e) => updateFieldProperty('width', e.target.value)}
// //                                                                 >
// //                                                                     <option value="25%">25%</option>
// //                                                                     <option value="50%">50%</option>
// //                                                                     <option value="75%">75%</option>
// //                                                                     <option value="100%">100%</option>
// //                                                                 </select>
// //                                                             </div>
// //                                                         )}
// //                                                         <div className="form-builder-chaneging-wrap">
// //                                                             <label>Custom Class</label>
// //                                                             <input
// //                                                                 type="text"
// //                                                                 value={selectedField?.customClass || ''}
// //                                                                 onChange={(e) => updateFieldProperty('customClass', e.target.value)}
// //                                                             />
// //                                                         </div>
// //                                                     </div>
// //                                                     {selectedField.type !== 'heading' && selectedField.type !== 'link' && (
// //                                                         <div className='form_builder_option_select'>
// //                                                             <h3>Options</h3>
// //                                                             <div className='form-builder-options-container'>
// //                                                                 <div className="form-builder-chaneging-wrap">
// //                                                                     <label>Required</label>
// //                                                                     <label className="toggle-switch">
// //                                                                         <input
// //                                                                             type="checkbox"
// //                                                                             checked={selectedField?.required || false}
// //                                                                             onChange={(e) => updateFieldProperty('required', e.target.checked)}
// //                                                                         />
// //                                                                         <span className="slider"></span>
// //                                                                     </label>
// //                                                                 </div>
// //                                                                 <div className="form-builder-chaneging-wrap">
// //                                                                     <label>Disabled</label>
// //                                                                     <label className="toggle-switch">
// //                                                                         <input
// //                                                                             type="checkbox"
// //                                                                             checked={selectedField?.disabled || false}
// //                                                                             onChange={(e) => updateFieldProperty('disabled', e.target.checked)}
// //                                                                         />
// //                                                                         <span className="slider"></span>
// //                                                                     </label>
// //                                                                 </div>
// //                                                                 <div className="form-builder-chaneging-wrap">
// //                                                                     <label>Readonly</label>
// //                                                                     <label className="toggle-switch">
// //                                                                         <input
// //                                                                             type="checkbox"
// //                                                                             checked={selectedField?.readonly || false}
// //                                                                             onChange={(e) => updateFieldProperty('readonly', e.target.checked)}
// //                                                                         />
// //                                                                         <span className="slider"></span>
// //                                                                     </label>
// //                                                                 </div>
// //                                                             </div>
// //                                                         </div>
// //                                                     )}

// //                                                 </div>
// //                                             </div>
// //                                         )}

// //                                     </div>
// //                                 </div>)}
// //                         </div>
// //                         <ConfirmationPopup
// //                             isVisible={showConfirmationPopup}
// //                             onClose={handleCancelStatusChange}
// //                             onConfirm={handleStatusChange}
// //                         />
// //                         <CancelPopup
// //                             isVisible={showCancelPopup}
// //                             onClose={handleCancelStatusChange}
// //                             onConfirm={handleStatusChange}
// //                         />


// //                     </div>
// //                 </div>
// //                 <div className='btn_form_bulider'>
// //                     <div className="form-submission-wrp">
// //                         <button className="cancle-form-btn" onClick={handlelistForm}>Cancel</button>
// //                     </div>
// //                     <div className="form-submission-wrp">
// //                         <button className="create-form-btn action_btn" onClick={handleCreate}>{isEditing ? 'Update Form' : 'Save'}</button>
// //                     </div>
// //                 </div>
// //             </div>

// //             <div className='form-builder-wrap-popup-inputs'>
// //                 {showPopup && (
// //                     <div className="popup">
// //                         <div className="popup-content">
// //                             <div className='radio-popup-options'>
// //                                 <h4>Configure Radio Button </h4>
// //                                 {radioOptions.map((option, index) => (
// //                                     <div key={option.id} className="radio-option">

// //                                         <label style={{ display: 'flex', alignItems: 'center' }}>
// //                                             <input
// //                                                 type="radio"
// //                                                 name="radioOption"
// //                                                 value={option.label}
// //                                                 checked={selectedOption === option.name}
// //                                                 onChange={handleRadioOptionChange}
// //                                                 className='selected-option'
// //                                             />
// //                                             <input
// //                                                 type="text"
// //                                                 value={option.label}
// //                                                 onChange={(e) => handleOptionNameChange(index, e.target.value)}
// //                                                 placeholder={`Enter option name`}
// //                                                 style={{ marginLeft: '8px' }}
// //                                             />
// //                                             <button onClick={() => removeRadioOption(option.id)} className="remove-options"><img src={removee} alt="" /></button>
// //                                         </label>

// //                                     </div>
// //                                 ))}
// //                                 <button onClick={addRadioOption}>Add Radio Button</button>
// //                                 <button onClick={handleAddRadioOptions}>Save</button>
// //                                 <button className='heading_cancle' onClick={() => setShowPopup(false)}>Cancel</button>
// //                             </div>
// //                         </div>
// //                     </div>
// //                 )}

// //                 {showCheckboxPopup && (
// //                     <div className="popup">
// //                         <div className="popup-content">
// //                             <div className='radio-popup-options'>
// //                                 <h2>Checkbox Options</h2>
// //                                 {checkboxOptions.map((option, index) => (
// //                                     <div key={option.id} className="checkbox-option">
// //                                         <label style={{ display: 'flex', alignItems: 'center' }}>
// //                                             <input
// //                                                 type="checkbox"
// //                                                 name="checkboxOption"
// //                                                 value={option.name}
// //                                                 checked={selectedOption === option.name}
// //                                                 onChange={handleRadioOptionChange}
// //                                             />
// //                                             <input
// //                                                 type="text"
// //                                                 value={option.name}
// //                                                 onChange={(e) => handleOptionNameChanges(index, e.target.value, 'checkbox')}
// //                                                 placeholder={`Enter option name`}
// //                                                 style={{ marginLeft: '8px' }}
// //                                             />
// //                                             <button onClick={() => removeCheckboxOption(option.id)} className="remove-options"><img src={removee} alt="" /></button>
// //                                         </label>
// //                                     </div>
// //                                 ))}
// //                                 <button onClick={addCheckboxOption}>Add Checkbox Button</button>
// //                                 <button onClick={handleAddCheckboxOptions}>Save</button>
// //                                 <button className='heading_cancle' onClick={() => setShowCheckboxPopup(false)}>Cancel</button>
// //                             </div>
// //                         </div>
// //                     </div>
// //                 )}
// //                 {showSelectPopup && (
// //                     <div className="popup">
// //                         <div className="popup-content">
// //                             <div className='radio-popup-options'>
// //                                 <h2>Select Options</h2>
// //                                 {selectOptions.map((option, index) => (
// //                                     <div key={option.id} className="select-option">
// //                                         <label style={{ display: 'flex', alignItems: 'center' }}>
// //                                             <input
// //                                                 type="text"
// //                                                 value={option.name}
// //                                                 onChange={(e) => handleOptionNameChangees(index, e.target.value, 'select')}
// //                                                 placeholder={`Enter option name`}
// //                                                 style={{ marginLeft: '8px' }}
// //                                             />
// //                                             <button onClick={() => removeSelectOption(option.id)} className="remove-options"> <img src={removee} alt="" /></button>
// //                                         </label>
// //                                     </div>
// //                                 ))}
// //                                 <button onClick={addSelectOption}>Add Select Input</button>
// //                                 <button onClick={handleAddSelectOptions}>Save</button>
// //                                 <button className='heading_cancle' onClick={() => setShowSelectPopup(false)}>Cancel</button>
// //                             </div>
// //                         </div>
// //                     </div>
// //                 )}
// //                 {showHeadingPopup && (

// //                     <div className="popup">
// //                         <div className="popup-content">
// //                             <h4>{editingHeadingId ? 'Edit Heading' : 'Select Heading Level'}</h4>
// //                             <form onSubmit={editingHeadingId ? (e) => { e.preventDefault(); saveEditedHeading(); } : handleSubmit}>
// //                                 <div>
// //                                     <label>
// //                                         Heading Level:
// //                                         <select value={headingLevel} onChange={(e) => setHeadingLevel(e.target.value)}>
// //                                             {['h1', 'h2', 'h3', 'h4', 'h5', 'h6'].map(level => (
// //                                                 <option key={level} value={level}>{level.toUpperCase()}</option>
// //                                             ))}
// //                                         </select>
// //                                     </label>
// //                                 </div>
// //                                 <div>
// //                                     <label>
// //                                         Heading Text:
// //                                         <input
// //                                             type="text"
// //                                             value={headingText}
// //                                             onChange={(e) => setHeadingText(e.target.value)}
// //                                             required
// //                                         />
// //                                     </label>
// //                                     <label>
// //                                         Font Size (px):
// //                                         <input
// //                                             type="text"
// //                                             value={headingFontSize}
// //                                             onChange={(e) => setHeadingFontSize(e.target.value)}
// //                                         />
// //                                     </label>
// //                                 </div>
// //                                 <button onClick={handleAddHeading}>Add Heading</button>
// //                                 <button className='heading_cancle' onClick={() => setShowHeadingPopup(false)}>Cancel</button>

// //                             </form>
// //                         </div>
// //                     </div>
// //                 )}
// //                 {showDescriptionPopup && (
// //                     <div className="popup">
// //                         <div className="popup-content">
// //                             <h4>{editingDescriptionId ? 'Edit Description' : 'Add Description'}</h4>
// //                             <form onSubmit={handleSubmits}>
// //                                 <div>
// //                                     <label>
// //                                         Description:
// //                                         <textarea
// //                                             value={descriptionText}
// //                                             onChange={(e) => setDescriptionText(e.target.value)}
// //                                             required
// //                                         />
// //                                     </label>
// //                                 </div>
// //                                 <button onClick={handleAddDescription}>Add Description</button>
// //                                 <button className='heading_cancle' onClick={() => setShowDescriptionPopup(false)}>Cancel</button>
// //                             </form>
// //                         </div>
// //                     </div>)}
// //             </div>

// //         </div>
// //     );
// // };

// // export default Formgenerated;


// import React, { useState, useEffect, useRef } from 'react';
// import Sortable from 'sortablejs';
// import axios from 'axios';
// import { useLocation } from 'react-router-dom';
// import image from '../images/image-0.png';
// import divider2 from '../images/divider0.png';
// import btn from '../images/btn0.png';
// import emailtemp from '../images/emailtemp.png';
// import phonem from '../images/phonem.png';
// import desk from '../images/desk.png';
// import socail from '../images/socail0.png';
// import htmlicon from '../images/htmlicon0.png';
// import maximizesize from '../images/maximize-size.png';
// import deletep from '../images/deletep.png';
// import delete1 from '../images/delete.png';
// import facebook from '../images/facebook.png';
// import instagram from '../images/instagram.png';
// import twitter from '../images/twitter.png';
// import videoplay from '../images/videoplay.png';
// import left from '../images/left.png';
// import right from '../images/right.png';
// import hdbg from '../images/hdbg.jpeg';
// import product from '../images/product0.png';
// import spacer from '../images/space0.png';
// import banner from '../images/banner0.png';
// import imghd from '../images/bgimg.jpeg';
// import imghd1 from '../images/imghd1.png';
// import itext from '../images/image-0.png';
// import editicon from '../images/editicon.png';
// import savemail from '../images/savemail1.png';
// import canclemail from '../images/canclemail1.png';
// import multimedia from '../images/multimedia0.png';
// import rich from '../images/rich0.png';
// import cancleimg from '../images/cancleimg.png';
// import bk from '../images/bk.png';
// import dlrm from '../images/dlrm.png';
// import search12 from '../images/search12.png';
// import productcancle from '../images/productcancle.png';
// import { format } from 'date-fns';

// import 'react-quill/dist/quill.snow.css';

// import '../index.css';
// import { useNavigate } from 'react-router-dom';
// import { useLoaderData, Link } from "@remix-run/react";
// import { authenticate, apiVersion } from "../shopify.server";

// const toolbarOptions = [
//     [{ header: [1, 2, 3, 4, 5, 6, false] }],
//     ['bold', 'italic', 'underline'],
//     ['link', 'image'],
//     [{ list: 'ordered' }, { list: 'bullet' }],
//     [{ script: 'sub' }, { script: 'super' }],
//     [{ indent: '-1' }, { indent: '+1' }],
//     [{ direction: 'rtl' }],
//     [{ size: ['small', 'medium', 'large', 'huge'] }],
//     [{ color: [] }, { background: [] }],
//     [{ font: [] }],
//     [{ align: [] }],
//     ['clean'],
// ];

// const generateUniqueId = (length = 22) => {
//     const charset = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
//     let uniqueId = '';
//     for (let i = 0; i < length; i++) {
//         const randomIndex = Math.floor(Math.random() * charset.length);
//         uniqueId += charset[randomIndex];
//     }
//     return uniqueId;
// };

// export const loader = async ({ request }) => {
//     try {
//         const { session } = await authenticate.admin(request);
//         const { shop, accessToken } = session;
//         console.log('Shop:', shop);
//         console.log('Access Token:', accessToken);

//         const graphqlQuery = {
//             query: `
//                 query {
//                     products(first: 50) {
//                         edges {
//                             node {
//                                 id
//                                 title
//                                 featuredImage {
//                                     src
//                                 }
//                                 variants(first: 10) {
//                                     edges {
//                                         node {
//                                             id
//                                             title
//                                             price
//                                         }
//                                     }
//                                 }
//                             }
//                         }
//                     }
//                 }
//             `
//         };

//         const response = await fetch(`https://${shop}/admin/api/${apiVersion}/graphql.json`, {
//             method: "POST",
//             headers: {
//                 "Content-Type": "application/json",
//                 "X-Shopify-Access-Token": accessToken,
//             },
//             body: JSON.stringify(graphqlQuery),
//         });

//         if (!response.ok) {
//             throw new Error(`Failed to fetch products: ${response.statusText}`);
//         }

//         const responseData = await response.json();
//         console.log('Response Data:', responseData);

//         const products = responseData?.data?.products?.edges || [];

//         const productsWithData = products.map(product => {
//             const variants = product.node.variants.edges.map(variant => variant.node);
//             const uniqueColors = Array.from(new Set(variants.map(variant => variant.option1))).join(' | ');
//             const uniquePrices = Array.from(new Set(variants.map(variant => variant.price))).join(' | ');
//             const uniqueSizes = Array.from(new Set(variants.map(variant => variant.option2))).join(' | ');

//             return {
//                 id: product.node.id,
//                 title: product.node.title,
//                 color: uniqueColors,
//                 price: uniquePrices,
//                 size: uniqueSizes,
//                 image: product.node.featuredImage ? product.node.featuredImage.src : null,
//             };
//         });

//         console.log('Processed Products:', productsWithData);

//         return { products: productsWithData, shop: shop };
//     } catch (err) {
//         console.error("Error fetching products:", err.message);
//         return { products: [], shop: null };
//     }
// };

// const EmailTemplateCreate = () => {

//     const navigate = useNavigate();
//     const [fields, setFields] = useState([]);
//     const [emailTemplateId, setEmailTemplateId] = useState(null);
//     const formBuilderRef = useRef(null);
//     const [formTitle, setFormTitle] = useState('Email-Template');
//     const [existingTitles, setExistingTitles] = useState([]);
//     const [showImagePopup, setShowImagePopup] = useState(false);
//     const [showHeadingPopup, setShowHeadingPopup] = useState(false);
//     const [showDescriptionPopup, setShowDescriptionPopup] = useState(false);
//     const [headingText, setHeadingText] = useState('');
//     const [headingLevel, setHeadingLevel] = useState('h1');
//     const [selectedOption, setSelectedOption] = useState('heading');
//     const [imageUrl, setImageUrl] = useState(null);
//     const [headingFontSize, setHeadingFontSize] = useState('40');
//     const [descriptionText, setDescriptionText] = useState('');
//     const [backgroundColor, setBackgroundColor] = useState('#ffffff');
//     const [borderRadious, setBorderRadious] = useState(5);
//     const [templatePadding, setTemplatePadding] = useState('20');
//     const [backgroundImage, setBackgroundImage] = useState(null);
//     const [textAlign, setTextAlign] = useState('left');
//     const [imageFieldId, setImageFieldId] = useState(null);
//     const [showField, setShowField] = useState(true);
//     const [showFields, setShowFields] = useState(true);
//     const [showSocialIconPopup, setShowSocialIconPopup] = useState(false);
//     const [selectedFieldId, setSelectedFieldId] = useState(null);
//     const [emailFieldPopup, setEmailFieldPopup] = useState(false);
//     const [activeFieldId, setActiveFieldId] = useState(null);
//     const [socalIconWidth, setSocalIconWidth] = useState(30);
//     const [socalIconHeight, setSocalIconHeight] = useState(30);
//     const [formDataAdd, setFormDataAdd] = useState([]);
//     const [selectedFormIds, setSelectedFormIds] = useState([]);
//     const [selectedTitles, setSelectedTitles] = useState([]);
//     const [showVideoInput, setShowVideoInput] = useState(false);
//     const { products, shop, apiVersion } = useLoaderData();
//     const [selectedProduct, setSelectedProduct] = useState(null);
//     const [isPopupOpen, setIsPopupOpen] = useState(false);
//     const [selectedProducts, setSelectedProducts] = useState([]);
//     const [productTitles, setProductTitles] = useState([]);
//     const [productImage, setProductImage] = useState([]);
//     const [popupFieldTitle, setPopupFieldTitle] = useState('');
//     const [showPrice, setShowPrice] = useState(false);
//     const [showbtnn, setShowbtnn] = useState(false);
//     const [productsPerRow, setProductsPerRow] = useState(3);
//     const [lastProductFieldId, setLastProductFieldId] = useState(null);
//     const [showFileUpload, setShowFileUpload] = useState(false);
//     const emailFieldRef = useRef(null);
//     const popupRef = useRef(null);
//     const [selectedIcons, setSelectedIcons] = useState({
//         facebook: true,
//         twitter: true,
//         instagram: true,
//     });
//     const [customIcons, setCustomIcons] = useState([]);
//     const [id, setId] = useState(null);
//     const location = useLocation();
//     const { formData } = location.state || {};
//     const [viewMode, setViewMode] = useState('desktop');
//     const [dividerColor, setDividerColor] = useState('#000');
//     const [showColorPicker, setShowColorPicker] = useState(false);
//     const [showbtn, setShowBtn] = useState(false);
//     const [emailWidth, setEmailWidth] = useState('800px');
//     const [headingColor, setHeadingColor] = useState('#000');
//     const formsPerPage = 3;
//     const [currentPage, setCurrentPage] = useState(1);
//     const [fontFamily, setFontFamily] = useState('Arial');
//     const [ReactQuill, setReactQuill] = useState(null);
//     const [editorValue, setEditorValue] = useState('');
//     const [headingUrl, setHeadingUrl] = useState('');
//     const [texteditorValue, setTextEditorValue] = useState('');
//     const [columnCount, setColumnCount] = useState(6);
//     const [isPopupVisible, setIsPopupVisible] = useState(false);
//     const [columnImages, setColumnImages] = useState({});
//     const [editorValues, setEditorValues] = useState({});
//     const [editorValueed, setEditorValueed] = useState('');
//     const [currentFieldId, setCurrentFieldId] = useState(null);
//     const [isPopupVisibleed, setPopupVisibleed] = useState(false);
//     const [popupFieldId, setPopupFieldId] = useState(null);
//     const [showFieldInput, setShowFieldInput] = useState(false);
//     const [showFieldPro, setShowFieldPro] = useState(false);
//     const [saveEmail, setSaveEmail] = useState(false);
//     const [cancelEmail, setCancelEmail] = useState(false);
//     const [searchTerm, setSearchTerm] = useState('');
//     const [columnsPerRow, setColumnsPerRow] = useState(3);
//     const [showbtnsplit, setShowbtnsplit] = useState(false);
//     const [showbtnmulti, setShowbtnmulti] = useState(false);

//     const handleFontChange = (event) => {
//         setFontFamily(event.target.value);
//     };

//     useEffect(() => {
//         if (formData) {
//             console.log('Form data received:', formData);
//             console.log('Fields:', formData.fields);

//             if (formData.fields && formData.fields.length > 0) {
//                 const field = formData.fields[0];

//                 if (field.columnData) {
//                     console.log('Column Data:', field.columnData);
//                 } else {
//                     console.log('Column Data not found in the first field');
//                 }
//             } else {
//                 console.log('No fields found in formData');
//             }

//             if (Array.isArray(formData.fields)) {
//                 const validFields = formData.fields.map(field => {
//                     if (!field.id) {
//                         console.warn('Field missing ID:', field);
//                     }

//                     if (field.type === 'product') {
//                         console.log('Price for product field:', field.price);
//                         if (field.price === true) {
//                             setShowPrice(true);
//                         }
//                         if (field.showbtnn === true) {
//                             setShowbtnn(true);
//                         }
//                     }
//                     if (field.type === 'split') {
//                         console.log('split for split field:', field.price);
//                         if (field.showbtnsplit === true) {
//                             setShowbtnsplit(true);
//                         }
//                     }

//                     if (field.type === 'Multicolumn') {
//                         console.log('split for split field:', field.price);
//                         if (field.showbtnmulti === true) {
//                             setShowbtnmulti(true);
//                         }
//                     }
//                     return { ...field, id: field.id || generateUniqueId() };
//                 });

//                 setFields(validFields);
//             }
//             setEmailWidth(formData.styles.width);
//             setBackgroundColor(formData.styles.backgroundColor);
//             setBorderRadious(formData.styles.borderRadious);
//             setBackgroundImage(formData.styles.backgroundImage);
//             setTemplatePadding(formData.styles.templatePadding);
//             setTextAlign(formData.styles.textAlign);
//             setFontFamily(formData.styles.fontFamily);
//             setEmailTemplateId(formData.templateId);
//             setFormTitle(formData.title);
//             setId(formData._id);
//             setSelectedFormIds(formData.form_ids || []);
//             const productsPerRow = formData.fields[0]?.productsPerRow || 3;
//             setProductsPerRow(productsPerRow);
//             const coloumPerRow = formData.fields[0]?.columnsPerRow || 3;
//             setColumnsPerRow(coloumPerRow);
//             console.log('Products per row:', formData.fields[0]?.productsPerRow);
//             const columnCount = parseInt(formData.styles.columnCount) || '';
//             setColumnCount(columnCount);

//         }
//     }, [formData]);

//     const createInputField = (type, add, initialValue = '') => {
//         const id = generateUniqueId();
//         console.log(`Creating field of type ${type} with ID: ${id}`);

//         return {
//             id,
//             type,
//             contentType: 'text',
//             add: add,
//             image: type === 'images' ? initialValue : null,
//             headerbtnbg: type === 'heading' ? '#FFFFFF' : undefined,
//             headerbtncolor: type === 'heading' ? '#000' : undefined,
//             headingbtnPadding: type === 'heading' ? 5 : undefined,
//             headingbtntopPadding: type === 'heading' ? 5 : undefined,
//             headingbtnradious: type === 'heading' ? 4 : undefined,
//             headingbtnFontSize: type === 'heading' ? 14 : undefined,
//             headingbtnwidth: type === 'heading' ? '100' : undefined,
//             headingbtnheight: type === 'heading' ? '35' : undefined,
//             headerbtn: type === 'heading' ? 'Click Now' : undefined,
//             headingsubheading: type === 'heading' ? '16' : undefined,
//             headeropacity: type === 'heading' ? '1' : undefined,
//             headingbtnBorderColor: type === 'heading' ? '#000000' : undefined,
//             headingbtnBorderWidth: type === 'heading' ? '1' : undefined,
//             headingbtnBorderStyle: type === 'heading' ? 'solid' : undefined,
//             bannerImageWidth: type === 'heading' ? '100' : undefined,
//             bannerImageHeight: type === 'heading' ? '400px' : undefined,
//             bannerImageTextAlign: type === 'heading' ? '' : undefined,
//             headingText: type === 'heading' ? 'The Three Lions Collection' : undefined,
//             headingLevel: type === 'heading' ? 'h1' : null,
//             headingFontSize: type === 'heading' ? '40' : undefined,
//             headingLetterSpacing: type === 'heading' ? 0 : undefined,
//             headingPadding: type === 'heading' ? 20 : undefined,
//             headingTextAlign: type === 'heading' ? "" : undefined,
//             headingColor: type === 'heading' ? '#000' : undefined,
//             headingbg: type === 'heading' ? '#0000' : undefined,
//             headingbgImage: type === 'heading' ? '' : undefined,
//             headingBorderColor: type === 'heading' ? '#000000' : undefined,
//             headingBorderWidth: type === 'heading' ? '0' : undefined,
//             headingBorderStyle: type === 'heading' ? 'solid' : undefined,
//             headingUrl: type === 'heading' ? '#' : undefined,
//             headingFontWeight: type === 'heading' ? 600 : undefined,
//             descritionFontSize: type === 'description' ? '16' : undefined,
//             descritionColor: type === 'description' ? '#000' : undefined,
//             descritionFontWeight: type === 'description' ? 500 : undefined,
//             descriptionText: type === 'description' ? initialValue : 'No Description Provided',
//             descriptionbg: type === 'description' ? '#0000' : undefined,
//             descriptionPadding: type === 'description' ? 10 : undefined,
//             descriptionLetterSpacing: type === 'description' ? 0 : undefined,
//             descriptionTextAlign: type === 'description' ? "" : undefined,
//             descriptionBorderColor: type === 'description' ? '#000000' : undefined,
//             descriptionBorderWidth: type === 'description' ? '0' : undefined,
//             descriptionBorderStyle: type === 'description' ? 'solid' : undefined,
//             name: type === 'heading' ? initialValue :
//                 type === 'description' ? 'Description' :
//                     `Field_${id}`,
//             label: type === 'heading' ? 'Heading' :
//                 type === 'description' ? 'Description' :
//                     type === 'button' ? 'Submit' :
//                         `Default Label for ${type}`,
//             value: initialValue || (type === 'description' ? 'No Description Provided' : ''),
//             dividerColor: type === 'divider' ? '#000' : undefined,
//             dividerbgColor: type === 'divider' ? '#FFFFFF' : undefined,
//             dividerWidth: type === 'divider' ? '100' : undefined,
//             dividerheight: type === 'divider' ? '1' : undefined,
//             buttonColor: type === 'button' ? '#007BFF' : undefined,
//             buttonbgColor: type === 'button' ? '#FFFFFF' : undefined,
//             buttonTextColor: type === 'button' ? '#FFFFFF' : undefined,
//             buttonFontSize: type === 'button' ? 16 : undefined,
//             buttonPadding: type === 'button' ? 10 : undefined,
//             buttonWidth: type === 'button' ? 100 : undefined,
//             buttonHeight: type === 'button' ? 40 : undefined,
//             buttonradious: type === 'button' ? 2 : undefined,
//             buttonLabel: type === 'button' ? 'Submit' : undefined,
//             buttonBorderColor: type === 'button' ? '#000000' : undefined,
//             buttonBorderWidth: type === 'button' ? '1' : undefined,
//             buttonBorderStyle: type === 'button' ? 'solid' : undefined,
//             buttonLetterSpacing: type === 'button' ? 0 : undefined,
//             buttonUrll: type === 'button' ? '' : undefined,
//             socalIconWidth: type === 'socalicon' ? 30 : undefined,
//             socalIconHeight: type === 'socalicon' ? 30 : undefined,
//             socalIconPadding: type === 'socalicon' ? 10 : undefined,
//             socalIcongap: type === 'socalicon' ? 5 : undefined,
//             socalIconbg: type === 'socalicon' ? '#FFFFFF' : undefined,
//             socaliconTextAlign: type === 'socalicon' ? "" : undefined,
//             htmlColor: type === 'html convert' ? '#000' : undefined,
//             htmlFontSize: type === 'html convert' ? 16 : undefined,
//             htmlPadding: type === 'html convert' ? 10 : undefined,
//             icons: {
//                 facebook: { url: 'https://facebook.com', isHidden: false },
//                 twitter: { url: 'https://twitter.com', isHidden: false },
//                 instagram: { url: 'https://instagram.com', isHidden: false },
//             },
//             customIcons: [],
//             spacerHeight: type === 'spacer' ? '20' : undefined,
//             spacerbg: type === 'spacer' ? '#FFFFFF' : undefined,
//             splitbtn: type === 'split' ? 'Add Text' : undefined,
//             splitbtnbg: type === 'split' ? '#007BFF' : undefined,
//             splitbtnfont: type === 'split' ? '14' : undefined,
//             splitbtncolor: type === 'split' ? '#FFFFFF' : undefined,
//             splitbtnurl: type === 'split' ? '' : undefined,
//             splitbtnheight: type === 'split' ? '35' : undefined,
//             splitbtnwidth: type === 'split' ? '80' : undefined,
//             splitbtnradious: type === 'split' ? '2' : undefined,
//             splitBorderColor: type === 'split' ? '#000000' : undefined,
//             splitBorderWidth: type === 'split' ? '1' : undefined,
//             splitBorderStyle: type === 'split' ? 'solid' : undefined,
//             splitbg: type === 'split' ? '#FFFFFF' : undefined,
//             splitheight: type === 'split' ? '300' : undefined,
//             videoPadding: type === 'video' ? '20' : undefined,
//             splitPadding: type === 'split' ? '10' : undefined,
//             splitTextAlin: type === 'split' ? 'left' : undefined,
//             videoBorderColor: type === 'video' ? '#000000' : undefined,
//             videoBorderWidth: type === 'video' ? '0' : undefined,
//             videoBorderStyle: type === 'video' ? 'solid' : undefined,
//             imgWidth: type === 'images' ? '100' : undefined,
//             imgTextAlign: type === 'images' ? "" : undefined,
//             imgPadding: type === 'images' ? 10 : undefined,
//             imgbg: type === 'images' ? '#0000' : undefined,
//             imgBorderColor: type === 'images' ? '#000000' : undefined,
//             imgBorderWidth: type === 'images' ? '0' : undefined,
//             imgBorderStyle: type === 'images' ? 'solid' : undefined,
//             productPadding: type === 'product' ? 10 : undefined,
//             productbg: type === 'product' ? '#0000' : undefined,
//             productBorderColor: type === 'product' ? '#000000' : undefined,
//             productBorderWidth: type === 'product' ? '0' : undefined,
//             productBorderStyle: type === 'product' ? 'solid' : undefined,
//             productFontSize: type === 'product' ? 16 : undefined,
//             productTextColor: type === 'product' ? '#000000' : undefined,
//             productWeight: type === 'product' ? 400 : undefined,
//             productLetterSpacing: type === 'product' ? 0 : undefined,
//             productbtnBorderColor: type === 'product' ? '#000000' : undefined,
//             productbtnBorderWidth: type === 'product' ? '1' : undefined,
//             productbtnBorderStyle: type === 'product' ? 'solid' : undefined,
//             productbtnbg: type === 'product' ? '#FFF' : undefined,
//             productradious: type === 'product' ? '3' : undefined,
//             productLabel: type === 'product' ? 'Shop Now' : undefined,
//             productfontSize: type === 'product' ? '12' : undefined,
//             productwidth: type === 'product' ? '80' : undefined,
//             productheight: type === 'product' ? '30' : undefined,
//             productbackgroundColor: type === 'product' ? '#007BFF' : undefined,
//             additionalButtons: [],
//             displayStyle: 'flex',
//             richleftPadding: type === 'richtext' ? 10 : undefined,
//             richtopPadding: type === 'richtext' ? 10 : undefined,
//             richFontsize: type === 'richtext' ? "14" : undefined,
//             richbgcolor: type === 'richtext' ? "#FFFFFF" : undefined,
//             richtextcolor: type === 'richtext' ? "#000" : undefined,
//             richTextAlign: type === 'richtext' ? "" : undefined,
//             htmltext: type === 'html convert' ? '<h1>Your HTML Here</h1>' : undefined,
//             fontsizeMulticolumn: type === 'Multicolumn' ? 14 : undefined,
//             MulticolumnbtnBorderColor: type === 'Multicolumn' ? '#000000' : undefined,
//             MulticolumnbtnBorderWidth: type === 'Multicolumn' ? '1' : undefined,
//             MulticolumnbtnBorderStyle: type === 'Multicolumn' ? 'solid' : undefined,
//             MulticolumnPadding: type === 'Multicolumn' ? 10 : undefined,
//             MultiPadding: type === 'Multicolumn' ? 0 : undefined,
//             Multicolumnbgcolor: type === 'Multicolumn' ? '#FFFFFF' : undefined,
//             Multibgcolor: type === 'Multicolumn' ? '#FFFFFF' : '',
//             Multitext: type === 'Multicolumn' ? 'center' : '',
//             Multigap: type === 'Multicolumn' ? '10' : '',
//             MultibtnBorderColor: type === 'Multicolumn' ? '#000000' : undefined,
//             MultibtnBorderWidth: type === 'Multicolumn' ? '1' : undefined,
//             MultibtnBorderStyle: type === 'Multicolumn' ? 'solid' : undefined,
//             Multibtnheight: type === 'Multicolumn' ? '40' : undefined,
//             Multibtnradious: type === 'Multicolumn' ? '2' : undefined,
//             Multibtnweight: type === 'Multicolumn' ? '100' : undefined,
//             Multibtnbg: type === 'Multicolumn' ? '#007BFF' : 'undefined',
//             Multibtnlable: type === 'Multicolumn' ? 'Click' : 'undefined',
//             Multibtncolor: type === 'Multicolumn' ? '#0000' : undefined,
//             Multibtnfont: type === 'Multicolumn' ? '14' : undefined,
//             Multibtnurl: type === 'Multicolumn' ? '' : undefined,
//         };
//     };

//     const addInputField = (type) => {
//         let newField;

//         if (type === 'images') {
//             setImageFieldId(null);
//             newField = createInputField('images');
//             setFields((prevFields) => [...prevFields, newField]);
//             setSelectedFieldId(newField.id);
//             if (window.innerWidth > 1400) {
//                 handleFieldClick(newField.id);
//             }
//             return;
//         } else if (type === 'heading') {
//             setEditorValue('');
//             newField = createInputField(type);
//             setFields((prevFields) => [...prevFields, newField]);
//             setSelectedFieldId(newField.id);
//             if (window.innerWidth > 1400) {
//                 handleFieldClick(newField.id);
//             }
//         } else if (type === 'divider') {
//             toggleColorPicker();
//             newField = createInputField(type);
//             setFields((prevFields) => [...prevFields, newField]);
//         } else if (type === 'button') {
//             newField = createInputField(type);
//             setFields((prevFields) => [...prevFields, newField]);
//         } else if (type === 'socalicon') {
//             newField = createInputField('socalicon');
//             setFields((prevFields) => {
//                 const updatedFields = [...prevFields, newField];
//                 console.log("Updated fields after adding new field:", updatedFields);

//                 setSelectedFieldId(newField.id);
//                 setSelectedIcons(newField.icons || {});
//                 setCustomIcons(newField.customIcons || []);
//                 setShowSocialIconPopup(true);

//                 return updatedFields;
//             });
//         } else if (type === 'html convert') {
//             newField = createInputField(type, type === 'html convert' ? '<h1>Your HTML Here</h1>' : '');
//             setFields((prevFields) => [...prevFields, newField]);
//         } else if (type === 'split') {
//             const splitFields = [
//                 createInputField('split', 'image', ''),
//                 createInputField('split', 'text', ''),
//             ];
//             setFields((prevFields) => [...prevFields, ...splitFields]);
//             splitFields.forEach((field) => {
//                 if (field.id && window.innerWidth > 1400) {
//                     handleFieldClick(field.id);
//                 }
//             });
//         } else if (type === 'spacer') {
//             newField = createInputField(type);
//             setFields((prevFields) => [...prevFields, newField]);
//         } else if (type === 'video') {
//             newField = createInputField(type);
//             setFields((prevFields) => [...prevFields, newField]);
//             setShowVideoInput(true);
//         } else if (type === 'product') {
//             newField = createInputField('product');
//             setFields((prevFields) => [...prevFields, newField]);
//             setLastProductFieldId(newField.id);
//             setIsPopupOpen(true);
//             setSelectedProducts([])
//             setSearchTerm('');
//         } else if (type === 'Multicolumn') {
//             const id = generateUniqueId();
//             const newField = {
//                 id,
//                 type: 'Multicolumn',
//                 columnCount: 6,
//                 columnData: Array(6).fill({ content: '', image: null })
//             };
//             setFields((prevFields) => {
//                 const updatedFields = [...prevFields, newField];
//                 if (newField.id && window.innerWidth > 1400) {
//                     handleFieldClick(newField.id);  
//                 }
//                 return updatedFields;
//             });
//         } else if (type === 'richtext') {
//             newField = createInputField('richtext');
//             setFields((prevFields) => [...prevFields, newField]);
//             setCurrentFieldId(newField.id);
//             setEditorValueed('');
//         }

//         if (newField && newField.id && window.innerWidth > 1400) {
//             handleFieldClick(newField.id);
//         }
//     };


//     useEffect(() => {

//         const loadReactQuill = async () => {
//             const { default: Quill } = await import('react-quill');
//             setReactQuill(() => Quill);
//         };

//         loadReactQuill();
//     }, []);

//     const handleEdit = (field) => {
//         setSelectedFieldId(field.id);
//         setSelectedIcons(field.icons);
//         setCustomIcons(field.customIcons || []);
//         setShowSocialIconPopup(true);
//     };

//     const handleSaveSocialIcons = () => {
//         setFields((prevFields) =>
//             prevFields.map((field) =>
//                 field.id === selectedFieldId
//                     ? { ...field, icons: selectedIcons, customIcons }
//                     : field
//             )
//         );
//         setShowSocialIconPopup(false);

//     };

//     useEffect(() => {

//         handleSaveSocialIcons();
//     }, [selectedIcons, customIcons]);

//     const handleToggleIcon = (icon) => {
//         setSelectedIcons((prevIcons) => ({
//             ...prevIcons,
//             [icon]: {
//                 ...prevIcons[icon],
//                 isHidden: !prevIcons[icon]?.isHidden,
//             },
//         }));
//     };

//     const handleIconUrlChange = (e, icon) => {
//         setSelectedIcons((prevIcons) => ({
//             ...prevIcons,
//             [icon]: {
//                 ...prevIcons[icon],
//                 url: e.target.value,
//             },
//         }));
//     };

//     const handleCustomIconUpload = (e) => {
//         const files = e.target.files;
//         const filePromises = Array.from(files).map((file) => {
//             return new Promise((resolve) => {
//                 const reader = new FileReader();
//                 reader.onloadend = () => {
//                     resolve(reader.result);
//                 };
//                 reader.readAsDataURL(file);
//             });
//         });

//         Promise.all(filePromises).then((fileUrls) => {
//             const newIcons = fileUrls.map((url) => ({
//                 src: url,
//                 name: 'Custom Icon',
//                 isHidden: false
//             }));
//             setCustomIcons((prevIcons) => [...prevIcons, ...newIcons]);
//         });
//     };

//     const handleCustomIconUrlChange = (e, index) => {
//         const newUrl = e.target.value;
//         setCustomIcons((prevIcons) =>
//             prevIcons.map((icon, i) =>
//                 i === index ? { ...icon, url: newUrl } : icon
//             )
//         );
//     };

//     const toggleCustomIconVisibility = (index) => {
//         setCustomIcons((prevIcons) =>
//             prevIcons.map((icon, i) =>
//                 i === index ? { ...icon, isHidden: !icon.isHidden } : icon
//             )
//         );
//     };

//     const handleImageUpload = (e) => {
//         const file = e.target.files[0];
//         if (file) {
//             const reader = new FileReader();
//             reader.onloadend = () => {
//                 const newField = createInputField('images', reader.result);
//                 if (imageFieldId) {
//                     setFields((prevFields) =>
//                         prevFields.map((field) =>
//                             field.id === imageFieldId ? { ...field, value: reader.result } : field
//                         )
//                     );
//                 } else {
//                     setFields((prevFields) => [...prevFields, newField]);
//                 }
//                 setShowImagePopup(false);
//                 setImageFieldId(null);
//             };
//             reader.readAsDataURL(file);
//         }
//     };

//     const handleAddHeading = (e) => {
//         e.preventDefault();
//         if (emailTemplateId) {
//             setFields((prevFields) =>
//                 prevFields.map((field) =>
//                     field.id === emailTemplateId
//                         ? {
//                             ...field,
//                             headingText,
//                             headingLevel,
//                             headingFontSize,
//                             headingColor,
//                             imageUrl,
//                             editorContent: editorValue,
//                             headingUrl,
//                         }
//                         : field
//                 )
//             );
//         } else {
//             const newField = createInputField('heading', headingText);
//             newField.headingLevel = headingLevel;
//             newField.headingFontSize = headingFontSize;
//             newField.headingColor = headingColor;
//             newField.imageUrl = imageUrl;
//             newField.editorContent = editorValue;
//             newField.headingUrl = headingUrl;
//             setFields((prevFields) => [...prevFields, newField]);
//         }
//         setShowHeadingPopup(false);
//         setHeadingText('');
//         setHeadingLevel('h1');
//         setHeadingFontSize('16');
//         setEmailTemplateId(null);
//         setImageUrl(null);
//         setEditorValue('');
//         setHeadingUrl('');
//     };

//     const handleEditorChange = (value, fieldId) => {
//         console.log("Editor value changed:", value);
//         console.log("Active field ID:", fieldId);
//         setFields((prevFields) => {
//             const updatedFields = prevFields.map((field) =>
//                 field.id === fieldId
//                     ? { ...field, editorContent: value }
//                     : field
//             );
//             console.log("Updated fields after editor change:", updatedFields);
//             return updatedFields;
//         });
//     };


//     const handleUpdateUrl = (id, newUrl) => {
//         setFields((prevFields) =>
//             prevFields.map((field) =>
//                 field.id === id ? { ...field, headingUrl: newUrl } : field
//             )
//         );
//     };

//     const handleAddDescription = (e) => {
//         e.preventDefault();
//         if (emailTemplateId) {
//             setFields((prevFields) =>
//                 prevFields.map((field) =>
//                     field.id === emailTemplateId
//                         ? { ...field, descriptionText }
//                         : field
//                 )
//             );
//         } else {
//             const newField = createInputField('description', descriptionText);
//             setFields((prevFields) => [...prevFields, newField]);
//         }

//         setShowDescriptionPopup(false);
//         setDescriptionText('');
//         setTextEditorValue('');
//         setEmailTemplateId(null);
//     };

//     const handleDescriptionChange = (id, value) => {
//         setFields((prevFields) =>
//             prevFields.map((field) =>
//                 field.id === id ? { ...field, descriptionText: value } : field
//             )
//         );
//     };

//     const removeField = (id) => {
//         console.log('Attempting to remove field with ID:', id);
//         setFields((prevFields) => {
//             const newFields = prevFields.filter(field => field.id !== id);
//             setEmailFieldPopup(false)
//             console.log('Remaining fields after removal:', newFields);
//             return newFields;
//         });
//     };


//     useEffect(() => {
//         axios
//             .get('http://localhost:4001/get-forms')
//             .then((res) => {
//                 console.log('API Response:', res.data);
//                 const filteredData = res.data.filter((form) => form.shop === shop);
//                 setFormDataAdd(filteredData);
//             })
//             .catch((error) => console.error('API Error:', error));
//     }, [shop]);

//     useEffect(() => {
//         if (formDataAdd.length > 0) {
//             const formIds = formDataAdd.map((form) => form.formId);
//             console.log('All form IDs:', formIds);
//         }
//     }, [formDataAdd]);

//     const handleFormSelect = async (e) => {
//         const title = e.target.value.trim();
//         const selectedForm = formDataAdd.find((form) => form.title.trim() === title);

//         if (selectedForm) {
//             try {
//                 const response = await fetch(`http://localhost:4001/check-form-connected/${selectedForm.formId}`);
//                 const data = await response.json();

//                 if (data.isConnected) {
//                     alert('This form is already connected to a template.');

//                     const confirmUnlink = window.confirm(
//                         'Do you want to unlink it?'
//                     );

//                     if (confirmUnlink) {
//                         const unlinkResponse = await fetch(
//                             `http://localhost:4001/unlink-template/${selectedForm.formId}`,
//                             { method: 'PUT' }
//                         );

//                         if (unlinkResponse.ok) {
//                             alert('Template unlinked from form.');

//                             const updatedCheckResponse = await fetch(
//                                 `http://localhost:4001/check-form-connected/${selectedForm.formId}`
//                             );
//                             const updatedCheckData = await updatedCheckResponse.json();

//                             if (!updatedCheckData.isConnected) {
//                                 console.log('Form is no longer connected to a template.');
//                             }
//                         } else {
//                             alert('Failed to unlink template.');
//                         }
//                     } else {
//                         return;
//                     }
//                 }

//                 setSelectedFormIds((prevFormIds) => {
//                     if (prevFormIds.includes(selectedForm.formId)) {
//                         return prevFormIds.filter((id) => id !== selectedForm.formId);
//                     } else {
//                         return [...prevFormIds, selectedForm.formId];
//                     }
//                 });

//                 setSelectedTitles((prevSelectedTitles) => {
//                     if (prevSelectedTitles.includes(title)) {
//                         return prevSelectedTitles.filter((t) => t !== title);
//                     } else {
//                         return [...prevSelectedTitles, title];
//                     }
//                 });
//             } catch (error) {
//                 console.error('Error checking or unlinking form connection:', error);
//                 alert('An error occurred while processing the form connection.');
//             }
//         }
//     };

//     useEffect(() => {
//         console.log('Selected form IDs:', selectedFormIds);
//     }, [selectedFormIds]);

//     const createOrUpdateForm = async () => {
//         const timestamp = format(new Date(), "yyyy-MM-dd HH:mm:ss a");
//         let trimmedTitle = formTitle.trim();
//         if (!trimmedTitle) {
//             alert('Please provide a title for the template.');
//             return;
//         }

//         if (!id) {
//             try {
//                 const response = await axios.get(`http://localhost:4001/check-title/${trimmedTitle}`);
//                 if (response.data.exists) {

//                     trimmedTitle = `${trimmedTitle}-${format(new Date(), "yyyyMMddHHmmss")}`;
//                 }
//             } catch (error) {
//                 console.error('Error checking title:', error);
//                 return;
//             }
//         }

//         const templateId = emailTemplateId || generateUniqueId();
//         setEmailTemplateId(templateId);

//         if (fields.length === 0) {
//             console.warn('No fields to create the form.');
//             return;
//         }

//         const validFields = fields.filter(field => field && field.type);

//         const updatedFields = validFields.map(field => {
//             let value = '';

//             switch (field.type) {
//                 case 'images':
//                     value = field.value || 'No Image Provided';
//                     break;
//                 case 'heading':
//                     value = field.value || '';
//                     field.editorContent = field.editorContent;
//                     field.headingUrl = field.headingUrl || '';
//                     field.imageUrl = field.imageUrl || '';
//                     break;
//                 case 'description':
//                     value = field.value || '';
//                     break;
//                 case 'socalicon':
//                     value = field.icons || 'No Social Icons Provided';
//                     break;
//                 case 'divider':
//                     value = field.icons || 'No Social Icons Provided';
//                     break;
//                 case 'button':
//                     value = 'Button';
//                 case 'split':
//                     value = field.value || 'No Value Provided';
//                     field.add = field.add;
//                     field.splitbg = field.splitbg || '';
//                     field.splitheight = field.splitheight || '',
//                         field.width = field.width || '50%';
//                     field.splitPadding = field.splitPadding || 0
//                     field.splitTextAlin = field.splitTextAlin || 'left';
//                     return {
//                         ...field,
//                         showbtnsplit: showbtnsplit || false,
//                     };

//                 case 'spacer':
//                     value = 'Spacer Field';
//                     field.spacerHeight = field.spacerHeight || 30;
//                     field.spacerbg = field.spacerbg || '#f0f0f0';
//                     break;
//                 case 'video':
//                     value = field.value;
//                     field.videoPadding = field.videoPadding || 20;
//                     field.videoBorderWidth = field.videoBorderWidth || 1;
//                     field.videoBorderStyle = field.videoBorderStyle || 'solid';
//                     field.videoBorderColor = field.videoBorderColor || '#000';
//                     break;
//                 case 'richtext':
//                     value = field.value;
//                     field.content = field.content || editorValueed || field.value || '';
//                     break;
//                 case 'Multicolumn':
//                     value = field.value;

//                     if (!field.columnData) {
//                         field.columnData = Array.from({ length: columnCount }, (_, i) => ({
//                             image: columnImages[`${field.id}-${i}`] || '',
//                             content: editorValues[`${field.id}-${i}`] || '',
//                         }));
//                     } else {

//                         for (let i = 0; i < columnCount; i++) {
//                             field.columnData[i] = {
//                                 image: columnImages[`${field.id}-${i}`] || field.columnData[i]?.image,
//                                 content: editorValues[`${field.id}-${i}`] || field.columnData[i]?.content,
//                             };
//                         }
//                     }

//                     const validColumns = field.columnData.filter(column => column.image || column.content);

//                     field.columnData = validColumns;
//                     field.columnsPerRow = field.columnsPerRow || 1;
//                     field.columnCount = validColumns.length;
    
//                     break;
//                 case 'product':
//                     return {
//                         ...field,
//                         products: field.products || [],
//                         productsPerRow,
//                         viewMode,
//                         price: showPrice,
//                         buttonUrl: field.productUrl || `https://${shop}/admin/products?selectedView=all`,
//                         showbtnn: showbtnn

//                     };

//                 default:
//                     value = '';
//             }

//             if (field.type === 'html convert') {
//                 return {
//                     ...field,
//                     value: field.value || '',
//                 };
//             }

//             if (field.type === 'button') {
//             }

//             if (field.type === 'socalicon') {
//                 field.socalIconHeight = field.socalIconHeight;
//                 field.socalIconWidth = field.socalIconWidth;

//                 const filteredIcons = {
//                     facebook: field.icons.facebook?.isHidden ? undefined : field.icons.facebook,
//                     twitter: field.icons.twitter?.isHidden ? undefined : field.icons.twitter,
//                     instagram: field.icons.instagram?.isHidden ? undefined : field.icons.instagram,
//                     send: field.icons.send?.isHidden ? undefined : field.icons.send,
//                 };

//                 field.icons = Object.fromEntries(
//                     Object.entries(filteredIcons).filter(([key, value]) => value !== undefined)
//                 );

//                 field.customIcons = field.customIcons || [];
//             } else {
//                 field.icons = {};
//             }

//             return {
//                 ...field,
//                 label: field.label || (field.type === 'button' ? 'Button' : `Default Label for ${field.type}`),
//                 name: field.name || `Field_${field.id}`,
//                 value: field.type === 'product' ? undefined : value,
//                 headerbtnbg: field.headerbtnbg || null,
//                 headeropacity: field.headeropacity || '',
//                 headerbtncolor: field.headerbtncolor || null,
//                 headerbtn: field.headerbtn || null,
//                 headingLevel: field.headingLevel || null,
//                 headingbtnPadding: field.headingbtnPadding || 10,
//                 headingbtntopPadding: field.headingbtntopPadding || 10,
//                 headingbtnradious: field.headingbtnradious || 4,
//                 headingbtnwidth: field.headingbtnwidth || 100,
//                 headingsubheading: field.headingsubheading || 16,
//                 headingbtnFontSize: field.headingbtnFontSize || 16,
//                 headingbtnheight: field.headingbtnheight || 40,
//                 headingbtnBorderWidth: field.headingbtnBorderWidth || 1,
//                 headingbtnBorderStyle: field.headingbtnBorderStyle || 'solid',
//                 headingbtnBorderColor: field.headingbtnBorderColor || '#000',
//                 bannerImageWidth: field.bannerImageWidth || '100',
//                 bannerImageHeight: field.bannerImageHeight || '',
//                 bannerImageTextAlign: field.bannerImageTextAlign || '',
//                 richTextAlign: field.richTextAlign || '',
//                 richFontsize: field.richFontsize || '',
//                 richbgcolor: field.richbgcolor,
//                 richtextcolor: field.richtextcolor,
//                 richleftPadding: field.richleftPadding || 10,
//                 richtopPadding: field.richtopPadding || 10,
//                 headingFontWeight: field.headingFontWeight || 600,
//                 headingColor: field.headingColor || '#000',
//                 headingbg: field.headingbg || '#ffff',
//                 headingPadding: field.headingPadding || 0,
//                 headingbgImage: field.headingbgImage || '',
//                 headingLetterSpacing: field.headingLetterSpacing || 0,
//                 headingTextAlign: field.headingTextAlign || '',
//                 headingText: field.headingText,
//                 headingBorderWidth: field.headingBorderWidth || 1,
//                 headingBorderStyle: field.headingBorderStyle || 'solid',
//                 headingBorderColor: field.headingBorderColor || '#000',
//                 headingFontSize: field.type === 'heading' ? (field.headingFontSize || "16") : undefined,
//                 descritionFontWeight: field.descritionFontWeight || 600,
//                 descritionFontSize: field.descritionFontSize || 16,
//                 descritionColor: field.descritionColor || '#000',
//                 descriptionbg: field.descriptionbg || '#ffff',
//                 descriptionPadding: field.descriptionPadding || 10,
//                 descriptionLetterSpacing: field.descriptionLetterSpacing || 0,
//                 descriptionTextAlign: field.descriptionTextAlign || '',
//                 descriptionBorderWidth: field.descriptionBorderWidth || 1,
//                 descriptionBorderStyle: field.descriptionBorderStyle || 'solid',
//                 descriptionBorderColor: field.descriptionBorderColor || '#000',
//                 dividerColor: field.dividerColor || '#000',
//                 dividerbgColor: field.dividerbgColor || '',
//                 dividerWidth: field.dividerWidth || '100',
//                 dividerheight: field.dividerheight || '1',
//                 buttonbgColor: field.buttonbgColor || '',
//                 buttonColor: field.buttonColor || '#007BFF',
//                 buttonFontSize: field.buttonFontSize || 16,
//                 buttonTextColor: field.buttonTextColor || '#fff',
//                 buttonLetterSpacing: field.buttonLetterSpacing || 0,
//                 buttonUrll: field.buttonUrll || '',
//                 buttonBorderWidth: field.buttonBorderWidth || 1,
//                 buttonBorderStyle: field.buttonBorderStyle || 'solid',
//                 buttonBorderColor: field.buttonBorderColor || '#000',
//                 buttonWidth: field.buttonWidth || 150,
//                 buttonHeight: field.buttonHeight || 40,
//                 buttonradious: field.buttonradious || 40,
//                 buttonPadding: field.buttonPadding || 10,
//                 socalIconHeight: field.socalIconHeight || 30,
//                 socalIconWidth: field.socalIconWidth || 30,
//                 socalIconPadding: field.socalIconPadding || 10,
//                 socalIcongap: field.socalIcongap || '',
//                 socalIconbg: field.socalIconbg || '#FFF',
//                 socaliconTextAlign: field.socaliconTextAlign || '',
//                 htmlFontSize: field.htmlFontSize || 16,
//                 htmlPadding: field.htmlPadding || 10,
//                 htmlColor: field.htmlColor || '#000',
//                 splitbg: field.splitbg || '',
//                 splitbtn: field.splitbtn || '',
//                 splitbtnbg: field.splitbtnbg || '',
//                 splitbtnfont: field.splitbtnfont || '',
//                 splitbtncolor: field.splitbtncolor || '',
//                 splitbtnurl: field.splitbtnurl || '',
//                 splitbtnheight: field.splitbtnheight || '',
//                 splitbtnwidth: field.splitbtnwidth || '',
//                 splitbtnradious: field.splitbtnradious || '',
//                 splitheight: field.splitheight || '',
//                 width: field.width || '100%',
//                 spacerHeight: field.spacerHeight || 20,
//                 spacerbg: field.spacerbg || '#fff',
//                 videoPadding: field.videoPadding || 20,
//                 splitPadding: field.splitPadding || 0,
//                 splitTextAlin: field.splitTextAlin || 'left',
//                 videoBorderWidth: field.videoBorderWidth || 1,
//                 videoBorderStyle: field.videoBorderStyle || 'solid',
//                 videoBorderColor: field.videoBorderColor || '#000',
//                 imgWidth: field.imgWidth || '100',
//                 imgTextAlign: field.imgTextAlign || '',
//                 imgPadding: field.imgPadding || 10,
//                 imgbg: field.imgbg || '#ffff',
//                 imgBorderWidth: field.imgBorderWidth || 0,
//                 imgBorderStyle: field.imgBorderStyle || 'solid',
//                 imgBorderColor: field.imgBorderColor || '#000',
//                 productPadding: field.productPadding || 10,
//                 productbg: field.productbg || '#ffff',
//                 productBorderWidth: field.productBorderWidth || 0,
//                 productBorderStyle: field.productBorderStyle || 'solid',
//                 productBorderColor: field.productBorderColor || '#000',
//                 productFontSize: field.productFontSize || 16,
//                 productColor: field.productColor || '#000',
//                 productWeight: field.productWeight || 600,
//                 productLetterSpacing: field.productLetterSpacing || 0,
//                 productbtnBorderColor: field.productbtnBorderColor || '#000',
//                 productbtnBorderWidth: field.productbtnBorderWidth || 16,
//                 productbtnBorderStyle: field.productbtnBorderStyle || '#000',
//                 productbtnbg: field.productbtnbg || 600,
//                 productradious: field.productradious || 0,
//                 productLabel: field.productLabel || 'Shop Now',
//                 productfontSize: field.productfontSize || '12',
//                 productwidth: field.productwidth || 80,
//                 productheight: field.productheight || 30,
//                 productbackgroundColor: field.productbackgroundColor || '#007BFF',
//                 buttonLabel: field.buttonLabel || '',
//                 fontsizeMulticolumn: field.fontsizeMulticolumn || 14,
//                 Multicolumnbgcolor: field.Multicolumnbgcolor || '',
//                 Multibgcolor: field.Multibgcolor || '',
//                 Multitext: field.Multitext || '',
//                 Multigap: field.Multigap || '',
//                 Multibtnlable: field.Multibtnlable || '',
//                 Multibtncolor:field.Multibtncolor || '',
//                 Multibtnbg: field.Multibtnbg || '',
//                 Multibtnweight: field.Multibtnweight || '',
//                 Multibtnheight: field.Multibtnheight || '',
//                 Multibtnradious:field.Multibtnradious || '',
//                 Multibtnfont:field.Multibtnfont || '',
//                 Multibtnurl:field.Multibtnurl || '',
//                 MulticolumnbtnBorderColor: field.MulticolumnbtnBorderColor || '',
//                 MulticolumnbtnBorderWidth: field.MulticolumnbtnBorderWidth || '',
//                 MulticolumnbtnBorderStyle: field.MulticolumnbtnBorderStyle || '',
//                 MultibtnBorderColor: field.MultibtnBorderColor || '',
//                 MultibtnBorderWidth: field.MultibtnBorderWidth || '',
//                 MultibtnBorderStyle: field.MultibtnBorderStyle || '',
//                 MulticolumnPadding: field.MulticolumnPadding || '',
//                 MultiPadding: field.MultiPadding || '',
//                 splitBorderColor: field.splitBorderColor || '',
//                 splitBorderWidth: field.splitBorderWidth || '',
//                 splitBorderStyle: field.splitBorderStyle || '',
//                 showbtnmulti : showbtnmulti || false,
//             };
//         });

//         console.log('Updated fields:', updatedFields);

//         const formData = {
//             templateId,
//             shop,
//             form_ids: selectedFormIds.map(id => String(id)),
//             title: trimmedTitle,
//             fields: updatedFields,
//             createdAt: timestamp,
//             styles: {
//                 backgroundImage,
//                 backgroundColor,
//                 borderRadious,
//                 templatePadding,
//                 textAlign,
//                 fontFamily,
//                 width: viewMode === 'desktop' ? '800px' : '400px',
//                 dividerColor,
//             },
//         };

//         try {
//             setSaveEmail(!saveEmail);
//             const response = id
//                 ? await axios.put(`http://localhost:4001/update/${id}`, formData)
//                 : await axios.post('http://localhost:4001/send/api', formData);
//             console.log('Form saved successfully with title:', trimmedTitle);
//             const successMessage = id ? 'Form updated successfully' : 'Form created successfully';
//             console.log(successMessage, response.data);

//             if (!id) {
//                 resetFormState();
//             }
//             setExistingTitles(prevTitles => [...prevTitles, trimmedTitle]);
//         } catch (error) {
//             console.error('Error saving form:', error);
//             if (error.response) {
//                 console.error('Response data:', error.response.data);
//             }
//         }
//     };

//     const resetFormState = () => {
//         setFields([]);
//         setEmailTemplateId(null);
//         setHeadingText('');
//         setBackgroundImage(null);
//         setTemplatePadding('20')
//         setBackgroundColor('#ffffff');
//         setTextAlign('left');
//         setBorderRadious(5)
//         setId(null);
//     };

//     const handleContinue = () => {
//         navigate('/app/emailTemplate/list');
//         setSaveEmail(false);
//         setCancelEmail(false)
//     };


//     const handleBackgroundImageUpload = (e) => {
//         const file = e.target.files[0];
//         if (file) {
//             const reader = new FileReader();
//             reader.onloadend = () => {
//                 setBackgroundImage(reader.result);
//             };
//             reader.readAsDataURL(file);
//         }
//     };

//     useEffect(() => {
//         const formBuilder = formBuilderRef.current;
//         if (!formBuilder) return;

//         const sortable = Sortable.create(formBuilder, {
//             animation: 150,
//             ghostClass: 'dragging',
//             onEnd: (evt) => {
//                 const newFields = [...fields];
//                 const movedField = newFields.splice(evt.oldIndex, 1)[0];
//                 newFields.splice(evt.newIndex, 0, movedField);
//                 setFields(newFields);
//             },
//         });

//         return () => {
//             sortable.destroy();
//         };
//     }, [fields]);

//     const toggleViewMode = (mode) => {
//         setViewMode(mode);
//         setEmailWidth(mode === 'desktop' ? '800px' : '400px');

//         setFields((prevFields) =>
//             prevFields.map((field) => ({
//                 ...field,
//                 columnsPerRow: mode === 'mobile' ? 1 : field.defaultColumnsPerRow || 3,

//             }))
//         );
//     };

//     // const toggleViewMode = (mode) => {
//     //     setViewMode(mode);
//     //     setEmailWidth(mode === 'desktop' ? '800px' : '400px');
//     //     if (mode === 'mobile') {
//     //         setProductsPerRow(1);
//     //         setColumnsPerRow(1);
//     //     } else {
//     //         setProductsPerRow(3);
//     //         setColumnsPerRow(3);
//     //     }
//     // };

//     const toggleColorPicker = () => {
//         setShowColorPicker(!showColorPicker);
//     };

//     const togglebtn = () => {
//         setShowBtn(!showbtn);
//     };

//     const toggleFields = () => {
//         setShowFields(true);
//         setDropdownVisible(false);
//     };

//     const toggleSettings = () => {
//         setShowFields(false);
//     };

//     const renderField = (field) => {
//         if (!field) return null;

//         switch (field.type) {
//             case 'html convert':
//                 return (
//                     <div>
//                         <textarea
//                             value={field.value || field.htmltext}
//                             onChange={(e) =>
//                                 setFields((prevFields) =>
//                                     prevFields.map((f) => (f.id === field.id ? { ...f, value: e.target.value } : f))
//                                 )
//                             }
//                             rows="5"
//                             cols="50"
//                         />
//                     </div>
//                 );

//             default:
//                 return;
//         }
//     };


//     useEffect(() => {
//         const handleClickOutside = (event) => {
//             if (window.innerWidth > 1400 && popupRef.current && !popupRef.current.contains(event.target)) {
//                 setEmailFieldPopup(false);
//             }
//         };

//         document.addEventListener('mousedown', handleClickOutside);

//         return () => {
//             document.removeEventListener('mousedown', handleClickOutside);
//         };
//     }, []);


//     useEffect(() => {
//         const handleClickOutside = (event) => {
//             if (emailFieldRef.current && !emailFieldRef.current.contains(event.target)) {
//                 setActiveFieldId(null);
//             }
//         };

//         document.addEventListener('mousedown', handleClickOutside);

//         return () => {
//             document.removeEventListener('mousedown', handleClickOutside);
//         };
//     }, []);

//     const handleWidthChange = (newWidth) => {
//         setFields((prevFields) => {
//             const selectedIndex = prevFields.findIndex((f) => f.id === selectedFieldId);

//             if (selectedIndex !== -1 && selectedIndex % 2 === 0) {
//                 return prevFields.map((f, index) => {
//                     if (index === selectedIndex) {
//                         return { ...f, width: newWidth };
//                     }
//                     if (index === selectedIndex + 1) {
//                         return { ...f, width: `${100 - parseInt(newWidth)}%` };
//                     }
//                     return f;
//                 });
//             } else if (selectedIndex !== -1) {
//                 return prevFields.map((f, index) => {
//                     if (index === selectedIndex) {
//                         return { ...f, width: newWidth };
//                     }
//                     if (index === selectedIndex - 1) {
//                         return { ...f, width: `${100 - parseInt(newWidth)}%` };
//                     }
//                     return f;
//                 });
//             }
//             return prevFields;
//         });
//     };

//     const handleVideoChange = (e, id) => {
//         const updatedFields = fields.map(field => {
//             if (field.id === id && field.type === 'video') {
//                 return { ...field, value: e.target.value };
//             }
//             return field;
//         });
//         setFields(updatedFields);
//     };

//     const getVideoEmbedUrl = (url) => {
//         const videoId = url.split('v=')[1]?.split('&')[0];
//         if (videoId) {
//             return `https://www.youtube.com/embed/${videoId}?autohide=1&showinfo=0&controls=0`;
//         }
//         return null;
//     };

//     const handleProductClick = (product, isChecked) => {
//         setSelectedProducts((prevSelectedProducts) => {
//             if (isChecked) {

//                 return [...prevSelectedProducts, product];
//             } else {
//                 return prevSelectedProducts.filter((p) => p.id !== product.id);
//             }
//         });

//         setFields((prevFields) => {
//             return prevFields.map((field) => {
//                 if (field.id === lastProductFieldId && field.type === 'product') {
//                     return {
//                         ...field,
//                         products: isChecked
//                             ? [...(field.products || []), product]
//                             : (field.products || []).filter((p) => p.id !== product.id)
//                     };
//                 }
//                 return field;
//             });
//         });

//         setIsPopupOpen(true);
//     };

//     const handleRemoveProductFromForm = (index) => {
//         const productToRemove = productTitles?.[index];

//         if (!productToRemove) return;

//         setProductTitles((prevTitles) =>
//             Array.isArray(prevTitles) ? prevTitles.filter((title, i) => i !== index) : prevTitles
//         );

//         setSelectedProducts((prevSelectedProducts) =>
//             Array.isArray(prevSelectedProducts)
//                 ? prevSelectedProducts.filter((product) => product.title !== productToRemove)
//                 : prevSelectedProducts
//         );

//         setFields((prevFields) =>
//             Array.isArray(prevFields)
//                 ? prevFields.map((field) =>
//                     field.type === 'product'
//                         ? { ...field, products: field.products.filter((product) => product.title !== productToRemove) }
//                         : field
//                 )
//                 : prevFields
//         );
//     };

//     const handleClosePopup = () => {
//         setIsPopupOpen(false);
//         setSelectedProduct(null);
//     };

//     const togglePrice = () => {
//         setShowPrice(!showPrice);
//     };

//     const togglebtnn = () => {
//         setShowbtnn(!showbtnn);
//     };

//     const togglesplit = (fieldId) => {
//         setShowbtnsplit((prev) => !prev);
    
//         setFields((prevFields) =>
//             prevFields.map((f) =>
//                 f.id === fieldId ? { ...f, showbtnsplit: !f.showbtnsplit } : f
//             )
//         );
//     };

//     const togglemulti = (fieldId) => {
//         setShowbtnmulti((prev) => !prev);
    
//         setFields((prevFields) =>
//             prevFields.map((f) =>
//                 f.id === fieldId ? { ...f, showbtnmulti: !f.showbtnmulti } : f
//             )
//         );
//     };
    

//     const AddProduct = () => {
//         setIsPopupOpen(true);
//     }

//     useEffect(() => {
//         console.log('isPopupOpen:', isPopupOpen);
//         console.log('selectedProduct:', selectedProduct);
//     }, [isPopupOpen, selectedProduct]);


//     const handleAddProductToSelected = (fieldId, fieldTitle, fieldImage, products) => {
//         console.log("Field ID:", fieldId);
//         console.log("Field Title:", fieldTitle);
//         console.log("Products:", products);
//         console.log("Image:", fieldImage);
//         setLastProductFieldId(fieldId);
//         setPopupFieldTitle(fieldTitle);

//         const productTitles = products.map(product => product.title);
//         console.log("Product Titles:", productTitles);

//         setProductTitles(productTitles);

//         const productImages = products.map(product => product.image);
//         console.log("Product images:", productImages);
//         setProductImage(productImages);
//     };

//     const handleProductsPerRowChange = (e) => {
//         setProductsPerRow(parseInt(e.target.value, 6));
//     };


//     const totalPages = Math.ceil(products.length / formsPerPage);

//     const handlePageChange = (page) => {
//         if (page < 1 || page > totalPages) return;
//         setCurrentPage(page);
//     };

//     const currentProducts = products.slice(
//         (currentPage - 1) * formsPerPage,
//         currentPage * formsPerPage
//     );

//     const generatePageNumbers = () => {
//         const visiblePages = [];

//         if (totalPages <= 5) {
//             for (let i = 1; i <= totalPages; i++) {
//                 visiblePages.push(i);
//             }
//         } else {

//             if (currentPage <= 3) {
//                 visiblePages.push(1, 2, 3, 4, '...', totalPages);
//             }

//             else if (currentPage >= totalPages - 2) {
//                 visiblePages.push(1, '...', totalPages - 3, totalPages - 2, totalPages - 1, totalPages);
//             }

//             else {
//                 visiblePages.push(1, '...', currentPage - 1, currentPage, currentPage + 1, '...', totalPages);
//             }
//         }

//         return visiblePages;
//     };


//     const handleRemoveBackgroundImage = () => {
//         setBackgroundImage('');
//     };

//     const RemoveImage = (fieldId) => {
//         console.log(`Removing image for field with ID: ${fieldId}`);
//         setFields((prevFields) =>
//             prevFields.map((field) =>
//                 field.id === fieldId
//                     ? { ...field, imageUrl: null }
//                     : field
//             )
//         );
//     };

//     const handleFileChange = (e, fieldId) => {
//         const file = e.target.files[0];
//         if (file) {
//             const reader = new FileReader();
//             reader.onloadend = () => {
//                 setFields(prevFields =>
//                     prevFields.map(f =>
//                         f.id === fieldId ? { ...f, headingbgImage: reader.result } : f
//                     )
//                 );
//             };
//             reader.readAsDataURL(file);
//         }
//     };


//     const handleFieldClick = (fieldId) => {
//         setSelectedFieldId(fieldId);
//         setEmailFieldPopup(true);
//         setActiveFieldId(fieldId);
//         const selectedField = fields.find((field) => field.id === fieldId);
//         if (selectedField && selectedField.type === 'Multicolumn') {
//             setIsPopupVisible(true);
//             setColumnCount(selectedField.columnCount);
//         }
//         if (window.innerWidth <= 1400) {
//             handleFieldPro();
//         }
//     };

//     const handleColumnClick = (fieldId, columnIndex) => {
//         setPopupFieldId(fieldId);

//         setFields((prevFields) =>
//             prevFields.map((field) =>
//                 field.id === fieldId
//                     ? { ...field, selectedColumn: columnIndex }
//                     : field
//             )
//         );
//     };

//     const handleEditorChangeee = (value) => {
//         setEditorValueed(value);
//     };

//     const handleSave = () => {
//         const updatedFields = fields.map((field) =>
//             field.id === currentFieldId ? { ...field, content: editorValueed } : field
//         );
//         setFields(updatedFields);
//         setPopupVisibleed(false);
//     };

//     const handleRemoveImage = (fieldId, index) => {
//         setFields((prevFields) =>
//             prevFields.map((field) =>
//                 field.id === fieldId
//                     ? {
//                         ...field,
//                         columnData: field.columnData.map((col, i) =>
//                             i === index ? { ...col, image: null } : col
//                         ),
//                     }
//                     : field
//             )
//         );
//     };

//     const filteredProducts = currentProducts.filter((product) =>
//         product.title.toLowerCase().includes(searchTerm.toLowerCase())
//     );

//     const handleEditChange = (value, fieldId) => {
//         setFields((prevFields) => {
//             const updatedFields = prevFields.map((field) =>
//                 field.id === fieldId ? { ...field, content: value } : field
//             );
//             return updatedFields;
//         });
//     };

//     useEffect(() => {
//         if (window.innerWidth > 1400) {
//             setShowFieldInput(true);
//         } else {
//             setShowFieldInput(false);
//         }

//         const handleResize = () => {
//             if (window.innerWidth > 1400) {
//                 setShowFieldInput(true);
//             } else {
//                 setShowFieldInput(false);
//             }
//         };

//         window.addEventListener("resize", handleResize);
//         return () => window.removeEventListener("resize", handleResize);
//     }, []);

//     const handleFieldInput = () => {
//         if (window.innerWidth <= 1400) {
//             setShowFieldInput(true);
//         }
//     };

//     const hanldeCancleBtn = () => {
//         setShowFieldInput(false);
//     }

//     useEffect(() => {
//         if (window.innerWidth > 1400) {
//             setShowFieldPro(true);
//         } else {
//             setShowFieldPro(false);
//         }

//         const handleResize = () => {
//             if (window.innerWidth > 1400) {
//                 setShowFieldPro(true);
//             } else {
//                 setShowFieldPro(false);
//             }
//         };

//         window.addEventListener("resize", handleResize);
//         return () => window.removeEventListener("resize", handleResize);
//     }, []);

//     const handleFieldPro = () => {
//         if (window.innerWidth <= 1400) {
//             setShowFieldPro(true);
//         }
//     };

//     const hanldeCanclepro = () => {
//         setShowFieldPro(false);
//     }

//     const addColumn = (fieldId) => {
//         const updatedFields = fields.map(f => {
//             if (f.id === fieldId) {
//                 if (f.columnCount < 6) {

//                     return {
//                         ...f,
//                         columnCount: f.columnCount + 1,
//                         columnData: [...f.columnData, { content: '', image: null }]
//                     };
//                 } else {

//                     alert('You cannot add more than 6 columns');
//                     return f;
//                 }
//             }
//             return f;
//         });
//         setFields(updatedFields);
//     };

//     const removeColumn = (fieldId, index) => {
//         console.log(`Attempting to remove column at index: ${index}`);

//         const updatedFields = fields.map(f =>
//             f.id === fieldId
//                 ? {
//                     ...f,
//                     columnCount: f.columnCount - 1,
//                     columnData: f.columnData.filter((_, i) => i !== index)
//                 }
//                 : f
//         );

//         console.log(`Updated columns for field ${fieldId}:`, updatedFields);
//         setFields(updatedFields);
//     };


//     const handleCustomIconRemove = (index) => {
//         setCustomIcons((prevIcons) => prevIcons.filter((_, i) => i !== index));
//     };

//     const handleImageChange1 = (e, fieldId, index) => {
//         const file = e.target.files[0];
//         if (file) {
//             const reader = new FileReader();
//             reader.onloadend = () => {
//                 const updatedFields = fields.map(f =>
//                     f.id === fieldId
//                         ? {
//                             ...f,
//                             columnData: f.columnData.map((col, i) =>
//                                 i === index ? { ...col, image: reader.result } : col
//                             ),
//                         }
//                         : f
//                 );
//                 setFields(updatedFields);
//             };
//             reader.readAsDataURL(file);
//         }
//     };
//     const handleCancle = () => {
//         setCancelEmail(true);
//     }

//     const removeImage = (fieldId, index) => {
//         const updatedFields = fields.map(f =>
//             f.id === fieldId
//                 ? {
//                     ...f,
//                     columnData: f.columnData.map((col, i) =>
//                         i === index ? { ...col, image: null } : col
//                     ),
//                 }
//                 : f
//         );
//         setFields(updatedFields);
//     };

//     const handleColoumPerRowChange = (e, fieldId) => {
//         const updatedFields = fields.map((f) => {
//             if (f.id === fieldId) {
//                 return {
//                     ...f,
//                     columnsPerRow: Number(e.target.value),
//                 };
//             }
//             return f;
//         });
//         setFields(updatedFields);
//     };


//     return (
//         <div>
//             <div className='email-campaing-templates'>
//                 <div className="builder-container">
//                     <h3>Email campaign</h3>

//                     <div className='builder_form_name'>
//                         <div className='email-template-heading'>
//                             <input
//                                 type="text"
//                                 value={formTitle}
//                                 onChange={(e) => setFormTitle(e.target.value)}
//                                 placeholder="Enter Name"
//                             />
//                         </div>
//                         <div className='template-select-forms'>
//                             <select onChange={handleFormSelect}>
//                                 <option value="">Select a form</option>
//                                 {formDataAdd.map((form) => (
//                                     <option
//                                         key={form.id}
//                                         value={form.title}
//                                         style={{
//                                             color: selectedFormIds.includes(form.formId) ? '#45A7F6' : 'black',
//                                         }}
//                                     >
//                                         {form.title}
//                                     </option>
//                                 ))}
//                             </select>
//                         </div>
//                     </div>
//                     <div className='form-Elements-btn email' onClick={handleFieldInput}>Form Elements</div>
//                     <div className='builder-forms_rapp'>
//                         <div className="builder-wrp">
//                             <div className="controls-main-wrp email-tempalte">
//                                 {showFieldInput && (<div className="controls-wrp email">
//                                     {showField && (<div className="controls">
//                                         <div className='builder-form-element'>
//                                             <div className='buil_form_texttt'>
//                                                 <div className='buil_form_texttt_p'>
//                                                     <h2> Elements</h2>
//                                                 </div>
//                                             </div>
//                                         </div>
//                                         <div className='controls-wrpping cancleimg pro email field' onClick={hanldeCancleBtn}><img src={cancleimg} alt="" /></div>
//                                         <div className='builder_fieldes'>
//                                             <div className='builder_form_select_control'>
//                                                 <div
//                                                     className={`builder_form_fields ${showFields ? 'active' : ''}`}
//                                                     onClick={toggleFields}
//                                                 >
//                                                     <h2>Fields</h2>
//                                                 </div>
//                                                 <div
//                                                     className={`builder_form_setting ${!showFields ? 'active' : ''}`}
//                                                     onClick={toggleSettings}
//                                                 >
//                                                     <h2>Settings</h2>
//                                                 </div>

//                                             </div>
//                                             {showFields ? (
//                                                 <div>
//                                                     <div className='builderr_field_wrpp email'> <button onClick={() => addInputField('heading')}><span className='form_builder_field_img'><img src={banner} alt="" /></span> <span><h4>Banner</h4></span></button></div>
//                                                     <div className='builderr_field_wrpp email'> <button onClick={() => addInputField('richtext')}><span className='form_builder_field_img'><img src={rich} alt="" /></span> <span><h4>Rich Text</h4></span></button></div>
//                                                     {/* <div className='builderr_field_wrpp'> <button onClick={() => addInputField('description')}><span className='form_builder_field_img'><img src={font} alt="" /></span> <span><h4>Description</h4></span></button></div> */}
//                                                     <div className='builderr_field_wrpp email'> <button onClick={() => addInputField('button')}><span className='form_builder_field_img'><img src={btn} alt="" /></span> <span><h4>Button</h4></span></button></div>
//                                                     <div className='builderr_field_wrpp email'> <button onClick={() => addInputField('divider')}><span className='form_builder_field_img'><img src={divider2} alt="" /></span> <span><h4>Divider</h4></span></button></div>
//                                                     <div className='builderr_field_wrpp email'> <button onClick={() => addInputField('split')}><span className='form_builder_field_img'><img src={itext} alt="" /></span> <span><h4>Images with Text</h4></span></button></div>
//                                                     <div className='builderr_field_wrpp email'> <button onClick={() => addInputField('images')}><span className='form_builder_field_img'><img src={image} alt="" /></span> <span><h4>Images</h4></span></button></div>
//                                                     <div className='builderr_field_wrpp email'> <button onClick={() => addInputField('socalicon')}><span className='form_builder_field_img'><img src={socail} alt="" /></span> <span><h4>Social Icon</h4></span></button></div>
//                                                     <div className='builderr_field_wrpp email'> <button onClick={() => addInputField('html convert')}><span className='form_builder_field_img'><img src={htmlicon} alt="" /></span> <span><h4>HTML Block</h4></span></button></div>
//                                                     <div className='builderr_field_wrpp email'> <button onClick={() => addInputField('spacer')}><span className='form_builder_field_img'><img src={spacer} alt="" /></span> <span><h4>Spacer</h4></span></button></div>
//                                                     <div className='builderr_field_wrpp email'> <button onClick={() => addInputField('Multicolumn')}><span className='form_builder_field_img'><img src={multimedia} /></span><span><h4>Multicolumn</h4></span></button></div>
//                                                     {/* <div className='builderr_field_wrpp'> <button onClick={() => addInputField('video')}><span className='form_builder_field_img'><img src={image} alt="" /></span> <span><h4>video</h4></span></button></div> */}
//                                                     <div className='builderr_field_wrpp email'> <button onClick={() => addInputField('product')}><span className='form_builder_field_img'><img src={product} alt="" /></span> <span><h4>Product</h4></span></button></div></div>

//                                             ) : (
//                                                 <div>
//                                                     <div className='edit_form_close'>
//                                                         <div className='edit-formwrap'>
//                                                             <h3>Edit Properties</h3>
//                                                             <div className="builder_field_wrpp">
//                                                                 <div className='edit-form-options'>
//                                                                     <div className="edit_setting_bg">
//                                                                         <label htmlFor="font-family-selector">Font-Family</label>
//                                                                         <select
//                                                                             id="font-family-selector"
//                                                                             value={fontFamily}
//                                                                             onChange={handleFontChange}
//                                                                         >
//                                                                             <option value="Arial">Arial</option>
//                                                                             <option value="Verdana">Verdana</option>
//                                                                             <option value="Times New Roman">Times New Roman</option>
//                                                                             <option value="Georgia">Georgia</option>
//                                                                             <option value="Courier New">Courier New</option>
//                                                                             <option value="Roboto">Roboto</option>
//                                                                             <option value="Raleway">Raleway</option>
//                                                                             <option value="Gotham">Gotham</option>
//                                                                             <option value="Montserrat">Montserrat</option>
//                                                                             <option value="Lato">Lato</option>
//                                                                             <option value="Helvetica">Helvetica</option>
//                                                                             <option value="Source Sans Pro">Source Sans Pro</option>
//                                                                             <option value="Poppins">Poppins</option>
//                                                                             <option value="Quicksand">Quicksand</option>
//                                                                             <option value="Work Sans">Work Sans</option>
//                                                                             <option value="Barlow">Barlow</option>
//                                                                             <option value="Varela Round">Varela Round</option>
//                                                                             <option value="Josefin Sans">Josefin Sans</option>
//                                                                             <option value="Inter ">Inter </option>
//                                                                             <option value="open sans">open sans</option>

//                                                                         </select>
//                                                                     </div>

//                                                                     <div className='edit_setting_bg form'>
//                                                                         <div className='checkbox-option bg-colors'>
//                                                                             <label>  Background Color:</label>
//                                                                             <div className="color-picker-container">
//                                                                                 <span className="color-code">{backgroundColor}</span>
//                                                                                 <input
//                                                                                     type="color"
//                                                                                     value={backgroundColor}
//                                                                                     onChange={(e) => setBackgroundColor(e.target.value)}
//                                                                                 />
//                                                                             </div>
//                                                                         </div>
//                                                                     </div>

//                                                                     <div className='edit_setting_bg'>
//                                                                         <label>Border-Radious:</label>
//                                                                         <input
//                                                                             type="text"
//                                                                             id="Border-radious"
//                                                                             value={borderRadious}
//                                                                             onChange={(e) => setBorderRadious(e.target.value)}
//                                                                         />
//                                                                     </div>

//                                                                     <div className='edit_setting_bg'>
//                                                                         <label>Padding:</label>
//                                                                         <input
//                                                                             type="text"
//                                                                             id="Padding"
//                                                                             value={templatePadding}
//                                                                             onChange={(e) => setTemplatePadding(e.target.value)}
//                                                                         />
//                                                                     </div>

//                                                                     <div className='edit_setting_bg'>
//                                                                         <label htmlFor="textAlign">Text Alignment:</label>
//                                                                         <select
//                                                                             id="textAlign"
//                                                                             value={textAlign}
//                                                                             onChange={(e) => setTextAlign(e.target.value)}
//                                                                         >
//                                                                             <option value="left">Left</option>
//                                                                             <option value="center">Center</option>
//                                                                             <option value="right">Right</option>
//                                                                         </select>
//                                                                     </div>

//                                                                     <div className='edit_setting_bg'>
//                                                                         <label htmlFor="backgroundImage">Background Image:</label>
//                                                                         <input
//                                                                             type="file"
//                                                                             accept="image/*"
//                                                                             onChange={handleBackgroundImageUpload}
//                                                                         />
//                                                                         {backgroundImage && (
//                                                                             <button className='rm-btn bg-img'
//                                                                                 type="button"
//                                                                                 onClick={handleRemoveBackgroundImage}
//                                                                                 style={{
//                                                                                     margin: '10px 0',
//                                                                                     width: '150px',
//                                                                                     textAlign: 'center',
//                                                                                     background: 'red'
//                                                                                 }}
//                                                                             >

//                                                                                 Remove Background
//                                                                             </button>
//                                                                         )}
//                                                                         {backgroundImage && (
//                                                                             <div
//                                                                                 className="edit_setting_bg"
//                                                                                 style={{
//                                                                                     backgroundImage: backgroundImage ? `url(${backgroundImage})` : 'none',
//                                                                                     backgroundRepeat: 'no-repeat',
//                                                                                     backgroundSize: 'contain',
//                                                                                     backgroundPosition: 'center',
//                                                                                     height: '200px',
//                                                                                     width: '100%',
//                                                                                     border: '1px solid #ddd',
//                                                                                 }}
//                                                                             >

//                                                                             </div>
//                                                                         )}
//                                                                     </div>
//                                                                 </div>
//                                                             </div>
//                                                         </div>
//                                                     </div>
//                                                 </div>
//                                             )}

//                                         </div>
//                                     </div>
//                                     )}
//                                 </div>)}

//                                 <div className='form_builder_build email'>
//                                     <div id='bg_change' className="form-builder-wrp email-temp" >
//                                         <div className='btn-email-templates'>
//                                             <button className={`btn-templates ${(viewMode === 'desktop' || emailWidth === '800px') && emailWidth !== '400px' ? 'active' : ''}`} onClick={() => toggleViewMode('desktop')}>
//                                                 <img src={desk} alt="Desktop" /> Desktop
//                                             </button>
//                                             <button className={`btn-templates ${(viewMode === 'mobile' || emailWidth === '400px') && emailWidth !== '800px' ? 'active' : ''}`} onClick={() => toggleViewMode('mobile')}>
//                                                 <img src={phonem} alt="Mobile" /> Mobile
//                                             </button>
//                                         </div>

//                                         <div
//                                             className="form-builder email-template"
//                                             ref={formBuilderRef}
//                                             style={{
//                                                 backgroundColor,
//                                                 width: emailWidth,
//                                                 textAlign,
//                                                 padding: `${templatePadding}px`,
//                                                 borderRadius: `${borderRadious}px`,
//                                                 backgroundImage: backgroundImage ? `url(${backgroundImage})` : 'none',
//                                                 backgroundSize: 'cover',
//                                                 backgroundPosition: 'center',
//                                                 margin: 'auto',
//                                                 fontFamily
//                                             }}
//                                         >
//                                             {fields.length === 0 ? (
//                                                 <div>

//                                                     <div className="builder-block-img-forms">
//                                                         <div className='builder_block_blank'>
//                                                             <img src={emailtemp} alt="Email Template" />
//                                                             <div className='builder-block-img-forms-paragraph'>
//                                                                 <p>Let's create the Email.</p>
//                                                             </div>
//                                                         </div>
//                                                     </div>
//                                                 </div>
//                                             ) : (
//                                                 <>
//                                                     {fields
//                                                         .filter((field) => field && field.id && field.type)
//                                                         .map((field) => {
//                                                             console.log('Rendering field:', field);
//                                                             if (field.type === 'heading') {
//                                                                 const HeadingTag = field.headingLevel || 'h1';

//                                                                 return (
//                                                                     <div
//                                                                         key={field.id}
//                                                                         onClick={() => handleFieldClick(field.id)}
//                                                                         className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
//                                                                         style={{ display: 'flex' }}
//                                                                     >
//                                                                         <div className='email-input-field'
//                                                                             style={{

//                                                                                 backgroundColor: field.headingbg,
//                                                                                 borderWidth: `${field.headingBorderWidth}px`,
//                                                                                 borderStyle: field.headingBorderStyle,
//                                                                                 borderColor: field.headingBorderColor,
//                                                                                 backgroundImage: field.headingbgImage
//                                                                                     ? `url(${field.headingbgImage})`
//                                                                                     : `url(${hdbg})`,
//                                                                                 backgroundRepeat: 'no-repeat',
//                                                                                 backgroundSize: 'cover',
//                                                                                 width: `${field.bannerImageWidth}%`,
//                                                                                 height: field.bannerImageHeight || '400px',
//                                                                                 opacity: field.headeropacity || '',
//                                                                                 position: 'relative'
//                                                                             }}
//                                                                         >
//                                                                             <div className='email-input-field-h1' style={{
//                                                                                 position: 'absolute', top: '35%',
//                                                                                 width: '100%',
//                                                                                 textAlign: field.headingTextAlign || '',
//                                                                                 padding: `${field.headingPadding}px`,


//                                                                             }}>
//                                                                                 {React.createElement(HeadingTag, {
//                                                                                     style: {
//                                                                                         fontWeight: field.headingFontWeight,
//                                                                                         fontSize: `${field.headingFontSize || 40}px`,
//                                                                                         color: field.headingColor,
//                                                                                         letterSpacing: `${field.headingLetterSpacing}px`,
//                                                                                         lineHeight: '48px'
//                                                                                     }
//                                                                                 }, field.headingText || field.value)}

//                                                                                 <div
//                                                                                     className="heading-editor-content"
//                                                                                     style={{ fontSize: `${field.headingsubheading}px`, margin: '20px 0' }}
//                                                                                     dangerouslySetInnerHTML={{
//                                                                                         __html: editorValue || field.editorContent || 'Its a numbers game',
//                                                                                     }}
//                                                                                 />
//                                                                                 {field.headingUrl && (
//                                                                                     <a href={field.headingUrl} target="_blank" rel="noopener noreferrer" onClick={(e) => e.preventDefault()}>
//                                                                                         <button
//                                                                                             onClick={(e) => {
//                                                                                                 e.preventDefault();
//                                                                                                 console.log("Button clicked, but no navigation.");
//                                                                                             }}
//                                                                                             style={{
//                                                                                                 background: field.headerbtnbg,
//                                                                                                 color: field.headerbtncolor,
//                                                                                                 height: `${field.headingbtnheight}px`,
//                                                                                                 width: `${field.headingbtnwidth}px`,
//                                                                                                 fontSize: `${field.headingbtnFontSize}px`,
//                                                                                                 borderRadius: `${field.headingbtnradious}px`,
//                                                                                                 paddingLeft: `${field.headingbtnPadding}px`,
//                                                                                                 paddingRight: `${field.headingbtnPadding}px`,
//                                                                                                 paddingTop: `${field.headingbtntopPadding}px`,
//                                                                                                 paddingBottom: `${field.headingbtntopPadding}px`,
//                                                                                                 borderWidth: `${field.headingbtnBorderWidth}px`,
//                                                                                                 borderStyle: field.headingbtnBorderStyle,
//                                                                                                 borderColor: field.headingbtnBorderColor,
//                                                                                             }}
//                                                                                         >
//                                                                                             {field.headerbtn}
//                                                                                         </button>
//                                                                                     </a>
//                                                                                 )}
//                                                                             </div>
//                                                                             <div className='form-builder-radio-btn email'>
//                                                                                 <button className="copy-btn edit-email" onClick={() => handleFieldClick(field.id)}>
//                                                                                     <img src={editicon} alt="copy" />
//                                                                                 </button>
//                                                                                 <button className='remove-btn' onClick={() => removeField(field.id)}>
//                                                                                     <img src={delete1} alt="delete" />
//                                                                                 </button>
//                                                                                 <button className="copy-btn" onClick={() => addInputField(field.type)}>
//                                                                                     <img src={maximizesize} alt="copy" />
//                                                                                 </button>
//                                                                             </div>
//                                                                         </div>
//                                                                     </div>
//                                                                 );
//                                                             }
//                                                             if (field.type === 'description') {
//                                                                 return (
//                                                                     <div key={field.id} onClick={() => handleFieldClick(field.id)}
//                                                                         className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
//                                                                         style={{ display: 'flex' }}
//                                                                     >
//                                                                         <div style={{
//                                                                             backgroundColor: field.descriptionbg,
//                                                                             padding: `${field.descriptionPadding}px`,
//                                                                         }}>
//                                                                             <p style={{
//                                                                                 fontSize: `${field.descritionFontSize}px`,
//                                                                                 letterSpacing: `${field.descriptionLetterSpacing}px`,
//                                                                                 textAlign: field.descriptionTextAlign || '',
//                                                                                 borderWidth: `${field.descriptionBorderWidth}px`,
//                                                                                 borderStyle: field.descriptionBorderStyle,
//                                                                                 borderColor: field.descriptionBorderColor,
//                                                                                 fontWeight: field.descritionFontWeight,
//                                                                                 color: field.descritionColor
//                                                                             }}>{field.descriptionText || field.value || ''}</p>

//                                                                         </div>
//                                                                         <div className='form-builder-radio-btn email'>
//                                                                             <button className="copy-btn edit-email " onClick={() => handleFieldClick(field.id)}>
//                                                                                 <img src={editicon} alt="copy" />
//                                                                             </button>
//                                                                             <button className='remove-btn' onClick={() => removeField(field.id)}>
//                                                                                 <img src={delete1} alt="delete" />
//                                                                             </button>
//                                                                             <button className="copy-btn" onClick={() => addInputField(field.type)}>
//                                                                                 <img src={maximizesize} alt="copy" />
//                                                                             </button>
//                                                                         </div>
//                                                                     </div>
//                                                                 );
//                                                             }

//                                                             if (field.type === 'images') {
//                                                                 return (
//                                                                     <div key={field.id} onClick={() => handleFieldClick(field.id)}
//                                                                         className={`email_field  ${activeFieldId === field.id ? 'active' : ''}`}
//                                                                         style={{ display: 'flex', justifyContent: 'center' }}
//                                                                         ref={emailFieldRef}
//                                                                     >
//                                                                         <div className='email_field-images'
//                                                                             style={{
//                                                                                 textAlign: field.imgTextAlign ? field.imgTextAlign : '',
//                                                                                 backgroundColor: field.imgbg,
//                                                                                 borderWidth: `${field.imgBorderWidth}px`,
//                                                                                 borderStyle: field.imgBorderStyle,
//                                                                                 borderColor: field.imgBorderColor,
//                                                                                 width: '100%'
//                                                                             }}>

//                                                                             <img src={field.value || imghd} alt="Dynamic" style={{
//                                                                                 width: `${field.imgWidth}%`,
//                                                                                 padding: `${field.imgPadding}px`,
//                                                                             }} />

//                                                                         </div>

//                                                                         <div className='form-builder-radio-btn email'>
//                                                                             <button className="copy-btn edit-email " onClick={() => handleFieldClick(field.id)}>
//                                                                                 <img src={editicon} alt="copy" />
//                                                                             </button>
//                                                                             <button className='remove-btn' onClick={() => removeField(field.id)}>
//                                                                                 <img src={delete1} alt="delete" />
//                                                                             </button>
//                                                                             <button className="copy-btn" onClick={() => addInputField(field.type)}>
//                                                                                 <img src={maximizesize} alt="copy" />
//                                                                             </button>
//                                                                         </div>
//                                                                     </div>
//                                                                 );
//                                                             }
//                                                             if (field.type === 'divider') {
//                                                                 return (
//                                                                     <div key={field.id} onClick={() => handleFieldClick(field.id)}
//                                                                         className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
//                                                                         style={{ display: 'flex' }}
//                                                                         ref={emailFieldRef}
//                                                                     >
//                                                                         <div style={{ backgroundColor: field.dividerbgColor, width: '100%' }}>
//                                                                             <hr style={{
//                                                                                 border: `1px solid ${field.dividerColor}`, width: `${field.dividerWidth}%`,
//                                                                                 height: `${field.dividerheight}px`
//                                                                             }} />
//                                                                         </div>
//                                                                         <div className='form-builder-radio-btn email'>
//                                                                             <button className="copy-btn edit-email " onClick={() => handleFieldClick(field.id)}>
//                                                                                 <img src={editicon} alt="copy" />
//                                                                             </button>
//                                                                             <button className='remove-btn' onClick={() => removeField(field.id)}>
//                                                                                 <img src={delete1} alt="delete" />
//                                                                             </button>
//                                                                             <button className="copy-btn" onClick={() => addInputField(field.type)}>
//                                                                                 <img src={maximizesize} alt="copy" />
//                                                                             </button>
//                                                                         </div>
//                                                                     </div>
//                                                                 );
//                                                             }

//                                                             if (field.type === 'split') {
//                                                                 const isImageUploaded = field.add === 'image' && field.value.startsWith('data:image');
//                                                                 return (
//                                                                     <div>
//                                                                         <div key={field.id} onClick={() => handleFieldClick(field.id)}
//                                                                             className={`email_field split-width ${activeFieldId === field.id ? 'active' : ''}`}

//                                                                             style={{
//                                                                                 width: field.width,
//                                                                                 backgroundColor: field.splitbg,
//                                                                                 padding: `${field.splitPadding}px`,
//                                                                                 height: `${field.splitheight}px`,
//                                                                                 textAlign: field.splitTextAlin,
//                                                                                 position: 'relative',
//                                                                                 display: 'flex'

//                                                                             }}
//                                                                         >
//                                                                             {field.add === 'image' ? (
//                                                                                 <img
//                                                                                     src={isImageUploaded ? field.value : imghd1}
//                                                                                     alt="Uploaded Preview"
//                                                                                     style={{ width: '100%', height: 'auto' }}
//                                                                                 />

//                                                                             ) : (
//                                                                                 <div style={{ width: '100%' }}>
//                                                                                     <div dangerouslySetInnerHTML={{ __html: field.value || 'Use this section to add reviews or testimonials from your stores happy customers Use this section to add reviews or testimonials from your stores happy customers ...' }} />
//                                                                                     {field.showbtnsplit && (
//                                                                                         <a href={field.splitbtnurl} target='_blank' onClick={(e) => e.preventDefault()}>
//                                                                                             <button style={{
//                                                                                                 backgroundColor: field.splitbtnbg,
//                                                                                                 fontSize: `${field.splitbtnfont}px`,
//                                                                                                 color: field.splitbtncolor,
//                                                                                                 height: `${field.splitbtnheight}px`,
//                                                                                                 width: `${field.splitbtnwidth}px`,
//                                                                                                 borderRadius: `${field.splitbtnradious}px`,
//                                                                                                 borderWidth: `${field.splitBorderWidth}px`,
//                                                                                                 borderStyle: field.splitBorderStyle,
//                                                                                                 borderColor: field.splitBorderColor,
//                                                                                             }}>
//                                                                                                 {field.splitbtn}</button>
//                                                                                         </a>
//                                                                                     )}
//                                                                                 </div>
//                                                                             )}

//                                                                             <div className='form-builder-radio-btn email'>
//                                                                                 <button className="copy-btn edit-email" onClick={() => handleFieldClick(field.id)}>
//                                                                                     <img src={editicon} alt="copy" />
//                                                                                 </button>
//                                                                                 <button className='remove-btn' onClick={() => removeField(field.id)}>
//                                                                                     <img src={delete1} alt="delete" />
//                                                                                 </button>
//                                                                                 <button className="copy-btn" onClick={() => addInputField(field.type)}>
//                                                                                     <img src={maximizesize} alt="copy" />
//                                                                                 </button>
//                                                                             </div>
//                                                                         </div>
//                                                                     </div>
//                                                                 );
//                                                             }
//                                                             if (field.type === 'richtext') {
//                                                                 return (
//                                                                     <div key={field.id} onClick={() => handleFieldClick(field.id)}
//                                                                         className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
//                                                                         style={{ display: 'flex' }}
//                                                                     >
//                                                                         <div style={{ width: '100%' }} >
//                                                                             <div style={{
//                                                                                 textAlign: field.richTextAlign || '',
//                                                                                 fontSize: `${field.richFontsize}px`,
//                                                                                 color: field.richtextcolor,
//                                                                                 backgroundColor: field.richbgcolor,
//                                                                                 paddingLeft: `${field.richleftPadding}px`,
//                                                                                 paddingRight: `${field.richleftPadding}px`,
//                                                                                 paddingTop: `${field.richtopPadding}px`,
//                                                                                 paddingBottom: `${field.richtopPadding}px`,
//                                                                             }}
//                                                                                 dangerouslySetInnerHTML={{ __html: editorValueed || field.content || 'Captivate customers with' }} />
//                                                                             <div className='form-builder-radio-btn email'>
//                                                                                 <button className="copy-btn edit-email " onClick={() => handleFieldClick(field.id)}>
//                                                                                     <img src={editicon} alt="copy" />
//                                                                                 </button>
//                                                                                 <button className='remove-btn' onClick={() => removeField(field.id)}>
//                                                                                     <img src={delete1} alt="delete" />
//                                                                                 </button>
//                                                                                 <button className="copy-btn" onClick={() => addInputField(field.type)}>
//                                                                                     <img src={maximizesize} alt="copy" />
//                                                                                 </button>
//                                                                             </div>
//                                                                         </div>
//                                                                     </div>
//                                                                 );
//                                                             }

//                                                             if (field.type === 'spacer') {
//                                                                 return (
//                                                                     <div key={field.id} onClick={() => handleFieldClick(field.id)}
//                                                                         className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
//                                                                         style={{ display: 'flex' }}
//                                                                         ref={emailFieldRef}
//                                                                     >
//                                                                         <div style={{ width: '100%' }}>
//                                                                             <div className='spacer-height-show' style={{ height: `${field.spacerHeight}px`, backgroundColor: field.spacerbg }}></div>
//                                                                         </div>
//                                                                         <div className='form-builder-radio-btn email'>
//                                                                             <button className="copy-btn edit-email" onClick={() => handleFieldClick(field.id)}>
//                                                                                 <img src={editicon} alt="copy" />
//                                                                             </button>
//                                                                             <button className='remove-btn' onClick={() => removeField(field.id)}>
//                                                                                 <img src={delete1} alt="delete" />
//                                                                             </button>
//                                                                             <button className="copy-btn" onClick={() => addInputField(field.type)}>
//                                                                                 <img src={maximizesize} alt="copy" />
//                                                                             </button>
//                                                                         </div>
//                                                                     </div>
//                                                                 );

//                                                             }
//                                                             if (field.type === 'video') {

//                                                                 return (
//                                                                     <div key={field.id} onClick={() => handleFieldClick(field.id)}
//                                                                         className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
//                                                                         style={{ display: 'flex' }}
//                                                                         ref={emailFieldRef}
//                                                                     >
//                                                                         <div className='email-tempalte-video-show' style={{ padding: `${field.videoPadding}px`, borderWidth: `${field.videoBorderWidth}px`, borderStyle: field.videoBorderStyle, borderColor: field.videoBorderColor }}>
//                                                                             {field.value && getVideoEmbedUrl(field.value) ? (
//                                                                                 <iframe
//                                                                                     height="250px"
//                                                                                     width="500px"
//                                                                                     src={getVideoEmbedUrl(field.value)}
//                                                                                     title="Video Preview"
//                                                                                     frameBorder="0"
//                                                                                     allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
//                                                                                     allowFullScreen
//                                                                                 ></iframe>) : (
//                                                                                 <div className='email-tempalte-img'>
//                                                                                     <img src={videoplay} alt="" />
//                                                                                 </div>
//                                                                             )}
//                                                                         </div>
//                                                                         <div className='form-builder-radio-btn email'>
//                                                                             <button className="copy-btn edit-email" onClick={() => handleFieldClick(field.id)}>
//                                                                                 <img src={editicon} alt="copy" />
//                                                                             </button>
//                                                                             <button className='remove-btn' onClick={() => removeField(field.id)}>
//                                                                                 <img src={delete1} alt="delete" />
//                                                                             </button>
//                                                                             <button className="copy-btn" onClick={() => addInputField(field.type)}>
//                                                                                 <img src={maximizesize} alt="copy" />
//                                                                             </button>
//                                                                         </div>

//                                                                     </div>
//                                                                 );
//                                                             }

//                                                             if (field.type === 'button') {
//                                                                 return (
//                                                                     <div key={field.id} onClick={() => handleFieldClick(field.id)}
//                                                                         className={`email_field leftbtn ${activeFieldId === field.id ? 'active' : ''}`}
//                                                                         style={{ display: 'flex' }}
//                                                                         ref={emailFieldRef}
//                                                                     >
//                                                                         <div style={{ width: '100%', backgroundColor: field.buttonbgColor }}>
//                                                                             <a href={field.buttonUrll}
//                                                                                 onClick={(event) => {
//                                                                                     event.preventDefault();
//                                                                                     console.log("Button clicked!");
//                                                                                 }}
//                                                                             >
//                                                                                 <button
//                                                                                     type="button"
//                                                                                     style={{
//                                                                                         fontSize: `${field.buttonFontSize}px`,
//                                                                                         color: field.buttonTextColor,
//                                                                                         backgroundColor: field.buttonColor,
//                                                                                         width: `${field.buttonWidth}px`,
//                                                                                         height: `${field.buttonHeight}px`,
//                                                                                         padding: `${field.buttonPadding}px`,
//                                                                                         borderWidth: `${field.buttonBorderWidth}px`,
//                                                                                         borderStyle: field.buttonBorderStyle,
//                                                                                         borderColor: field.buttonBorderColor,
//                                                                                         letterSpacing: `${field.buttonLetterSpacing}px`,
//                                                                                         borderRadius: `${field.buttonradious}px`
//                                                                                     }}
//                                                                                 >
//                                                                                     {field.buttonLabel}
//                                                                                 </button>
//                                                                             </a>
//                                                                         </div>

//                                                                         <div className='form-builder-radio-btn email'>
//                                                                             <button className="copy-btn edit-email" onClick={() => handleFieldClick(field.id)}>
//                                                                                 <img src={editicon} alt="copy" />
//                                                                             </button>
//                                                                             <button className='remove-btn' onClick={() => removeField(field.id)}>
//                                                                                 <img src={delete1} alt="delete" />
//                                                                             </button>
//                                                                             <button className="copy-btn" onClick={() => addInputField(field.type)}>
//                                                                                 <img src={maximizesize} alt="copy" />
//                                                                             </button>
//                                                                         </div>
//                                                                     </div>
//                                                                 );
//                                                             }

//                                                             if (field.type === 'html convert') {
//                                                                 return (
//                                                                     <div className="form-builder-and-preview">
//                                                                         <div key={field.id} onClick={() => handleFieldClick(field.id)}
//                                                                             className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
//                                                                             style={{ display: 'flex' }}
//                                                                             ref={emailFieldRef}
//                                                                         >
//                                                                             <div style={{ width: '100%' }}>
//                                                                                 <div style={{ color: field.htmlColor, fontSize: `${field.htmlFontSize}px`, padding: `${field.htmlPadding}px` }}
//                                                                                     className="preview-content"
//                                                                                     dangerouslySetInnerHTML={{ __html: field.value || field.htmltext }}
//                                                                                 />
//                                                                                 <div className='form-builder-radio-btn email'>
//                                                                                     <button className="copy-btn edit-email " onClick={() => handleFieldClick(field.id)}>
//                                                                                         <img src={editicon} alt="copy" />
//                                                                                     </button>
//                                                                                     <button className='remove-btn' onClick={() => removeField(field.id)}>
//                                                                                         <img src={delete1} alt="delete" />
//                                                                                     </button>
//                                                                                     <button className="copy-btn" onClick={() => addInputField(field.type)}>
//                                                                                         <img src={maximizesize} alt="copy" />
//                                                                                     </button>
//                                                                                 </div>
//                                                                             </div>
//                                                                         </div>
//                                                                     </div>
//                                                                 );
//                                                             }
//                                                             if (field.type === 'Multicolumn') {
//                                                                 return (
//                                                                     <div key={field.id}
//                                                                         onClick={() => handleFieldClick(field.id)}
//                                                                         className={`email_field columns-container ${activeFieldId === field.id ? 'active' : ''}`}
//                                                                     >
//                                                                         <div>
//                                                                             <div className="columns-wrapper" style={{ display: 'grid', gap: `${field.Multigap}px`, padding: `${field.MultiPadding}px`, gridTemplateColumns: `repeat(${field.columnsPerRow || `3`}, 1fr)`, backgroundColor: field.Multibgcolor }}>
//                                                                                 {Array.from({ length: field.columnCount }, (_, index) => (
//                                                                                     <div
//                                                                                         key={index}
//                                                                                         style={{
//                                                                                             fontSize: `${field.fontsizeMulticolumn}px`,
//                                                                                             borderWidth: `${field.MulticolumnbtnBorderWidth}px`,
//                                                                                             borderStyle: field.MulticolumnbtnBorderStyle,
//                                                                                             borderColor: field.MulticolumnbtnBorderColor,
//                                                                                             padding: `${field.MulticolumnPadding}px`,
//                                                                                             backgroundColor: field.Multicolumnbgcolor,
//                                                                                             textAlign: field.Multitext,
//                                                                                         }}
//                                                                                         className={`column ${field.selectedColumn === index ? 'active-column' : ''}`}
//                                                                                         onClick={(e) => handleColumnClick(field.id, index)}

//                                                                                     >
//                                                                                         {field.columnData[index].image && (
//                                                                                             <img
//                                                                                                 src={field.columnData[index].image}
//                                                                                                 alt={`Uploaded for Column ${index + 1}`}
//                                                                                                 style={{ width: '100%', height: 'auto' }}
//                                                                                             />
//                                                                                         )}

//                                                                                         {field.columnData[index].content ? (
//                                                                                             <div
//                                                                                                 dangerouslySetInnerHTML={{
//                                                                                                     __html: field.columnData[index].content,
//                                                                                                 }}
//                                                                                             />
//                                                                                         ) : (
//                                                                                             <div style={{ color: 'gray' }}>
//                                                                                                 <h2>Column</h2>
//                                                                                                 Elevate your online store with our easy-to-use Text Box feature.
//                                                                                                 It's a game-changer for personalization, allowing customers to add their
//                                                                                                 special touch directly from a user-friendly drop-down menu.
//                                                                                             </div>
//                                                                                         )}
//                                                                                        {field.showbtnmulti && (
//                                                                                             <a href={field.Multibtnurl} target='_blank' onClick={(e) => e.preventDefault()}>
//                                                                                                 <button style={{
//                                                                                                     backgroundColor: field.Multibtnbg,
//                                                                                                     borderWidth: `${field.MultibtnBorderWidth}px`,
//                                                                                                     borderStyle: field.MultibtnBorderStyle,
//                                                                                                     borderColor: field.MultibtnBorderColor,
//                                                                                                     width: `${field.Multibtnweight || '100'}px`,
//                                                                                                     height: `${field.Multibtnheight || '40'}px`,
//                                                                                                     color:field.Multibtncolor,
//                                                                                                     borderRadius:`${field.Multibtnradious}px`,
//                                                                                                     fontSize:`${field.Multibtnfont || '14'}px`
//                                                                                                 }}
//                                                                                                 >
//                                                                                                     {field.Multibtnlable || 'Click'}</button>
//                                                                                             </a>
//                                                                                         )}

//                                                                                     </div>
//                                                                                 ))}
//                                                                             </div>
//                                                                         </div>
//                                                                         <div className='form-builder-radio-btn email'>
//                                                                             <button className="copy-btn edit-email" onClick={() => handleFieldClick(field.id)}>
//                                                                                 <img src={editicon} alt="copy" />
//                                                                             </button>
//                                                                             <button className='remove-btn' onClick={() => removeField(field.id)}>
//                                                                                 <img src={delete1} alt="delete" />
//                                                                             </button>
//                                                                             <button className="copy-btn" onClick={() => addInputField(field.type)}>
//                                                                                 <img src={maximizesize} alt="copy" />
//                                                                             </button>
//                                                                         </div>

//                                                                     </div>
//                                                                 );
//                                                             }

//                                                             if (field.type === 'product' && field.products) {
//                                                                 return (
//                                                                     <div onClick={() => handleAddProductToSelected(field.id, field.title, field.image, field.products)}>
//                                                                         <div key={field.id} onClick={() => handleFieldClick(field.id)}
//                                                                             className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
//                                                                             style={{ display: 'flex' }}
//                                                                             ref={emailFieldRef}
//                                                                         >
//                                                                             <div className={`template-products ${productsPerRow ? `row-${productsPerRow}` : 'row-3'} ${viewMode === 'mobile' ? 'mobile' : ''}`}
//                                                                                 style={{
//                                                                                     padding: `${field.productPadding}px`,
//                                                                                     backgroundColor: field.productbg,
//                                                                                     borderWidth: `${field.productBorderWidth}px`,
//                                                                                     borderStyle: field.productBorderStyle,
//                                                                                     borderColor: field.productBorderColor,
//                                                                                     fontSize: `${field.productFontSize}px`,
//                                                                                     color: field.productTextColor,
//                                                                                     width: '100%'
//                                                                                 }}
//                                                                             >
//                                                                                 {field.products.map((product) => (
//                                                                                     <div className='product-show' key={product.id}>

//                                                                                         {product.image ? (
//                                                                                             <div className="images-gallery">
//                                                                                                 <img
//                                                                                                     src={product.image}
//                                                                                                     alt={product.images || 'Product Image'}
//                                                                                                     style={{ width: '150px', height: '150px', objectFit: 'cover' }}
//                                                                                                 />
//                                                                                             </div>
//                                                                                         ) : (
//                                                                                             <p>No image available</p>
//                                                                                         )}
//                                                                                         <div>
//                                                                                             <h4 style={{ letterSpacing: `${field.productLetterSpacing}px`, fontWeight: field.productWeight, }}>{product.title}</h4>
//                                                                                             {showPrice && product.price && (
//                                                                                                 <p style={{ fontWeight: field.productWeight, letterSpacing: `${field.productLetterSpacing}px` }}>
//                                                                                                     ${product.price}
//                                                                                                 </p>
//                                                                                             )}
//                                                                                         </div>

//                                                                                         {showbtnn && (
//                                                                                             <a href={`https://${shop}/admin/products?selectedView=all`} target="_blank" rel="noopener noreferrer">
//                                                                                                 <button
//                                                                                                     style={{
//                                                                                                         fontSize: `${field.productfontSize}px`,
//                                                                                                         width: `${field.productwidth}px`,
//                                                                                                         height: `${field.productheight}px`,
//                                                                                                         backgroundColor: field.productbackgroundColor,
//                                                                                                         borderWidth: `${field.productbtnBorderWidth}px`,
//                                                                                                         borderStyle: field.productbtnBorderStyle,
//                                                                                                         borderColor: field.productbtnBorderColor,
//                                                                                                         color: field.productbtnbg,
//                                                                                                         borderRadius: `${field.productradious}px`,
//                                                                                                     }}
//                                                                                                     className='show-bnt-prodcut'>{field.productLabel}</button>
//                                                                                             </a>
//                                                                                         )}
//                                                                                     </div>
//                                                                                 ))}
//                                                                             </div>
//                                                                             <div className='form-builder-radio-btn email'>
//                                                                                 <button className="copy-btn edit-email " onClick={() => handleFieldClick(field.id)}>
//                                                                                     <img src={editicon} alt="copy" />
//                                                                                 </button>
//                                                                                 <button className='remove-btn' onClick={() => removeField(field.id)}>
//                                                                                     <img src={delete1} alt="delete" />
//                                                                                 </button>
//                                                                                 <button className="copy-btn" onClick={() => addInputField(field.type)}>
//                                                                                     <img src={maximizesize} alt="copy" />
//                                                                                 </button>
//                                                                             </div>
//                                                                         </div>
//                                                                     </div>
//                                                                 );
//                                                             }

//                                                             if (field.type === 'socalicon') {
//                                                                 return (
//                                                                     <div onClick={() => handleEdit(field)}>
//                                                                         <div key={field.id} onClick={() => handleFieldClick(field.id)}
//                                                                             className={`email_field  ${activeFieldId === field.id ? 'active' : ''}`}
//                                                                             style={{ display: 'flex', width: '100%' }}
//                                                                             ref={emailFieldRef}

//                                                                         >
//                                                                             <div style={{ textAlign: field.socaliconTextAlign || '', backgroundColor: field.socalIconbg, padding: `${field.socalIconPadding}px`, width: '100%' }} >
//                                                                                 <div className="social-icons" style={{ gap: `${field.socalIcongap}px` }}>
//                                                                                     {field.icons.facebook && field.icons.facebook.url && !field.icons.facebook.isHidden && (
//                                                                                         <a href={field.icons.facebook.url} onClick={(e) => e.preventDefault()}>
//                                                                                             <img src={facebook} alt="" style={{ width: `${socalIconWidth}px`, height: `${socalIconHeight}px` }} />
//                                                                                         </a>
//                                                                                     )}
//                                                                                     {field.icons.twitter && field.icons.twitter.url && !field.icons.twitter.isHidden && (
//                                                                                         <a href={field.icons.twitter.url} onClick={(e) => e.preventDefault()}>
//                                                                                             <img src={twitter} alt="" style={{ width: `${socalIconWidth}px`, height: `${socalIconHeight}px` }} />
//                                                                                         </a>
//                                                                                     )}
//                                                                                     {field.icons.instagram && field.icons.instagram.url && !field.icons.instagram.isHidden && (
//                                                                                         <a href={field.icons.instagram.url} onClick={(e) => e.preventDefault()}>
//                                                                                             <img src={instagram} alt="" style={{ width: `${socalIconWidth}px`, height: `${socalIconHeight}px` }} />
//                                                                                         </a>
//                                                                                     )}
//                                                                                     {field.customIcons.map((icon, index) =>
//                                                                                         icon.url && !icon.isHidden ? (
//                                                                                             <a key={index} href={icon.url} target="_blank" rel="noopener noreferrer" onClick={(e) => e.preventDefault()}>
//                                                                                                 <img src={icon.src} alt={`Custom Icon ${index}`} style={{ width: `${field.socalIconWidth}px`, height: `${field.socalIconHeight}px` }} />
//                                                                                             </a>
//                                                                                         ) : null
//                                                                                     )}
//                                                                                 </div>
//                                                                             </div>
//                                                                             <div className='form-builder-radio-btn email'>
//                                                                                 <button className="copy-btn edit-email" onClick={() => handleFieldClick(field.id)}>
//                                                                                     <img src={editicon} alt="copy" />
//                                                                                 </button>
//                                                                                 <button className='remove-btn' onClick={() => removeField(field.id)}>
//                                                                                     <img src={delete1} alt="delete" />
//                                                                                 </button>
//                                                                                 <button className="copy-btn" onClick={() => addInputField(field.type)}>
//                                                                                     <img src={maximizesize} alt="copy" />
//                                                                                 </button>
//                                                                             </div>
//                                                                         </div>
//                                                                     </div>
//                                                                 )
//                                                             }
//                                                         })
//                                                     }

//                                                 </>
//                                             )}
//                                         </div>
//                                     </div>
//                                 </div>
//                                 {showFieldPro && (<div className='form-builder-change-pro email'>

//                                     <div className='email-template-input-setting'>

//                                         {emailFieldPopup && (<div className='form-builder-change-propertites email camp' ref={popupRef}>
//                                             <div className='controls-wrpping cancleimg pro email' onClick={hanldeCanclepro}><img src={cancleimg} alt="" /></div>
//                                             <div className='form-builder-change_show_all'>
//                                                 <div className='form_qucik'>
//                                                     <p>Quick setup Settings</p>
//                                                 </div>
//                                                 <div className='form_build_propertities'>

//                                                     {fields.length > 0 && selectedFieldId && (
//                                                         <div className='quick-setup-settings'>
//                                                             {fields.map((field) => {
//                                                                 if (field.id === selectedFieldId && field.type === 'Multicolumn') {
//                                                                     return (
//                                                                         <div>
//                                                                             <div key={field.id} className='column-settings'>

//                                                                                 {Array.from({ length: field.columnCount }, (_, index) => (
//                                                                                     <div key={index} className="column-setting">
//                                                                                         <div className=' form-builder-chaneging-wrap column-settings-show-apps'>
//                                                                                             <label>Column {index + 1}</label>
//                                                                                             <button className='rm-btn dl'
//                                                                                                 onClick={() => removeColumn(field.id, index)}

//                                                                                             >
//                                                                                                 <img src={dlrm} alt="" />
//                                                                                             </button>
//                                                                                         </div>
//                                                                                         <ReactQuill
//                                                                                             value={field.columnData[index].content || ''}
//                                                                                             onChange={(value) => {
//                                                                                                 const updatedFields = fields.map(f =>
//                                                                                                     f.id === field.id
//                                                                                                         ? {
//                                                                                                             ...f,
//                                                                                                             columnData: f.columnData.map((col, i) =>
//                                                                                                                 i === index ? { ...col, content: value } : col
//                                                                                                             ),
//                                                                                                         }
//                                                                                                         : f
//                                                                                                 );
//                                                                                                 setFields(updatedFields);
//                                                                                             }}
//                                                                                             modules={{ toolbar: toolbarOptions }}
//                                                                                         />

//                                                                                         <div className='form-builder-chaneging-wrap file'>
//                                                                                             <input
//                                                                                                 type="file"
//                                                                                                 accept="image/*"
//                                                                                                 onChange={(e) => handleImageChange1(e, field.id, index)}
//                                                                                             />
//                                                                                         </div>
//                                                                                         {field.columnData[index].image ? (
//                                                                                             <div className='form-builder-chaneging-wrap images-upload'>
//                                                                                                 <img
//                                                                                                     src={field.columnData[index].image}
//                                                                                                     alt={`Preview for Column ${index + 1}`}

//                                                                                                 />
//                                                                                                 <button
//                                                                                                     className='rm-btn remove-coloum'
//                                                                                                     onClick={() => removeImage(field.id, index)}
//                                                                                                 >
//                                                                                                     <img src={bk} alt="" />
//                                                                                                 </button>

//                                                                                             </div>
//                                                                                         ) : null}

//                                                                                     </div>
//                                                                                 ))}
//                                                                                 <button className='rm-btn' onClick={() => addColumn(field.id)}
//                                                                                 >Add Column</button>
//                                                                             </div>
//                                                                             <div className="product-detalis-all">
//                                                                                 <h3>Coloum layout</h3>
//                                                                                 <div className="form-builder-chaneging-wrap select">
//                                                                                     <select onChange={(e) => handleColoumPerRowChange(e, field.id)} value={field.columnsPerRow || '3'}>
//                                                                                         {[...Array(6).keys()].map((i) => (
//                                                                                             <option key={i + 1} value={i + 1}>
//                                                                                                 {i + 1} per row
//                                                                                             </option>
//                                                                                         ))}
//                                                                                     </select>
//                                                                                 </div>
//                                                                             </div>
//                                                                             <div className='product-detalis-all btn-split'>
//                                                                                 <h3>Add Button</h3>
//                                                                                 <label className="custom-checkbox">
//                                                                                     <input
//                                                                                         type="checkbox"
//                                                                                         checked={field.showbtnmulti || false} 
//                                                                                         onChange={() => togglemulti(field.id)} 
//                                                                                     />
//                                                                                     Button
//                                                                                 </label>
//                                                                                 <div className='form-builder-chaneging-wrap number'>
//                                                                                     <label>Button Lable</label>
//                                                                                     <input
//                                                                                         type="text"
//                                                                                         value={field.Multibtnlable || 'Click'}
//                                                                                         onChange={(e) => {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, Multibtnlable: e.target.value } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }}
//                                                                                         placeholder="Coloum-Gap"
//                                                                                     />
//                                                                                 </div>
//                                                                                 <div className='form-builder-chaneging-wrap number'>
//                                                                                     <label>Button Url</label>
//                                                                                     <input
//                                                                                         type="text"
//                                                                                         value={field.Multibtnurl}
//                                                                                         onChange={(e) => {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, Multibtnurl: e.target.value } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }}
//                                                                                         placeholder="Button Url"
//                                                                                     />
//                                                                                 </div>
//                                                                                 <div className='form-builder-chaneging-wrap color'>
//                                                                                     <div className='checkbox-option bg-colors'>
//                                                                                         <label> Color</label>
//                                                                                         <div className="color-picker-container">
//                                                                                             <span className="color-code">{field.Multibtncolor || '#FFFFFF'}</span>
//                                                                                             <input
//                                                                                                 type="color"
//                                                                                                 value={field.Multibtncolor || '#FFFFFF'}
//                                                                                                 onChange={(e) => {
//                                                                                                     setFields(prevFields =>
//                                                                                                         prevFields.map(f =>
//                                                                                                             f.id === field.id ? { ...f, Multibtncolor: e.target.value } : f
//                                                                                                         )
//                                                                                                     );
//                                                                                                 }}
//                                                                                             />
//                                                                                         </div>
//                                                                                     </div>
//                                                                                 </div>
//                                                                                 <div className='form-builder-chaneging-wrap number' >
//                                                                                     <label> Border Radious (px)</label>
//                                                                                     <input
//                                                                                         type="number"
//                                                                                         value={field.Multibtnradious || '2'}
//                                                                                         onChange={(e) => {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, Multibtnradious: e.target.value } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }}
//                                                                                     />
//                                                                                 </div>
//                                                                                 <div className='form-builder-chaneging-wrap number' >
//                                                                                     <label> Font Size (px)</label>
//                                                                                     <input
//                                                                                         type="number"
//                                                                                         value={field.Multibtnfont || '14'}
//                                                                                         onChange={(e) => {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, Multibtnfont: e.target.value } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }}
//                                                                                     />
//                                                                                 </div>
//                                                                                 <div className='form-builder-chaneging-wrap number' >
//                                                                                     <label> Height (px)</label>
//                                                                                     <input
//                                                                                         type="number"
//                                                                                         value={field.Multibtnheight || '40'}
//                                                                                         onChange={(e) => {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, Multibtnheight: e.target.value } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }}
//                                                                                     />
//                                                                                 </div>
//                                                                                 <div className='form-builder-chaneging-wrap number' >
//                                                                                     <label> Width (px)</label>
//                                                                                     <input
//                                                                                         type="number"
//                                                                                         value={field.Multibtnweight || '100'}
//                                                                                         onChange={(e) => {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, Multibtnweight: e.target.value } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }}
//                                                                                     />
//                                                                                 </div>
//                                                                                 <div className='form-builder-chaneging-wrap color'>
//                                                                                     <div className='checkbox-option bg-colors'>
//                                                                                         <label>Background Color</label>
//                                                                                         <div className="color-picker-container">
//                                                                                             <span className="color-code">{field.Multibtnbg || '#FFFFFF'}</span>
//                                                                                             <input
//                                                                                                 type="color"
//                                                                                                 value={field.Multibtnbg || '#FFFFFF'}
//                                                                                                 onChange={(e) => {
//                                                                                                     setFields(prevFields =>
//                                                                                                         prevFields.map(f =>
//                                                                                                             f.id === field.id ? { ...f, Multibtnbg: e.target.value } : f
//                                                                                                         )
//                                                                                                     );
//                                                                                                 }}
//                                                                                             />
//                                                                                         </div>
//                                                                                     </div>
//                                                                                 </div>
//                                                                                 <div className='form-builder-chaneging-wrap color'>
//                                                                                     <div className='checkbox-option bg-colors'>
//                                                                                         <label>Border Color</label>
//                                                                                         <div className="color-picker-container">
//                                                                                             <span className="color-code">{field.MultibtnBorderColor || '#FFFFFF'}</span>
//                                                                                             <input
//                                                                                                 type="color"
//                                                                                                 value={field.MultibtnBorderColor || '#FFFFFF'}
//                                                                                                 onChange={(e) => {
//                                                                                                     setFields(prevFields =>
//                                                                                                         prevFields.map(f =>
//                                                                                                             f.id === field.id ? { ...f, MultibtnBorderColor: e.target.value } : f
//                                                                                                         )
//                                                                                                     );
//                                                                                                 }}
//                                                                                             />
//                                                                                         </div>
//                                                                                     </div>
//                                                                                 </div>

//                                                                                 <div className='form-builder-chaneging-wrap number' >
//                                                                                     <label>Border Width (px)</label>
//                                                                                     <input
//                                                                                         type="number"
//                                                                                         value={field.MultibtnBorderWidth || '1'}
//                                                                                         onChange={(e) => {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, MultibtnBorderWidth: e.target.value } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }}
//                                                                                     />
//                                                                                 </div>
//                                                                                 <div className='form-builder-chaneging-wrap'>
//                                                                                     <label>Border Style</label>
//                                                                                     <select
//                                                                                         value={field.MultibtnBorderStyle}
//                                                                                         onChange={(e) => {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, MultibtnBorderStyle: e.target.value } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }}
//                                                                                     >
//                                                                                         <option value="solid">Solid</option>
//                                                                                         <option value="dashed">Dashed</option>
//                                                                                         <option value="dotted">Dotted</option>
//                                                                                     </select>
//                                                                                 </div>
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap color'>
//                                                                                 <div className='checkbox-option bg-colors'>
//                                                                                     <label>Background Color</label>
//                                                                                     <div className="color-picker-container">
//                                                                                         <span className="color-code">{field.Multibgcolor || '#FFFFFF'}</span>
//                                                                                         <input
//                                                                                             type="color"
//                                                                                             value={field.Multibgcolor || '#FFFFFF'}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, Multibgcolor: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                         />
//                                                                                     </div>
//                                                                                 </div>
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number' >
//                                                                                 <label> Padding (px)</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.MultiPadding}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, MultiPadding: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap color'>
//                                                                                 <div className='checkbox-option bg-colors'>
//                                                                                     <label>Background Color Coloum</label>
//                                                                                     <div className="color-picker-container">
//                                                                                         <span className="color-code">{field.Multicolumnbgcolor || '#FFFFFF'}</span>
//                                                                                         <input
//                                                                                             type="color"
//                                                                                             value={field.Multicolumnbgcolor || '#FFFFFF'}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, Multicolumnbgcolor: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                         />
//                                                                                     </div>
//                                                                                 </div>
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap'>
//                                                                                 <label>Text Align </label>
//                                                                                 <select
//                                                                                     value={field.Multitext}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, Multitext: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 >
//                                                                                     <option value="">Select text align</option>
//                                                                                     <option value="left">left</option>
//                                                                                     <option value="center">center</option>
//                                                                                     <option value="right">right</option>
//                                                                                 </select>
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number' >
//                                                                                 <label> Coloum Padding (px)</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.MulticolumnPadding}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, MulticolumnPadding: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label>Coloum Gap</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.Multigap}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, Multigap: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                     placeholder="Coloum-Gap"
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label>Font-Size</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.fontsizeMulticolumn}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, fontsizeMulticolumn: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                     placeholder="Font-Size"
//                                                                                 />
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap color'>
//                                                                                 <div className='checkbox-option bg-colors'>
//                                                                                     <label>Border Color</label>
//                                                                                     <div className="color-picker-container">
//                                                                                         <span className="color-code">{field.MulticolumnbtnBorderColor || '#FFFFFF'}</span>
//                                                                                         <input
//                                                                                             type="color"
//                                                                                             value={field.MulticolumnbtnBorderColor || '#FFFFFF'}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, MulticolumnbtnBorderColor: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                         />
//                                                                                     </div>
//                                                                                 </div>
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap number' >
//                                                                                 <label>Border Width (px)</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.MulticolumnbtnBorderWidth}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, MulticolumnbtnBorderWidth: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap'>
//                                                                                 <label>Border Style</label>
//                                                                                 <select
//                                                                                     value={field.MulticolumnbtnBorderStyle}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, MulticolumnbtnBorderStyle: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 >
//                                                                                     <option value="solid">Solid</option>
//                                                                                     <option value="dashed">Dashed</option>
//                                                                                     <option value="dotted">Dotted</option>
//                                                                                 </select>
//                                                                             </div>
//                                                                         </div>
//                                                                     );
//                                                                 }
//                                                                 if (field.id === selectedFieldId && field.type === 'richtext') {
//                                                                     return (
//                                                                         <div>
//                                                                             <div >
//                                                                                 <ReactQuill
//                                                                                     value={editorValueed || field.content || 'Captivate customers with'}
//                                                                                     onChange={(value) => handleEditChange(value, field.id)}
//                                                                                     modules={{ toolbar: toolbarOptions }}
//                                                                                 />

//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label>Button Padding (px)</label>
//                                                                                 <div className='form-builder-chanege-top-bottom'>
//                                                                                     <label> Left & Right</label>
//                                                                                     <input
//                                                                                         type="number"
//                                                                                         value={field.richleftPadding}
//                                                                                         onChange={(e) => {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, richleftPadding: e.target.value } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }}
//                                                                                         placeholder="Padding"
//                                                                                     />
//                                                                                 </div>
//                                                                                 <div className='form-builder-chanege-top-bottom'>

//                                                                                     <label> Top & Bottom </label>
//                                                                                     <input
//                                                                                         type="number"
//                                                                                         value={field.richtopPadding}
//                                                                                         onChange={(e) => {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, richtopPadding: e.target.value } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }}
//                                                                                         placeholder="Padding"
//                                                                                     />
//                                                                                 </div>
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap color'>
//                                                                                 <div className='checkbox-option bg-colors'>
//                                                                                     <label>Background Color</label>
//                                                                                     <div className="color-picker-container">
//                                                                                         <span className="color-code">{field.richbgcolor}</span>
//                                                                                         <input
//                                                                                             type="color"
//                                                                                             value={field.richbgcolor}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, richbgcolor: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                         />
//                                                                                     </div>
//                                                                                 </div>
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap color'>
//                                                                                 <div className='checkbox-option bg-colors'>
//                                                                                     <label>Color</label>
//                                                                                     <div className="color-picker-container">
//                                                                                         <span className="color-code">{field.richtextcolor}</span>
//                                                                                         <input
//                                                                                             type="color"
//                                                                                             value={field.richtextcolor}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, richtextcolor: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                         />
//                                                                                     </div>
//                                                                                 </div>
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label>Font Size (px)</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.richFontsize}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, richFontsize: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap'>
//                                                                                 <label>Text Align </label>
//                                                                                 <select
//                                                                                     value={field.richTextAlign}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, richTextAlign: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 >
//                                                                                     <option value="">Select text align</option>
//                                                                                     <option value="left">left</option>
//                                                                                     <option value="center">center</option>
//                                                                                     <option value="right">right</option>
//                                                                                 </select>
//                                                                             </div>
//                                                                         </div>
//                                                                     )
//                                                                 }
//                                                                 if (field.id === selectedFieldId && field.type === 'product') {
//                                                                     return (
//                                                                         <div>

//                                                                             <div>
//                                                                                 <div className="show-select-product">
//                                                                                     <h3>Products</h3>
//                                                                                     {productTitles.length > 0 ? (
//                                                                                         productTitles.map((title, index) => (
//                                                                                             <div className='show-product-details' key={index}>
//                                                                                                 <div style={{ display: 'flex', alignItems: 'center' }}>
//                                                                                                     {productImage[index] && (
//                                                                                                         <img
//                                                                                                             src={productImage[index]}
//                                                                                                             alt={title}
//                                                                                                             style={{ width: '50px', height: '50px', objectFit: 'cover', marginRight: '10px' }}
//                                                                                                         />
//                                                                                                     )}
//                                                                                                     <h4>{title.length > 35 ? title.slice(0, 35) + '...' : title}</h4>
//                                                                                                 </div>
//                                                                                                 <div style={{ cursor: "pointer" }} onClick={() => handleRemoveProductFromForm(index)}>
//                                                                                                     <img src={deletep} alt="" style={{ width: '70%' }} />
//                                                                                                 </div>
//                                                                                             </div>
//                                                                                         ))
//                                                                                     ) : (
//                                                                                         <p>No products selected</p>
//                                                                                     )}

//                                                                                     <button className='product-btn-addproduct' onClick={AddProduct}>Add Product</button>
//                                                                                 </div>
//                                                                             </div>
//                                                                             <div className='product-detalis-all'>
//                                                                                 <h3>Product details</h3>
//                                                                                 <label className="custom-checkbox">
//                                                                                     <input
//                                                                                         type="checkbox"
//                                                                                         checked={showPrice}
//                                                                                         onChange={togglePrice}
//                                                                                     />
//                                                                                     Price
//                                                                                 </label>
//                                                                                 <label className="custom-checkbox">
//                                                                                     <input
//                                                                                         type="checkbox"
//                                                                                         checked={showbtnn}
//                                                                                         onChange={togglebtnn}
//                                                                                     />
//                                                                                     Button
//                                                                                 </label>
//                                                                             </div>
//                                                                             <div className="product-detalis-all">
//                                                                                 <h3>Product layout</h3>
//                                                                                 <div className='form-builder-chaneging-wrap select'>
//                                                                                     <select onChange={handleProductsPerRowChange} defaultValue={3}>
//                                                                                         {[...Array(6).keys()].map(i => (
//                                                                                             <option key={i + 1} value={i + 1}>{i + 1} per row</option>
//                                                                                         ))}
//                                                                                     </select>
//                                                                                 </div>

//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number' >
//                                                                                 <label>Padding (px)</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.productPadding}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, productPadding: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap color'>
//                                                                                 <div className='checkbox-option bg-colors'>
//                                                                                     <label> Background Color</label>
//                                                                                     <div className="color-picker-container">
//                                                                                         <span className="color-code">{field.productbg || '#FFFFFF'}</span>
//                                                                                         <input
//                                                                                             type="color"
//                                                                                             value={field.productbg || '#FFFFFF'}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, productbg: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                         />
//                                                                                     </div>
//                                                                                 </div>
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap color'>
//                                                                                 <div className='checkbox-option bg-colors'>
//                                                                                     <label>Border Color</label>
//                                                                                     <div className="color-picker-container">
//                                                                                         <span className="color-code">{field.productBorderColor}</span>
//                                                                                         <input
//                                                                                             type="color"
//                                                                                             value={field.productBorderColor}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, productBorderColor: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                         />
//                                                                                     </div>
//                                                                                 </div>
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap number' >
//                                                                                 <label>Border Width (px)</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.productBorderWidth}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, productBorderWidth: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap'>
//                                                                                 <label>Border Style</label>
//                                                                                 <select
//                                                                                     value={field.productBorderStyle}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, productBorderStyle: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 >
//                                                                                     <option value="solid">Solid</option>
//                                                                                     <option value="dashed">Dashed</option>
//                                                                                     <option value="dotted">Dotted</option>
//                                                                                 </select>
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label>Font Size (px)</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.productFontSize}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, productFontSize: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap color'>
//                                                                                 <div className='checkbox-option bg-colors'>
//                                                                                     <label> Color</label>
//                                                                                     <div className="color-picker-container">
//                                                                                         <span className="color-code">{field.productTextColor}</span>
//                                                                                         <input
//                                                                                             type="color"
//                                                                                             value={field.productTextColor}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, productTextColor: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                         />
//                                                                                     </div>
//                                                                                 </div>
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label> Font-Weight</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.productWeight}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, productWeight: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}

//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label> Letter Spacing</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.productLetterSpacing}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, productLetterSpacing: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                     placeholder="Letter Spacing"
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap all-btn'>
//                                                                                 <label> Button</label>
//                                                                                 <div className='form-builder-chaneging-wrap'>
//                                                                                     <label>Button Label</label>
//                                                                                     <input
//                                                                                         type="text"
//                                                                                         value={field.productLabel}
//                                                                                         onChange={(e) => {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, productLabel: e.target.value } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }}
//                                                                                     />
//                                                                                 </div>
//                                                                                 <div className='form-builder-chaneging-wrap number'>
//                                                                                     <label>Font Size (px)</label>
//                                                                                     <input
//                                                                                         type="number"
//                                                                                         value={field.productfontSize}
//                                                                                         onChange={(e) => {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, productfontSize: e.target.value } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }}
//                                                                                     />
//                                                                                 </div>
//                                                                                 <div className='form-builder-chaneging-wrap number'>
//                                                                                     <label>Width (px)</label>
//                                                                                     <input
//                                                                                         type="number"
//                                                                                         value={field.productwidth}
//                                                                                         onChange={(e) => {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, productwidth: e.target.value } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }}
//                                                                                     />
//                                                                                 </div>

//                                                                                 <div className='form-builder-chaneging-wrap number'>
//                                                                                     <label>Height (px)</label>
//                                                                                     <input
//                                                                                         type="number"
//                                                                                         value={field.productheight}
//                                                                                         onChange={(e) => {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, productheight: e.target.value } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }}
//                                                                                     />
//                                                                                 </div>

//                                                                                 <div className='form-builder-chaneging-wrap color'>
//                                                                                     <div className='checkbox-option bg-colors'>
//                                                                                         <label>Background Color</label>
//                                                                                         <div className="color-picker-container">
//                                                                                             <span className="color-code">{field.productbackgroundColor}</span>
//                                                                                             <input
//                                                                                                 type="color"
//                                                                                                 value={field.productbackgroundColor}
//                                                                                                 onChange={(e) => {
//                                                                                                     setFields(prevFields =>
//                                                                                                         prevFields.map(f =>
//                                                                                                             f.id === field.id ? { ...f, productbackgroundColor: e.target.value } : f
//                                                                                                         )
//                                                                                                     );
//                                                                                                 }}
//                                                                                             />
//                                                                                         </div>
//                                                                                     </div>
//                                                                                 </div>
//                                                                                 <div className='form-builder-chaneging-wrap color'>
//                                                                                     <div className='checkbox-option bg-colors'>
//                                                                                         <label>Border Color</label>
//                                                                                         <div className="color-picker-container">
//                                                                                             <span className="color-code">{field.productbtnBorderColor}</span>
//                                                                                             <input
//                                                                                                 type="color"
//                                                                                                 value={field.productbtnBorderColor}
//                                                                                                 onChange={(e) => {
//                                                                                                     setFields(prevFields =>
//                                                                                                         prevFields.map(f =>
//                                                                                                             f.id === field.id ? { ...f, productbtnBorderColor: e.target.value } : f
//                                                                                                         )
//                                                                                                     );
//                                                                                                 }}
//                                                                                             />
//                                                                                         </div>
//                                                                                     </div>
//                                                                                 </div>

//                                                                                 <div className='form-builder-chaneging-wrap number' >
//                                                                                     <label>Border Width (px)</label>
//                                                                                     <input
//                                                                                         type="number"
//                                                                                         value={field.productbtnBorderWidth}
//                                                                                         onChange={(e) => {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, productbtnBorderWidth: e.target.value } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }}
//                                                                                     />
//                                                                                 </div>
//                                                                                 <div className='form-builder-chaneging-wrap'>
//                                                                                     <label>Border Style</label>
//                                                                                     <select
//                                                                                         value={field.productbtnBorderStyle}
//                                                                                         onChange={(e) => {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, productbtnBorderStyle: e.target.value } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }}
//                                                                                     >
//                                                                                         <option value="solid">Solid</option>
//                                                                                         <option value="dashed">Dashed</option>
//                                                                                         <option value="dotted">Dotted</option>
//                                                                                     </select>
//                                                                                 </div>

//                                                                                 <div className='form-builder-chaneging-wrap color'>
//                                                                                     <div className='checkbox-option bg-colors'>
//                                                                                         <label> Color</label>
//                                                                                         <div className="color-picker-container">
//                                                                                             <span className="color-code">{field.productbtnbg || '#ffffff'}</span>
//                                                                                             <input
//                                                                                                 type="color"
//                                                                                                 value={field.productbtnbg || '#ffffff'}
//                                                                                                 onChange={(e) => {
//                                                                                                     setFields(prevFields =>
//                                                                                                         prevFields.map(f =>
//                                                                                                             f.id === field.id ? { ...f, productbtnbg: e.target.value } : f
//                                                                                                         )
//                                                                                                     );
//                                                                                                 }}
//                                                                                             />
//                                                                                         </div>
//                                                                                     </div>
//                                                                                 </div>
//                                                                                 <div className='form-builder-chaneging-wrap number'>
//                                                                                     <label>Border-Radious</label>
//                                                                                     <input
//                                                                                         type="number"
//                                                                                         value={field.productradious || '#ffffff'}
//                                                                                         onChange={(e) => {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, productradious: e.target.value } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }}
//                                                                                     />
//                                                                                 </div>
//                                                                             </div>

//                                                                         </div>
//                                                                     )
//                                                                 }
//                                                                 if (field.id === selectedFieldId && field.type === 'heading') {
//                                                                     return (
//                                                                         <div key={field.id}>
//                                                                             <div className='form-builder-chaneging-wrap'>
//                                                                                 <label>Heading Text:</label>
//                                                                                 <input
//                                                                                     type="text"
//                                                                                     value={field.headingText || field.value}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, headingText: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                     placeholder="Enter Heading Text"
//                                                                                 />
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap'>
//                                                                                 <label>Heading Level:</label>
//                                                                                 <select
//                                                                                     value={field.headingLevel}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, headingLevel: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 >
//                                                                                     <option value="h1">H1</option>
//                                                                                     <option value="h2">H2</option>
//                                                                                     <option value="h3">H3</option>
//                                                                                     <option value="h4">H4</option>
//                                                                                     <option value="h5">H5</option>
//                                                                                     <option value="h6">H6</option>
//                                                                                 </select>
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label>Heading Font Size:</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.headingFontSize}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, headingFontSize: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                     placeholder="Font Size"
//                                                                                 />
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap color'>
//                                                                                 <div className='checkbox-option bg-colors'>
//                                                                                     <label> Color</label>
//                                                                                     <div className="color-picker-container">
//                                                                                         <span className="color-code">{field.headingColor}</span>
//                                                                                         <input
//                                                                                             type="color"
//                                                                                             value={field.headingColor}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, headingColor: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                         />
//                                                                                     </div>
//                                                                                 </div>
//                                                                             </div>

//                                                                             <div className="form-builder-chaneging-wrap">
//                                                                                 <label> Subheading</label>
//                                                                                 <ReactQuill
//                                                                                     value={editorValue || field.editorContent || 'Its a numbers game'}
//                                                                                     onChange={(value) => handleEditorChange(value, field.id)}
//                                                                                     modules={{ toolbar: toolbarOptions }}
//                                                                                 />

//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label> Subheading Font-Size</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.headingsubheading}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, headingsubheading: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                     placeholder="Padding"
//                                                                                 />
//                                                                             </div>
//                                                                             <div className="form-builder-changing-wrap url">

//                                                                                 <>
//                                                                                     <label>Button Url:</label>
//                                                                                     <input
//                                                                                         type="url"
//                                                                                         value={field.headingUrl}
//                                                                                         onChange={(e) => handleUpdateUrl(field.id, e.target.value)}
//                                                                                         placeholder="Update URL"
//                                                                                     />

//                                                                                     <div className='form-builder-chaneging-wrap'>
//                                                                                         <label>Button Label</label>
//                                                                                         <input
//                                                                                             type="text"
//                                                                                             value={field.headerbtn}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, headerbtn: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                         />
//                                                                                     </div>
//                                                                                     <div className='form-builder-chaneging-wrap color'>
//                                                                                         <div className='checkbox-option bg-colors'>
//                                                                                             <label>Button Background</label>
//                                                                                             <div className="color-picker-container">
//                                                                                                 <span className="color-code">{field.headerbtnbg}</span>
//                                                                                                 <input
//                                                                                                     type="color"
//                                                                                                     value={field.headerbtnbg}
//                                                                                                     onChange={(e) => {
//                                                                                                         setFields(prevFields =>
//                                                                                                             prevFields.map(f =>
//                                                                                                                 f.id === field.id ? { ...f, headerbtnbg: e.target.value } : f
//                                                                                                             )
//                                                                                                         );
//                                                                                                     }}
//                                                                                                 />
//                                                                                             </div>
//                                                                                         </div>
//                                                                                     </div>
//                                                                                     <div className='form-builder-chaneging-wrap color'>
//                                                                                         <div className='checkbox-option bg-colors'>
//                                                                                             <label>Border Color</label>
//                                                                                             <div className="color-picker-container">
//                                                                                                 <span className="color-code">{field.headingbtnBorderColor}</span>
//                                                                                                 <input
//                                                                                                     type="color"
//                                                                                                     value={field.headingbtnBorderColor}
//                                                                                                     onChange={(e) => {
//                                                                                                         setFields(prevFields =>
//                                                                                                             prevFields.map(f =>
//                                                                                                                 f.id === field.id ? { ...f, headingbtnBorderColor: e.target.value } : f
//                                                                                                             )
//                                                                                                         );
//                                                                                                     }}
//                                                                                                 />
//                                                                                             </div>
//                                                                                         </div>
//                                                                                     </div>
//                                                                                     <div className='form-builder-chaneging-wrap number' >
//                                                                                         <label>Border Width (px)</label>
//                                                                                         <input
//                                                                                             type="number"
//                                                                                             value={field.headingbtnBorderWidth}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, headingbtnBorderWidth: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                         />
//                                                                                     </div>
//                                                                                     <div className='form-builder-chaneging-wrap'>
//                                                                                         <label>Border Style</label>
//                                                                                         <select
//                                                                                             value={field.headingbtnBorderStyle}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, headingbtnBorderStyle: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                         >
//                                                                                             <option value="solid">Solid</option>
//                                                                                             <option value="dashed">Dashed</option>
//                                                                                             <option value="dotted">Dotted</option>
//                                                                                         </select>
//                                                                                     </div>

//                                                                                     <div className='form-builder-chaneging-wrap color'>
//                                                                                         <div className='checkbox-option bg-colors'>
//                                                                                             <label>Button Color</label>
//                                                                                             <div className="color-picker-container">
//                                                                                                 <span className="color-code">{field.headerbtncolor}</span>
//                                                                                                 <input
//                                                                                                     type="color"
//                                                                                                     value={field.headerbtncolor}
//                                                                                                     onChange={(e) => {
//                                                                                                         setFields(prevFields =>
//                                                                                                             prevFields.map(f =>
//                                                                                                                 f.id === field.id ? { ...f, headerbtncolor: e.target.value } : f
//                                                                                                             )
//                                                                                                         );
//                                                                                                     }}
//                                                                                                 />
//                                                                                             </div>
//                                                                                         </div>
//                                                                                     </div>
//                                                                                     <div className='form-builder-chaneging-wrap number'>
//                                                                                         <label>Button Padding (px)</label>
//                                                                                         <div className='form-builder-chanege-top-bottom'>
//                                                                                             <label> Left & Right</label>
//                                                                                             <input
//                                                                                                 type="number"
//                                                                                                 value={field.headingbtnPadding}
//                                                                                                 onChange={(e) => {
//                                                                                                     setFields(prevFields =>
//                                                                                                         prevFields.map(f =>
//                                                                                                             f.id === field.id ? { ...f, headingbtnPadding: e.target.value } : f
//                                                                                                         )
//                                                                                                     );
//                                                                                                 }}
//                                                                                                 placeholder="Padding"
//                                                                                             />
//                                                                                         </div>
//                                                                                         <div className='form-builder-chanege-top-bottom'>

//                                                                                             <label> Top & Bottom </label>
//                                                                                             <input
//                                                                                                 type="number"
//                                                                                                 value={field.headingbtntopPadding}
//                                                                                                 onChange={(e) => {
//                                                                                                     setFields(prevFields =>
//                                                                                                         prevFields.map(f =>
//                                                                                                             f.id === field.id ? { ...f, headingbtntopPadding: e.target.value } : f
//                                                                                                         )
//                                                                                                     );
//                                                                                                 }}
//                                                                                                 placeholder="Padding"
//                                                                                             />
//                                                                                         </div>
//                                                                                     </div>
//                                                                                     <div className='form-builder-chaneging-wrap number'>
//                                                                                         <label>Button Radious</label>
//                                                                                         <input
//                                                                                             type="number"
//                                                                                             value={field.headingbtnradious}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, headingbtnradious: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                             placeholder="Padding"
//                                                                                         />
//                                                                                     </div>
//                                                                                     <div className='form-builder-chaneging-wrap number'>
//                                                                                         <label>Button Height</label>
//                                                                                         <input
//                                                                                             type="number"
//                                                                                             value={field.headingbtnheight}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, headingbtnheight: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                             placeholder="Padding"
//                                                                                         />
//                                                                                     </div>
//                                                                                     <div className='form-builder-chaneging-wrap number'>
//                                                                                         <label>Button Width</label>
//                                                                                         <input
//                                                                                             type="number"
//                                                                                             value={field.headingbtnwidth}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, headingbtnwidth: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                             placeholder="Padding"
//                                                                                         />
//                                                                                     </div>

//                                                                                     <div className='form-builder-chaneging-wrap number'>
//                                                                                         <label>Button Font-Size</label>
//                                                                                         <input
//                                                                                             type="number"
//                                                                                             value={field.headingbtnFontSize}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, headingbtnFontSize: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                             placeholder="Padding"
//                                                                                         />
//                                                                                     </div>

//                                                                                 </>
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap image'>
//                                                                                 <label>Background Image</label>
//                                                                                 <input
//                                                                                     type="file"
//                                                                                     accept="image/*"
//                                                                                     onChange={(e) => handleFileChange(e, field.id)}
//                                                                                 />

//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label>Image Width:</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.bannerImageWidth}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, bannerImageWidth: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                     placeholder="Enter Heading Text"
//                                                                                 />
//                                                                             </div>
//                                                                             <div className="form-builder-chaneging-wrap number">
//                                                                                 <label>Image Height:</label>
//                                                                                 <select
//                                                                                     value={
//                                                                                         field.bannerImageHeight === '200px'
//                                                                                             ? 'small'
//                                                                                             : field.bannerImageHeight === '300px'
//                                                                                                 ? 'medium'
//                                                                                                 : field.bannerImageHeight === '500px'
//                                                                                                     ? 'large'
//                                                                                                     : 'default'
//                                                                                     }
//                                                                                     onChange={(e) => {
//                                                                                         const selectedValue = e.target.value;
//                                                                                         const heightMapping = {
//                                                                                             default: '400px',
//                                                                                             small: '200px',
//                                                                                             medium: '300px',
//                                                                                             large: '500px',
//                                                                                         };

//                                                                                         setFields((prevFields) =>
//                                                                                             prevFields.map((f) =>
//                                                                                                 f.id === field.id
//                                                                                                     ? {
//                                                                                                         ...f,
//                                                                                                         bannerImageHeight: heightMapping[selectedValue],
//                                                                                                     }
//                                                                                                     : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 >
//                                                                                     <option value="default">Default</option>
//                                                                                     <option value="small">Small</option>
//                                                                                     <option value="medium">Medium</option>
//                                                                                     <option value="large">Large</option>
//                                                                                 </select>
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap preview '>
//                                                                                 {field.headingbgImage && (
//                                                                                     <div className="image-preview">
//                                                                                         <img
//                                                                                             src={field.headingbgImage}
//                                                                                             alt="Background Preview"
//                                                                                             style={{ maxWidth: '100%', maxHeight: '150px', objectFit: 'cover' }}
//                                                                                         />
//                                                                                     </div>
//                                                                                 )}
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label> Opacity </label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.headeropacity}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, headeropacity: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                     placeholder="Padding"
//                                                                                 />
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap color'>
//                                                                                 <div className='checkbox-option bg-colors'>
//                                                                                     <label> Background Color</label>
//                                                                                     <div className="color-picker-container">
//                                                                                         <span className="color-code">{field.headingbg || '#ffffff'}</span>
//                                                                                         <input
//                                                                                             type="color"
//                                                                                             value={field.headingbg || '#ffffff'}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, headingbg: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                         />
//                                                                                     </div>
//                                                                                 </div>
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label> Padding</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.headingPadding}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, headingPadding: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                     placeholder="Padding"
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label> Letter Spacing</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.headingLetterSpacing}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, headingLetterSpacing: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                     placeholder="Letter Spacing"
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap'>
//                                                                                 <label>Text Align </label>
//                                                                                 <select
//                                                                                     value={field.headingTextAlign}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, headingTextAlign: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 >
//                                                                                     <option value="">Select text align</option>
//                                                                                     <option value="left">left</option>
//                                                                                     <option value="center">center</option>
//                                                                                     <option value="right">right</option>
//                                                                                 </select>
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label> Font-Weight</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.headingFontWeight}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, headingFontWeight: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}

//                                                                                 />
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap color'>
//                                                                                 <div className='checkbox-option bg-colors'>
//                                                                                     <label>Border Color</label>
//                                                                                     <div className="color-picker-container">
//                                                                                         <span className="color-code">{field.headingBorderColor}</span>
//                                                                                         <input
//                                                                                             type="color"
//                                                                                             value={field.headingBorderColor}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, headingBorderColor: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                         />
//                                                                                     </div>
//                                                                                 </div>
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap number' >
//                                                                                 <label>Border Width (px)</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.headingBorderWidth}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, headingBorderWidth: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap'>
//                                                                                 <label>Border Style</label>
//                                                                                 <select
//                                                                                     value={field.headingBorderStyle}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, headingBorderStyle: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 >
//                                                                                     <option value="solid">Solid</option>
//                                                                                     <option value="dashed">Dashed</option>
//                                                                                     <option value="dotted">Dotted</option>
//                                                                                 </select>
//                                                                             </div>
//                                                                         </div>
//                                                                     );
//                                                                 }

//                                                                 if (field.id === selectedFieldId && field.type === 'description') {
//                                                                     return (
//                                                                         <div key={field.id} className="form-builder-chaneging-wrap">
//                                                                             <label>Description Text</label>
//                                                                             <textarea
//                                                                                 type="text"
//                                                                                 value={field.descriptionText || field.value || ''}
//                                                                                 onChange={(e) => handleDescriptionChange(field.id, e.target.value)}
//                                                                                 placeholder="Enter Description"
//                                                                             />

//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label>Font Size (px)</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.descritionFontSize}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, descritionFontSize: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label>Font-Weight</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.descritionFontWeight}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, descritionFontWeight: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap color'>
//                                                                                 <label> Color</label>
//                                                                                 <input
//                                                                                     type="color"
//                                                                                     value={field.descritionColor}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, descritionColor: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap color'>
//                                                                                 <label> Background Color</label>
//                                                                                 <input
//                                                                                     type="color"
//                                                                                     value={field.descriptionbg || '#ffffff'}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, descriptionbg: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label> Padding</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.descriptionPadding}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, descriptionPadding: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                     placeholder="Padding"
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label> Letter Spacing</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.descriptionLetterSpacing}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, descriptionLetterSpacing: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                     placeholder="Letter Spacing"
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap'>
//                                                                                 <label>Text Align </label>
//                                                                                 <select
//                                                                                     value={field.descriptionTextAlign}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, descriptionTextAlign: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 >
//                                                                                     <option value="">Select text align</option>
//                                                                                     <option value="left">left</option>
//                                                                                     <option value="center">center</option>
//                                                                                     <option value="right">right</option>
//                                                                                 </select>
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap color'>
//                                                                                 <label>Border Color</label>
//                                                                                 <input
//                                                                                     type="color"
//                                                                                     value={field.descriptionBorderColor}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, descriptionBorderColor: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap number' >
//                                                                                 <label>Border Width (px)</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.descriptionBorderWidth}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, descriptionBorderWidth: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap'>
//                                                                                 <label>Border Style</label>
//                                                                                 <select
//                                                                                     value={field.descriptionBorderStyle}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, descriptionBorderStyle: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 >
//                                                                                     <option value="solid">Solid</option>
//                                                                                     <option value="dashed">Dashed</option>
//                                                                                     <option value="dotted">Dotted</option>
//                                                                                 </select>
//                                                                             </div>
//                                                                         </div>

//                                                                     );
//                                                                 }
//                                                                 if (field.id === selectedFieldId && field.type === "images") {
//                                                                     return (
//                                                                         <div key={field.id} className="form-builder-chaneging-wrap file">
//                                                                             <div>

//                                                                                 {field.value ? (
//                                                                                     <div className='form-builder-img-wrap'>

//                                                                                         <img src={field.value} alt="Uploaded" style={{ maxWidth: '100%' }} />
//                                                                                         <button className='update-image rm-btn' onClick={() => setImageFieldId(field.id)}>Update Image</button>
//                                                                                         <button className='update-image rm-btn' onClick={() => removeField(field.id)}>Remove Image</button>
//                                                                                     </div>
//                                                                                 ) : (
//                                                                                     <div>

//                                                                                         <p></p>
//                                                                                         <button className='update-image' onClick={() => setImageFieldId(field.id)}>Upload Image</button>
//                                                                                     </div>
//                                                                                 )}
//                                                                                 {imageFieldId === field.id && (
//                                                                                     <input
//                                                                                         type="file"
//                                                                                         accept="image/*"
//                                                                                         onChange={(e) => handleImageUpload(e, field.id)}
//                                                                                     />
//                                                                                 )}
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label>Width</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.imgWidth}
//                                                                                     onChange={(e) => {
//                                                                                         const newWidth = parseInt(e.target.value, 10);

//                                                                                         if (newWidth >= 25 && newWidth <= 100) {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, imgWidth: newWidth } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }
//                                                                                     }}
//                                                                                 />
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap'>
//                                                                                 <label>Text Align </label>
//                                                                                 <select
//                                                                                     value={field.imgTextAlign}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, imgTextAlign: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 >
//                                                                                     <option value="">Select text align</option>
//                                                                                     <option value="left">left</option>
//                                                                                     <option value="center">center</option>
//                                                                                     <option value="right">right</option>
//                                                                                 </select>
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap color'>
//                                                                                 <div className='checkbox-option bg-colors'>
//                                                                                     <label> Background Color</label>
//                                                                                     <div className="color-picker-container">
//                                                                                         <span className="color-code">{field.imgbg || '#ffffff'}</span>
//                                                                                         <input
//                                                                                             type="color"
//                                                                                             value={field.imgbg || '#ffffff'}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, imgbg: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                         />
//                                                                                     </div>
//                                                                                 </div>
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label> Padding</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.imgPadding}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, imgPadding: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                     placeholder="Padding"
//                                                                                 />
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap color'>
//                                                                                 <div className='checkbox-option bg-colors'>
//                                                                                     <label>Border Color</label>
//                                                                                     <div className="color-picker-container">
//                                                                                         <span className="color-code">{field.imgBorderColor}</span>
//                                                                                         <input
//                                                                                             type="color"
//                                                                                             value={field.imgBorderColor}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, imgBorderColor: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                         />
//                                                                                     </div>
//                                                                                 </div>
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap number' >
//                                                                                 <label>Border Width (px)</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.imgBorderWidth}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, imgBorderWidth: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap'>
//                                                                                 <label>Border Style</label>
//                                                                                 <select
//                                                                                     value={field.imgBorderStyle}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, imgBorderStyle: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 >
//                                                                                     <option value="solid">Solid</option>
//                                                                                     <option value="dashed">Dashed</option>
//                                                                                     <option value="dotted">Dotted</option>
//                                                                                 </select>
//                                                                             </div>
//                                                                         </div>
//                                                                     );
//                                                                 }
//                                                                 if (field.id === selectedFieldId && field.type === "divider") {
//                                                                     return (
//                                                                         <div key={field.id} className="form-builder-chaneging-wrap">

//                                                                             <div className='form-builder-chaneging-wrap color'>
//                                                                                 <div className='checkbox-option bg-colors'>
//                                                                                     <label>Divider Color</label>
//                                                                                     <div className="color-picker-container">
//                                                                                         <span className="color-code">{field.dividerColor}</span>
//                                                                                         <input
//                                                                                             type="color"
//                                                                                             value={field.dividerColor}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, dividerColor: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                         />
//                                                                                     </div>
//                                                                                 </div>
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap color'>
//                                                                                 <div className='checkbox-option bg-colors'>
//                                                                                     <label>Divider Backgroundcolor</label>
//                                                                                     <div className="color-picker-container">
//                                                                                         <span className="color-code">{field.dividerbgColor}</span>
//                                                                                         <input
//                                                                                             type="color"
//                                                                                             value={field.dividerbgColor}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, dividerbgColor: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                         />
//                                                                                     </div>
//                                                                                 </div>
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label>Width</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.dividerWidth}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, dividerWidth: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label>Height</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.dividerheight}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, dividerheight: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>

//                                                                         </div>
//                                                                     );
//                                                                 }

//                                                                 if (field.id === selectedFieldId && field.type === "html convert") {
//                                                                     return (
//                                                                         <div key={field.id} className="form-builder-chaneging-wrap color">
//                                                                             <label>Html Convert</label>
//                                                                             <div className="form-builder-and-preview">
//                                                                                 {fields.map((field) => renderField(field))}

//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap color'>
//                                                                                 <div className='checkbox-option bg-colors'>
//                                                                                     <label> Color</label>
//                                                                                     <div className="color-picker-container">
//                                                                                         <span className="color-code">{field.htmlColor}</span>
//                                                                                         <input
//                                                                                             type="color"
//                                                                                             value={field.htmlColor}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, htmlColor: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                         />
//                                                                                     </div>
//                                                                                 </div>
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label>Font Size (px)</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.htmlFontSize}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, htmlFontSize: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label>Padding (px)</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.htmlPadding}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, htmlPadding: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>

//                                                                         </div>
//                                                                     );
//                                                                 }
//                                                                 if (field.id === selectedFieldId && field.type === "split") {
//                                                                     return (
//                                                                         <div key={field.id} className="form-builder-chaneging-wrap color">
//                                                                             <div style={{ marginTop: '20px' }}>
//                                                                                 <label htmlFor="widthSelect">Adjust Width: </label>
//                                                                                 <select
//                                                                                     id="widthSelect"
//                                                                                     onChange={(e) => handleWidthChange(e.target.value)}
//                                                                                     value={fields.find((f) => f.id === selectedFieldId)?.width || '50%'}
//                                                                                 >
//                                                                                     <option value="25%">25%</option>
//                                                                                     <option value="50%">50%</option>
//                                                                                     <option value="75%">75%</option>
//                                                                                 </select>
//                                                                                 <div className='form-builder-chaneging-wrap number'>
//                                                                                     <label>Height</label>
//                                                                                     <input
//                                                                                         type="number"
//                                                                                         value={field.splitheight}
//                                                                                         onChange={(e) => {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, splitheight: e.target.value } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }}
//                                                                                     />
//                                                                                 </div>
//                                                                                 <div style={{ marginTop: '10px' }}>
//                                                                                     <label htmlFor="add">Content Type: </label>
//                                                                                     <select
//                                                                                         id="add"
//                                                                                         onChange={(e) =>
//                                                                                             setFields((prevFields) =>
//                                                                                                 prevFields.map((f) =>
//                                                                                                     f.id === selectedFieldId ? { ...f, add: e.target.value } : f
//                                                                                                 )
//                                                                                             )
//                                                                                         }
//                                                                                         value={fields.find((f) => f.id === selectedFieldId)?.add || 'text'}
//                                                                                     >
//                                                                                         <option value="text">Text</option>
//                                                                                         <option value="image">Image</option>
//                                                                                     </select>
//                                                                                 </div>

//                                                                                 <div style={{ marginTop: '10px' }} className='form-builder-chaneging-wrap file' >
//                                                                                     {fields.find((f) => f.id === selectedFieldId)?.add === 'text' ? (
//                                                                                         <div>
//                                                                                             {ReactQuill ? (
//                                                                                                 <ReactQuill
//                                                                                                     value={fields.find((f) => f.id === selectedFieldId)?.value || 'Use this section to add reviews or testimonials from your stores happy customers Use this section to add reviews or testimonials from your stores happy customers...'}
//                                                                                                     onChange={(value) => {
//                                                                                                         setFields((prevFields) =>
//                                                                                                             prevFields.map((f) =>
//                                                                                                                 f.id === selectedFieldId ? { ...f, value: value } : f
//                                                                                                             )
//                                                                                                         );
//                                                                                                     }}
//                                                                                                     modules={{ toolbar: toolbarOptions }}
//                                                                                                 />
//                                                                                             ) : (
//                                                                                                 <p>Loading editor...</p>
//                                                                                             )}
//                                                                                         </div>
//                                                                                     ) : (
//                                                                                         <div className='form-builder-chaneging-wrap file'>
//                                                                                             <label htmlFor="add">Upload Image </label>
//                                                                                             <input
//                                                                                                 type="file"
//                                                                                                 accept="image/*"
//                                                                                                 onChange={(e) => {
//                                                                                                     const file = e.target.files[0];
//                                                                                                     if (file) {
//                                                                                                         const reader = new FileReader();
//                                                                                                         reader.onload = () => {
//                                                                                                             setFields((prevFields) =>
//                                                                                                                 prevFields.map((f) =>
//                                                                                                                     f.id === selectedFieldId
//                                                                                                                         ? { ...f, value: reader.result }
//                                                                                                                         : f
//                                                                                                                 )
//                                                                                                             );
//                                                                                                         };
//                                                                                                         reader.readAsDataURL(file);
//                                                                                                     }
//                                                                                                 }}
//                                                                                             />

//                                                                                             {fields.find((f) => f.id === selectedFieldId)?.value && (
//                                                                                                 <div style={{ marginTop: '10px' }}>
//                                                                                                     <img
//                                                                                                         src={fields.find((f) => f.id === selectedFieldId)?.value}
//                                                                                                         alt="Uploaded Preview"
//                                                                                                         style={{ maxWidth: '100%', height: 'auto', border: '1px solid #ccc', padding: '5px' }}
//                                                                                                     />
//                                                                                                     <div style={{ marginTop: '10px' }}>
//                                                                                                         <button className='rm-btn'
//                                                                                                             onClick={() => {
//                                                                                                                 document.querySelector('input[type="file"]').click();
//                                                                                                             }}
//                                                                                                             style={{ marginRight: '10px' }}
//                                                                                                         >
//                                                                                                             Update Image
//                                                                                                         </button>
//                                                                                                         <button className='rm-btn'
//                                                                                                             onClick={() => {
//                                                                                                                 setFields((prevFields) =>
//                                                                                                                     prevFields.map((f) =>
//                                                                                                                         f.id === selectedFieldId ? { ...f, value: '' } : f
//                                                                                                                     )
//                                                                                                                 );
//                                                                                                             }}
//                                                                                                         >
//                                                                                                             Remove Image
//                                                                                                         </button>
//                                                                                                     </div>
//                                                                                                 </div>
//                                                                                             )}
//                                                                                         </div>
//                                                                                     )}
//                                                                                 </div>
//                                                                             </div>

//                                                                             <div className='product-detalis-all btn-split'>
//                                                                                 <h3>Add Button</h3>
//                                                                                 <label className="custom-checkbox">
//                                                                                     <input
//                                                                                         type="checkbox"
//                                                                                         checked={field.showbtnsplit || false} 
//                                                                                         onChange={() => togglesplit(field.id)}
//                                                                                     />
//                                                                                     Button
//                                                                                 </label>
//                                                                                 <div className='form-builder-chaneging-wrap number'>
//                                                                                     <label>Button Lable</label>
//                                                                                     <input
//                                                                                         type="text"
//                                                                                         value={field.splitbtn}
//                                                                                         onChange={(e) => {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, splitbtn: e.target.value } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }}
//                                                                                     />
//                                                                                 </div>
//                                                                                 <div className='form-builder-chaneging-wrap number'>
//                                                                                     <label>Button Url</label>
//                                                                                     <input
//                                                                                         type="text"
//                                                                                         value={field.splitbtnurl}
//                                                                                         onChange={(e) => {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, splitbtnurl: e.target.value } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }}
//                                                                                     />
//                                                                                 </div>
//                                                                                 <div className='form-builder-chaneging-wrap color'>
//                                                                                     <div className='checkbox-option bg-colors'>
//                                                                                         <label> Button Background color</label>
//                                                                                         <div className="color-picker-container">
//                                                                                             <span className="color-code">{field.splitbtnbg || '#FFFFFF'}</span>
//                                                                                             <input
//                                                                                                 type="color"
//                                                                                                 value={field.splitbtnbg || '#FFFFFF'}
//                                                                                                 onChange={(e) => {
//                                                                                                     setFields(prevFields =>
//                                                                                                         prevFields.map(f =>
//                                                                                                             f.id === field.id ? { ...f, splitbtnbg: e.target.value } : f
//                                                                                                         )
//                                                                                                     );
//                                                                                                 }}
//                                                                                             />
//                                                                                         </div>
//                                                                                     </div>
//                                                                                 </div>
//                                                                                 <div className='form-builder-chaneging-wrap number'>
//                                                                                     <label>Font-Size</label>
//                                                                                     <input
//                                                                                         type="number"
//                                                                                         value={field.splitbtnfont}
//                                                                                         onChange={(e) => {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, splitbtnfont: e.target.value } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }}
//                                                                                     />
//                                                                                 </div>
//                                                                                 <div className='form-builder-chaneging-wrap color'>
//                                                                                     <div className='checkbox-option bg-colors'>
//                                                                                         <label> Button color</label>
//                                                                                         <div className="color-picker-container">
//                                                                                             <span className="color-code">{field.splitbtncolor || '#FFFFFF'}</span>
//                                                                                             <input
//                                                                                                 type="color"
//                                                                                                 value={field.splitbtncolor || '#FFFFFF'}
//                                                                                                 onChange={(e) => {
//                                                                                                     setFields(prevFields =>
//                                                                                                         prevFields.map(f =>
//                                                                                                             f.id === field.id ? { ...f, splitbtncolor: e.target.value } : f
//                                                                                                         )
//                                                                                                     );
//                                                                                                 }}
//                                                                                             />
//                                                                                         </div>
//                                                                                     </div>
//                                                                                 </div>
//                                                                                 <div className='form-builder-chaneging-wrap number'>
//                                                                                     <label>Height</label>
//                                                                                     <input
//                                                                                         type="number"
//                                                                                         value={field.splitbtnheight}
//                                                                                         onChange={(e) => {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, splitbtnheight: e.target.value } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }}
//                                                                                     />
//                                                                                 </div>
//                                                                                 <div className='form-builder-chaneging-wrap number'>
//                                                                                     <label>Width</label>
//                                                                                     <input
//                                                                                         type="number"
//                                                                                         value={field.splitbtnwidth}
//                                                                                         onChange={(e) => {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, splitbtnwidth: e.target.value } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }}
//                                                                                     />
//                                                                                 </div>
//                                                                                 <div className='form-builder-chaneging-wrap number'>
//                                                                                     <label>Boder-Radious</label>
//                                                                                     <input
//                                                                                         type="number"
//                                                                                         value={field.splitbtnradious}
//                                                                                         onChange={(e) => {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, splitbtnradious: e.target.value } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }}
//                                                                                     />
//                                                                                 </div>

//                                                                                 <div className='form-builder-chaneging-wrap color'>
//                                                                                     <div className='checkbox-option bg-colors'>
//                                                                                         <label>Border Color</label>
//                                                                                         <div className="color-picker-container">
//                                                                                             <span className="color-code">{field.splitBorderColor || '#FFFFFF'}</span>
//                                                                                             <input
//                                                                                                 type="color"
//                                                                                                 value={field.splitBorderColor || '#FFFFFF'}
//                                                                                                 onChange={(e) => {
//                                                                                                     setFields(prevFields =>
//                                                                                                         prevFields.map(f =>
//                                                                                                             f.id === field.id ? { ...f, splitBorderColor: e.target.value } : f
//                                                                                                         )
//                                                                                                     );
//                                                                                                 }}
//                                                                                             />
//                                                                                         </div>
//                                                                                     </div>
//                                                                                 </div>

//                                                                                 <div className='form-builder-chaneging-wrap number' >
//                                                                                     <label>Border Width (px)</label>
//                                                                                     <input
//                                                                                         type="number"
//                                                                                         value={field.splitBorderWidth}
//                                                                                         onChange={(e) => {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, splitBorderWidth: e.target.value } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }}
//                                                                                     />
//                                                                                 </div>
//                                                                                 <div className='form-builder-chaneging-wrap'>
//                                                                                     <label>Border Style</label>
//                                                                                     <select
//                                                                                         value={field.splitBorderStyle}
//                                                                                         onChange={(e) => {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, splitBorderStyle: e.target.value } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }}
//                                                                                     >
//                                                                                         <option value="solid">Solid</option>
//                                                                                         <option value="dashed">Dashed</option>
//                                                                                         <option value="dotted">Dotted</option>
//                                                                                     </select>
//                                                                                 </div>
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap color'>
//                                                                                 <div className='checkbox-option bg-colors'>
//                                                                                     <label> Background color</label>
//                                                                                     <div className="color-picker-container">
//                                                                                         <span className="color-code">{field.splitbg || '#FFFFFF'}</span>
//                                                                                         <input
//                                                                                             type="color"
//                                                                                             value={field.splitbg || '#FFFFFF'}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, splitbg: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                         />
//                                                                                     </div>
//                                                                                 </div>
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label>Padding</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.splitPadding}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, splitPadding: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap'>
//                                                                                 <label>Text Align </label>
//                                                                                 <select
//                                                                                     value={field.splitTextAlin}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, splitTextAlin: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 >
//                                                                                     <option value="">Select text align</option>
//                                                                                     <option value="left">left</option>
//                                                                                     <option value="center">center</option>
//                                                                                     <option value="right">right</option>
//                                                                                 </select>
//                                                                             </div>

//                                                                         </div>
//                                                                     );
//                                                                 }

//                                                                 if (field.id === selectedFieldId && field.type === "video") {
//                                                                     return (
//                                                                         <div key={field.id} className="form-builder-chaneging-wrap file">
//                                                                             <div className='form-builder-chaneging-wrap '>
//                                                                                 <label>Video Url</label>
//                                                                                 <input
//                                                                                     type="text"
//                                                                                     value={field.value}
//                                                                                     onChange={(e) => handleVideoChange(e, field.id)}
//                                                                                     placeholder="Enter video URL"
//                                                                                 />
//                                                                                 <iframe
//                                                                                     src={getVideoEmbedUrl(field.value)}
//                                                                                     title="Video Preview"
//                                                                                     frameBorder="0"
//                                                                                     allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
//                                                                                     allowFullScreen
//                                                                                 ></iframe>
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label>Padding</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.videoPadding}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, videoPadding: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap color'>
//                                                                                 <label>Border Color</label>
//                                                                                 <input
//                                                                                     type="color"
//                                                                                     value={field.videoBorderColor}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, videoBorderColor: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap number' >
//                                                                                 <label>Border Width (px)</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.videoBorderWidth}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, videoBorderWidth: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap'>
//                                                                                 <label>Border Style</label>
//                                                                                 <select
//                                                                                     value={field.videoBorderStyle}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, videoBorderStyle: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 >
//                                                                                     <option value="solid">Solid</option>
//                                                                                     <option value="dashed">Dashed</option>
//                                                                                     <option value="dotted">Dotted</option>
//                                                                                 </select>
//                                                                             </div>

//                                                                         </div>
//                                                                     );
//                                                                 }

//                                                                 if (field.id === selectedFieldId && field.type === "spacer") {
//                                                                     return (
//                                                                         <div key={field.id} className="form-builder-chaneging-wrap number">
//                                                                             <div className='form-builder-chaneging-wrap number' >
//                                                                                 <label htmlFor="spacer-height-input">Spacer Height (px):</label>
//                                                                                 <input
//                                                                                     id="spacer-height-input"
//                                                                                     type="number"
//                                                                                     value={field.spacerHeight}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, spacerHeight: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                     min="0"
//                                                                                 />
//                                                                                 <p style={{ color: '#A8A8A8' }} className='spacer-height-text'>Current Spacer Height: {field.spacerHeight}px</p>
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap color'>
//                                                                                 <div className='checkbox-option bg-colors'>
//                                                                                     <label>  Background color</label>
//                                                                                     <div className="color-picker-container">
//                                                                                         <span className="color-code">{field.spacerbg || '#FFFFFF'}</span>
//                                                                                         <input
//                                                                                             type="color"
//                                                                                             value={field.spacerbg || '#FFFFFF'}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, spacerbg: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                         />
//                                                                                     </div>
//                                                                                 </div>
//                                                                             </div>
//                                                                         </div>
//                                                                     );
//                                                                 }

//                                                                 if (field.id === selectedFieldId && field.type === 'button') {
//                                                                     return (
//                                                                         <div key={field.id}>

//                                                                             <div className='form-builder-chaneging-wrap'>
//                                                                                 <label>Button Label</label>
//                                                                                 <input
//                                                                                     type="text"
//                                                                                     value={field.buttonLabel}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, buttonLabel: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label>Font Size (px)</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.buttonFontSize}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, buttonFontSize: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap'>
//                                                                                 <label>Button Padding (px)</label>
//                                                                                 <input
//                                                                                     type="text"
//                                                                                     value={field.buttonPadding}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, buttonPadding: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label>Width (px)</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.buttonWidth}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, buttonWidth: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label>Height (px)</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.buttonHeight}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, buttonHeight: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap color'>
//                                                                                 <div className='checkbox-option bg-colors'>
//                                                                                     <label>  Background color</label>
//                                                                                     <div className="color-picker-container">
//                                                                                         <span className="color-code">{field.buttonbgColor}</span>
//                                                                                         <input
//                                                                                             type="color"
//                                                                                             value={field.buttonbgColor}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, buttonbgColor: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                         />
//                                                                                     </div>
//                                                                                 </div>
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap color'>
//                                                                                 <div className='checkbox-option bg-colors'>
//                                                                                     <label> Button Background Color</label>
//                                                                                     <div className="color-picker-container">
//                                                                                         <span className="color-code">{field.buttonColor}</span>
//                                                                                         <input
//                                                                                             type="color"
//                                                                                             value={field.buttonColor}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, buttonColor: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                         />
//                                                                                     </div>
//                                                                                 </div>
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap color'>
//                                                                                 <div className='checkbox-option bg-colors'>
//                                                                                     <label> Color</label>
//                                                                                     <div className="color-picker-container">
//                                                                                         <span className="color-code">{field.buttonTextColor}</span>
//                                                                                         <input
//                                                                                             type="color"
//                                                                                             value={field.buttonTextColor}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, buttonTextColor: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                         />
//                                                                                     </div>
//                                                                                 </div>
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap'>
//                                                                                 <label>
//                                                                                     Button Url
//                                                                                     <input
//                                                                                         type="text"
//                                                                                         value={field.buttonUrll}
//                                                                                         onChange={(e) => {
//                                                                                             setFields(prevFields =>
//                                                                                                 prevFields.map(f =>
//                                                                                                     f.id === field.id ? { ...f, buttonUrll: e.target.value } : f
//                                                                                                 )
//                                                                                             );
//                                                                                         }}
//                                                                                     />
//                                                                                 </label>
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label> Letter Spacing</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.buttonLetterSpacing}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, buttonLetterSpacing: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                     placeholder="Letter Spacing"
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label> Border-Radious</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.buttonradious}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, buttonradious: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                     placeholder=" Border-Radious"
//                                                                                 />
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap color'>
//                                                                                 <div className='checkbox-option bg-colors'>
//                                                                                     <label> Border Color</label>
//                                                                                     <div className="color-picker-container">
//                                                                                         <span className="color-code">{field.buttonBorderColor}</span>
//                                                                                         <input
//                                                                                             type="color"
//                                                                                             value={field.buttonBorderColor}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, buttonBorderColor: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                         />
//                                                                                     </div>
//                                                                                 </div>
//                                                                             </div>

//                                                                             <div className='form-builder-chaneging-wrap number' >
//                                                                                 <label>Border Width (px)</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.buttonBorderWidth}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, buttonBorderWidth: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap'>
//                                                                                 <label>Border Style</label>
//                                                                                 <select
//                                                                                     value={field.buttonBorderStyle}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, buttonBorderStyle: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 >
//                                                                                     <option value="solid">Solid</option>
//                                                                                     <option value="dashed">Dashed</option>
//                                                                                     <option value="dotted">Dotted</option>
//                                                                                 </select>
//                                                                             </div>

//                                                                         </div>
//                                                                     );
//                                                                 }
//                                                                 if (field.type === "socalicon" && field.id === selectedFieldId) {
//                                                                     return (
//                                                                         <div key={field.id} className="description-field">

//                                                                             <div className="form-builder-chaneging-wrap">
//                                                                                 <h2>Edit Social Icons</h2>

//                                                                                 <div className='form-builder-chaneging-wrap'>
//                                                                                     <label>
//                                                                                         <div className='custom-checkbox socalicons'>
//                                                                                             <input
//                                                                                                 type="checkbox"
//                                                                                                 checked={!selectedIcons.facebook.isHidden}
//                                                                                                 onChange={() => handleToggleIcon('facebook')}
//                                                                                             />
//                                                                                             <i class="fa fa-facebook-square" aria-hidden="true"></i>
//                                                                                             Facebook URL
//                                                                                         </div>
//                                                                                         <input
//                                                                                             type="text"
//                                                                                             value={selectedIcons.facebook.url}
//                                                                                             onChange={(e) => handleIconUrlChange(e, 'facebook')}
//                                                                                             style={{ display: selectedIcons.facebook.isHidden ? 'none' : 'block' }}
//                                                                                         />
//                                                                                     </label>
//                                                                                 </div>
//                                                                                 <div className='form-builder-chaneging-wrap'>
//                                                                                     <label>
//                                                                                         <div className='custom-checkbox socalicons'>
//                                                                                             <input
//                                                                                                 type="checkbox"
//                                                                                                 checked={!selectedIcons.twitter.isHidden}
//                                                                                                 onChange={() => handleToggleIcon('twitter')}
//                                                                                             />
//                                                                                             <i class="fa fa-twitter" aria-hidden="true"></i>
//                                                                                             Twitter URL
//                                                                                         </div>
//                                                                                         <input
//                                                                                             type="text"
//                                                                                             value={selectedIcons.twitter.url}
//                                                                                             onChange={(e) => handleIconUrlChange(e, 'twitter')}
//                                                                                             style={{ display: selectedIcons.twitter.isHidden ? 'none' : 'block' }}
//                                                                                         />
//                                                                                     </label>
//                                                                                 </div>
//                                                                                 <div className='form-builder-chaneging-wrap'>
//                                                                                     <label>
//                                                                                         <div className='custom-checkbox socalicons'>
//                                                                                             <input
//                                                                                                 type="checkbox"
//                                                                                                 checked={!selectedIcons.instagram.isHidden}
//                                                                                                 onChange={() => handleToggleIcon('instagram')}
//                                                                                             />
//                                                                                             <i class="fa fa-instagram" aria-hidden="true"></i>
//                                                                                             Instagram URL
//                                                                                         </div>
//                                                                                         <input
//                                                                                             type="text"
//                                                                                             value={selectedIcons.instagram.url}
//                                                                                             onChange={(e) => handleIconUrlChange(e, 'instagram')}
//                                                                                             style={{ display: selectedIcons.instagram.isHidden ? 'none' : 'block' }}
//                                                                                         />
//                                                                                     </label>
//                                                                                 </div>
//                                                                                 <div className='form-builder-chaneging-wrap'>
//                                                                                     <button onClick={() => setShowFileUpload((prev) => !prev)}> + </button>
//                                                                                     {showFileUpload && (
//                                                                                         <div className='form-builder-chaneging-wrap file'>
//                                                                                             <label>Uplaod Image</label>
//                                                                                             <input
//                                                                                                 type="file"
//                                                                                                 accept="image/*"
//                                                                                                 onChange={handleCustomIconUpload}
//                                                                                                 multiple
//                                                                                             />
//                                                                                         </div>
//                                                                                     )}
//                                                                                     {customIcons.length > 0 && (
//                                                                                         <div>
//                                                                                             {customIcons.map((icon, index) => (
//                                                                                                 <div key={index} className='form-builder-chaneging-wrap  '>
//                                                                                                     <div className='form-builder-chaneging-wrap socal'>
//                                                                                                         <div className='custom-checkbox'>
//                                                                                                             <input
//                                                                                                                 type="checkbox"
//                                                                                                                 checked={!icon.isHidden}
//                                                                                                                 onChange={() => toggleCustomIconVisibility(index)}
//                                                                                                             />

//                                                                                                         </div>
//                                                                                                         <div className='img-socal-costom'>
//                                                                                                             <img src={icon.src} alt={icon.name} style={{ width: "100%" }} />
//                                                                                                         </div>
//                                                                                                     </div>

//                                                                                                     <input
//                                                                                                         type="text"
//                                                                                                         value={icon.url}
//                                                                                                         onChange={(e) => handleCustomIconUrlChange(e, index)}
//                                                                                                         placeholder="Custom URL"
//                                                                                                     />
//                                                                                                     <div style={{ marginTop: '10px' }}>
//                                                                                                         <button className='rm-btn'
//                                                                                                             onClick={() => handleCustomIconRemove(index)}
//                                                                                                         >
//                                                                                                             Remove Icon
//                                                                                                         </button>
//                                                                                                     </div>
//                                                                                                 </div>

//                                                                                             ))}
//                                                                                         </div>
//                                                                                     )}
//                                                                                 </div>

//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap color'>
//                                                                                 <div className='checkbox-option bg-colors'>
//                                                                                     <label> Background Color</label>
//                                                                                     <div className="color-picker-container">
//                                                                                         <span className="color-code">{field.socalIconbg}</span>
//                                                                                         <input
//                                                                                             type="color"
//                                                                                             value={field.socalIconbg}
//                                                                                             onChange={(e) => {
//                                                                                                 setFields(prevFields =>
//                                                                                                     prevFields.map(f =>
//                                                                                                         f.id === field.id ? { ...f, socalIconbg: e.target.value } : f
//                                                                                                     )
//                                                                                                 );
//                                                                                             }}
//                                                                                         />
//                                                                                     </div>
//                                                                                 </div>
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label>Social Icon Gap (px) </label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.socalIcongap}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, socalIcongap: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label>Social Icon Height (px)</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.socalIconHeight}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, socalIconHeight: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number'>
//                                                                                 <label>Social Icon Width (px)</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.socalIconWidth}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, socalIconWidth: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap'>
//                                                                                 <label>Text Align </label>
//                                                                                 <select
//                                                                                     value={field.socaliconTextAlign}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, socaliconTextAlign: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 >
//                                                                                     <option value="">Select text align</option>
//                                                                                     <option value="left">left</option>
//                                                                                     <option value="center">center</option>
//                                                                                     <option value="right">right</option>
//                                                                                 </select>
//                                                                             </div>
//                                                                             <div className='form-builder-chaneging-wrap number' >
//                                                                                 <label>Padding (px)</label>
//                                                                                 <input
//                                                                                     type="number"
//                                                                                     value={field.socalIconPadding}
//                                                                                     onChange={(e) => {
//                                                                                         setFields(prevFields =>
//                                                                                             prevFields.map(f =>
//                                                                                                 f.id === field.id ? { ...f, socalIconPadding: e.target.value } : f
//                                                                                             )
//                                                                                         );
//                                                                                     }}
//                                                                                 />
//                                                                             </div>
//                                                                         </div>
//                                                                     );
//                                                                 }

//                                                                 return null;
//                                                             })}
//                                                         </div>
//                                                     )}
//                                                 </div>
//                                             </div>

//                                         </div>)}
//                                     </div>
//                                 </div>)}
//                             </div>
//                         </div>
//                     </div>
//                     <div className='btn_form_bulider'>
//                         <div className="form-submission-wrp">
//                             <button className="cancle-form-btn" onClick={handleCancle} >Cancel</button>
//                         </div>
//                         <div className="form-submission-wrp">
//                             <button className="create-form-btn action_btn" onClick={createOrUpdateForm} >Save</button>
//                         </div>
//                     </div>
//                 </div>

//             </div>
//             <div className='form-builder-wrap-popup-inputs'>
//                 <div className='save-email-templates-add'>
//                     {saveEmail && (<div className="popup ">
//                         <div className="popup-content save">
//                             <div className="save-email-template-popup">
//                                 <div className='cancle-save-email' onClick={() => setSaveEmail(false)}>
//                                     <img src={cancleimg} alt="" />
//                                 </div>
//                                 <img src={savemail} alt="" />
//                                 <h2>Success</h2>
//                                 <p>Your Email has been save successfully!</p>
//                                 <p className="save-btn" onClick={handleContinue}>Continue</p>
//                             </div>
//                         </div>
//                     </div>
//                     )}
//                 </div>
//                 <div className='save-email-templates-add'>
//                     {cancelEmail && (<div className="popup ">
//                         <div className="popup-content save">
//                             <div className="save-email-template-popup">
//                                 <div className='cancle-save-email' onClick={() => setCancelEmail(false)}>
//                                     <img src={cancleimg} alt="" />
//                                 </div>
//                                 <img src={canclemail} alt="" />
//                                 <h2>Warning</h2>
//                                 <p>Are you sure you want to cansel this email?</p>
//                                 <p className="save-btn cancel" onClick={handleContinue}>Cancel</p>
//                             </div>
//                         </div>
//                     </div>
//                     )}
//                 </div>
//                 <div className="form-builder-prodcut-all">
//                     {isPopupOpen && (
//                         <div className="popup ">
//                             <div className="popup-content product">
//                                 <button className="procduct-canclebtn" onClick={handleClosePopup}>
//                                     <img src={productcancle} />
//                                 </button>

//                                 <div className="form-builder-search-bar search-bar">
//                                     <input id="search" type="search" placeholder="Search" value={searchTerm}
//                                         onChange={(e) => setSearchTerm(e.target.value)} />
//                                     <div className="form_build_icon_search">
//                                         <img src={search12} alt="" />
//                                     </div>
//                                 </div>

//                                 <div className="product-list">
//                                     {filteredProducts.length > 0 ? (
//                                         filteredProducts.map((product) => (
//                                             <div key={product.id} className="product-item">
//                                                 <div className='product-item-flex'>
//                                                     <div className='custom-checkbox'>
//                                                         <input
//                                                             type="checkbox"
//                                                             checked={selectedProducts.some((p) => p.id === product.id)}
//                                                             onChange={(e) => handleProductClick(product, e.target.checked)}
//                                                         />
//                                                     </div>
//                                                     <div className='product-itm-all-inline'>
//                                                         {product.image ? (
//                                                             <div className="images-galley">
//                                                                 <img
//                                                                     src={product.image}
//                                                                     alt={product.title}
//                                                                 />
//                                                             </div>
//                                                         ) : (
//                                                             <p>No image available</p>
//                                                         )}
//                                                         <div className='product-itm-all-prices'>
//                                                             <h3>{product.title}</h3>
//                                                             <p className='price-product-all'>Price: ${product.price}</p>
//                                                         </div>
//                                                     </div>

//                                                 </div>


//                                             </div>
//                                         ))
//                                     ) : (
//                                         <p>No products available.</p>
//                                     )}
//                                 </div>

//                                 {totalPages > 1 && (
//                                     <div className="pagination">
//                                         <div className='show-all enteries'>
//                                             Showing data {filteredProducts.length} of {products.length} products
//                                         </div>

//                                         <nav>
//                                             <ul className="xs:mt-0 mt-2 inline-flex items-center -space-x-px">
//                                                 <li>
//                                                     <button
//                                                         type="button"
//                                                         disabled={currentPage === 1}
//                                                         onClick={() => handlePageChange(currentPage - 1)}
//                                                     >
//                                                         <img src={left} alt="Previous" />
//                                                     </button>
//                                                 </li>
//                                                 {generatePageNumbers().map((page, index) => (
//                                                     <li key={index} aria-current={currentPage === page ? 'page' : undefined}>
//                                                         {page === '...' ? (
//                                                             <span>...</span>
//                                                         ) : (
//                                                             <button
//                                                                 type="button"
//                                                                 onClick={() => handlePageChange(page)}
//                                                                 className={`${currentPage === page ? 'active' : 'inactive'}`}
//                                                             >
//                                                                 {page}
//                                                             </button>
//                                                         )}
//                                                     </li>
//                                                 ))}
//                                                 <li>
//                                                     <button
//                                                         type="button"
//                                                         disabled={currentPage === totalPages}
//                                                         onClick={() => handlePageChange(currentPage + 1)}
//                                                     >
//                                                         <img src={right} alt="Next" />
//                                                     </button>
//                                                 </li>
//                                             </ul>
//                                         </nav>

//                                     </div>
//                                 )}
//                             </div>
//                         </div>
//                     )}
//                 </div>
//                 {showImagePopup && (
//                     <div className="popup">
//                         <div className="popup-content">
//                             <h3>Upload Image</h3>
//                             <input type="file" accept="image/*" onChange={handleImageUpload} />
//                             <button onClick={() => setShowImagePopup(false)}>Close</button>
//                         </div>
//                     </div>
//                 )}

//                 {showHeadingPopup && (
//                     <div className="popup">
//                         <div className="popup-content">
//                             <div className="options">
//                                 <button style={{ padding: '10px', color: 'white', background: '#FD633E', fontSize: '14px', border: 'none' }} onClick={() => setSelectedOption('heading')}>Heading</button>
//                                 <button style={{ padding: '10px', color: 'white', background: '#F27F01', fontSize: '14px', border: 'none' }} onClick={() => setSelectedOption('image')}>Image</button>
//                                 <button style={{ padding: '10px', color: 'white', background: '#27A196', fontSize: '14px', border: 'none' }} onClick={() => setSelectedOption('content')}>Content</button>
//                                 <button style={{ padding: '10px', color: 'white', background: '#D9A425', fontSize: '14px', border: 'none' }} onClick={() => setSelectedOption('url')}>Button URL</button>
//                             </div>
//                             {selectedOption === 'heading' && (
//                                 <div className="heading-section">
//                                     <label>
//                                         <input
//                                             type="text"
//                                             value={headingText}
//                                             onChange={(e) => setHeadingText(e.target.value)}
//                                             placeholder="Heading Text"
//                                         />
//                                     </label>
//                                     <label>
//                                         <select value={headingLevel} onChange={(e) => setHeadingLevel(e.target.value)}>
//                                             <option value="h1">H1</option>
//                                             <option value="h2">H2</option>
//                                             <option value="h3">H3</option>
//                                             <option value="h4">H4</option>
//                                             <option value="h5">H5</option>
//                                             <option value="h6">H6</option>
//                                         </select>
//                                     </label>
//                                     <label>
//                                         <input
//                                             type="text"
//                                             value={headingFontSize}
//                                             onChange={(e) => setHeadingFontSize(e.target.value)}
//                                             placeholder="Font Size"
//                                         />
//                                     </label>
//                                 </div>
//                             )}
//                             {selectedOption === 'content' && (
//                                 <div className="content-section">
//                                     <div className='admin-input email'>
//                                         <div className='admin-label'>
//                                             <label htmlFor="content">Content</label>
//                                         </div>
//                                         {ReactQuill ? (
//                                             <ReactQuill
//                                                 value={editorValue}
//                                                 onChange={setEditorValue}
//                                                 modules={{ toolbar: toolbarOptions }}
//                                             />
//                                         ) : (
//                                             <p>Loading editor...</p>
//                                         )}
//                                     </div>
//                                 </div>
//                             )}
//                             {selectedOption === 'url' && (
//                                 <div className="form-builder-changing-wrap url url-section">
//                                     <button style={{
//                                         backgroundColor: '#9474ff',
//                                         border: '1px solid black',
//                                         color: 'white',
//                                         padding: '10px',
//                                         borderRadius: '4px',
//                                         height: '40px',
//                                         width: '100px',
//                                         fontSize: '16px'

//                                     }}>Vist Now</button>
//                                     <label>
//                                         URL:
//                                         <input
//                                             type="url"
//                                             value={headingUrl}
//                                             onChange={(e) => setHeadingUrl(e.target.value)}
//                                             placeholder="Enter URL (optional)"
//                                         />
//                                     </label>
//                                 </div>
//                             )}

//                             {selectedOption === 'image' && (
//                                 <div className="form-builder-changing-wrap file section">
//                                     <label> Image:
//                                         <input
//                                             type="file"
//                                             accept="image/*"
//                                             onChange={(e) => {
//                                                 const file = e.target.files[0];
//                                                 if (file) {
//                                                     const reader = new FileReader();
//                                                     reader.onloadend = () => {
//                                                         setImageUrl(reader.result);
//                                                     };
//                                                     reader.readAsDataURL(file);
//                                                 }
//                                             }}
//                                         />
//                                         {imageUrl && <img src={imageUrl} alt="Preview" style={{ width: '100px', marginTop: '10px' }} />}
//                                     </label>
//                                 </div>
//                             )}

//                             <button onClick={handleAddHeading}>Add Heading</button>
//                             <button className='heading_cancle' onClick={() => setShowHeadingPopup(false)}>Close</button>
//                         </div>
//                     </div>
//                 )}
//                 {showDescriptionPopup && (
//                     <div className="popup">
//                         <div className="popup-content">
//                             <label>
//                                 Description:
//                                 <textarea
//                                     value={descriptionText}
//                                     onChange={(e) => setDescriptionText(e.target.value)}
//                                     placeholder="Description"
//                                 />
//                             </label>
//                             <button onClick={handleAddDescription}>Add Description</button>
//                             <button className='heading_cancle' onClick={() => setShowDescriptionPopup(false)}>Close</button>
//                         </div>
//                     </div>
//                 )}
//                 {isPopupVisibleed && (
//                     <div className="popup">
//                         <div className="popup-content">
//                             <h4>Edit Rich Text</h4>
//                             <div className="content-section">
//                                 <div className="admin-input email">
//                                     <div className="admin-label">
//                                         <label htmlFor="content">Content</label>
//                                     </div>
//                                     <ReactQuill
//                                         value={editorValueed}
//                                         onChange={handleEditorChangeee}
//                                         modules={{ toolbar: toolbarOptions }}
//                                     />
//                                 </div>
//                             </div>

//                             <button onClick={handleSave}>Save</button>
//                             <button onClick={() => setPopupVisibleed(false)}>Cancel</button>
//                         </div>
//                     </div>
//                 )}
//             </div>

//         </div >
//     );
// };

// export default EmailTemplateCreate;


import React, { useState, useEffect, useRef } from 'react';
import Sortable from 'sortablejs';
import axios from 'axios';
import { useLocation } from 'react-router-dom';
import image from '../images/image-0.png';
import divider2 from '../images/divider0.png';
import btn from '../images/btn0.png';
import emailtemp from '../images/emailtemp.png';
import phonem from '../images/phonem.png';
import desk from '../images/desk.png';
import socail from '../images/socail0.png';
import htmlicon from '../images/htmlicon0.png';
import maximizesize from '../images/maximize-size.png';
import deletep from '../images/deletep.png';
import delete1 from '../images/delete.png';
import facebook from '../images/facebook.png';
import instagram from '../images/instagram.png';
import twitter from '../images/twitter.png';
import videoplay from '../images/videoplay.png';
import left from '../images/left.png';
import right from '../images/right.png';
import hdbg from '../images/hdbg.jpeg';
import product from '../images/product0.png';
import spacer from '../images/space0.png';
import banner from '../images/banner0.png';
import imghd from '../images/bgimg.jpeg';
import imghd1 from '../images/imghd1.png';
import itext from '../images/image-0.png';
import editicon from '../images/editicon.png';
import savemail from '../images/savemail1.png';
import canclemail from '../images/canclemail1.png';
import multimedia from '../images/multimedia0.png';
import rich from '../images/rich0.png';
import rm from '../images/rm.png';
import cancleimg from '../images/cancleimg.png';
import bk from '../images/bk.png';
import dlrm from '../images/dlrm.png';
import search12 from '../images/search12.png';
import productcancle from '../images/productcancle.png';
import { format } from 'date-fns';
import html2canvas from 'html2canvas';
import 'react-quill/dist/quill.snow.css';

import '../index.css';
import { useNavigate } from 'react-router-dom';
import { useLoaderData, Link } from "@remix-run/react";
import { authenticate, apiVersion } from "../shopify.server";

const toolbarOptions = [
    [{ header: [1, 2, 3, 4, 5, 6, false] }],
    ['bold', 'italic', 'underline'],
    ['link', 'image'],
    [{ list: 'ordered' }, { list: 'bullet' }],
    [{ script: 'sub' }, { script: 'super' }],
    [{ indent: '-1' }, { indent: '+1' }],
    [{ direction: 'rtl' }],
    [{ size: ['small', 'medium', 'large', 'huge'] }],
    [{ color: [] }, { background: [] }],
    [{ font: [] }],
    [{ align: [] }],
    ['clean'],
];

const generateUniqueId = (length = 22) => {
    const charset = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
    let uniqueId = '';
    for (let i = 0; i < length; i++) {
        const randomIndex = Math.floor(Math.random() * charset.length);
        uniqueId += charset[randomIndex];
    }
    return uniqueId;
};

export const loader = async ({ request }) => {
    try {
        const { session } = await authenticate.admin(request);
        const { shop, accessToken } = session;
        console.log('Shop:', shop);
        console.log('Access Token:', accessToken);

        const graphqlQuery = {
            query: `
                query {
                    products(first: 50) {
                        edges {
                            node {
                                id
                                title
                                featuredImage {
                                    src
                                }
                                variants(first: 10) {
                                    edges {
                                        node {
                                            id
                                            title
                                            price
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            `
        };

        const response = await fetch(`https://${shop}/admin/api/${apiVersion}/graphql.json`, {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "X-Shopify-Access-Token": accessToken,
            },
            body: JSON.stringify(graphqlQuery),
        });

        if (!response.ok) {
            throw new Error(`Failed to fetch products: ${response.statusText}`);
        }

        const responseData = await response.json();
        console.log('Response Data:', responseData);

        const products = responseData?.data?.products?.edges || [];

        const productsWithData = products.map(product => {
            const variants = product.node.variants.edges.map(variant => variant.node);
            const uniqueColors = Array.from(new Set(variants.map(variant => variant.option1))).join(' | ');
            const uniquePrices = Array.from(new Set(variants.map(variant => variant.price))).join(' | ');
            const uniqueSizes = Array.from(new Set(variants.map(variant => variant.option2))).join(' | ');

            return {
                id: product.node.id,
                title: product.node.title,
                color: uniqueColors,
                price: uniquePrices,
                size: uniqueSizes,
                image: product.node.featuredImage ? product.node.featuredImage.src : null,
            };
        });

        console.log('Processed Products:', productsWithData);

        return { products: productsWithData, shop: shop };
    } catch (err) {
        console.error("Error fetching products:", err.message);
        return { products: [], shop: null };
    }
};

const EmailTemplateCreate = () => {

    const navigate = useNavigate();
    const [fields, setFields] = useState([]);
    const [emailTemplateId, setEmailTemplateId] = useState(null);
    const formBuilderRef = useRef(null);
    const [formTitle, setFormTitle] = useState('Email-Template');
    const [existingTitles, setExistingTitles] = useState([]);
    const [showImagePopup, setShowImagePopup] = useState(false);
    const [showHeadingPopup, setShowHeadingPopup] = useState(false);
    const [showDescriptionPopup, setShowDescriptionPopup] = useState(false);
    const [headingText, setHeadingText] = useState('');
    const [headingLevel, setHeadingLevel] = useState('h1');
    const [selectedOption, setSelectedOption] = useState('heading');
    const [imageUrl, setImageUrl] = useState(null);
    const [headingFontSize, setHeadingFontSize] = useState('40');
    const [descriptionText, setDescriptionText] = useState('');
    const [backgroundColor, setBackgroundColor] = useState('#ffffff');
    const [borderRadious, setBorderRadious] = useState(5);
    const [templatePadding, setTemplatePadding] = useState('20');
    const [backgroundImage, setBackgroundImage] = useState(null);
    const [textAlign, setTextAlign] = useState('left');
    const [imageFieldId, setImageFieldId] = useState(null);
    const [showField, setShowField] = useState(true);
    const [showFields, setShowFields] = useState(true);
    const [showSocialIconPopup, setShowSocialIconPopup] = useState(false);
    const [selectedFieldId, setSelectedFieldId] = useState(null);
    const [emailFieldPopup, setEmailFieldPopup] = useState(false);
    const [activeFieldId, setActiveFieldId] = useState(null);
    const [socalIconWidth, setSocalIconWidth] = useState(30);
    const [socalIconHeight, setSocalIconHeight] = useState(30);
    const [formDataAdd, setFormDataAdd] = useState([]);
    const [selectedFormIds, setSelectedFormIds] = useState([]);
    const [selectedTitles, setSelectedTitles] = useState([]);
    const [showVideoInput, setShowVideoInput] = useState(false);
    const { products, shop, apiVersion } = useLoaderData();
    const [selectedProduct, setSelectedProduct] = useState(null);
    const [isPopupOpen, setIsPopupOpen] = useState(false);
    const [selectedProducts, setSelectedProducts] = useState([]);
    const [productTitles, setProductTitles] = useState([]);
    const [productImage, setProductImage] = useState([]);
    const [popupFieldTitle, setPopupFieldTitle] = useState('');
    const [showPrice, setShowPrice] = useState(false);
    const [showbtnn, setShowbtnn] = useState(false);
    const [productsPerRow, setProductsPerRow] = useState(3);
    const [lastProductFieldId, setLastProductFieldId] = useState(null);
    const [showFileUpload, setShowFileUpload] = useState(false);
    const emailFieldRef = useRef(null);
    const popupRef = useRef(null);
    const [selectedIcons, setSelectedIcons] = useState({
        facebook: true,
        twitter: true,
        instagram: true,
    });
    const [customIcons, setCustomIcons] = useState([]);
    const [id, setId] = useState(null);
    const location = useLocation();
    const { formData } = location.state || {};
    const [viewMode, setViewMode] = useState('desktop');
    const [dividerColor, setDividerColor] = useState('#000');
    const [showColorPicker, setShowColorPicker] = useState(false);
    const [showbtn, setShowBtn] = useState(false);
    const [emailWidth, setEmailWidth] = useState('800px');
    const [headingColor, setHeadingColor] = useState('#000');
    const formsPerPage = 3;
    const [currentPage, setCurrentPage] = useState(1);
    const [fontFamily, setFontFamily] = useState('Arial');
    const [ReactQuill, setReactQuill] = useState(null);
    const [editorValue, setEditorValue] = useState('');
    const [headingUrl, setHeadingUrl] = useState('');
    const [texteditorValue, setTextEditorValue] = useState('');
    const [columnCount, setColumnCount] = useState(6);
    const [isPopupVisible, setIsPopupVisible] = useState(false);
    const [columnImages, setColumnImages] = useState({});
    const [editorValues, setEditorValues] = useState({});
    const [editorValueed, setEditorValueed] = useState('');
    const [currentFieldId, setCurrentFieldId] = useState(null);
    const [isPopupVisibleed, setPopupVisibleed] = useState(false);
    const [popupFieldId, setPopupFieldId] = useState(null);
    const [showFieldInput, setShowFieldInput] = useState(false);
    const [showFieldPro, setShowFieldPro] = useState(false);
    const [saveEmail, setSaveEmail] = useState(false);
    const [cancelEmail, setCancelEmail] = useState(false);
    const [searchTerm, setSearchTerm] = useState('');
    const [columnsPerRow, setColumnsPerRow] = useState(3);
    const [showbtnsplit, setShowbtnsplit] = useState(false);
    const [showbtnmulti, setShowbtnmulti] = useState(false);

    const handleFontChange = (event) => {
        setFontFamily(event.target.value);
    };

    useEffect(() => {
        if (formData) {
            console.log('Form data received:', formData);
            console.log('Fields:', formData.fields);

            if (formData.fields && formData.fields.length > 0) {
                const field = formData.fields[0];

                if (field.columnData) {
                    console.log('Column Data:', field.columnData);
                } else {
                    console.log('Column Data not found in the first field');
                }
            } else {
                console.log('No fields found in formData');
            }

            if (Array.isArray(formData.fields)) {
                const validFields = formData.fields.map(field => {
                    if (!field.id) {
                        console.warn('Field missing ID:', field);
                    }

                    if (field.type === 'product') {
                        console.log('Price for product field:', field.price);
                        if (field.price === true) {
                            setShowPrice(true);
                        }
                        if (field.showbtnn === true) {
                            setShowbtnn(true);
                        }
                    }
                    if (field.type === 'split') {
                        console.log('split for split field:', field.price);
                        if (field.showbtnsplit === true) {
                            setShowbtnsplit(true);
                        }
                    }

                    if (field.type === 'Multicolumn') {
                        console.log('split for split field:', field.price);
                        if (field.showbtnmulti === true) {
                            setShowbtnmulti(true);
                        }
                    }
                    return { ...field, id: field.id || generateUniqueId() };
                });

                setFields(validFields);
            }
            setEmailWidth(formData.styles.width);
            setBackgroundColor(formData.styles.backgroundColor);
            setBorderRadious(formData.styles.borderRadious);
            setBackgroundImage(formData.styles.backgroundImage);
            setTemplatePadding(formData.styles.templatePadding);
            setTextAlign(formData.styles.textAlign);
            setFontFamily(formData.styles.fontFamily);
            setEmailTemplateId(formData.templateId);
            setFormTitle(formData.title);
            setId(formData._id);
            setSelectedFormIds(formData.form_ids || []);
            const productsPerRow = formData.fields[0]?.productsPerRow || 3;
            setProductsPerRow(productsPerRow);
            const coloumPerRow = formData.fields[0]?.columnsPerRow || 3;
            setColumnsPerRow(coloumPerRow);
            console.log('Products per row:', formData.fields[0]?.productsPerRow);
            const columnCount = parseInt(formData.styles.columnCount) || '';
            setColumnCount(columnCount);

        }
    }, [formData]);

    const createInputField = (type, add, initialValue = '') => {
        const id = generateUniqueId();
        console.log(`Creating field of type ${type} with ID: ${id}`);

        return {
            id,
            type,
            contentType: 'text',
            add: add,
            image: type === 'images' ? initialValue : null,
            headerbtnbg: type === 'heading' ? '#FFFFFF' : undefined,
            headerbtncolor: type === 'heading' ? '#000' : undefined,
            headingbtnPadding: type === 'heading' ? 5 : undefined,
            headingbtntopPadding: type === 'heading' ? 5 : undefined,
            headingbtnradious: type === 'heading' ? 4 : undefined,
            headingbtnFontSize: type === 'heading' ? 14 : undefined,
            headingbtnwidth: type === 'heading' ? '100' : undefined,
            headingbtnheight: type === 'heading' ? '35' : undefined,
            headerbtn: type === 'heading' ? 'Click Now' : undefined,
            headingsubheading: type === 'heading' ? '16' : undefined,
            headeropacity: type === 'heading' ? '1' : undefined,
            subheadingColor: type === 'heading' ? '#000000' : undefined,
            headingbtnBorderColor: type === 'heading' ? '#000000' : undefined,
            headingbtnBorderWidth: type === 'heading' ? '1' : undefined,
            headingbtnBorderStyle: type === 'heading' ? 'solid' : undefined,
            bannerImageWidth: type === 'heading' ? '100' : undefined,
            bannerImageHeight: type === 'heading' ? '400px' : undefined,
            bannerImageTextAlign: type === 'heading' ? '' : undefined,
            headingText: type === 'heading' ? 'The Three Lions Collection' : undefined,
            headingLevel: type === 'heading' ? 'h1' : null,
            headingFontSize: type === 'heading' ? '40' : undefined,
            headingLetterSpacing: type === 'heading' ? 0 : undefined,
            headingPadding: type === 'heading' ? 20 : undefined,
            headingTextAlign: type === 'heading' ? "" : undefined,
            headingColor: type === 'heading' ? '#000' : undefined,
            headingbg: type === 'heading' ? '#0000' : undefined,
            headingbgImage: type === 'heading' ? '' : undefined,
            headingBorderColor: type === 'heading' ? '#000000' : undefined,
            headingBorderWidth: type === 'heading' ? '0' : undefined,
            headingBorderStyle: type === 'heading' ? 'solid' : undefined,
            headingUrl: type === 'heading' ? '#' : undefined,
            headingFontWeight: type === 'heading' ? 600 : undefined,
            descritionFontSize: type === 'description' ? '16' : undefined,
            descritionColor: type === 'description' ? '#000' : undefined,
            descritionFontWeight: type === 'description' ? 500 : undefined,
            descriptionText: type === 'description' ? initialValue : 'No Description Provided',
            descriptionbg: type === 'description' ? '#0000' : undefined,
            descriptionPadding: type === 'description' ? 10 : undefined,
            descriptionLetterSpacing: type === 'description' ? 0 : undefined,
            descriptionTextAlign: type === 'description' ? "" : undefined,
            descriptionBorderColor: type === 'description' ? '#000000' : undefined,
            descriptionBorderWidth: type === 'description' ? '0' : undefined,
            descriptionBorderStyle: type === 'description' ? 'solid' : undefined,
            name: type === 'heading' ? initialValue :
                type === 'description' ? 'Description' :
                    `Field_${id}`,
            label: type === 'heading' ? 'Heading' :
                type === 'description' ? 'Description' :
                    type === 'button' ? 'Submit' :
                        `Default Label for ${type}`,
            value: initialValue || (type === 'description' ? 'No Description Provided' : ''),
            dividerColor: type === 'divider' ? '#000' : undefined,
            dividerbgColor: type === 'divider' ? '#FFFFFF' : undefined,
            dividerWidth: type === 'divider' ? '100' : undefined,
            dividerheight: type === 'divider' ? '1' : undefined,
            buttonColor: type === 'button' ? '#007BFF' : undefined,
            buttonbgColor: type === 'button' ? '#FFFFFF' : undefined,
            buttonTextColor: type === 'button' ? '#FFFFFF' : undefined,
            buttonFontSize: type === 'button' ? 16 : undefined,
            buttonPadding: type === 'button' ? 10 : undefined,
            buttonWidth: type === 'button' ? 100 : undefined,
            buttonHeight: type === 'button' ? 40 : undefined,
            buttonradious: type === 'button' ? 2 : undefined,
            buttonLabel: type === 'button' ? 'Submit' : undefined,
            buttonaline: type === 'button' ? '' : undefined,
            buttonBorderColor: type === 'button' ? '#000000' : undefined,
            buttonBorderWidth: type === 'button' ? '1' : undefined,
            buttonBorderStyle: type === 'button' ? 'solid' : undefined,
            buttonLetterSpacing: type === 'button' ? 0 : undefined,
            buttonUrll: type === 'button' ? '' : undefined,
            socalIconWidth: type === 'socalicon' ? 30 : undefined,
            socalIconHeight: type === 'socalicon' ? 30 : undefined,
            socalIconPadding: type === 'socalicon' ? 10 : undefined,
            socalIcongap: type === 'socalicon' ? 5 : undefined,
            socalIconbg: type === 'socalicon' ? '#FFFFFF' : undefined,
            socaliconTextAlign: type === 'socalicon' ? "" : undefined,
            htmlColor: type === 'html convert' ? '#000' : undefined,
            htmlFontSize: type === 'html convert' ? 16 : undefined,
            htmlPadding: type === 'html convert' ? 10 : undefined,
            icons: {
                facebook: { url: 'https://facebook.com', isHidden: false },
                twitter: { url: 'https://twitter.com', isHidden: false },
                instagram: { url: 'https://instagram.com', isHidden: false },
            },
            customIcons: [],
            spacerHeight: type === 'spacer' ? '20' : undefined,
            spacerbg: type === 'spacer' ? '#FFFFFF' : undefined,
            splittext: type === 'split' ? 'left' : undefined,
            splitbtn: type === 'split' ? 'Add Text' : undefined,
            splitbtnbg: type === 'split' ? '#007BFF' : undefined,
            splitbtnfont: type === 'split' ? '14' : undefined,
            splitbtncolor: type === 'split' ? '#FFFFFF' : undefined,
            splitbtnurl: type === 'split' ? '' : undefined,
            splitbtnheight: type === 'split' ? '35' : undefined,
            splitbtnwidth: type === 'split' ? '80' : undefined,
            splitbtnradious: type === 'split' ? '2' : undefined,
            splitBorderColor: type === 'split' ? '#000000' : undefined,
            splitBorderWidth: type === 'split' ? '1' : undefined,
            splitBorderStyle: type === 'split' ? 'solid' : undefined,
            splitbg: type === 'split' ? '#FFFFFF' : undefined,
            splitheight: type === 'split' ? '300' : undefined,
            videoPadding: type === 'video' ? '20' : undefined,
            splitPadding: type === 'split' ? '10' : undefined,
            splitColor: type === 'split' ? '#000' : undefined,
            splitTextAlin: type === 'split' ? 'left' : undefined,
            videoBorderColor: type === 'video' ? '#000000' : undefined,
            videoBorderWidth: type === 'video' ? '0' : undefined,
            videoBorderStyle: type === 'video' ? 'solid' : undefined,
            imgWidth: type === 'images' ? '100' : undefined,
            imgTextAlign: type === 'images' ? "" : undefined,
            imgPadding: type === 'images' ? 10 : undefined,
            imgbg: type === 'images' ? '#0000' : undefined,
            imgBorderColor: type === 'images' ? '#000000' : undefined,
            imgBorderWidth: type === 'images' ? '0' : undefined,
            imgBorderStyle: type === 'images' ? 'solid' : undefined,
            productPadding: type === 'product' ? 10 : undefined,
            productbg: type === 'product' ? '#0000' : undefined,
            productBorderColor: type === 'product' ? '#000000' : undefined,
            productBorderWidth: type === 'product' ? '0' : undefined,
            productBorderStyle: type === 'product' ? 'solid' : undefined,
            productFontSize: type === 'product' ? 16 : undefined,
            productTextColor: type === 'product' ? '#000000' : undefined,
            productWeight: type === 'product' ? 400 : undefined,
            productLetterSpacing: type === 'product' ? 0 : undefined,
            productbtnBorderColor: type === 'product' ? '#000000' : undefined,
            productbtnBorderWidth: type === 'product' ? '1' : undefined,
            productbtnBorderStyle: type === 'product' ? 'solid' : undefined,
            productbtnbg: type === 'product' ? '#FFF' : undefined,
            productradious: type === 'product' ? '3' : undefined,
            productLabel: type === 'product' ? 'Shop Now' : undefined,
            productfontSize: type === 'product' ? '12' : undefined,
            productwidth: type === 'product' ? '80' : undefined,
            productheight: type === 'product' ? '30' : undefined,
            productbackgroundColor: type === 'product' ? '#007BFF' : undefined,
            additionalButtons: [],
            displayStyle: 'flex',
            richleftPadding: type === 'richtext' ? 10 : undefined,
            richtopPadding: type === 'richtext' ? 10 : undefined,
            richFontsize: type === 'richtext' ? "14" : undefined,
            richbgcolor: type === 'richtext' ? "#FFFFFF" : undefined,
            richtextcolor: type === 'richtext' ? "#000" : undefined,
            richTextAlign: type === 'richtext' ? "" : undefined,
            htmltext: type === 'html convert' ? '<h1>Your HTML Here</h1>' : undefined,
            fontsizeMulticolumn: type === 'Multicolumn' ? 14 : undefined,
            MulticolumnbtnBorderColor: type === 'Multicolumn' ? '#000000' : undefined,
            MulticolumnbtnBorderWidth: type === 'Multicolumn' ? '1' : undefined,
            MulticolumnbtnBorderStyle: type === 'Multicolumn' ? 'solid' : undefined,
            MulticolumnPadding: type === 'Multicolumn' ? 10 : undefined,
            MultiPadding: type === 'Multicolumn' ? 0 : undefined,
            Multicolumnbgcolor: type === 'Multicolumn' ? '#FFFFFF' : undefined,
            Multibgcolor: type === 'Multicolumn' ? '#FFFFFF' : '',
            Multitext: type === 'Multicolumn' ? 'center' : '',
            Multigap: type === 'Multicolumn' ? '10' : '',
            MultiColor: type === 'Multicolumn' ? '#000000' : undefined,
            MultibtnBorderColor: type === 'Multicolumn' ? '#000000' : undefined,
            MultibtnBorderWidth: type === 'Multicolumn' ? '1' : undefined,
            MultibtnBorderStyle: type === 'Multicolumn' ? 'solid' : undefined,
            Multibtnheight: type === 'Multicolumn' ? '40' : undefined,
            Multibtnradious: type === 'Multicolumn' ? '2' : undefined,
            Multibtnweight: type === 'Multicolumn' ? '100' : undefined,
            Multibtnbg: type === 'Multicolumn' ? '#007BFF' : 'undefined',
            Multibtnlable: type === 'Multicolumn' ? 'Click' : 'undefined',
            Multibtncolor: type === 'Multicolumn' ? '#0000' : undefined,
            Multibtnfont: type === 'Multicolumn' ? '14' : undefined,
            Multibtnurl: type === 'Multicolumn' ? '' : undefined,

        };
    };

    const addInputField = (type) => {
        let newField;

        if (type === 'images') {
            setImageFieldId(null);
            newField = createInputField('images');
            setFields((prevFields) => [...prevFields, newField]);
            setSelectedFieldId(newField.id);
            if (window.innerWidth > 1400) {
                handleFieldClick(newField.id);
            }
            return;
        } else if (type === 'heading') {
            setEditorValue('');
            newField = createInputField(type);
            setFields((prevFields) => [...prevFields, newField]);
            setSelectedFieldId(newField.id);
            if (window.innerWidth > 1400) {
                handleFieldClick(newField.id);
            }
        } else if (type === 'divider') {
            toggleColorPicker();
            newField = createInputField(type);
            setFields((prevFields) => [...prevFields, newField]);
        } else if (type === 'button') {
            newField = createInputField(type);
            setFields((prevFields) => [...prevFields, newField]);
        } else if (type === 'socalicon') {
            newField = createInputField('socalicon');
            setFields((prevFields) => {
                const updatedFields = [...prevFields, newField];
                console.log("Updated fields after adding new field:", updatedFields);

                setSelectedFieldId(newField.id);
                setSelectedIcons(newField.icons || {});
                setCustomIcons(newField.customIcons || []);
                setShowSocialIconPopup(true);

                return updatedFields;
            });
        } else if (type === 'html convert') {
            newField = createInputField(type, type === 'html convert' ? '<h1>Your HTML Here</h1>' : '');
            setFields((prevFields) => [...prevFields, newField]);
        } else if (type === 'split') {
            const splitFields = [
                createInputField('split', 'image', ''),
                createInputField('split', 'text', ''),
            ];
            setFields((prevFields) => [...prevFields, ...splitFields]);
            splitFields.forEach((field) => {
                if (field.id && window.innerWidth > 1400) {
                    handleFieldClick(field.id);
                }
            });
        } else if (type === 'spacer') {
            newField = createInputField(type);
            setFields((prevFields) => [...prevFields, newField]);
        } else if (type === 'video') {
            newField = createInputField(type);
            setFields((prevFields) => [...prevFields, newField]);
            setShowVideoInput(true);
        } else if (type === 'product') {
            newField = createInputField('product');
            setFields((prevFields) => [...prevFields, newField]);
            setLastProductFieldId(newField.id);
            setIsPopupOpen(true);
            setSelectedProducts([])
            setSearchTerm('');
        } else if (type === 'Multicolumn') {
            const id = generateUniqueId();
            const newField = {
                id,
                type: 'Multicolumn',
                columnCount: 6,
                columnData: Array(6).fill({ content: '', image: null })
            };
            setFields((prevFields) => {
                const updatedFields = [...prevFields, newField];
                if (newField.id && window.innerWidth > 1400) {
                    handleFieldClick(newField.id);
                }
                return updatedFields;
            });
        } else if (type === 'richtext') {
            newField = createInputField('richtext');
            setFields((prevFields) => [...prevFields, newField]);
            setCurrentFieldId(newField.id);
            setEditorValueed('');
        }

        if (newField && newField.id && window.innerWidth > 1400) {
            handleFieldClick(newField.id);
        }
    };


    useEffect(() => {

        const loadReactQuill = async () => {
            const { default: Quill } = await import('react-quill');
            setReactQuill(() => Quill);
        };

        loadReactQuill();
    }, []);

    const handleEdit = (field) => {
        setSelectedFieldId(field.id);
        setSelectedIcons(field.icons);
        setCustomIcons(field.customIcons || []);
        setShowSocialIconPopup(true);
    };

    const handleSaveSocialIcons = () => {
        setFields((prevFields) =>
            prevFields.map((field) =>
                field.id === selectedFieldId
                    ? { ...field, icons: selectedIcons, customIcons }
                    : field
            )
        );
        setShowSocialIconPopup(false);

    };

    useEffect(() => {

        handleSaveSocialIcons();
    }, [selectedIcons, customIcons]);

    const handleToggleIcon = (icon) => {
        setSelectedIcons((prevIcons) => ({
            ...prevIcons,
            [icon]: {
                ...prevIcons[icon],
                isHidden: !prevIcons[icon]?.isHidden,
            },
        }));
    };

    const handleIconUrlChange = (e, icon) => {
        setSelectedIcons((prevIcons) => ({
            ...prevIcons,
            [icon]: {
                ...prevIcons[icon],
                url: e.target.value,
            },
        }));
    };

    const handleCustomIconUpload = (e) => {
        const files = e.target.files;
        const filePromises = Array.from(files).map((file) => {
            return new Promise((resolve) => {
                const reader = new FileReader();
                reader.onloadend = () => {
                    resolve(reader.result);
                };
                reader.readAsDataURL(file);
            });
        });

        Promise.all(filePromises).then((fileUrls) => {
            const newIcons = fileUrls.map((url) => ({
                src: url,
                name: 'Custom Icon',
                isHidden: false
            }));
            setCustomIcons((prevIcons) => [...prevIcons, ...newIcons]);
        });
    };

    const handleCustomIconUrlChange = (e, index) => {
        const newUrl = e.target.value;
        setCustomIcons((prevIcons) =>
            prevIcons.map((icon, i) =>
                i === index ? { ...icon, url: newUrl } : icon
            )
        );
    };

    const toggleCustomIconVisibility = (index) => {
        setCustomIcons((prevIcons) =>
            prevIcons.map((icon, i) =>
                i === index ? { ...icon, isHidden: !icon.isHidden } : icon
            )
        );
    };

    const handleImageUpload = (e) => {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onloadend = () => {
                const newField = createInputField('images', reader.result);
                if (imageFieldId) {
                    setFields((prevFields) =>
                        prevFields.map((field) =>
                            field.id === imageFieldId ? { ...field, value: reader.result } : field
                        )
                    );
                } else {
                    setFields((prevFields) => [...prevFields, newField]);
                }
                setShowImagePopup(false);
                setImageFieldId(null);
            };
            reader.readAsDataURL(file);
        }
    };

    const handleAddHeading = (e) => {
        e.preventDefault();
        if (emailTemplateId) {
            setFields((prevFields) =>
                prevFields.map((field) =>
                    field.id === emailTemplateId
                        ? {
                            ...field,
                            headingText,
                            headingLevel,
                            headingFontSize,
                            headingColor,
                            imageUrl,
                            editorContent: editorValue,
                            headingUrl,
                        }
                        : field
                )
            );
        } else {
            const newField = createInputField('heading', headingText);
            newField.headingLevel = headingLevel;
            newField.headingFontSize = headingFontSize;
            newField.headingColor = headingColor;
            newField.imageUrl = imageUrl;
            newField.editorContent = editorValue;
            newField.headingUrl = headingUrl;
            setFields((prevFields) => [...prevFields, newField]);
        }
        setShowHeadingPopup(false);
        setHeadingText('');
        setHeadingLevel('h1');
        setHeadingFontSize('16');
        setEmailTemplateId(null);
        setImageUrl(null);
        setEditorValue('');
        setHeadingUrl('');
    };

    const handleEditorChange = (value, fieldId) => {
        console.log("Editor value changed:", value);
        console.log("Active field ID:", fieldId);
        setFields((prevFields) => {
            const updatedFields = prevFields.map((field) =>
                field.id === fieldId
                    ? { ...field, editorContent: value }
                    : field
            );
            console.log("Updated fields after editor change:", updatedFields);
            return updatedFields;
        });
    };


    const handleUpdateUrl = (id, newUrl) => {
        setFields((prevFields) =>
            prevFields.map((field) =>
                field.id === id ? { ...field, headingUrl: newUrl } : field
            )
        );
    };

    const handleAddDescription = (e) => {
        e.preventDefault();
        if (emailTemplateId) {
            setFields((prevFields) =>
                prevFields.map((field) =>
                    field.id === emailTemplateId
                        ? { ...field, descriptionText }
                        : field
                )
            );
        } else {
            const newField = createInputField('description', descriptionText);
            setFields((prevFields) => [...prevFields, newField]);
        }

        setShowDescriptionPopup(false);
        setDescriptionText('');
        setTextEditorValue('');
        setEmailTemplateId(null);
    };

    const handleDescriptionChange = (id, value) => {
        setFields((prevFields) =>
            prevFields.map((field) =>
                field.id === id ? { ...field, descriptionText: value } : field
            )
        );
    };

    const removeField = (id) => {
        console.log('Attempting to remove field with ID:', id);
        setFields((prevFields) => {
            const newFields = prevFields.filter(field => field.id !== id);
            setEmailFieldPopup(false)
            console.log('Remaining fields after removal:', newFields);
            return newFields;
        });
    };


    useEffect(() => {
        axios
            .get('http://localhost:4001/get-forms')
            .then((res) => {
                console.log('API Response:', res.data);
                const filteredData = res.data.filter((form) => form.shop === shop);
                setFormDataAdd(filteredData);
            })
            .catch((error) => console.error('API Error:', error));
    }, [shop]);

    useEffect(() => {
        if (formDataAdd.length > 0) {
            const formIds = formDataAdd.map((form) => form.formId);
            console.log('All form IDs:', formIds);
        }
    }, [formDataAdd]);

    const handleFormSelect = async (e) => {
        const title = e.target.value.trim();
        const selectedForm = formDataAdd.find((form) => form.title.trim() === title);


        if (selectedForm) {
            try {
                const response = await fetch(`http://localhost:4001/check-form-connected/${selectedForm.formId}`);
                const data = await response.json();

                if (data.isConnected) {
                    alert('This form is already connected to a template.');

                    const confirmUnlink = window.confirm(
                        'Do you want to unlink it?'
                    );

                    if (confirmUnlink) {
                        const unlinkResponse = await fetch(
                            `http://localhost:4001/unlink-template/${selectedForm.formId}`,
                            { method: 'PUT' }
                        );

                        if (unlinkResponse.ok) {
                            alert('Template unlinked from form.');

                            const updatedCheckResponse = await fetch(
                                `http://localhost:4001/check-form-connected/${selectedForm.formId}`
                            );
                            const updatedCheckData = await updatedCheckResponse.json();

                            if (!updatedCheckData.isConnected) {
                                console.log('Form is no longer connected to a template.');
                            }
                        } else {
                            alert('Failed to unlink template.');
                        }
                    } else {
                        return;
                    }
                }

                setSelectedFormIds((prevFormIds) => {
                    if (prevFormIds.includes(selectedForm.formId)) {
                        return prevFormIds.filter((id) => id !== selectedForm.formId);
                    } else {
                        return [...prevFormIds, selectedForm.formId];
                    }
                });

                setSelectedTitles((prevSelectedTitles) => {
                    if (prevSelectedTitles.includes(title)) {
                        return prevSelectedTitles.filter((t) => t !== title);
                    } else {
                        return [...prevSelectedTitles, title];
                    }
                });
            } catch (error) {
                console.error('Error checking or unlinking form connection:', error);
                alert('An error occurred while processing the form connection.');
            }
        }
    };

    useEffect(() => {
        console.log('Selected form IDs:', selectedFormIds);
    }, [selectedFormIds]);

    // const captureFormAsImage = () => {
    //     const formElement = document.querySelector('.email-template');

    //     if (!formElement) {
    //       console.error('Form container not found');
    //       return;
    //     }

    //     formElement.style.position = 'relative';
    //     formElement.style.top = '0px';

    //     const emailFields = document.querySelectorAll('.email_field');
    //     emailFields.forEach(field => {
    //       field.style.border = 'none'; 
    //     });

    //     const originalOverflow = document.body.style.overflow;
    //     const originalFormOverflow = formElement.style.overflow;

    //     document.body.style.overflow = 'hidden'; 
    //     formElement.style.overflow = 'hidden';

    //     window.scrollTo(0, formElement.offsetTop);

    //     setTimeout(() => {
    //       const formWidth = formElement.offsetWidth; 
    //       const formHeight = formElement.offsetHeight; 

    //       html2canvas(formElement, {
    //         width: formWidth,
    //         height: formHeight,
    //         useCORS: true,
    //         backgroundColor: null, 
    //         logging: true,
    //       })
    //         .then((canvas) => {
    //           const imageBase64 = canvas.toDataURL('image/png');
    //           console.log('Generated Base64 Image:', imageBase64);
    //           createOrUpdateForm(imageBase64); 
    //         })
    //         .catch((error) => {
    //           console.error('Error capturing form as image:', error);
    //         })
    //         .finally(() => {

    //           document.body.style.overflow = originalOverflow;
    //           formElement.style.overflow = originalFormOverflow;
    //         });
    //     }, 500);
    //   };

    const createOrUpdateForm = async () => {

        const timestamp = format(new Date(), "yyyy-MM-dd HH:mm:ss a");
        let trimmedTitle = formTitle.trim();
        if (!trimmedTitle) {
            alert('Please provide a title for the template.');
            return;
        }

        if (selectedFormIds.length === 0) {
            alert('Please select form before saving the template.');
            return;
        }

        if (!id) {
            try {
                const response = await axios.get(`http://localhost:4001/check-title/${trimmedTitle}`);
                if (response.data.exists) {

                    trimmedTitle = `${trimmedTitle}-${format(new Date(), "yyyyMMddHHmmss")}`;
                }
            } catch (error) {
                console.error('Error checking title:', error);
                return;
            }
        }

        const templateId = emailTemplateId || generateUniqueId();
        setEmailTemplateId(templateId);

        if (fields.length === 0) {
            console.warn('No fields to create the form.');
            return;
        }

        const validFields = fields.filter(field => field && field.type);

        const updatedFields = validFields.map(field => {
            let value = '';

            switch (field.type) {
                case 'images':
                    value = field.value || 'No Image Provided';
                    break;
                case 'heading':
                    value = field.value || '';
                    field.editorContent = field.editorContent;
                    field.headingUrl = field.headingUrl || '';
                    field.imageUrl = field.imageUrl || '';
                    break;
                case 'description':
                    value = field.value || '';
                    break;
                case 'socalicon':
                    value = field.icons || 'No Social Icons Provided';
                    break;
                case 'divider':
                    value = field.icons || 'No Social Icons Provided';
                    break;
                case 'button':
                    value = 'Button';
                case 'split':
                    value = field.value || 'No Value Provided';
                    field.add = field.add;
                    field.splitbg = field.splitbg || '';
                    field.splitheight = field.splitheight || '',
                        field.width = field.width || '50%';
                    field.splitPadding = field.splitPadding || 0
                    field.splitTextAlin = field.splitTextAlin || 'left';
                    break;
                case 'spacer':
                    value = 'Spacer Field';
                    field.spacerHeight = field.spacerHeight || 30;
                    field.spacerbg = field.spacerbg || '#f0f0f0';
                    break;
                case 'video':
                    value = field.value;
                    field.videoPadding = field.videoPadding || 20;
                    field.videoBorderWidth = field.videoBorderWidth || 1;
                    field.videoBorderStyle = field.videoBorderStyle || 'solid';
                    field.videoBorderColor = field.videoBorderColor || '#000';
                    break;
                case 'richtext':
                    value = field.value;
                    field.content = field.content || editorValueed || field.value || '';
                    break;
                case 'Multicolumn':
                    value = field.value;

                    if (!field.columnData) {
                        field.columnData = Array.from({ length: columnCount }, (_, i) => ({
                            image: columnImages[`${field.id}-${i}`] || '',
                            content: editorValues[`${field.id}-${i}`] || '',
                            isVisible: false,
                            Multibtnurl: '',
                            Multibtnlable: '',

                        }));
                    } else {

                        for (let i = 0; i < columnCount; i++) {
                            field.columnData[i] = {
                                image: columnImages[`${field.id}-${i}`] || field.columnData[i]?.image,
                                content: editorValues[`${field.id}-${i}`] || field.columnData[i]?.content,
                                isVisible: field.columnData[i]?.isVisible ?? false,
                                Multibtnlable: field.columnData[i]?.Multibtnlable || '',
                                Multibtnurl: field.columnData[i]?.Multibtnurl || '',
                            };
                        }
                    }

                    const validColumns = field.columnData.filter(column => column.image || column.content);

                    field.columnData = validColumns;
                    field.columnsPerRow = field.columnsPerRow || 1;
                    field.columnCount = validColumns.length;

                    break;
                case 'product':
                    return {
                        ...field,
                        products: field.products || [],
                        productsPerRow,
                        viewMode,
                        price: showPrice,
                        buttonUrl: field.productUrl || `https://${shop}/admin/products?selectedView=all`,
                        showbtnn: showbtnn

                    };

                default:
                    value = '';
            }

            if (field.type === 'html convert') {
                return {
                    ...field,
                    value: field.value || '',
                };
            }

            if (field.type === 'button') {
            }

            if (field.type === 'socalicon') {
                field.socalIconHeight = field.socalIconHeight;
                field.socalIconWidth = field.socalIconWidth;

                const filteredIcons = {
                    facebook: field.icons.facebook?.isHidden ? undefined : field.icons.facebook,
                    twitter: field.icons.twitter?.isHidden ? undefined : field.icons.twitter,
                    instagram: field.icons.instagram?.isHidden ? undefined : field.icons.instagram,
                    send: field.icons.send?.isHidden ? undefined : field.icons.send,
                };

                field.icons = Object.fromEntries(
                    Object.entries(filteredIcons).filter(([key, value]) => value !== undefined)
                );

                field.customIcons = field.customIcons || [];
            } else {
                field.icons = {};
            }

            return {
                ...field,
                label: field.label || (field.type === 'button' ? 'Button' : `Default Label for ${field.type}`),
                name: field.name || `Field_${field.id}`,
                value: field.type === 'product' ? undefined : value,
                headerbtnbg: field.headerbtnbg || null,
                headeropacity: field.headeropacity || '',
                headerbtncolor: field.headerbtncolor || null,
                headerbtn: field.headerbtn || null,
                headingLevel: field.headingLevel || null,
                headingbtnPadding: field.headingbtnPadding || 10,
                headingbtntopPadding: field.headingbtntopPadding || 10,
                headingbtnradious: field.headingbtnradious || 4,
                headingbtnwidth: field.headingbtnwidth || 100,
                headingsubheading: field.headingsubheading || 16,
                headingbtnFontSize: field.headingbtnFontSize || 16,
                headingbtnheight: field.headingbtnheight || 40,
                headingbtnBorderWidth: field.headingbtnBorderWidth || 1,
                headingbtnBorderStyle: field.headingbtnBorderStyle || 'solid',
                headingbtnBorderColor: field.headingbtnBorderColor || '#000',
                subheadingColor: field.subheadingColor || '',
                bannerImageWidth: field.bannerImageWidth || '100',
                bannerImageHeight: field.bannerImageHeight || '',
                bannerImageTextAlign: field.bannerImageTextAlign || '',
                richTextAlign: field.richTextAlign || '',
                richFontsize: field.richFontsize || '',
                richbgcolor: field.richbgcolor,
                richtextcolor: field.richtextcolor,
                richleftPadding: field.richleftPadding || 10,
                richtopPadding: field.richtopPadding || 10,
                headingFontWeight: field.headingFontWeight || 600,
                headingColor: field.headingColor || '#000',
                headingbg: field.headingbg || '#ffff',
                headingPadding: field.headingPadding || 0,
                headingbgImage: field.headingbgImage || '',
                headingLetterSpacing: field.headingLetterSpacing || 0,
                headingTextAlign: field.headingTextAlign || '',
                headingText: field.headingText,
                headingBorderWidth: field.headingBorderWidth || 1,
                headingBorderStyle: field.headingBorderStyle || 'solid',
                headingBorderColor: field.headingBorderColor || '#000',
                headingFontSize: field.type === 'heading' ? (field.headingFontSize || "16") : undefined,
                descritionFontWeight: field.descritionFontWeight || 600,
                descritionFontSize: field.descritionFontSize || 16,
                descritionColor: field.descritionColor || '#000',
                descriptionbg: field.descriptionbg || '#ffff',
                descriptionPadding: field.descriptionPadding || 10,
                descriptionLetterSpacing: field.descriptionLetterSpacing || 0,
                descriptionTextAlign: field.descriptionTextAlign || '',
                descriptionBorderWidth: field.descriptionBorderWidth || 1,
                descriptionBorderStyle: field.descriptionBorderStyle || 'solid',
                descriptionBorderColor: field.descriptionBorderColor || '#000',
                dividerColor: field.dividerColor || '#000',
                dividerbgColor: field.dividerbgColor || '',
                dividerWidth: field.dividerWidth || '100',
                dividerheight: field.dividerheight || '1',
                buttonbgColor: field.buttonbgColor || '',
                buttonColor: field.buttonColor || '#007BFF',
                buttonFontSize: field.buttonFontSize || 16,
                buttonTextColor: field.buttonTextColor || '#fff',
                buttonLetterSpacing: field.buttonLetterSpacing || 0,
                buttonUrll: field.buttonUrll || '',
                buttonBorderWidth: field.buttonBorderWidth || 1,
                buttonBorderStyle: field.buttonBorderStyle || 'solid',
                buttonBorderColor: field.buttonBorderColor || '#000',
                buttonWidth: field.buttonWidth || 150,
                buttonHeight: field.buttonHeight || 40,
                buttonradious: field.buttonradious || 40,
                buttonPadding: field.buttonPadding || 10,
                socalIconHeight: field.socalIconHeight || 30,
                socalIconWidth: field.socalIconWidth || 30,
                socalIconPadding: field.socalIconPadding || 10,
                socalIcongap: field.socalIcongap || '',
                socalIconbg: field.socalIconbg || '#FFF',
                socaliconTextAlign: field.socaliconTextAlign || '',
                htmlFontSize: field.htmlFontSize || 16,
                htmlPadding: field.htmlPadding || 10,
                htmlColor: field.htmlColor || '#000',
                splitbg: field.splitbg || '',
                splitbtn: field.splitbtn || '',
                splitbtnbg: field.splitbtnbg || '',
                splitbtnfont: field.splitbtnfont || '',
                splitbtncolor: field.splitbtncolor || '',
                splitbtnurl: field.splitbtnurl || '',
                splitbtnheight: field.splitbtnheight || '',
                splitbtnwidth: field.splitbtnwidth || '',
                splitbtnradious: field.splitbtnradious || '',
                splitheight: field.splitheight || '',
                width: field.width || '100%',
                spacerHeight: field.spacerHeight || 20,
                spacerbg: field.spacerbg || '#fff',
                videoPadding: field.videoPadding || 20,
                splitPadding: field.splitPadding || 0,
                splitColor: field.splitColor || '',
                splitTextAlin: field.splitTextAlin || 'left',
                videoBorderWidth: field.videoBorderWidth || 1,
                videoBorderStyle: field.videoBorderStyle || 'solid',
                videoBorderColor: field.videoBorderColor || '#000',
                imgWidth: field.imgWidth || '100',
                imgTextAlign: field.imgTextAlign || '',
                imgPadding: field.imgPadding || 10,
                imgbg: field.imgbg || '#ffff',
                imgBorderWidth: field.imgBorderWidth || 0,
                imgBorderStyle: field.imgBorderStyle || 'solid',
                imgBorderColor: field.imgBorderColor || '#000',
                productPadding: field.productPadding || 10,
                productbg: field.productbg || '#ffff',
                productBorderWidth: field.productBorderWidth || 0,
                productBorderStyle: field.productBorderStyle || 'solid',
                productBorderColor: field.productBorderColor || '#000',
                productFontSize: field.productFontSize || 16,
                productColor: field.productColor || '#000',
                productWeight: field.productWeight || 600,
                productLetterSpacing: field.productLetterSpacing || 0,
                productbtnBorderColor: field.productbtnBorderColor || '#000',
                productbtnBorderWidth: field.productbtnBorderWidth || 16,
                productbtnBorderStyle: field.productbtnBorderStyle || '#000',
                productbtnbg: field.productbtnbg || 600,
                productradious: field.productradious || 0,
                productLabel: field.productLabel || 'Shop Now',
                productfontSize: field.productfontSize || '12',
                productwidth: field.productwidth || 80,
                productheight: field.productheight || 30,
                productbackgroundColor: field.productbackgroundColor || '#007BFF',
                buttonLabel: field.buttonLabel || '',
                buttonaline: field.buttonaline || '',
                fontsizeMulticolumn: field.fontsizeMulticolumn || 14,
                Multicolumnbgcolor: field.Multicolumnbgcolor || '',
                Multibgcolor: field.Multibgcolor || '',
                Multitext: field.Multitext || '',
                Multigap: field.Multigap || '',
                Multibtnlable: field.Multibtnlable || '',
                Multibtncolor: field.Multibtncolor || '',
                Multibtnbg: field.Multibtnbg || '',
                Multibtnweight: field.Multibtnweight || '',
                Multibtnheight: field.Multibtnheight || '',
                Multibtnradious: field.Multibtnradious || '',
                Multibtnfont: field.Multibtnfont || '',
                Multibtnurl: field.Multibtnurl || '',
                MulticolumnbtnBorderColor: field.MulticolumnbtnBorderColor || '',
                MulticolumnbtnBorderWidth: field.MulticolumnbtnBorderWidth || '',
                MulticolumnbtnBorderStyle: field.MulticolumnbtnBorderStyle || '',
                MultibtnBorderColor: field.MultibtnBorderColor || '',
                MultiColor: field.MultiColor || '',
                MultibtnBorderWidth: field.MultibtnBorderWidth || '',
                MultibtnBorderStyle: field.MultibtnBorderStyle || '',
                MulticolumnPadding: field.MulticolumnPadding || '',
                MultiPadding: field.MultiPadding || '',
                splitBorderColor: field.splitBorderColor || '',
                splitBorderWidth: field.splitBorderWidth || '',
                splitBorderStyle: field.splitBorderStyle || '',
                showbtnmulti: showbtnmulti || false,
            };
        });

        console.log('Updated fields:', updatedFields);
        
        const formData  = {
            templateId,
            shop,
            form_ids: selectedFormIds.map(id => String(id)),
            title: trimmedTitle,
            fields: updatedFields,
            createdAt: timestamp,
            styles: {
                backgroundImage,
                backgroundColor,
                borderRadious,
                templatePadding,
                textAlign,
                fontFamily,
                width: viewMode === 'desktop' ? '800px' : '400px',
                dividerColor,
            },
        };

        try {
            setSaveEmail(!saveEmail);
            const response = id
                ? await axios.put(`http://localhost:4001/update/${id}`, formData)
                : await axios.post('http://localhost:4001/send/api', formData);
            console.log('Form saved successfully with title:', trimmedTitle);
            const successMessage = id ? 'Form updated successfully' : 'Form created successfully';
            console.log(successMessage, response.data);

            if (!id) {
                resetFormState();
            }
            setExistingTitles(prevTitles => [...prevTitles, trimmedTitle]);
        } catch (error) {
            console.error('Error saving form:', error);
            if (error.response) {
                console.error('Response data:', error.response.data);
            }
        }
    };


    const resetFormState = () => {
        setFields([]);
        setEmailTemplateId(null);
        setHeadingText('');
        setBackgroundImage(null);
        setTemplatePadding('20')
        setBackgroundColor('#ffffff');
        setTextAlign('left');
        setBorderRadious(5)
        setId(null);
    };

    const handleContinue = () => {
        navigate('/app/emailTemplate/list');
        setSaveEmail(false);
        setCancelEmail(false)
    };


    const handleBackgroundImageUpload = (e) => {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onloadend = () => {
                setBackgroundImage(reader.result);
            };
            reader.readAsDataURL(file);
        }
    };

    useEffect(() => {
        const formBuilder = formBuilderRef.current;
        if (!formBuilder) return;

        const sortable = Sortable.create(formBuilder, {
            animation: 150,
            ghostClass: 'dragging',
            onEnd: (evt) => {
                const newFields = [...fields];
                const movedField = newFields.splice(evt.oldIndex, 1)[0];
                newFields.splice(evt.newIndex, 0, movedField);
                setFields(newFields);
            },
        });

        return () => {
            sortable.destroy();
        };
    }, [fields]);

    const toggleViewMode = (mode) => {
        setViewMode(mode);
        setEmailWidth(mode === 'desktop' ? '800px' : '400px');

        setFields((prevFields) =>
            prevFields.map((field) => ({
                ...field,
                columnsPerRow: mode === 'mobile' ? 1 : field.defaultColumnsPerRow || 3,

            }))
        );
    };

    // const toggleViewMode = (mode) => {
    //     setViewMode(mode);
    //     setEmailWidth(mode === 'desktop' ? '800px' : '400px');
    //     if (mode === 'mobile') {
    //         setProductsPerRow(1);
    //         setColumnsPerRow(1);
    //     } else {
    //         setProductsPerRow(3);
    //         setColumnsPerRow(3);
    //     }
    // };

    const toggleColorPicker = () => {
        setShowColorPicker(!showColorPicker);
    };

    const togglebtn = () => {
        setShowBtn(!showbtn);
    };

    const toggleFields = () => {
        setShowFields(true);
        setDropdownVisible(false);
    };

    const toggleSettings = () => {
        setShowFields(false);
    };

    const renderField = (field) => {
        if (!field) return null;

        switch (field.type) {
            case 'html convert':
                return (
                    <div>
                        <textarea
                            value={field.value || field.htmltext}
                            onChange={(e) =>
                                setFields((prevFields) =>
                                    prevFields.map((f) => (f.id === field.id ? { ...f, value: e.target.value } : f))
                                )
                            }
                            rows="5"
                            cols="50"
                        />
                    </div>
                );

            default:
                return;
        }
    };


    useEffect(() => {
        const handleClickOutside = (event) => {
            if (window.innerWidth > 1400 && popupRef.current && !popupRef.current.contains(event.target)) {
                setEmailFieldPopup(false);
            }
        };

        document.addEventListener('mousedown', handleClickOutside);

        return () => {
            document.removeEventListener('mousedown', handleClickOutside);
        };
    }, []);


    useEffect(() => {
        const handleClickOutside = (event) => {
            if (emailFieldRef.current && !emailFieldRef.current.contains(event.target)) {
                setActiveFieldId(null);
            }
        };

        document.addEventListener('mousedown', handleClickOutside);

        return () => {
            document.removeEventListener('mousedown', handleClickOutside);
        };
    }, []);

    const handleWidthChange = (newWidth) => {
        setFields((prevFields) => {
            const selectedIndex = prevFields.findIndex((f) => f.id === selectedFieldId);

            if (selectedIndex !== -1 && selectedIndex % 2 === 0) {
                return prevFields.map((f, index) => {
                    if (index === selectedIndex) {
                        return { ...f, width: newWidth };
                    }
                    if (index === selectedIndex + 1) {
                        return { ...f, width: `${100 - parseInt(newWidth)}%` };
                    }
                    return f;
                });
            } else if (selectedIndex !== -1) {
                return prevFields.map((f, index) => {
                    if (index === selectedIndex) {
                        return { ...f, width: newWidth };
                    }
                    if (index === selectedIndex - 1) {
                        return { ...f, width: `${100 - parseInt(newWidth)}%` };
                    }
                    return f;
                });
            }
            return prevFields;
        });
    };

    const handleVideoChange = (e, id) => {
        const updatedFields = fields.map(field => {
            if (field.id === id && field.type === 'video') {
                return { ...field, value: e.target.value };
            }
            return field;
        });
        setFields(updatedFields);
    };

    const getVideoEmbedUrl = (url) => {
        const videoId = url.split('v=')[1]?.split('&')[0];
        if (videoId) {
            return `https://www.youtube.com/embed/${videoId}?autohide=1&showinfo=0&controls=0`;
        }
        return null;
    };

    const handleProductClick = (product, isChecked) => {
        setSelectedProducts((prevSelectedProducts) => {
            if (isChecked) {

                return [...prevSelectedProducts, product];
            } else {
                return prevSelectedProducts.filter((p) => p.id !== product.id);
            }
        });

        setFields((prevFields) => {
            return prevFields.map((field) => {
                if (field.id === lastProductFieldId && field.type === 'product') {
                    return {
                        ...field,
                        products: isChecked
                            ? [...(field.products || []), product]
                            : (field.products || []).filter((p) => p.id !== product.id)
                    };
                }
                return field;
            });
        });

        setIsPopupOpen(true);
    };

    const handleRemoveProductFromForm = (index) => {
        const productToRemove = productTitles?.[index];

        if (!productToRemove) return;

        setProductTitles((prevTitles) =>
            Array.isArray(prevTitles) ? prevTitles.filter((title, i) => i !== index) : prevTitles
        );

        setSelectedProducts((prevSelectedProducts) =>
            Array.isArray(prevSelectedProducts)
                ? prevSelectedProducts.filter((product) => product.title !== productToRemove)
                : prevSelectedProducts
        );

        setFields((prevFields) =>
            Array.isArray(prevFields)
                ? prevFields.map((field) =>
                    field.type === 'product'
                        ? { ...field, products: field.products.filter((product) => product.title !== productToRemove) }
                        : field
                )
                : prevFields
        );
    };

    const handleClosePopup = () => {
        setIsPopupOpen(false);
        setSelectedProduct(null);
    };

    const togglePrice = () => {
        setShowPrice(!showPrice);
    };

    const togglebtnn = () => {
        setShowbtnn(!showbtnn);
    };

    const togglesplit = (fieldId) => {
        setShowbtnsplit((prev) => !prev);

        setFields((prevFields) =>
            prevFields.map((f) =>
                f.id === fieldId ? { ...f, showbtnsplit: !f.showbtnsplit } : f
            )
        );
    };

    const AddProduct = () => {
        setIsPopupOpen(true);
    }

    useEffect(() => {
        console.log('isPopupOpen:', isPopupOpen);
        console.log('selectedProduct:', selectedProduct);
    }, [isPopupOpen, selectedProduct]);


    const handleAddProductToSelected = (fieldId, fieldTitle, fieldImage, products) => {
        console.log("Field ID:", fieldId);
        console.log("Field Title:", fieldTitle);
        console.log("Products:", products);
        console.log("Image:", fieldImage);
        setLastProductFieldId(fieldId);
        setPopupFieldTitle(fieldTitle);

        const productTitles = products.map(product => product.title);
        console.log("Product Titles:", productTitles);

        setProductTitles(productTitles);

        const productImages = products.map(product => product.image);
        console.log("Product images:", productImages);
        setProductImage(productImages);
    };

    const handleProductsPerRowChange = (e) => {
        setProductsPerRow(parseInt(e.target.value, 6));
    };


    const totalPages = Math.ceil(products.length / formsPerPage);

    const handlePageChange = (page) => {
        if (page < 1 || page > totalPages) return;
        setCurrentPage(page);
    };

    const currentProducts = products.slice(
        (currentPage - 1) * formsPerPage,
        currentPage * formsPerPage
    );

    const generatePageNumbers = () => {
        const visiblePages = [];

        if (totalPages <= 5) {
            for (let i = 1; i <= totalPages; i++) {
                visiblePages.push(i);
            }
        } else {

            if (currentPage <= 3) {
                visiblePages.push(1, 2, 3, 4, '...', totalPages);
            }

            else if (currentPage >= totalPages - 2) {
                visiblePages.push(1, '...', totalPages - 3, totalPages - 2, totalPages - 1, totalPages);
            }

            else {
                visiblePages.push(1, '...', currentPage - 1, currentPage, currentPage + 1, '...', totalPages);
            }
        }

        return visiblePages;
    };


    const handleRemoveBackgroundImage = () => {
        setBackgroundImage('');
    };

    const RemoveImage = (fieldId) => {
        console.log(`Removing image for field with ID: ${fieldId}`);
        setFields((prevFields) =>
            prevFields.map((field) =>
                field.id === fieldId
                    ? { ...field, imageUrl: null }
                    : field
            )
        );
    };

    const handleFileChange = (e, fieldId) => {
        const file = e.target.files[0];
        if (file && file.type.startsWith('image/')) {
            setFields(prevFields =>
                prevFields.map(f =>
                    f.id === fieldId ? { ...f, headingbgImage: file } : f
                )
            );
        } else {
            console.error('Please upload a valid image file.');
        }
    };

    const handleFieldClick = (fieldId) => {
        setSelectedFieldId(fieldId);
        setEmailFieldPopup(true);
        setActiveFieldId(fieldId);
        const selectedField = fields.find((field) => field.id === fieldId);
        if (selectedField && selectedField.type === 'Multicolumn') {
            setIsPopupVisible(true);
            setColumnCount(selectedField.columnCount);
        }
        if (window.innerWidth <= 1400) {
            handleFieldPro();
        }
    };

    const handleColumnClick = (fieldId, columnIndex) => {
        setPopupFieldId(fieldId);

        setFields((prevFields) =>
            prevFields.map((field) =>
                field.id === fieldId
                    ? { ...field, selectedColumn: columnIndex }
                    : field
            )
        );
    };

    const handleEditorChangeee = (value) => {
        setEditorValueed(value);
    };

    const handleSave = () => {
        const updatedFields = fields.map((field) =>
            field.id === currentFieldId ? { ...field, content: editorValueed } : field
        );
        setFields(updatedFields);
        setPopupVisibleed(false);
    };

    const handleRemoveImage = (fieldId, index) => {
        setFields((prevFields) =>
            prevFields.map((field) =>
                field.id === fieldId
                    ? {
                        ...field,
                        columnData: field.columnData.map((col, i) =>
                            i === index ? { ...col, image: null } : col
                        ),
                    }
                    : field
            )
        );
    };

    const filteredProducts = currentProducts.filter((product) =>
        product.title.toLowerCase().includes(searchTerm.toLowerCase())
    );

    const handleEditChange = (value, fieldId) => {
        setFields((prevFields) => {
            const updatedFields = prevFields.map((field) =>
                field.id === fieldId ? { ...field, content: value } : field
            );
            return updatedFields;
        });
    };

    useEffect(() => {
        if (window.innerWidth > 1400) {
            setShowFieldInput(true);
        } else {
            setShowFieldInput(false);
        }

        const handleResize = () => {
            if (window.innerWidth > 1400) {
                setShowFieldInput(true);
            } else {
                setShowFieldInput(false);
            }
        };

        window.addEventListener("resize", handleResize);
        return () => window.removeEventListener("resize", handleResize);
    }, []);

    const handleFieldInput = () => {
        if (window.innerWidth <= 1400) {
            setShowFieldInput(true);
        }
    };

    const hanldeCancleBtn = () => {
        setShowFieldInput(false);
    }

    useEffect(() => {
        if (window.innerWidth > 1400) {
            setShowFieldPro(true);
        } else {
            setShowFieldPro(false);
        }

        const handleResize = () => {
            if (window.innerWidth > 1400) {
                setShowFieldPro(true);
            } else {
                setShowFieldPro(false);
            }
        };

        window.addEventListener("resize", handleResize);
        return () => window.removeEventListener("resize", handleResize);
    }, []);

    const handleFieldPro = () => {
        if (window.innerWidth <= 1400) {
            setShowFieldPro(true);
        }
    };

    const hanldeCanclepro = () => {
        setShowFieldPro(false);
    }

    const addColumn = (fieldId) => {
        const updatedFields = fields.map(f => {
            if (f.id === fieldId) {
                if (f.columnCount < 6) {

                    return {
                        ...f,
                        columnCount: f.columnCount + 1,
                        columnData: [...f.columnData, { content: '', image: null }]
                    };
                } else {

                    alert('You cannot add more than 6 columns');
                    return f;
                }
            }
            return f;
        });
        setFields(updatedFields);
    };

    const removeColumn = (fieldId, index) => {
        console.log(`Attempting to remove column at index: ${index}`);

        const updatedFields = fields.map(f =>
            f.id === fieldId
                ? {
                    ...f,
                    columnCount: f.columnCount - 1,
                    columnData: f.columnData.filter((_, i) => i !== index)
                }
                : f
        );

        console.log(`Updated columns for field ${fieldId}:`, updatedFields);
        setFields(updatedFields);
    };


    const handleCustomIconRemove = (index) => {
        setCustomIcons((prevIcons) => prevIcons.filter((_, i) => i !== index));
    };

    const handleImageChange1 = (e, fieldId, index) => {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onloadend = () => {
                const updatedFields = fields.map(f =>
                    f.id === fieldId
                        ? {
                            ...f,
                            columnData: f.columnData.map((col, i) =>
                                i === index ? { ...col, image: reader.result } : col
                            ),
                        }
                        : f
                );
                setFields(updatedFields);
            };
            reader.readAsDataURL(file);
        }
    };
    const handleCancle = () => {
        setCancelEmail(true);
    }

    const removeImage = (fieldId, index) => {
        const updatedFields = fields.map(f =>
            f.id === fieldId
                ? {
                    ...f,
                    columnData: f.columnData.map((col, i) =>
                        i === index ? { ...col, image: null } : col
                    ),
                }
                : f
        );
        setFields(updatedFields);
    };

    const handleColoumPerRowChange = (e, fieldId) => {
        const updatedFields = fields.map((f) => {
            if (f.id === fieldId) {
                return {
                    ...f,
                    columnsPerRow: Number(e.target.value),
                };
            }
            return f;
        });
        setFields(updatedFields);
    };

    const toggleButtonVisibility = (fieldId, columnIndex) => {
        const updatedFields = fields.map(field =>
            field.id === fieldId
                ? {
                    ...field,
                    columnData: field.columnData.map((col, index) =>
                        index === columnIndex ? { ...col, isVisible: !col.isVisible } : col
                    ),
                }
                : field
        );
        setFields(updatedFields);
    };

    return (
        <div>
            <div className='email-campaing-templates email-templates-wredd'>
                <div className="builder-container">
                    <h3>Email campaign</h3>

                    <div className='builder_form_name'>
                        <div className='email-template-heading'>
                            <input
                                type="text"
                                value={formTitle}
                                onChange={(e) => setFormTitle(e.target.value)}
                                placeholder="Enter Name"
                            />
                        </div>
                        <div className='template-select-forms'>
                            <select onChange={handleFormSelect}>
                                <option value="">Select a form</option>
                                {formDataAdd.map((form) => (
                                    <option
                                        key={form.id}
                                        value={form.title}
                                        style={{
                                            color: selectedFormIds.includes(form.formId) ? '#45A7F6' : 'black',
                                        }}
                                    >
                                        {form.title}
                                    </option>
                                ))}
                            </select>
                        </div>
                    </div>
                    <div className='form-Elements-btn email' onClick={handleFieldInput}>Form Elements</div>
                    <div className='builder-forms_rapp'>
                        <div className="builder-wrp">
                            <div className="controls-main-wrp email-tempalte">
                                {showFieldInput && (<div className="controls-wrp email">
                                    {showField && (<div className="controls">
                                        <div className='builder-form-element'>
                                            <div className='buil_form_texttt'>
                                                <div className='buil_form_texttt_p'>
                                                    <h2> Elements</h2>
                                                </div>
                                            </div>
                                        </div>
                                        <div className='controls-wrpping cancleimg pro email field' onClick={hanldeCancleBtn}><img src={cancleimg} alt="" /></div>
                                        <div className='builder_fieldes'>
                                            <div className='builder_form_select_control'>
                                                <div
                                                    className={`builder_form_fields ${showFields ? 'active' : ''}`}
                                                    onClick={toggleFields}
                                                >
                                                    <h2>Fields</h2>
                                                </div>
                                                <div
                                                    className={`builder_form_setting ${!showFields ? 'active' : ''}`}
                                                    onClick={toggleSettings}
                                                >
                                                    <h2>Settings</h2>
                                                </div>

                                            </div>
                                            {showFields ? (
                                                <div>
                                                    <div className='builderr_field_wrpp email'> <button onClick={() => addInputField('heading')}><span className='form_builder_field_img'><img src={banner} alt="" /></span> <span><h4>Banner</h4></span></button></div>
                                                    <div className='builderr_field_wrpp email'> <button onClick={() => addInputField('richtext')}><span className='form_builder_field_img'><img src={rich} alt="" /></span> <span><h4>Rich Text</h4></span></button></div>
                                                    {/* <div className='builderr_field_wrpp'> <button onClick={() => addInputField('description')}><span className='form_builder_field_img'><img src={font} alt="" /></span> <span><h4>Description</h4></span></button></div> */}
                                                    <div className='builderr_field_wrpp email'> <button onClick={() => addInputField('button')}><span className='form_builder_field_img'><img src={btn} alt="" /></span> <span><h4>Button</h4></span></button></div>
                                                    <div className='builderr_field_wrpp email'> <button onClick={() => addInputField('divider')}><span className='form_builder_field_img'><img src={divider2} alt="" /></span> <span><h4>Divider</h4></span></button></div>
                                                    <div className='builderr_field_wrpp email'> <button onClick={() => addInputField('split')}><span className='form_builder_field_img'><img src={itext} alt="" /></span> <span><h4>Images with Text</h4></span></button></div>
                                                    <div className='builderr_field_wrpp email'> <button onClick={() => addInputField('images')}><span className='form_builder_field_img'><img src={image} alt="" /></span> <span><h4>Images</h4></span></button></div>
                                                    <div className='builderr_field_wrpp email'> <button onClick={() => addInputField('socalicon')}><span className='form_builder_field_img'><img src={socail} alt="" /></span> <span><h4>Social Icon</h4></span></button></div>
                                                    <div className='builderr_field_wrpp email'> <button onClick={() => addInputField('html convert')}><span className='form_builder_field_img'><img src={htmlicon} alt="" /></span> <span><h4>HTML Block</h4></span></button></div>
                                                    <div className='builderr_field_wrpp email'> <button onClick={() => addInputField('spacer')}><span className='form_builder_field_img'><img src={spacer} alt="" /></span> <span><h4>Spacer</h4></span></button></div>
                                                    <div className='builderr_field_wrpp email'> <button onClick={() => addInputField('Multicolumn')}><span className='form_builder_field_img'><img src={multimedia} /></span><span><h4>Multicolumn</h4></span></button></div>
                                                    {/* <div className='builderr_field_wrpp'> <button onClick={() => addInputField('video')}><span className='form_builder_field_img'><img src={image} alt="" /></span> <span><h4>video</h4></span></button></div> */}
                                                    <div className='builderr_field_wrpp email'> <button onClick={() => addInputField('product')}><span className='form_builder_field_img'><img src={product} alt="" /></span> <span><h4>Product</h4></span></button></div></div>

                                            ) : (
                                                <div>
                                                    <div className='edit_form_close'>
                                                        <div className='edit-formwrap'>
                                                            <h3>Edit Properties</h3>
                                                            <div className="builder_field_wrpp">
                                                                <div className='edit-form-options'>
                                                                    <div className="edit_setting_bg">
                                                                        <label htmlFor="font-family-selector">Font-Family</label>
                                                                        <select
                                                                            id="font-family-selector"
                                                                            value={fontFamily}
                                                                            onChange={handleFontChange}
                                                                        >
                                                                            <option value="Arial">Arial</option>
                                                                            <option value="Verdana">Verdana</option>
                                                                            <option value="Times New Roman">Times New Roman</option>
                                                                            <option value="Georgia">Georgia</option>
                                                                            <option value="Courier New">Courier New</option>
                                                                            <option value="Roboto">Roboto</option>
                                                                            <option value="Raleway">Raleway</option>
                                                                            <option value="Gotham">Gotham</option>
                                                                            <option value="Montserrat">Montserrat</option>
                                                                            <option value="Lato">Lato</option>
                                                                            <option value="Helvetica">Helvetica</option>
                                                                            <option value="Source Sans Pro">Source Sans Pro</option>
                                                                            <option value="Poppins">Poppins</option>
                                                                            <option value="Quicksand">Quicksand</option>
                                                                            <option value="Work Sans">Work Sans</option>
                                                                            <option value="Barlow">Barlow</option>
                                                                            <option value="Varela Round">Varela Round</option>
                                                                            <option value="Josefin Sans">Josefin Sans</option>
                                                                            <option value="Inter ">Inter </option>
                                                                            <option value="open sans">open sans</option>

                                                                        </select>
                                                                    </div>

                                                                    <div className='edit_setting_bg form'>
                                                                        <div className='checkbox-option bg-colors'>
                                                                            <label>  Background Color:</label>
                                                                            <div className="color-picker-container">
                                                                                <span className="color-code">{backgroundColor}</span>
                                                                                <input
                                                                                    type="color"
                                                                                    value={backgroundColor}
                                                                                    onChange={(e) => setBackgroundColor(e.target.value)}
                                                                                />
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <div className='edit_setting_bg'>
                                                                        <label>Border-Radious:</label>
                                                                        <input
                                                                            type="text"
                                                                            id="Border-radious"
                                                                            value={borderRadious}
                                                                            onChange={(e) => setBorderRadious(e.target.value)}
                                                                        />
                                                                    </div>

                                                                    <div className='edit_setting_bg'>
                                                                        <label>Padding:</label>
                                                                        <input
                                                                            type="text"
                                                                            id="Padding"
                                                                            value={templatePadding}
                                                                            onChange={(e) => setTemplatePadding(e.target.value)}
                                                                        />
                                                                    </div>

                                                                    <div className='edit_setting_bg'>
                                                                        <label htmlFor="textAlign">Text Alignment:</label>
                                                                        <select
                                                                            id="textAlign"
                                                                            value={textAlign}
                                                                            onChange={(e) => setTextAlign(e.target.value)}
                                                                        >
                                                                            <option value="left">Left</option>
                                                                            <option value="center">Center</option>
                                                                            <option value="right">Right</option>
                                                                        </select>
                                                                    </div>

                                                                    <div className='edit_setting_bg'>
                                                                        <label htmlFor="backgroundImage">Background Image:</label>
                                                                        <input
                                                                            type="file"
                                                                            accept="image/*"
                                                                            onChange={handleBackgroundImageUpload}
                                                                        />
                                                                        {backgroundImage && (
                                                                            <button className='rm-btn bg-img'
                                                                                type="button"
                                                                                onClick={handleRemoveBackgroundImage}
                                                                                style={{
                                                                                    margin: '10px 0',
                                                                                    width: '150px',
                                                                                    textAlign: 'center',
                                                                                    background: 'red'
                                                                                }}
                                                                            >

                                                                                Remove Background
                                                                            </button>
                                                                        )}
                                                                        {backgroundImage && (
                                                                            <div
                                                                                className="edit_setting_bg"
                                                                                style={{
                                                                                    backgroundImage: backgroundImage ? `url(${backgroundImage})` : 'none',
                                                                                    backgroundRepeat: 'no-repeat',
                                                                                    backgroundSize: 'contain',
                                                                                    backgroundPosition: 'center',
                                                                                    height: '200px',
                                                                                    width: '100%',
                                                                                    border: '1px solid #ddd',
                                                                                }}
                                                                            >

                                                                            </div>
                                                                        )}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            )}

                                        </div>
                                    </div>
                                    )}
                                </div>)}

                                <div className='form_builder_build email'>
                                    <div id='bg_change' className="form-builder-wrp email-temp" >
                                        <div className='btn-email-templates'>
                                            <button className={`btn-templates ${(viewMode === 'desktop' || emailWidth === '800px') && emailWidth !== '400px' ? 'active' : ''}`} onClick={() => toggleViewMode('desktop')}>
                                                <img src={desk} alt="Desktop" /> Desktop
                                            </button>
                                            <button className={`btn-templates ${(viewMode === 'mobile' || emailWidth === '400px') && emailWidth !== '800px' ? 'active' : ''}`} onClick={() => toggleViewMode('mobile')}>
                                                <img src={phonem} alt="Mobile" /> Mobile
                                            </button>
                                        </div>

                                        <div
                                            className="form-builder email-template"
                                            id="form-container"
                                            ref={formBuilderRef}
                                            style={{
                                                backgroundColor,
                                                width: emailWidth,
                                                textAlign,
                                                padding: `${templatePadding}px`,
                                                borderRadius: `${borderRadious}px`,
                                                backgroundImage: backgroundImage ? `url(${backgroundImage})` : 'none',
                                                backgroundSize: 'cover',
                                                backgroundPosition: 'center',
                                                margin: 'auto',
                                                fontFamily
                                            }}
                                        >
                                            {fields.length === 0 ? (
                                                <div>

                                                    <div className="builder-block-img-forms">
                                                        <div className='builder_block_blank'>
                                                            <img src={emailtemp} alt="Email Template" />
                                                            <div className='builder-block-img-forms-paragraph'>
                                                                <p>Let's create the Email.</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            ) : (
                                                <>
                                                    {fields
                                                        .filter((field) => field && field.id && field.type)
                                                        .map((field) => {
                                                            console.log('Rendering field:', field);
                                                            if (field.type === 'heading') {
                                                                const HeadingTag = field.headingLevel || 'h1';

                                                                return (
                                                                    <div
                                                                        key={field.id}
                                                                        onClick={() => handleFieldClick(field.id)}
                                                                        className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
                                                                        style={{ display: 'flex' }}
                                                                    >
                                                                        <div className='email-input-field'
                                                                            style={{

                                                                                backgroundColor: field.headingbg,
                                                                                borderWidth: `${field.headingBorderWidth}px`,
                                                                                borderStyle: field.headingBorderStyle,
                                                                                borderColor: field.headingBorderColor,
                                                                                backgroundImage: field.headingbgImage
                                                                                    ? `url(${URL.createObjectURL(field.headingbgImage)})`
                                                                                    : `url(${hdbg})`,
                                                                                backgroundRepeat: 'no-repeat',
                                                                                backgroundSize: 'cover',
                                                                                width: `${field.bannerImageWidth}%`,
                                                                                height: field.bannerImageHeight || '400px',
                                                                                opacity: field.headeropacity || '',
                                                                                display: 'flex',
                                                                                alignItems: 'center'
                                                                            }}
                                                                        >
                                                                            <div className='email-input-field-h1' style={{

                                                                                width: '100%',
                                                                                textAlign: field.headingTextAlign || '',
                                                                                padding: `${field.headingPadding}px`,


                                                                            }}>
                                                                                {React.createElement(HeadingTag, {
                                                                                    style: {
                                                                                        fontWeight: field.headingFontWeight,
                                                                                        fontSize: `${field.headingFontSize || 40}px`,
                                                                                        color: field.headingColor,
                                                                                        letterSpacing: `${field.headingLetterSpacing}px`,
                                                                                        lineHeight: '48px'
                                                                                    }
                                                                                }, field.headingText || field.value)}

                                                                                <div
                                                                                    className="heading-editor-content"
                                                                                    style={{ fontSize: `${field.headingsubheading}px`, color: field.subheadingColor, margin: '20px 0' }}
                                                                                    dangerouslySetInnerHTML={{
                                                                                        __html: editorValue || field.editorContent || 'Its a numbers game',
                                                                                    }}
                                                                                />
                                                                                {field.headingUrl && (
                                                                                    <a href={field.headingUrl} target="_blank" rel="noopener noreferrer" onClick={(e) => e.preventDefault()}>
                                                                                        <button
                                                                                            onClick={(e) => {
                                                                                                e.preventDefault();
                                                                                                console.log("Button clicked, but no navigation.");
                                                                                            }}
                                                                                            style={{
                                                                                                background: field.headerbtnbg,
                                                                                                color: field.headerbtncolor,
                                                                                                height: `${field.headingbtnheight}px`,
                                                                                                width: `${field.headingbtnwidth}px`,
                                                                                                fontSize: `${field.headingbtnFontSize}px`,
                                                                                                borderRadius: `${field.headingbtnradious}px`,
                                                                                                paddingLeft: `${field.headingbtnPadding}px`,
                                                                                                paddingRight: `${field.headingbtnPadding}px`,
                                                                                                paddingTop: `${field.headingbtntopPadding}px`,
                                                                                                paddingBottom: `${field.headingbtntopPadding}px`,
                                                                                                borderWidth: `${field.headingbtnBorderWidth}px`,
                                                                                                borderStyle: field.headingbtnBorderStyle,
                                                                                                borderColor: field.headingbtnBorderColor,
                                                                                            }}
                                                                                        >
                                                                                            {field.headerbtn}
                                                                                        </button>
                                                                                    </a>
                                                                                )}
                                                                            </div>
                                                                            <div className='form-builder-radio-btn email'>
                                                                                <button className="copy-btn edit-email" onClick={() => handleFieldClick(field.id)}>
                                                                                    <img src={editicon} alt="copy" />
                                                                                </button>
                                                                                <button className='remove-btn' onClick={() => removeField(field.id)}>
                                                                                    <img src={delete1} alt="delete" />
                                                                                </button>
                                                                                <button className="copy-btn" onClick={() => addInputField(field.type)}>
                                                                                    <img src={maximizesize} alt="copy" />
                                                                                </button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                );
                                                            }
                                                            if (field.type === 'description') {
                                                                return (
                                                                    <div key={field.id} onClick={() => handleFieldClick(field.id)}
                                                                        className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
                                                                        style={{ display: 'flex', width: '100%' }}
                                                                    >
                                                                        <div style={{
                                                                            backgroundColor: field.descriptionbg,
                                                                            padding: `${field.descriptionPadding}px`,
                                                                        }}>
                                                                            <p style={{
                                                                                fontSize: `${field.descritionFontSize}px`,
                                                                                letterSpacing: `${field.descriptionLetterSpacing}px`,
                                                                                textAlign: field.descriptionTextAlign || '',
                                                                                borderWidth: `${field.descriptionBorderWidth}px`,
                                                                                borderStyle: field.descriptionBorderStyle,
                                                                                borderColor: field.descriptionBorderColor,
                                                                                fontWeight: field.descritionFontWeight,
                                                                                color: field.descritionColor
                                                                            }}>{field.descriptionText || field.value || ''}</p>

                                                                        </div>
                                                                        <div className='form-builder-radio-btn email'>
                                                                            <button className="copy-btn edit-email " onClick={() => handleFieldClick(field.id)}>
                                                                                <img src={editicon} alt="copy" />
                                                                            </button>
                                                                            <button className='remove-btn' onClick={() => removeField(field.id)}>
                                                                                <img src={delete1} alt="delete" />
                                                                            </button>
                                                                            <button className="copy-btn" onClick={() => addInputField(field.type)}>
                                                                                <img src={maximizesize} alt="copy" />
                                                                            </button>
                                                                        </div>
                                                                    </div>
                                                                );
                                                            }

                                                            if (field.type === 'images') {
                                                                return (
                                                                    <div key={field.id} onClick={() => handleFieldClick(field.id)}
                                                                        className={`email_field  ${activeFieldId === field.id ? 'active' : ''}`}
                                                                        style={{ display: 'flex', justifyContent: 'center' }}
                                                                        ref={emailFieldRef}
                                                                    >
                                                                        <div className='email_field-images'
                                                                            style={{
                                                                                textAlign: field.imgTextAlign ? field.imgTextAlign : '',
                                                                                backgroundColor: field.imgbg,
                                                                                borderWidth: `${field.imgBorderWidth}px`,
                                                                                borderStyle: field.imgBorderStyle,
                                                                                borderColor: field.imgBorderColor,
                                                                                width: '100%'
                                                                            }}>

                                                                            <img src={field.value || imghd} alt="Dynamic" style={{
                                                                                width: `${field.imgWidth}%`,
                                                                                padding: `${field.imgPadding}px`,
                                                                            }} />

                                                                        </div>

                                                                        <div className='form-builder-radio-btn email'>
                                                                            <button className="copy-btn edit-email " onClick={() => handleFieldClick(field.id)}>
                                                                                <img src={editicon} alt="copy" />
                                                                            </button>
                                                                            <button className='remove-btn' onClick={() => removeField(field.id)}>
                                                                                <img src={delete1} alt="delete" />
                                                                            </button>
                                                                            <button className="copy-btn" onClick={() => addInputField(field.type)}>
                                                                                <img src={maximizesize} alt="copy" />
                                                                            </button>
                                                                        </div>
                                                                    </div>
                                                                );
                                                            }
                                                            if (field.type === 'divider') {
                                                                return (
                                                                    <div key={field.id} onClick={() => handleFieldClick(field.id)}
                                                                        className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
                                                                        style={{ display: 'flex' }}
                                                                        ref={emailFieldRef}
                                                                    >
                                                                        <div style={{ backgroundColor: field.dividerbgColor, width: '100%' }}>
                                                                            <hr style={{
                                                                                border: `1px solid ${field.dividerColor}`, width: `${field.dividerWidth}%`,
                                                                                height: `${field.dividerheight}px`
                                                                            }} />
                                                                        </div>
                                                                        <div className='form-builder-radio-btn email'>
                                                                            <button className="copy-btn edit-email " onClick={() => handleFieldClick(field.id)}>
                                                                                <img src={editicon} alt="copy" />
                                                                            </button>
                                                                            <button className='remove-btn' onClick={() => removeField(field.id)}>
                                                                                <img src={delete1} alt="delete" />
                                                                            </button>
                                                                            <button className="copy-btn" onClick={() => addInputField(field.type)}>
                                                                                <img src={maximizesize} alt="copy" />
                                                                            </button>
                                                                        </div>
                                                                    </div>
                                                                );
                                                            }

                                                            if (field.type === 'split') {
                                                                const isImageUploaded = field.add === 'image' && field.value.startsWith('data:image');
                                                                return (
                                                                    <div style={{ width: '100%' }}>
                                                                        <div key={field.id} onClick={() => handleFieldClick(field.id)}
                                                                            className={`email_field split-width ${activeFieldId === field.id ? 'active' : ''}`}
                                                                            style={{
                                                                                width: field.width,
                                                                                backgroundColor: field.splitbg,
                                                                                padding: `${field.splitPadding}px`,
                                                                                height: `${field.splitheight}px`,
                                                                                textAlign: field.splitTextAlin,
                                                                                position: 'relative',
                                                                                display: 'flex',
                                                                                color: field.splitColor,

                                                                            }}
                                                                        >
                                                                            {field.add === 'image' ? (
                                                                                <img
                                                                                    src={isImageUploaded ? field.value : imghd1}
                                                                                    alt="Uploaded Preview"
                                                                                    style={{ width: '100%', height: 'auto' }}
                                                                                />

                                                                            ) : (
                                                                                <div style={{ width: '100%', display: 'flex', alignItems: field.splittext === 'left' ? 'flex-start' : field.splittext === 'center' ? 'center' : 'flex-end' }}>
                                                                                    <div style={{ width: '100%' }}>
                                                                                        <div style={{ width: '100%' }} dangerouslySetInnerHTML={{ __html: field.value || 'Use this section to add reviews or testimonials from your stores happy customers Use this section to add reviews or testimonials from your stores happy customers ...' }} />
                                                                                        <div >
                                                                                            {field.showbtnsplit && (
                                                                                                <a href={field.splitbtnurl} target='_blank' onClick={(e) => e.preventDefault()}>
                                                                                                    <button style={{
                                                                                                        marginTop: "20px",
                                                                                                        backgroundColor: field.splitbtnbg,
                                                                                                        fontSize: `${field.splitbtnfont}px`,
                                                                                                        color: field.splitbtncolor,
                                                                                                        height: `${field.splitbtnheight}px`,
                                                                                                        width: `${field.splitbtnwidth}px`,
                                                                                                        borderRadius: `${field.splitbtnradious}px`,
                                                                                                        borderWidth: `${field.splitBorderWidth}px`,
                                                                                                        borderStyle: field.splitBorderStyle,
                                                                                                        borderColor: field.splitBorderColor,
                                                                                                    }}>
                                                                                                        {field.splitbtn}</button>
                                                                                                </a>
                                                                                            )}
                                                                                        </div>
                                                                                    </div>

                                                                                </div>
                                                                            )}

                                                                            <div className='form-builder-radio-btn email'>
                                                                                <button className="copy-btn edit-email" onClick={() => handleFieldClick(field.id)}>
                                                                                    <img src={editicon} alt="copy" />
                                                                                </button>
                                                                                <button className='remove-btn' onClick={() => removeField(field.id)}>
                                                                                    <img src={delete1} alt="delete" />
                                                                                </button>
                                                                                <button className="copy-btn" onClick={() => addInputField(field.type)}>
                                                                                    <img src={maximizesize} alt="copy" />
                                                                                </button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                );
                                                            }
                                                            if (field.type === 'richtext') {
                                                                return (
                                                                    <div key={field.id} onClick={() => handleFieldClick(field.id)}
                                                                        className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
                                                                        style={{ display: 'flex', width: '100%' }}
                                                                    >
                                                                        <div style={{ width: '100%' }} >
                                                                            <div style={{
                                                                                textAlign: field.richTextAlign || '',
                                                                                fontSize: `${field.richFontsize}px`,
                                                                                color: field.richtextcolor,
                                                                                backgroundColor: field.richbgcolor,
                                                                                paddingLeft: `${field.richleftPadding}px`,
                                                                                paddingRight: `${field.richleftPadding}px`,
                                                                                paddingTop: `${field.richtopPadding}px`,
                                                                                paddingBottom: `${field.richtopPadding}px`,
                                                                            }}
                                                                                dangerouslySetInnerHTML={{ __html: editorValueed || field.content || 'Captivate customers with' }} />
                                                                            <div className='form-builder-radio-btn email'>
                                                                                <button className="copy-btn edit-email " onClick={() => handleFieldClick(field.id)}>
                                                                                    <img src={editicon} alt="copy" />
                                                                                </button>
                                                                                <button className='remove-btn' onClick={() => removeField(field.id)}>
                                                                                    <img src={delete1} alt="delete" />
                                                                                </button>
                                                                                <button className="copy-btn" onClick={() => addInputField(field.type)}>
                                                                                    <img src={maximizesize} alt="copy" />
                                                                                </button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                );
                                                            }

                                                            if (field.type === 'spacer') {
                                                                return (
                                                                    <div key={field.id} onClick={() => handleFieldClick(field.id)}
                                                                        className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
                                                                        style={{ display: 'flex' }}
                                                                        ref={emailFieldRef}
                                                                    >
                                                                        <div style={{ width: '100%' }}>
                                                                            <div className='spacer-height-show' style={{ height: `${field.spacerHeight}px`, backgroundColor: field.spacerbg }}></div>
                                                                        </div>
                                                                        <div className='form-builder-radio-btn email'>
                                                                            <button className="copy-btn edit-email" onClick={() => handleFieldClick(field.id)}>
                                                                                <img src={editicon} alt="copy" />
                                                                            </button>
                                                                            <button className='remove-btn' onClick={() => removeField(field.id)}>
                                                                                <img src={delete1} alt="delete" />
                                                                            </button>
                                                                            <button className="copy-btn" onClick={() => addInputField(field.type)}>
                                                                                <img src={maximizesize} alt="copy" />
                                                                            </button>
                                                                        </div>
                                                                    </div>
                                                                );

                                                            }
                                                            if (field.type === 'video') {

                                                                return (
                                                                    <div key={field.id} onClick={() => handleFieldClick(field.id)}
                                                                        className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
                                                                        style={{ display: 'flex' }}
                                                                        ref={emailFieldRef}
                                                                    >
                                                                        <div className='email-tempalte-video-show' style={{ padding: `${field.videoPadding}px`, borderWidth: `${field.videoBorderWidth}px`, borderStyle: field.videoBorderStyle, borderColor: field.videoBorderColor }}>
                                                                            {field.value && getVideoEmbedUrl(field.value) ? (
                                                                                <iframe
                                                                                    height="250px"
                                                                                    width="500px"
                                                                                    src={getVideoEmbedUrl(field.value)}
                                                                                    title="Video Preview"
                                                                                    frameBorder="0"
                                                                                    allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                                                                                    allowFullScreen
                                                                                ></iframe>) : (
                                                                                <div className='email-tempalte-img'>
                                                                                    <img src={videoplay} alt="" />
                                                                                </div>
                                                                            )}
                                                                        </div>
                                                                        <div className='form-builder-radio-btn email'>
                                                                            <button className="copy-btn edit-email" onClick={() => handleFieldClick(field.id)}>
                                                                                <img src={editicon} alt="copy" />
                                                                            </button>
                                                                            <button className='remove-btn' onClick={() => removeField(field.id)}>
                                                                                <img src={delete1} alt="delete" />
                                                                            </button>
                                                                            <button className="copy-btn" onClick={() => addInputField(field.type)}>
                                                                                <img src={maximizesize} alt="copy" />
                                                                            </button>
                                                                        </div>

                                                                    </div>
                                                                );
                                                            }

                                                            if (field.type === 'button') {
                                                                return (
                                                                    <div key={field.id} onClick={() => handleFieldClick(field.id)}
                                                                        className={`email_field leftbtn ${activeFieldId === field.id ? 'active' : ''}`}
                                                                        style={{ display: 'flex' }}
                                                                        ref={emailFieldRef}
                                                                    >
                                                                        <div style={{ width: '100%', backgroundColor: field.buttonbgColor, textAlign: field.buttonaline }}>
                                                                            <a href={field.buttonUrll}
                                                                                onClick={(event) => {
                                                                                    event.preventDefault();
                                                                                    console.log("Button clicked!");
                                                                                }}
                                                                            >
                                                                                <button
                                                                                    type="button"
                                                                                    style={{
                                                                                        fontSize: `${field.buttonFontSize}px`,
                                                                                        color: field.buttonTextColor,
                                                                                        backgroundColor: field.buttonColor,
                                                                                        width: `${field.buttonWidth}px`,
                                                                                        height: `${field.buttonHeight}px`,
                                                                                        padding: `${field.buttonPadding}px`,
                                                                                        borderWidth: `${field.buttonBorderWidth}px`,
                                                                                        borderStyle: field.buttonBorderStyle,
                                                                                        borderColor: field.buttonBorderColor,
                                                                                        letterSpacing: `${field.buttonLetterSpacing}px`,
                                                                                        borderRadius: `${field.buttonradious}px`
                                                                                    }}
                                                                                >
                                                                                    {field.buttonLabel}
                                                                                </button>
                                                                            </a>
                                                                        </div>

                                                                        <div className='form-builder-radio-btn email'>
                                                                            <button className="copy-btn edit-email" onClick={() => handleFieldClick(field.id)}>
                                                                                <img src={editicon} alt="copy" />
                                                                            </button>
                                                                            <button className='remove-btn' onClick={() => removeField(field.id)}>
                                                                                <img src={delete1} alt="delete" />
                                                                            </button>
                                                                            <button className="copy-btn" onClick={() => addInputField(field.type)}>
                                                                                <img src={maximizesize} alt="copy" />
                                                                            </button>
                                                                        </div>
                                                                    </div>
                                                                );
                                                            }

                                                            if (field.type === 'html convert') {
                                                                return (
                                                                    <div className="form-builder-and-preview">
                                                                        <div key={field.id} onClick={() => handleFieldClick(field.id)}
                                                                            className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
                                                                            style={{ display: 'flex' }}
                                                                            ref={emailFieldRef}
                                                                        >
                                                                            <div style={{ width: '100%' }}>
                                                                                <div style={{ color: field.htmlColor, fontSize: `${field.htmlFontSize}px`, padding: `${field.htmlPadding}px` }}
                                                                                    className="preview-content"
                                                                                    dangerouslySetInnerHTML={{ __html: field.value || field.htmltext }}
                                                                                />
                                                                                <div className='form-builder-radio-btn email'>
                                                                                    <button className="copy-btn edit-email " onClick={() => handleFieldClick(field.id)}>
                                                                                        <img src={editicon} alt="copy" />
                                                                                    </button>
                                                                                    <button className='remove-btn' onClick={() => removeField(field.id)}>
                                                                                        <img src={delete1} alt="delete" />
                                                                                    </button>
                                                                                    <button className="copy-btn" onClick={() => addInputField(field.type)}>
                                                                                        <img src={maximizesize} alt="copy" />
                                                                                    </button>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                );
                                                            }
                                                            if (field.type === 'Multicolumn') {
                                                                return (
                                                                    <div key={field.id}
                                                                        onClick={() => handleFieldClick(field.id)}
                                                                        className={`email_field columns-container ${activeFieldId === field.id ? 'active' : ''}`}
                                                                        style={{ display: 'flex' }}
                                                                    >
                                                                        <div style={{ width: '100%' }}>
                                                                            <div className="columns-wrapper" style={{ display: 'grid', gap: `${field.Multigap}px`, padding: `${field.MultiPadding}px`, gridTemplateColumns: `repeat(${field.columnsPerRow || `3`}, 1fr)`, backgroundColor: field.Multibgcolor }}>
                                                                                {Array.from({ length: field.columnCount }, (_, index) => (
                                                                                    <div
                                                                                        key={index}
                                                                                        style={{
                                                                                            fontSize: `${field.fontsizeMulticolumn}px`,
                                                                                            borderWidth: `${field.MulticolumnbtnBorderWidth}px`,
                                                                                            borderStyle: field.MulticolumnbtnBorderStyle,
                                                                                            borderColor: field.MulticolumnbtnBorderColor,
                                                                                            padding: `${field.MulticolumnPadding}px`,
                                                                                            backgroundColor: field.Multicolumnbgcolor,
                                                                                            textAlign: field.Multitext,
                                                                                            color: field.MultiColor,
                                                                                        }}
                                                                                        className={`column ${field.selectedColumn === index ? 'active-column' : ''}`}
                                                                                        onClick={(e) => handleColumnClick(field.id, index)}

                                                                                    >
                                                                                        {field.columnData[index].image && (
                                                                                            <img
                                                                                                src={field.columnData[index].image}
                                                                                                alt={`Uploaded for Column ${index + 1}`}
                                                                                                style={{ width: '100%', height: 'auto' }}
                                                                                            />
                                                                                        )}

                                                                                        {field.columnData[index].content ? (
                                                                                            <div
                                                                                                dangerouslySetInnerHTML={{
                                                                                                    __html: field.columnData[index].content,
                                                                                                }}
                                                                                            />
                                                                                        ) : (
                                                                                            <div style={{ color: 'gray' }}>
                                                                                                <h2>Column</h2>
                                                                                                Elevate your online store with our easy-to-use Text Box feature.
                                                                                                It's a game-changer for personalization, allowing customers to add their
                                                                                                special touch directly from a user-friendly drop-down menu.
                                                                                            </div>
                                                                                        )}

                                                                                        {field.columnData[index].isVisible && (
                                                                                            <a href={field.columnData[index].Multibtnurl} target='_blank' onClick={(e) => e.preventDefault()}>
                                                                                                <button style={{
                                                                                                    marginTop: "20px",
                                                                                                    backgroundColor: field.Multibtnbg,
                                                                                                    borderWidth: `${field.MultibtnBorderWidth}px`,
                                                                                                    borderStyle: field.MultibtnBorderStyle,
                                                                                                    borderColor: field.MultibtnBorderColor,
                                                                                                    width: `${field.Multibtnweight || '100'}px`,
                                                                                                    height: `${field.Multibtnheight || '40'}px`,
                                                                                                    color: field.Multibtncolor,
                                                                                                    borderRadius: `${field.Multibtnradious}px`,
                                                                                                    fontSize: `${field.Multibtnfont || '14'}px`
                                                                                                }}
                                                                                                > {field.columnData[index].Multibtnlable}</button>
                                                                                            </a>
                                                                                        )}

                                                                                    </div>
                                                                                ))}
                                                                            </div>
                                                                        </div>
                                                                        <div className='form-builder-radio-btn email'>
                                                                            <button className="copy-btn edit-email" onClick={() => handleFieldClick(field.id)}>
                                                                                <img src={editicon} alt="copy" />
                                                                            </button>
                                                                            <button className='remove-btn' onClick={() => removeField(field.id)}>
                                                                                <img src={delete1} alt="delete" />
                                                                            </button>
                                                                            <button className="copy-btn" onClick={() => addInputField(field.type)}>
                                                                                <img src={maximizesize} alt="copy" />
                                                                            </button>
                                                                        </div>

                                                                    </div>
                                                                );
                                                            }

                                                            if (field.type === 'product' && field.products) {
                                                                return (
                                                                    <div onClick={() => handleAddProductToSelected(field.id, field.title, field.image, field.products)}>
                                                                        <div key={field.id} onClick={() => handleFieldClick(field.id)}
                                                                            className={`email_field ${activeFieldId === field.id ? 'active' : ''}`}
                                                                            style={{ display: 'flex' }}
                                                                            ref={emailFieldRef}
                                                                        >
                                                                            <div className={`template-products ${productsPerRow ? `row-${productsPerRow}` : 'row-3'} ${viewMode === 'mobile' ? 'mobile' : ''}`}
                                                                                style={{
                                                                                    padding: `${field.productPadding}px`,
                                                                                    backgroundColor: field.productbg,
                                                                                    borderWidth: `${field.productBorderWidth}px`,
                                                                                    borderStyle: field.productBorderStyle,
                                                                                    borderColor: field.productBorderColor,
                                                                                    fontSize: `${field.productFontSize}px`,
                                                                                    color: field.productTextColor,
                                                                                    width: '100%'
                                                                                }}
                                                                            >
                                                                                {field.products.map((product) => (
                                                                                    <div className='product-show' key={product.id}>

                                                                                        {product.image ? (
                                                                                            <div className="images-gallery">
                                                                                                <img
                                                                                                    src={product.image}
                                                                                                    alt={product.images || 'Product Image'}
                                                                                                    style={{ width: '150px', height: '150px', objectFit: 'cover' }}
                                                                                                />
                                                                                            </div>
                                                                                        ) : (
                                                                                            <p>No image available</p>
                                                                                        )}
                                                                                        <div>
                                                                                            <h4 style={{ letterSpacing: `${field.productLetterSpacing}px`, fontWeight: field.productWeight, }}>{product.title}</h4>
                                                                                            {showPrice && product.price && (
                                                                                                <p style={{ marginTop: '10px', fontWeight: field.productWeight, letterSpacing: `${field.productLetterSpacing}px` }}>
                                                                                                    ${product.price}
                                                                                                </p>
                                                                                            )}
                                                                                        </div>

                                                                                        {showbtnn && (
                                                                                            <a href={`https://${shop}/admin/products?selectedView=all`} target="_blank" rel="noopener noreferrer">
                                                                                                <button
                                                                                                    style={{
                                                                                                        fontSize: `${field.productfontSize}px`,
                                                                                                        width: `${field.productwidth}px`,
                                                                                                        height: `${field.productheight}px`,
                                                                                                        backgroundColor: field.productbackgroundColor,
                                                                                                        borderWidth: `${field.productbtnBorderWidth}px`,
                                                                                                        borderStyle: field.productbtnBorderStyle,
                                                                                                        borderColor: field.productbtnBorderColor,
                                                                                                        color: field.productbtnbg,
                                                                                                        borderRadius: `${field.productradious}px`,
                                                                                                    }}
                                                                                                    className='show-bnt-prodcut'>{field.productLabel}</button>
                                                                                            </a>
                                                                                        )}
                                                                                    </div>
                                                                                ))}
                                                                            </div>
                                                                            <div className='form-builder-radio-btn email'>
                                                                                <button className="copy-btn edit-email " onClick={() => handleFieldClick(field.id)}>
                                                                                    <img src={editicon} alt="copy" />
                                                                                </button>
                                                                                <button className='remove-btn' onClick={() => removeField(field.id)}>
                                                                                    <img src={delete1} alt="delete" />
                                                                                </button>
                                                                                <button className="copy-btn" onClick={() => addInputField(field.type)}>
                                                                                    <img src={maximizesize} alt="copy" />
                                                                                </button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                );
                                                            }

                                                            if (field.type === 'socalicon') {
                                                                return (
                                                                    <div onClick={() => handleEdit(field)}>
                                                                        <div key={field.id} onClick={() => handleFieldClick(field.id)}
                                                                            className={`email_field  ${activeFieldId === field.id ? 'active' : ''}`}
                                                                            style={{ display: 'flex', width: '100%' }}
                                                                            ref={emailFieldRef}

                                                                        >
                                                                            <div style={{ textAlign: field.socaliconTextAlign || '', backgroundColor: field.socalIconbg, padding: `${field.socalIconPadding}px`, width: '100%' }} >
                                                                                <div className="social-icons" style={{ gap: `${field.socalIcongap}px` }}>
                                                                                    {field.icons.facebook && field.icons.facebook.url && !field.icons.facebook.isHidden && (
                                                                                        <a href={field.icons.facebook.url} onClick={(e) => e.preventDefault()}>
                                                                                            <img src={facebook} alt="" style={{ width: `${socalIconWidth}px`, height: `${socalIconHeight}px` }} />
                                                                                        </a>
                                                                                    )}
                                                                                    {field.icons.twitter && field.icons.twitter.url && !field.icons.twitter.isHidden && (
                                                                                        <a href={field.icons.twitter.url} onClick={(e) => e.preventDefault()}>
                                                                                            <img src={twitter} alt="" style={{ width: `${socalIconWidth}px`, height: `${socalIconHeight}px` }} />
                                                                                        </a>
                                                                                    )}
                                                                                    {field.icons.instagram && field.icons.instagram.url && !field.icons.instagram.isHidden && (
                                                                                        <a href={field.icons.instagram.url} onClick={(e) => e.preventDefault()}>
                                                                                            <img src={instagram} alt="" style={{ width: `${socalIconWidth}px`, height: `${socalIconHeight}px` }} />
                                                                                        </a>
                                                                                    )}
                                                                                    {field.customIcons.map((icon, index) =>
                                                                                        icon.url && !icon.isHidden ? (
                                                                                            <a key={index} href={icon.url} target="_blank" rel="noopener noreferrer" onClick={(e) => e.preventDefault()}>
                                                                                                <img src={icon.src} alt={`Custom Icon ${index}`} style={{ width: `${field.socalIconWidth}px`, height: `${field.socalIconHeight}px` }} />
                                                                                            </a>
                                                                                        ) : null
                                                                                    )}
                                                                                </div>
                                                                            </div>
                                                                            <div className='form-builder-radio-btn email'>
                                                                                <button className="copy-btn edit-email" onClick={() => handleFieldClick(field.id)}>
                                                                                    <img src={editicon} alt="copy" />
                                                                                </button>
                                                                                <button className='remove-btn' onClick={() => removeField(field.id)}>
                                                                                    <img src={delete1} alt="delete" />
                                                                                </button>
                                                                                <button className="copy-btn" onClick={() => addInputField(field.type)}>
                                                                                    <img src={maximizesize} alt="copy" />
                                                                                </button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                )
                                                            }
                                                        })
                                                    }

                                                </>
                                            )}
                                        </div>
                                    </div>
                                </div>
                                {showFieldPro && (<div className='form-builder-change-pro email'>

                                    <div className='email-template-input-setting'>

                                        {emailFieldPopup && (<div className='form-builder-change-propertites email camp' ref={popupRef}>
                                            <div className='controls-wrpping cancleimg pro email' onClick={hanldeCanclepro}><img src={cancleimg} alt="" /></div>
                                            <div className='form-builder-change_show_all'>
                                                <div className='form_qucik'>
                                                    <p>Quick setup Settings</p>
                                                </div>
                                                <div className='form_build_propertities'>

                                                    {fields.length > 0 && selectedFieldId && (
                                                        <div className='quick-setup-settings'>
                                                            {fields.map((field) => {
                                                                if (field.id === selectedFieldId && field.type === 'Multicolumn') {
                                                                    return (
                                                                        <div>
                                                                            <div key={field.id} className='column-settings'>

                                                                                {Array.from({ length: field.columnCount }, (_, index) => (
                                                                                    <div key={index} className="column-setting">
                                                                                        <div className=' form-builder-chaneging-wrap column-settings-show-apps'>
                                                                                            <label>Column {index + 1}</label>
                                                                                            <button className='rm-btn-remove-icon'
                                                                                                onClick={() => removeColumn(field.id, index)}
                                                                                            >
                                                                                                <img src={rm} alt="" />
                                                                                            </button>
                                                                                        </div>
                                                                                        <ReactQuill
                                                                                            value={field.columnData[index].content || ''}
                                                                                            onChange={(value) => {
                                                                                                const updatedFields = fields.map(f =>
                                                                                                    f.id === field.id
                                                                                                        ? {
                                                                                                            ...f,
                                                                                                            columnData: f.columnData.map((col, i) =>
                                                                                                                i === index ? { ...col, content: value } : col
                                                                                                            ),
                                                                                                        }
                                                                                                        : f
                                                                                                );
                                                                                                setFields(updatedFields);
                                                                                            }}
                                                                                            modules={{ toolbar: toolbarOptions }}
                                                                                        />

                                                                                        <div className='form-builder-chaneging-wrap file'>
                                                                                            <input
                                                                                                type="file"
                                                                                                accept="image/*"
                                                                                                onChange={(e) => handleImageChange1(e, field.id, index)}
                                                                                            />
                                                                                        </div>
                                                                                        {/* <button onClick={() => toggleButtonVisibility(field.id, index)}>
                                                                                            {field.columnData[index].isVisible ? 'Hide Column' : 'Show Column'}
                                                                                        </button> */}
                                                                                        <div className='form-builder-chaneging-wrap number'>
                                                                                            <label>Button Label</label>
                                                                                            <input
                                                                                                type="text"
                                                                                                value={field.columnData[index].Multibtnlable}
                                                                                                onChange={(e) => {
                                                                                                    const updatedLabel = e.target.value;
                                                                                                    const updatedFields = fields.map(f =>
                                                                                                        f.id === field.id
                                                                                                            ? {
                                                                                                                ...f,
                                                                                                                columnData: f.columnData.map((col, i) =>
                                                                                                                    i === index ? { ...col, Multibtnlable: updatedLabel, isVisible: updatedLabel.trim() !== '' } : col
                                                                                                                ),
                                                                                                            }
                                                                                                            : f
                                                                                                    );
                                                                                                    setFields(updatedFields);
                                                                                                }}
                                                                                                placeholder="Column Label"
                                                                                            />
                                                                                        </div>
                                                                                        <div className='form-builder-chaneging-wrap number'>
                                                                                            <label>Button Url</label>
                                                                                            <input
                                                                                                type="text"
                                                                                                value={field.columnData[index].Multibtnurl}
                                                                                                onChange={(e) => {
                                                                                                    const updatedUrl = e.target.value;
                                                                                                    const updatedFields = fields.map(f =>
                                                                                                        f.id === field.id
                                                                                                            ? {
                                                                                                                ...f,
                                                                                                                columnData: f.columnData.map((col, i) =>
                                                                                                                    i === index ? { ...col, Multibtnurl: updatedUrl } : col
                                                                                                                ),
                                                                                                            }
                                                                                                            : f
                                                                                                    );
                                                                                                    setFields(updatedFields);
                                                                                                }}
                                                                                                placeholder="Button Url"
                                                                                            />
                                                                                        </div>
                                                                                        {field.columnData[index].image ? (
                                                                                            <div className='form-builder-chaneging-wrap images-upload'>
                                                                                                <img
                                                                                                    src={field.columnData[index].image}
                                                                                                    alt={`Preview for Column ${index + 1}`}

                                                                                                />
                                                                                                <button
                                                                                                    className='rm-btn remove-coloum'
                                                                                                    onClick={() => removeImage(field.id, index)}
                                                                                                >
                                                                                                    <img src={bk} alt="" />
                                                                                                </button>

                                                                                            </div>
                                                                                        ) : null}

                                                                                    </div>
                                                                                ))}

                                                                                <button className='rm-btn' onClick={() => addColumn(field.id)}
                                                                                >Add Column</button>
                                                                            </div>
                                                                            <div className="product-detalis-all">
                                                                                <h3>Coloum layout</h3>
                                                                                <div className="form-builder-chaneging-wrap select">
                                                                                    <select onChange={(e) => handleColoumPerRowChange(e, field.id)} value={field.columnsPerRow || '3'}>
                                                                                        {[...Array(6).keys()].map((i) => (
                                                                                            <option key={i + 1} value={i + 1}>
                                                                                                {i + 1} per row
                                                                                            </option>
                                                                                        ))}
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <div className='checkbox-option bg-colors'>
                                                                                    <label> Color</label>
                                                                                    <div className="color-picker-container">
                                                                                        <span className="color-code">{field.MultiColor || '#000'}</span>
                                                                                        <input
                                                                                            type="color"
                                                                                            value={field.MultiColor || '#000'}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, MultiColor: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div className='product-detalis-all btn-split'>
                                                                                <h3> Button Propertites</h3>

                                                                                <div className='form-builder-chaneging-wrap number'>
                                                                                    <label>Button Url</label>
                                                                                    <input
                                                                                        type="text"
                                                                                        value={field.Multibtnurl}
                                                                                        onChange={(e) => {
                                                                                            setFields(prevFields =>
                                                                                                prevFields.map(f =>
                                                                                                    f.id === field.id ? { ...f, Multibtnurl: e.target.value } : f
                                                                                                )
                                                                                            );
                                                                                        }}
                                                                                        placeholder="Button Url"
                                                                                    />
                                                                                </div>
                                                                                <div className='form-builder-chaneging-wrap color'>
                                                                                    <div className='checkbox-option bg-colors'>
                                                                                        <label> Color</label>
                                                                                        <div className="color-picker-container">
                                                                                            <span className="color-code">{field.Multibtncolor || '#FFFFFF'}</span>
                                                                                            <input
                                                                                                type="color"
                                                                                                value={field.Multibtncolor || '#FFFFFF'}
                                                                                                onChange={(e) => {
                                                                                                    setFields(prevFields =>
                                                                                                        prevFields.map(f =>
                                                                                                            f.id === field.id ? { ...f, Multibtncolor: e.target.value } : f
                                                                                                        )
                                                                                                    );
                                                                                                }}
                                                                                            />
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div className='form-builder-chaneging-wrap number' >
                                                                                    <label> Border Radious (px)</label>
                                                                                    <input
                                                                                        type="number"
                                                                                        value={field.Multibtnradious || '2'}
                                                                                        onChange={(e) => {
                                                                                            setFields(prevFields =>
                                                                                                prevFields.map(f =>
                                                                                                    f.id === field.id ? { ...f, Multibtnradious: e.target.value } : f
                                                                                                )
                                                                                            );
                                                                                        }}
                                                                                    />
                                                                                </div>
                                                                                <div className='form-builder-chaneging-wrap number' >
                                                                                    <label> Font Size (px)</label>
                                                                                    <input
                                                                                        type="number"
                                                                                        value={field.Multibtnfont || '14'}
                                                                                        onChange={(e) => {
                                                                                            setFields(prevFields =>
                                                                                                prevFields.map(f =>
                                                                                                    f.id === field.id ? { ...f, Multibtnfont: e.target.value } : f
                                                                                                )
                                                                                            );
                                                                                        }}
                                                                                    />
                                                                                </div>
                                                                                <div className='form-builder-chaneging-wrap number' >
                                                                                    <label> Height (px)</label>
                                                                                    <input
                                                                                        type="number"
                                                                                        value={field.Multibtnheight || '40'}
                                                                                        onChange={(e) => {
                                                                                            setFields(prevFields =>
                                                                                                prevFields.map(f =>
                                                                                                    f.id === field.id ? { ...f, Multibtnheight: e.target.value } : f
                                                                                                )
                                                                                            );
                                                                                        }}
                                                                                    />
                                                                                </div>
                                                                                <div className='form-builder-chaneging-wrap number' >
                                                                                    <label> Width (px)</label>
                                                                                    <input
                                                                                        type="number"
                                                                                        value={field.Multibtnweight || '100'}
                                                                                        onChange={(e) => {
                                                                                            setFields(prevFields =>
                                                                                                prevFields.map(f =>
                                                                                                    f.id === field.id ? { ...f, Multibtnweight: e.target.value } : f
                                                                                                )
                                                                                            );
                                                                                        }}
                                                                                    />
                                                                                </div>
                                                                                <div className='form-builder-chaneging-wrap color'>
                                                                                    <div className='checkbox-option bg-colors'>
                                                                                        <label>Background Color</label>
                                                                                        <div className="color-picker-container">
                                                                                            <span className="color-code">{field.Multibtnbg || '#FFFFFF'}</span>
                                                                                            <input
                                                                                                type="color"
                                                                                                value={field.Multibtnbg || '#FFFFFF'}
                                                                                                onChange={(e) => {
                                                                                                    setFields(prevFields =>
                                                                                                        prevFields.map(f =>
                                                                                                            f.id === field.id ? { ...f, Multibtnbg: e.target.value } : f
                                                                                                        )
                                                                                                    );
                                                                                                }}
                                                                                            />
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div className='form-builder-chaneging-wrap color'>
                                                                                    <div className='checkbox-option bg-colors'>
                                                                                        <label>Border Color</label>
                                                                                        <div className="color-picker-container">
                                                                                            <span className="color-code">{field.MultibtnBorderColor || '#FFFFFF'}</span>
                                                                                            <input
                                                                                                type="color"
                                                                                                value={field.MultibtnBorderColor || '#FFFFFF'}
                                                                                                onChange={(e) => {
                                                                                                    setFields(prevFields =>
                                                                                                        prevFields.map(f =>
                                                                                                            f.id === field.id ? { ...f, MultibtnBorderColor: e.target.value } : f
                                                                                                        )
                                                                                                    );
                                                                                                }}
                                                                                            />
                                                                                        </div>
                                                                                    </div>
                                                                                </div>

                                                                                <div className='form-builder-chaneging-wrap number' >
                                                                                    <label>Border Width (px)</label>
                                                                                    <input
                                                                                        type="number"
                                                                                        value={field.MultibtnBorderWidth || '1'}
                                                                                        onChange={(e) => {
                                                                                            setFields(prevFields =>
                                                                                                prevFields.map(f =>
                                                                                                    f.id === field.id ? { ...f, MultibtnBorderWidth: e.target.value } : f
                                                                                                )
                                                                                            );
                                                                                        }}
                                                                                    />
                                                                                </div>
                                                                                <div className='form-builder-chaneging-wrap'>
                                                                                    <label>Border Style</label>
                                                                                    <select
                                                                                        value={field.MultibtnBorderStyle}
                                                                                        onChange={(e) => {
                                                                                            setFields(prevFields =>
                                                                                                prevFields.map(f =>
                                                                                                    f.id === field.id ? { ...f, MultibtnBorderStyle: e.target.value } : f
                                                                                                )
                                                                                            );
                                                                                        }}
                                                                                    >
                                                                                        <option value="solid">Solid</option>
                                                                                        <option value="dashed">Dashed</option>
                                                                                        <option value="dotted">Dotted</option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <div className='checkbox-option bg-colors'>
                                                                                    <label>Background Color</label>
                                                                                    <div className="color-picker-container">
                                                                                        <span className="color-code">{field.Multibgcolor || '#FFFFFF'}</span>
                                                                                        <input
                                                                                            type="color"
                                                                                            value={field.Multibgcolor || '#FFFFFF'}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, Multibgcolor: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number' >
                                                                                <label> Padding (px)</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.MultiPadding}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, MultiPadding: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <div className='checkbox-option bg-colors'>
                                                                                    <label>Background Color Coloum</label>
                                                                                    <div className="color-picker-container">
                                                                                        <span className="color-code">{field.Multicolumnbgcolor || '#FFFFFF'}</span>
                                                                                        <input
                                                                                            type="color"
                                                                                            value={field.Multicolumnbgcolor || '#FFFFFF'}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, Multicolumnbgcolor: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap'>
                                                                                <label>Text Align </label>
                                                                                <select
                                                                                    value={field.Multitext}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, Multitext: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                >
                                                                                    <option value="">Select text align</option>
                                                                                    <option value="left">left</option>
                                                                                    <option value="center">center</option>
                                                                                    <option value="right">right</option>
                                                                                </select>
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number' >
                                                                                <label> Coloum Padding (px)</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.MulticolumnPadding}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, MulticolumnPadding: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label>Coloum Gap</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.Multigap}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, Multigap: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                    placeholder="Coloum-Gap"
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label>Font-Size</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.fontsizeMulticolumn}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, fontsizeMulticolumn: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                    placeholder="Font-Size"
                                                                                />
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <div className='checkbox-option bg-colors'>
                                                                                    <label>Border Color</label>
                                                                                    <div className="color-picker-container">
                                                                                        <span className="color-code">{field.MulticolumnbtnBorderColor || '#FFFFFF'}</span>
                                                                                        <input
                                                                                            type="color"
                                                                                            value={field.MulticolumnbtnBorderColor || '#FFFFFF'}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, MulticolumnbtnBorderColor: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap number' >
                                                                                <label>Border Width (px)</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.MulticolumnbtnBorderWidth}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, MulticolumnbtnBorderWidth: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap'>
                                                                                <label>Border Style</label>
                                                                                <select
                                                                                    value={field.MulticolumnbtnBorderStyle}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, MulticolumnbtnBorderStyle: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                >
                                                                                    <option value="solid">Solid</option>
                                                                                    <option value="dashed">Dashed</option>
                                                                                    <option value="dotted">Dotted</option>
                                                                                </select>
                                                                            </div>
                                                                        </div>
                                                                    );
                                                                }
                                                                if (field.id === selectedFieldId && field.type === 'richtext') {
                                                                    return (
                                                                        <div>
                                                                            <div >
                                                                                <ReactQuill
                                                                                    value={editorValueed || field.content || 'Captivate customers with'}
                                                                                    onChange={(value) => handleEditChange(value, field.id)}
                                                                                    modules={{ toolbar: toolbarOptions }}
                                                                                />

                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label>Button Padding (px)</label>
                                                                                <div className='form-builder-chanege-top-bottom'>
                                                                                    <label> Left & Right</label>
                                                                                    <input
                                                                                        type="number"
                                                                                        value={field.richleftPadding}
                                                                                        onChange={(e) => {
                                                                                            setFields(prevFields =>
                                                                                                prevFields.map(f =>
                                                                                                    f.id === field.id ? { ...f, richleftPadding: e.target.value } : f
                                                                                                )
                                                                                            );
                                                                                        }}
                                                                                        placeholder="Padding"
                                                                                    />
                                                                                </div>
                                                                                <div className='form-builder-chanege-top-bottom'>

                                                                                    <label> Top & Bottom </label>
                                                                                    <input
                                                                                        type="number"
                                                                                        value={field.richtopPadding}
                                                                                        onChange={(e) => {
                                                                                            setFields(prevFields =>
                                                                                                prevFields.map(f =>
                                                                                                    f.id === field.id ? { ...f, richtopPadding: e.target.value } : f
                                                                                                )
                                                                                            );
                                                                                        }}
                                                                                        placeholder="Padding"
                                                                                    />
                                                                                </div>
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <div className='checkbox-option bg-colors'>
                                                                                    <label>Background Color</label>
                                                                                    <div className="color-picker-container">
                                                                                        <span className="color-code">{field.richbgcolor}</span>
                                                                                        <input
                                                                                            type="color"
                                                                                            value={field.richbgcolor}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, richbgcolor: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <div className='checkbox-option bg-colors'>
                                                                                    <label>Color</label>
                                                                                    <div className="color-picker-container">
                                                                                        <span className="color-code">{field.richtextcolor}</span>
                                                                                        <input
                                                                                            type="color"
                                                                                            value={field.richtextcolor}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, richtextcolor: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label>Font Size (px)</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.richFontsize}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, richFontsize: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap'>
                                                                                <label>Text Align </label>
                                                                                <select
                                                                                    value={field.richTextAlign}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, richTextAlign: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                >
                                                                                    <option value="">Select text align</option>
                                                                                    <option value="left">left</option>
                                                                                    <option value="center">center</option>
                                                                                    <option value="right">right</option>
                                                                                </select>
                                                                            </div>
                                                                        </div>
                                                                    )
                                                                }
                                                                if (field.id === selectedFieldId && field.type === 'product') {
                                                                    return (
                                                                        <div>

                                                                            <div>
                                                                                <div className="show-select-product">
                                                                                    <h3>Products</h3>
                                                                                    {productTitles.length > 0 ? (
                                                                                        productTitles.map((title, index) => (
                                                                                            <div className='show-product-details' key={index}>
                                                                                                <div style={{ display: 'flex', alignItems: 'center' }}>
                                                                                                    {productImage[index] && (
                                                                                                        <img
                                                                                                            src={productImage[index]}
                                                                                                            alt={title}
                                                                                                            style={{ width: '50px', height: '50px', objectFit: 'cover', marginRight: '10px' }}
                                                                                                        />
                                                                                                    )}
                                                                                                    <h4>{title.length > 35 ? title.slice(0, 35) + '...' : title}</h4>
                                                                                                </div>
                                                                                                <div style={{ cursor: "pointer" }} onClick={() => handleRemoveProductFromForm(index)}>
                                                                                                    <img src={deletep} alt="" style={{ width: '70%' }} />
                                                                                                </div>
                                                                                            </div>
                                                                                        ))
                                                                                    ) : (
                                                                                        <p>No products selected</p>
                                                                                    )}

                                                                                    <button className='product-btn-addproduct' onClick={AddProduct}>Add Product</button>
                                                                                </div>
                                                                            </div>
                                                                            <div className='product-detalis-all'>
                                                                                <h3>Product details</h3>
                                                                                <label className="custom-checkbox">
                                                                                    <input
                                                                                        type="checkbox"
                                                                                        checked={showPrice}
                                                                                        onChange={togglePrice}
                                                                                    />
                                                                                    Price
                                                                                </label>
                                                                                <label className="custom-checkbox">
                                                                                    <input
                                                                                        type="checkbox"
                                                                                        checked={showbtnn}
                                                                                        onChange={togglebtnn}
                                                                                    />
                                                                                    Button
                                                                                </label>
                                                                            </div>
                                                                            <div className="product-detalis-all">
                                                                                <h3>Product layout</h3>
                                                                                <div className='form-builder-chaneging-wrap select'>
                                                                                    <select onChange={handleProductsPerRowChange} defaultValue={3}>
                                                                                        {[...Array(6).keys()].map(i => (
                                                                                            <option key={i + 1} value={i + 1}>{i + 1} per row</option>
                                                                                        ))}
                                                                                    </select>
                                                                                </div>

                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number' >
                                                                                <label>Padding (px)</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.productPadding}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, productPadding: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <div className='checkbox-option bg-colors'>
                                                                                    <label> Background Color</label>
                                                                                    <div className="color-picker-container">
                                                                                        <span className="color-code">{field.productbg || '#FFFFFF'}</span>
                                                                                        <input
                                                                                            type="color"
                                                                                            value={field.productbg || '#FFFFFF'}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, productbg: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <div className='checkbox-option bg-colors'>
                                                                                    <label>Border Color</label>
                                                                                    <div className="color-picker-container">
                                                                                        <span className="color-code">{field.productBorderColor}</span>
                                                                                        <input
                                                                                            type="color"
                                                                                            value={field.productBorderColor}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, productBorderColor: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap number' >
                                                                                <label>Border Width (px)</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.productBorderWidth}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, productBorderWidth: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap'>
                                                                                <label>Border Style</label>
                                                                                <select
                                                                                    value={field.productBorderStyle}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, productBorderStyle: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                >
                                                                                    <option value="solid">Solid</option>
                                                                                    <option value="dashed">Dashed</option>
                                                                                    <option value="dotted">Dotted</option>
                                                                                </select>
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label>Font Size (px)</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.productFontSize}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, productFontSize: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <div className='checkbox-option bg-colors'>
                                                                                    <label> Color</label>
                                                                                    <div className="color-picker-container">
                                                                                        <span className="color-code">{field.productTextColor}</span>
                                                                                        <input
                                                                                            type="color"
                                                                                            value={field.productTextColor}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, productTextColor: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label> Font-Weight</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.productWeight}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, productWeight: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}

                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label> Letter Spacing</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.productLetterSpacing}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, productLetterSpacing: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                    placeholder="Letter Spacing"
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap all-btn'>
                                                                                <label> Button</label>
                                                                                <div className='form-builder-chaneging-wrap'>
                                                                                    <label>Button Label</label>
                                                                                    <input
                                                                                        type="text"
                                                                                        value={field.productLabel}
                                                                                        onChange={(e) => {
                                                                                            setFields(prevFields =>
                                                                                                prevFields.map(f =>
                                                                                                    f.id === field.id ? { ...f, productLabel: e.target.value } : f
                                                                                                )
                                                                                            );
                                                                                        }}
                                                                                    />
                                                                                </div>
                                                                                <div className='form-builder-chaneging-wrap number'>
                                                                                    <label>Font Size (px)</label>
                                                                                    <input
                                                                                        type="number"
                                                                                        value={field.productfontSize}
                                                                                        onChange={(e) => {
                                                                                            setFields(prevFields =>
                                                                                                prevFields.map(f =>
                                                                                                    f.id === field.id ? { ...f, productfontSize: e.target.value } : f
                                                                                                )
                                                                                            );
                                                                                        }}
                                                                                    />
                                                                                </div>
                                                                                <div className='form-builder-chaneging-wrap number'>
                                                                                    <label>Width (px)</label>
                                                                                    <input
                                                                                        type="number"
                                                                                        value={field.productwidth}
                                                                                        onChange={(e) => {
                                                                                            setFields(prevFields =>
                                                                                                prevFields.map(f =>
                                                                                                    f.id === field.id ? { ...f, productwidth: e.target.value } : f
                                                                                                )
                                                                                            );
                                                                                        }}
                                                                                    />
                                                                                </div>

                                                                                <div className='form-builder-chaneging-wrap number'>
                                                                                    <label>Height (px)</label>
                                                                                    <input
                                                                                        type="number"
                                                                                        value={field.productheight}
                                                                                        onChange={(e) => {
                                                                                            setFields(prevFields =>
                                                                                                prevFields.map(f =>
                                                                                                    f.id === field.id ? { ...f, productheight: e.target.value } : f
                                                                                                )
                                                                                            );
                                                                                        }}
                                                                                    />
                                                                                </div>

                                                                                <div className='form-builder-chaneging-wrap color'>
                                                                                    <div className='checkbox-option bg-colors'>
                                                                                        <label>Background Color</label>
                                                                                        <div className="color-picker-container">
                                                                                            <span className="color-code">{field.productbackgroundColor}</span>
                                                                                            <input
                                                                                                type="color"
                                                                                                value={field.productbackgroundColor}
                                                                                                onChange={(e) => {
                                                                                                    setFields(prevFields =>
                                                                                                        prevFields.map(f =>
                                                                                                            f.id === field.id ? { ...f, productbackgroundColor: e.target.value } : f
                                                                                                        )
                                                                                                    );
                                                                                                }}
                                                                                            />
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div className='form-builder-chaneging-wrap color'>
                                                                                    <div className='checkbox-option bg-colors'>
                                                                                        <label>Border Color</label>
                                                                                        <div className="color-picker-container">
                                                                                            <span className="color-code">{field.productbtnBorderColor}</span>
                                                                                            <input
                                                                                                type="color"
                                                                                                value={field.productbtnBorderColor}
                                                                                                onChange={(e) => {
                                                                                                    setFields(prevFields =>
                                                                                                        prevFields.map(f =>
                                                                                                            f.id === field.id ? { ...f, productbtnBorderColor: e.target.value } : f
                                                                                                        )
                                                                                                    );
                                                                                                }}
                                                                                            />
                                                                                        </div>
                                                                                    </div>
                                                                                </div>

                                                                                <div className='form-builder-chaneging-wrap number' >
                                                                                    <label>Border Width (px)</label>
                                                                                    <input
                                                                                        type="number"
                                                                                        value={field.productbtnBorderWidth}
                                                                                        onChange={(e) => {
                                                                                            setFields(prevFields =>
                                                                                                prevFields.map(f =>
                                                                                                    f.id === field.id ? { ...f, productbtnBorderWidth: e.target.value } : f
                                                                                                )
                                                                                            );
                                                                                        }}
                                                                                    />
                                                                                </div>
                                                                                <div className='form-builder-chaneging-wrap'>
                                                                                    <label>Border Style</label>
                                                                                    <select
                                                                                        value={field.productbtnBorderStyle}
                                                                                        onChange={(e) => {
                                                                                            setFields(prevFields =>
                                                                                                prevFields.map(f =>
                                                                                                    f.id === field.id ? { ...f, productbtnBorderStyle: e.target.value } : f
                                                                                                )
                                                                                            );
                                                                                        }}
                                                                                    >
                                                                                        <option value="solid">Solid</option>
                                                                                        <option value="dashed">Dashed</option>
                                                                                        <option value="dotted">Dotted</option>
                                                                                    </select>
                                                                                </div>

                                                                                <div className='form-builder-chaneging-wrap color'>
                                                                                    <div className='checkbox-option bg-colors'>
                                                                                        <label> Color</label>
                                                                                        <div className="color-picker-container">
                                                                                            <span className="color-code">{field.productbtnbg || '#ffffff'}</span>
                                                                                            <input
                                                                                                type="color"
                                                                                                value={field.productbtnbg || '#ffffff'}
                                                                                                onChange={(e) => {
                                                                                                    setFields(prevFields =>
                                                                                                        prevFields.map(f =>
                                                                                                            f.id === field.id ? { ...f, productbtnbg: e.target.value } : f
                                                                                                        )
                                                                                                    );
                                                                                                }}
                                                                                            />
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div className='form-builder-chaneging-wrap number'>
                                                                                    <label>Border-Radious</label>
                                                                                    <input
                                                                                        type="number"
                                                                                        value={field.productradious || '#ffffff'}
                                                                                        onChange={(e) => {
                                                                                            setFields(prevFields =>
                                                                                                prevFields.map(f =>
                                                                                                    f.id === field.id ? { ...f, productradious: e.target.value } : f
                                                                                                )
                                                                                            );
                                                                                        }}
                                                                                    />
                                                                                </div>
                                                                            </div>

                                                                        </div>
                                                                    )
                                                                }
                                                                if (field.id === selectedFieldId && field.type === 'heading') {
                                                                    return (
                                                                        <div key={field.id}>
                                                                            <div className='form-builder-chaneging-wrap'>
                                                                                <label>Heading Text:</label>
                                                                                <input
                                                                                    type="text"
                                                                                    value={field.headingText || field.value}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, headingText: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                    placeholder="Enter Heading Text"
                                                                                />
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap'>
                                                                                <label>Heading Level:</label>
                                                                                <select
                                                                                    value={field.headingLevel}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, headingLevel: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                >
                                                                                    <option value="h1">H1</option>
                                                                                    <option value="h2">H2</option>
                                                                                    <option value="h3">H3</option>
                                                                                    <option value="h4">H4</option>
                                                                                    <option value="h5">H5</option>
                                                                                    <option value="h6">H6</option>
                                                                                </select>
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label>Heading Font Size:</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.headingFontSize}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, headingFontSize: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                    placeholder="Font Size"
                                                                                />
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <div className='checkbox-option bg-colors'>
                                                                                    <label> Color</label>
                                                                                    <div className="color-picker-container">
                                                                                        <span className="color-code">{field.headingColor}</span>
                                                                                        <input
                                                                                            type="color"
                                                                                            value={field.headingColor}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, headingColor: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div className="form-builder-chaneging-wrap">
                                                                                <label> Subheading</label>
                                                                                <ReactQuill
                                                                                    value={editorValue || field.editorContent || 'Its a numbers game'}
                                                                                    onChange={(value) => handleEditorChange(value, field.id)}
                                                                                    modules={{ toolbar: toolbarOptions }}
                                                                                />

                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label> Subheading Font-Size</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.headingsubheading}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, headingsubheading: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                    placeholder="Padding"
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <div className='checkbox-option bg-colors'>
                                                                                    <label>Subheading Color</label>
                                                                                    <div className="color-picker-container">
                                                                                        <span className="color-code">{field.subheadingColor}</span>
                                                                                        <input
                                                                                            type="color"
                                                                                            value={field.subheadingColor}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, subheadingColor: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div className="form-builder-changing-wrap url">

                                                                                <>
                                                                                    <label>Button Url:</label>
                                                                                    <input
                                                                                        type="url"
                                                                                        value={field.headingUrl}
                                                                                        onChange={(e) => handleUpdateUrl(field.id, e.target.value)}
                                                                                        placeholder="Update URL"
                                                                                    />

                                                                                    <div className='form-builder-chaneging-wrap'>
                                                                                        <label>Button Label</label>
                                                                                        <input
                                                                                            type="text"
                                                                                            value={field.headerbtn}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, headerbtn: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                    <div className='form-builder-chaneging-wrap color'>
                                                                                        <div className='checkbox-option bg-colors'>
                                                                                            <label>Button Background</label>
                                                                                            <div className="color-picker-container">
                                                                                                <span className="color-code">{field.headerbtnbg}</span>
                                                                                                <input
                                                                                                    type="color"
                                                                                                    value={field.headerbtnbg}
                                                                                                    onChange={(e) => {
                                                                                                        setFields(prevFields =>
                                                                                                            prevFields.map(f =>
                                                                                                                f.id === field.id ? { ...f, headerbtnbg: e.target.value } : f
                                                                                                            )
                                                                                                        );
                                                                                                    }}
                                                                                                />
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div className='form-builder-chaneging-wrap color'>
                                                                                        <div className='checkbox-option bg-colors'>
                                                                                            <label>Border Color</label>
                                                                                            <div className="color-picker-container">
                                                                                                <span className="color-code">{field.headingbtnBorderColor}</span>
                                                                                                <input
                                                                                                    type="color"
                                                                                                    value={field.headingbtnBorderColor}
                                                                                                    onChange={(e) => {
                                                                                                        setFields(prevFields =>
                                                                                                            prevFields.map(f =>
                                                                                                                f.id === field.id ? { ...f, headingbtnBorderColor: e.target.value } : f
                                                                                                            )
                                                                                                        );
                                                                                                    }}
                                                                                                />
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div className='form-builder-chaneging-wrap number' >
                                                                                        <label>Border Width (px)</label>
                                                                                        <input
                                                                                            type="number"
                                                                                            value={field.headingbtnBorderWidth}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, headingbtnBorderWidth: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                    <div className='form-builder-chaneging-wrap'>
                                                                                        <label>Border Style</label>
                                                                                        <select
                                                                                            value={field.headingbtnBorderStyle}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, headingbtnBorderStyle: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        >
                                                                                            <option value="solid">Solid</option>
                                                                                            <option value="dashed">Dashed</option>
                                                                                            <option value="dotted">Dotted</option>
                                                                                        </select>
                                                                                    </div>

                                                                                    <div className='form-builder-chaneging-wrap color'>
                                                                                        <div className='checkbox-option bg-colors'>
                                                                                            <label>Button Color</label>
                                                                                            <div className="color-picker-container">
                                                                                                <span className="color-code">{field.headerbtncolor}</span>
                                                                                                <input
                                                                                                    type="color"
                                                                                                    value={field.headerbtncolor}
                                                                                                    onChange={(e) => {
                                                                                                        setFields(prevFields =>
                                                                                                            prevFields.map(f =>
                                                                                                                f.id === field.id ? { ...f, headerbtncolor: e.target.value } : f
                                                                                                            )
                                                                                                        );
                                                                                                    }}
                                                                                                />
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div className='form-builder-chaneging-wrap number'>
                                                                                        <label>Button Padding (px)</label>
                                                                                        <div className='form-builder-chanege-top-bottom'>
                                                                                            <label> Left & Right</label>
                                                                                            <input
                                                                                                type="number"
                                                                                                value={field.headingbtnPadding}
                                                                                                onChange={(e) => {
                                                                                                    setFields(prevFields =>
                                                                                                        prevFields.map(f =>
                                                                                                            f.id === field.id ? { ...f, headingbtnPadding: e.target.value } : f
                                                                                                        )
                                                                                                    );
                                                                                                }}
                                                                                                placeholder="Padding"
                                                                                            />
                                                                                        </div>
                                                                                        <div className='form-builder-chanege-top-bottom'>

                                                                                            <label> Top & Bottom </label>
                                                                                            <input
                                                                                                type="number"
                                                                                                value={field.headingbtntopPadding}
                                                                                                onChange={(e) => {
                                                                                                    setFields(prevFields =>
                                                                                                        prevFields.map(f =>
                                                                                                            f.id === field.id ? { ...f, headingbtntopPadding: e.target.value } : f
                                                                                                        )
                                                                                                    );
                                                                                                }}
                                                                                                placeholder="Padding"
                                                                                            />
                                                                                        </div>
                                                                                    </div>
                                                                                    <div className='form-builder-chaneging-wrap number'>
                                                                                        <label>Button Radious</label>
                                                                                        <input
                                                                                            type="number"
                                                                                            value={field.headingbtnradious}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, headingbtnradious: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                            placeholder="Padding"
                                                                                        />
                                                                                    </div>
                                                                                    <div className='form-builder-chaneging-wrap number'>
                                                                                        <label>Button Height</label>
                                                                                        <input
                                                                                            type="number"
                                                                                            value={field.headingbtnheight}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, headingbtnheight: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                            placeholder="Padding"
                                                                                        />
                                                                                    </div>
                                                                                    <div className='form-builder-chaneging-wrap number'>
                                                                                        <label>Button Width</label>
                                                                                        <input
                                                                                            type="number"
                                                                                            value={field.headingbtnwidth}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, headingbtnwidth: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                            placeholder="Padding"
                                                                                        />
                                                                                    </div>

                                                                                    <div className='form-builder-chaneging-wrap number'>
                                                                                        <label>Button Font-Size</label>
                                                                                        <input
                                                                                            type="number"
                                                                                            value={field.headingbtnFontSize}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, headingbtnFontSize: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                            placeholder="Padding"
                                                                                        />
                                                                                    </div>

                                                                                </>
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap image'>
                                                                                <label>Background Image</label>
                                                                                <input
                                                                                    type="file"
                                                                                    accept="image/*"
                                                                                    onChange={(e) => handleFileChange(e, field.id)}
                                                                                />

                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label>Image Width:</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.bannerImageWidth}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, bannerImageWidth: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                    placeholder="Enter Heading Text"
                                                                                />
                                                                            </div>
                                                                            <div className="form-builder-chaneging-wrap number">
                                                                                <label>Image Height:</label>
                                                                                <select
                                                                                    value={
                                                                                        field.bannerImageHeight === '200px'
                                                                                            ? 'small'
                                                                                            : field.bannerImageHeight === '300px'
                                                                                                ? 'medium'
                                                                                                : field.bannerImageHeight === '500px'
                                                                                                    ? 'large'
                                                                                                    : 'default'
                                                                                    }
                                                                                    onChange={(e) => {
                                                                                        const selectedValue = e.target.value;
                                                                                        const heightMapping = {
                                                                                            default: '400px',
                                                                                            small: '200px',
                                                                                            medium: '300px',
                                                                                            large: '500px',
                                                                                        };

                                                                                        setFields((prevFields) =>
                                                                                            prevFields.map((f) =>
                                                                                                f.id === field.id
                                                                                                    ? {
                                                                                                        ...f,
                                                                                                        bannerImageHeight: heightMapping[selectedValue],
                                                                                                    }
                                                                                                    : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                >
                                                                                    <option value="default">Default</option>
                                                                                    <option value="small">Small</option>
                                                                                    <option value="medium">Medium</option>
                                                                                    <option value="large">Large</option>
                                                                                </select>
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap preview '>
                                                                                {field.headingbgImage && (
                                                                                    <div className="image-preview">
                                                                                        <img
                                                                                            src={field.headingbgImage}
                                                                                            alt="Background Preview"
                                                                                            style={{ maxWidth: '100%', maxHeight: '150px', objectFit: 'cover' }}
                                                                                        />
                                                                                    </div>
                                                                                )}
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label> Opacity </label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.headeropacity}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, headeropacity: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                    placeholder="Padding"
                                                                                />
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <div className='checkbox-option bg-colors'>
                                                                                    <label> Background Color</label>
                                                                                    <div className="color-picker-container">
                                                                                        <span className="color-code">{field.headingbg || '#ffffff'}</span>
                                                                                        <input
                                                                                            type="color"
                                                                                            value={field.headingbg || '#ffffff'}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, headingbg: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label> Padding</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.headingPadding}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, headingPadding: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                    placeholder="Padding"
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label> Letter Spacing</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.headingLetterSpacing}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, headingLetterSpacing: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                    placeholder="Letter Spacing"
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap'>
                                                                                <label>Text Align </label>
                                                                                <select
                                                                                    value={field.headingTextAlign}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, headingTextAlign: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                >
                                                                                    <option value="">Select text align</option>
                                                                                    <option value="left">left</option>
                                                                                    <option value="center">center</option>
                                                                                    <option value="right">right</option>
                                                                                </select>
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label> Font-Weight</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.headingFontWeight}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, headingFontWeight: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}

                                                                                />
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <div className='checkbox-option bg-colors'>
                                                                                    <label>Border Color</label>
                                                                                    <div className="color-picker-container">
                                                                                        <span className="color-code">{field.headingBorderColor}</span>
                                                                                        <input
                                                                                            type="color"
                                                                                            value={field.headingBorderColor}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, headingBorderColor: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap number' >
                                                                                <label>Border Width (px)</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.headingBorderWidth}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, headingBorderWidth: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap'>
                                                                                <label>Border Style</label>
                                                                                <select
                                                                                    value={field.headingBorderStyle}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, headingBorderStyle: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                >
                                                                                    <option value="solid">Solid</option>
                                                                                    <option value="dashed">Dashed</option>
                                                                                    <option value="dotted">Dotted</option>
                                                                                </select>
                                                                            </div>
                                                                        </div>
                                                                    );
                                                                }

                                                                if (field.id === selectedFieldId && field.type === 'description') {
                                                                    return (
                                                                        <div key={field.id} className="form-builder-chaneging-wrap">
                                                                            <label>Description Text</label>
                                                                            <textarea
                                                                                type="text"
                                                                                value={field.descriptionText || field.value || ''}
                                                                                onChange={(e) => handleDescriptionChange(field.id, e.target.value)}
                                                                                placeholder="Enter Description"
                                                                            />

                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label>Font Size (px)</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.descritionFontSize}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, descritionFontSize: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label>Font-Weight</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.descritionFontWeight}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, descritionFontWeight: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <label> Color</label>
                                                                                <input
                                                                                    type="color"
                                                                                    value={field.descritionColor}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, descritionColor: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <label> Background Color</label>
                                                                                <input
                                                                                    type="color"
                                                                                    value={field.descriptionbg || '#ffffff'}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, descriptionbg: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label> Padding</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.descriptionPadding}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, descriptionPadding: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                    placeholder="Padding"
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label> Letter Spacing</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.descriptionLetterSpacing}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, descriptionLetterSpacing: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                    placeholder="Letter Spacing"
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap'>
                                                                                <label>Text Align </label>
                                                                                <select
                                                                                    value={field.descriptionTextAlign}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, descriptionTextAlign: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                >
                                                                                    <option value="">Select text align</option>
                                                                                    <option value="left">left</option>
                                                                                    <option value="center">center</option>
                                                                                    <option value="right">right</option>
                                                                                </select>
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <label>Border Color</label>
                                                                                <input
                                                                                    type="color"
                                                                                    value={field.descriptionBorderColor}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, descriptionBorderColor: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap number' >
                                                                                <label>Border Width (px)</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.descriptionBorderWidth}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, descriptionBorderWidth: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap'>
                                                                                <label>Border Style</label>
                                                                                <select
                                                                                    value={field.descriptionBorderStyle}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, descriptionBorderStyle: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                >
                                                                                    <option value="solid">Solid</option>
                                                                                    <option value="dashed">Dashed</option>
                                                                                    <option value="dotted">Dotted</option>
                                                                                </select>
                                                                            </div>
                                                                        </div>

                                                                    );
                                                                }
                                                                if (field.id === selectedFieldId && field.type === "images") {
                                                                    return (
                                                                        <div key={field.id} className="form-builder-chaneging-wrap file">
                                                                            <div>

                                                                                {field.value ? (
                                                                                    <div className='form-builder-img-wrap'>

                                                                                        <img src={field.value} alt="Uploaded" style={{ maxWidth: '100%' }} />
                                                                                        <button className='update-image rm-btn' onClick={() => setImageFieldId(field.id)}>Update Image</button>
                                                                                        <button className='update-image rm-btn' onClick={() => removeField(field.id)}>Remove Image</button>
                                                                                    </div>
                                                                                ) : (
                                                                                    <div>

                                                                                        <p></p>
                                                                                        <button className='update-image' onClick={() => setImageFieldId(field.id)}>Upload Image</button>
                                                                                    </div>
                                                                                )}
                                                                                {imageFieldId === field.id && (
                                                                                    <input
                                                                                        type="file"
                                                                                        accept="image/*"
                                                                                        onChange={(e) => handleImageUpload(e, field.id)}
                                                                                    />
                                                                                )}
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label>Width</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.imgWidth}
                                                                                    onChange={(e) => {
                                                                                        const newWidth = parseInt(e.target.value, 10);

                                                                                        if (newWidth >= 25 && newWidth <= 100) {
                                                                                            setFields(prevFields =>
                                                                                                prevFields.map(f =>
                                                                                                    f.id === field.id ? { ...f, imgWidth: newWidth } : f
                                                                                                )
                                                                                            );
                                                                                        }
                                                                                    }}
                                                                                />
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap'>
                                                                                <label>Text Align </label>
                                                                                <select
                                                                                    value={field.imgTextAlign}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, imgTextAlign: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                >
                                                                                    <option value="">Select text align</option>
                                                                                    <option value="left">left</option>
                                                                                    <option value="center">center</option>
                                                                                    <option value="right">right</option>
                                                                                </select>
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <div className='checkbox-option bg-colors'>
                                                                                    <label> Background Color</label>
                                                                                    <div className="color-picker-container">
                                                                                        <span className="color-code">{field.imgbg || '#ffffff'}</span>
                                                                                        <input
                                                                                            type="color"
                                                                                            value={field.imgbg || '#ffffff'}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, imgbg: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label> Padding</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.imgPadding}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, imgPadding: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                    placeholder="Padding"
                                                                                />
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <div className='checkbox-option bg-colors'>
                                                                                    <label>Border Color</label>
                                                                                    <div className="color-picker-container">
                                                                                        <span className="color-code">{field.imgBorderColor}</span>
                                                                                        <input
                                                                                            type="color"
                                                                                            value={field.imgBorderColor}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, imgBorderColor: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap number' >
                                                                                <label>Border Width (px)</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.imgBorderWidth}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, imgBorderWidth: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap'>
                                                                                <label>Border Style</label>
                                                                                <select
                                                                                    value={field.imgBorderStyle}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, imgBorderStyle: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                >
                                                                                    <option value="solid">Solid</option>
                                                                                    <option value="dashed">Dashed</option>
                                                                                    <option value="dotted">Dotted</option>
                                                                                </select>
                                                                            </div>
                                                                        </div>
                                                                    );
                                                                }
                                                                if (field.id === selectedFieldId && field.type === "divider") {
                                                                    return (
                                                                        <div key={field.id} className="form-builder-chaneging-wrap">

                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <div className='checkbox-option bg-colors'>
                                                                                    <label>Divider Color</label>
                                                                                    <div className="color-picker-container">
                                                                                        <span className="color-code">{field.dividerColor}</span>
                                                                                        <input
                                                                                            type="color"
                                                                                            value={field.dividerColor}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, dividerColor: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <div className='checkbox-option bg-colors'>
                                                                                    <label>Divider Backgroundcolor</label>
                                                                                    <div className="color-picker-container">
                                                                                        <span className="color-code">{field.dividerbgColor}</span>
                                                                                        <input
                                                                                            type="color"
                                                                                            value={field.dividerbgColor}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, dividerbgColor: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label>Width</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.dividerWidth}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, dividerWidth: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label>Height</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.dividerheight}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, dividerheight: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>

                                                                        </div>
                                                                    );
                                                                }

                                                                if (field.id === selectedFieldId && field.type === "html convert") {
                                                                    return (
                                                                        <div key={field.id} className="form-builder-chaneging-wrap color">
                                                                            <label>Html Convert</label>
                                                                            <div className="form-builder-and-preview">
                                                                                {fields.map((field) => renderField(field))}

                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <div className='checkbox-option bg-colors'>
                                                                                    <label> Color</label>
                                                                                    <div className="color-picker-container">
                                                                                        <span className="color-code">{field.htmlColor}</span>
                                                                                        <input
                                                                                            type="color"
                                                                                            value={field.htmlColor}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, htmlColor: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label>Font Size (px)</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.htmlFontSize}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, htmlFontSize: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label>Padding (px)</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.htmlPadding}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, htmlPadding: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>

                                                                        </div>
                                                                    );
                                                                }
                                                                if (field.id === selectedFieldId && field.type === "split") {
                                                                    return (
                                                                        <div key={field.id} className="form-builder-chaneging-wrap color">
                                                                            <div style={{ marginTop: '20px' }}>
                                                                                <label htmlFor="widthSelect">Adjust Width: </label>
                                                                                <select
                                                                                    id="widthSelect"
                                                                                    onChange={(e) => handleWidthChange(e.target.value)}
                                                                                    value={fields.find((f) => f.id === selectedFieldId)?.width || '50%'}
                                                                                >
                                                                                    <option value="25%">25%</option>
                                                                                    <option value="50%">50%</option>
                                                                                    <option value="75%">75%</option>
                                                                                </select>
                                                                                <div className='form-builder-chaneging-wrap number'>
                                                                                    <label>Height</label>
                                                                                    <input
                                                                                        type="number"
                                                                                        value={field.splitheight}
                                                                                        onChange={(e) => {
                                                                                            setFields(prevFields =>
                                                                                                prevFields.map(f =>
                                                                                                    f.id === field.id ? { ...f, splitheight: e.target.value } : f
                                                                                                )
                                                                                            );
                                                                                        }}
                                                                                    />
                                                                                </div>
                                                                                <div style={{ marginTop: '10px' }}>
                                                                                    <label htmlFor="add">Content Type: </label>
                                                                                    <select
                                                                                        id="add"
                                                                                        onChange={(e) =>
                                                                                            setFields((prevFields) =>
                                                                                                prevFields.map((f) =>
                                                                                                    f.id === selectedFieldId ? { ...f, add: e.target.value } : f
                                                                                                )
                                                                                            )
                                                                                        }
                                                                                        value={fields.find((f) => f.id === selectedFieldId)?.add || 'text'}
                                                                                    >
                                                                                        <option value="text">Text</option>
                                                                                        <option value="image">Image</option>
                                                                                    </select>
                                                                                </div>

                                                                                <div style={{ marginTop: '10px' }} className='form-builder-chaneging-wrap file' >
                                                                                    {fields.find((f) => f.id === selectedFieldId)?.add === 'text' ? (
                                                                                        <div>
                                                                                            {ReactQuill ? (
                                                                                                <ReactQuill
                                                                                                    value={fields.find((f) => f.id === selectedFieldId)?.value || 'Use this section to add reviews or testimonials from your stores happy customers Use this section to add reviews or testimonials from your stores happy customers...'}
                                                                                                    onChange={(value) => {
                                                                                                        setFields((prevFields) =>
                                                                                                            prevFields.map((f) =>
                                                                                                                f.id === selectedFieldId ? { ...f, value: value } : f
                                                                                                            )
                                                                                                        );
                                                                                                    }}
                                                                                                    modules={{ toolbar: toolbarOptions }}
                                                                                                />
                                                                                            ) : (
                                                                                                <p>Loading editor...</p>
                                                                                            )}
                                                                                        </div>
                                                                                    ) : (
                                                                                        <div className='form-builder-chaneging-wrap file'>
                                                                                            <label htmlFor="add">Upload Image </label>
                                                                                            <input
                                                                                                type="file"
                                                                                                accept="image/*"
                                                                                                onChange={(e) => {
                                                                                                    const file = e.target.files[0];
                                                                                                    if (file) {
                                                                                                        const reader = new FileReader();
                                                                                                        reader.onload = () => {
                                                                                                            setFields((prevFields) =>
                                                                                                                prevFields.map((f) =>
                                                                                                                    f.id === selectedFieldId
                                                                                                                        ? { ...f, value: reader.result }
                                                                                                                        : f
                                                                                                                )
                                                                                                            );
                                                                                                        };
                                                                                                        reader.readAsDataURL(file);
                                                                                                    }
                                                                                                }}
                                                                                            />

                                                                                            {fields.find((f) => f.id === selectedFieldId)?.value && (
                                                                                                <div style={{ marginTop: '10px' }}>
                                                                                                    <img
                                                                                                        src={fields.find((f) => f.id === selectedFieldId)?.value}
                                                                                                        alt="Uploaded Preview"
                                                                                                        style={{ maxWidth: '100%', height: 'auto', border: '1px solid #ccc', padding: '5px' }}
                                                                                                    />
                                                                                                    <div style={{ marginTop: '10px' }}>
                                                                                                        <button className='rm-btn'
                                                                                                            onClick={() => {
                                                                                                                document.querySelector('input[type="file"]').click();
                                                                                                            }}
                                                                                                            style={{ marginRight: '10px' }}
                                                                                                        >
                                                                                                            Update Image
                                                                                                        </button>
                                                                                                        <button className='rm-btn'
                                                                                                            onClick={() => {
                                                                                                                setFields((prevFields) =>
                                                                                                                    prevFields.map((f) =>
                                                                                                                        f.id === selectedFieldId ? { ...f, value: '' } : f
                                                                                                                    )
                                                                                                                );
                                                                                                            }}
                                                                                                        >
                                                                                                            Remove Image
                                                                                                        </button>
                                                                                                    </div>
                                                                                                </div>
                                                                                            )}
                                                                                        </div>
                                                                                    )}
                                                                                </div>
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <div className='checkbox-option bg-colors'>
                                                                                    <label>  color</label>
                                                                                    <div className="color-picker-container">
                                                                                        <span className="color-code">{field.splitColor}</span>
                                                                                        <input
                                                                                            type="color"
                                                                                            value={field.splitColor || '#000'}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, splitColor: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap'>
                                                                                <label>Text Style</label>
                                                                                <select
                                                                                    value={field.splittext}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, splittext: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                >
                                                                                    <option value="left">TOP</option>
                                                                                    <option value="center">Center</option>
                                                                                    <option value="end">Bottom</option>
                                                                                </select>
                                                                            </div>

                                                                            <div className='product-detalis-all btn-split'>
                                                                                <h3>Add Button</h3>
                                                                                <label className="custom-checkbox">
                                                                                    <input
                                                                                        type="checkbox"
                                                                                        checked={field.showbtnsplit || false}
                                                                                        onChange={() => togglesplit(field.id)}
                                                                                    />
                                                                                    Button
                                                                                </label>
                                                                                <div className='form-builder-chaneging-wrap number'>
                                                                                    <label>Button Lable</label>
                                                                                    <input
                                                                                        type="text"
                                                                                        value={field.splitbtn}
                                                                                        onChange={(e) => {
                                                                                            setFields(prevFields =>
                                                                                                prevFields.map(f =>
                                                                                                    f.id === field.id ? { ...f, splitbtn: e.target.value } : f
                                                                                                )
                                                                                            );
                                                                                        }}
                                                                                    />
                                                                                </div>
                                                                                <div className='form-builder-chaneging-wrap number'>
                                                                                    <label>Button Url</label>
                                                                                    <input
                                                                                        type="text"
                                                                                        value={field.splitbtnurl}
                                                                                        onChange={(e) => {
                                                                                            setFields(prevFields =>
                                                                                                prevFields.map(f =>
                                                                                                    f.id === field.id ? { ...f, splitbtnurl: e.target.value } : f
                                                                                                )
                                                                                            );
                                                                                        }}
                                                                                    />
                                                                                </div>
                                                                                <div className='form-builder-chaneging-wrap color'>
                                                                                    <div className='checkbox-option bg-colors'>
                                                                                        <label> Button Background color</label>
                                                                                        <div className="color-picker-container">
                                                                                            <span className="color-code">{field.splitbtnbg || '#FFFFFF'}</span>
                                                                                            <input
                                                                                                type="color"
                                                                                                value={field.splitbtnbg || '#FFFFFF'}
                                                                                                onChange={(e) => {
                                                                                                    setFields(prevFields =>
                                                                                                        prevFields.map(f =>
                                                                                                            f.id === field.id ? { ...f, splitbtnbg: e.target.value } : f
                                                                                                        )
                                                                                                    );
                                                                                                }}
                                                                                            />
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div className='form-builder-chaneging-wrap number'>
                                                                                    <label>Font-Size</label>
                                                                                    <input
                                                                                        type="number"
                                                                                        value={field.splitbtnfont}
                                                                                        onChange={(e) => {
                                                                                            setFields(prevFields =>
                                                                                                prevFields.map(f =>
                                                                                                    f.id === field.id ? { ...f, splitbtnfont: e.target.value } : f
                                                                                                )
                                                                                            );
                                                                                        }}
                                                                                    />
                                                                                </div>
                                                                                <div className='form-builder-chaneging-wrap color'>
                                                                                    <div className='checkbox-option bg-colors'>
                                                                                        <label> Button color</label>
                                                                                        <div className="color-picker-container">
                                                                                            <span className="color-code">{field.splitbtncolor || '#FFFFFF'}</span>
                                                                                            <input
                                                                                                type="color"
                                                                                                value={field.splitbtncolor || '#FFFFFF'}
                                                                                                onChange={(e) => {
                                                                                                    setFields(prevFields =>
                                                                                                        prevFields.map(f =>
                                                                                                            f.id === field.id ? { ...f, splitbtncolor: e.target.value } : f
                                                                                                        )
                                                                                                    );
                                                                                                }}
                                                                                            />
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div className='form-builder-chaneging-wrap number'>
                                                                                    <label>Height</label>
                                                                                    <input
                                                                                        type="number"
                                                                                        value={field.splitbtnheight}
                                                                                        onChange={(e) => {
                                                                                            setFields(prevFields =>
                                                                                                prevFields.map(f =>
                                                                                                    f.id === field.id ? { ...f, splitbtnheight: e.target.value } : f
                                                                                                )
                                                                                            );
                                                                                        }}
                                                                                    />
                                                                                </div>
                                                                                <div className='form-builder-chaneging-wrap number'>
                                                                                    <label>Width</label>
                                                                                    <input
                                                                                        type="number"
                                                                                        value={field.splitbtnwidth}
                                                                                        onChange={(e) => {
                                                                                            setFields(prevFields =>
                                                                                                prevFields.map(f =>
                                                                                                    f.id === field.id ? { ...f, splitbtnwidth: e.target.value } : f
                                                                                                )
                                                                                            );
                                                                                        }}
                                                                                    />
                                                                                </div>
                                                                                <div className='form-builder-chaneging-wrap number'>
                                                                                    <label>Boder-Radious</label>
                                                                                    <input
                                                                                        type="number"
                                                                                        value={field.splitbtnradious}
                                                                                        onChange={(e) => {
                                                                                            setFields(prevFields =>
                                                                                                prevFields.map(f =>
                                                                                                    f.id === field.id ? { ...f, splitbtnradious: e.target.value } : f
                                                                                                )
                                                                                            );
                                                                                        }}
                                                                                    />
                                                                                </div>

                                                                                <div className='form-builder-chaneging-wrap color'>
                                                                                    <div className='checkbox-option bg-colors'>
                                                                                        <label>Border Color</label>
                                                                                        <div className="color-picker-container">
                                                                                            <span className="color-code">{field.splitBorderColor || '#FFFFFF'}</span>
                                                                                            <input
                                                                                                type="color"
                                                                                                value={field.splitBorderColor || '#FFFFFF'}
                                                                                                onChange={(e) => {
                                                                                                    setFields(prevFields =>
                                                                                                        prevFields.map(f =>
                                                                                                            f.id === field.id ? { ...f, splitBorderColor: e.target.value } : f
                                                                                                        )
                                                                                                    );
                                                                                                }}
                                                                                            />
                                                                                        </div>
                                                                                    </div>
                                                                                </div>

                                                                                <div className='form-builder-chaneging-wrap number' >
                                                                                    <label>Border Width (px)</label>
                                                                                    <input
                                                                                        type="number"
                                                                                        value={field.splitBorderWidth}
                                                                                        onChange={(e) => {
                                                                                            setFields(prevFields =>
                                                                                                prevFields.map(f =>
                                                                                                    f.id === field.id ? { ...f, splitBorderWidth: e.target.value } : f
                                                                                                )
                                                                                            );
                                                                                        }}
                                                                                    />
                                                                                </div>
                                                                                <div className='form-builder-chaneging-wrap'>
                                                                                    <label>Border Style</label>
                                                                                    <select
                                                                                        value={field.splitBorderStyle}
                                                                                        onChange={(e) => {
                                                                                            setFields(prevFields =>
                                                                                                prevFields.map(f =>
                                                                                                    f.id === field.id ? { ...f, splitBorderStyle: e.target.value } : f
                                                                                                )
                                                                                            );
                                                                                        }}
                                                                                    >
                                                                                        <option value="solid">Solid</option>
                                                                                        <option value="dashed">Dashed</option>
                                                                                        <option value="dotted">Dotted</option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <div className='checkbox-option bg-colors'>
                                                                                    <label> Background color</label>
                                                                                    <div className="color-picker-container">
                                                                                        <span className="color-code">{field.splitbg || '#FFFFFF'}</span>
                                                                                        <input
                                                                                            type="color"
                                                                                            value={field.splitbg || '#FFFFFF'}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, splitbg: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label>Padding</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.splitPadding}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, splitPadding: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap'>
                                                                                <label>Text Align </label>
                                                                                <select
                                                                                    value={field.splitTextAlin}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, splitTextAlin: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                >
                                                                                    <option value="">Select text align</option>
                                                                                    <option value="left">left</option>
                                                                                    <option value="center">center</option>
                                                                                    <option value="right">right</option>
                                                                                </select>
                                                                            </div>

                                                                        </div>
                                                                    );
                                                                }

                                                                if (field.id === selectedFieldId && field.type === "video") {
                                                                    return (
                                                                        <div key={field.id} className="form-builder-chaneging-wrap file">
                                                                            <div className='form-builder-chaneging-wrap '>
                                                                                <label>Video Url</label>
                                                                                <input
                                                                                    type="text"
                                                                                    value={field.value}
                                                                                    onChange={(e) => handleVideoChange(e, field.id)}
                                                                                    placeholder="Enter video URL"
                                                                                />
                                                                                <iframe
                                                                                    src={getVideoEmbedUrl(field.value)}
                                                                                    title="Video Preview"
                                                                                    frameBorder="0"
                                                                                    allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                                                                                    allowFullScreen
                                                                                ></iframe>
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label>Padding</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.videoPadding}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, videoPadding: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <label>Border Color</label>
                                                                                <input
                                                                                    type="color"
                                                                                    value={field.videoBorderColor}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, videoBorderColor: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap number' >
                                                                                <label>Border Width (px)</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.videoBorderWidth}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, videoBorderWidth: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap'>
                                                                                <label>Border Style</label>
                                                                                <select
                                                                                    value={field.videoBorderStyle}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, videoBorderStyle: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                >
                                                                                    <option value="solid">Solid</option>
                                                                                    <option value="dashed">Dashed</option>
                                                                                    <option value="dotted">Dotted</option>
                                                                                </select>
                                                                            </div>

                                                                        </div>
                                                                    );
                                                                }

                                                                if (field.id === selectedFieldId && field.type === "spacer") {
                                                                    return (
                                                                        <div key={field.id} className="form-builder-chaneging-wrap number">
                                                                            <div className='form-builder-chaneging-wrap number' >
                                                                                <label htmlFor="spacer-height-input">Spacer Height (px):</label>
                                                                                <input
                                                                                    id="spacer-height-input"
                                                                                    type="number"
                                                                                    value={field.spacerHeight}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, spacerHeight: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                    min="0"
                                                                                />
                                                                                <p style={{ color: '#A8A8A8' }} className='spacer-height-text'>Current Spacer Height: {field.spacerHeight}px</p>
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <div className='checkbox-option bg-colors'>
                                                                                    <label>  Background color</label>
                                                                                    <div className="color-picker-container">
                                                                                        <span className="color-code">{field.spacerbg || '#FFFFFF'}</span>
                                                                                        <input
                                                                                            type="color"
                                                                                            value={field.spacerbg || '#FFFFFF'}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, spacerbg: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    );
                                                                }

                                                                if (field.id === selectedFieldId && field.type === 'button') {
                                                                    return (
                                                                        <div key={field.id}>

                                                                            <div className='form-builder-chaneging-wrap'>
                                                                                <label>Button Label</label>
                                                                                <input
                                                                                    type="text"
                                                                                    value={field.buttonLabel}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, buttonLabel: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap'>
                                                                                <label>Text Align </label>
                                                                                <select
                                                                                    value={field.buttonaline}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, buttonaline: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                >
                                                                                    <option value="">Select text align</option>
                                                                                    <option value="left">left</option>
                                                                                    <option value="center">center</option>
                                                                                    <option value="right">right</option>
                                                                                </select>
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label>Font Size (px)</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.buttonFontSize}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, buttonFontSize: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap'>
                                                                                <label>Button Padding (px)</label>
                                                                                <input
                                                                                    type="text"
                                                                                    value={field.buttonPadding}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, buttonPadding: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label>Width (px)</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.buttonWidth}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, buttonWidth: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label>Height (px)</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.buttonHeight}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, buttonHeight: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <div className='checkbox-option bg-colors'>
                                                                                    <label>  Background color</label>
                                                                                    <div className="color-picker-container">
                                                                                        <span className="color-code">{field.buttonbgColor}</span>
                                                                                        <input
                                                                                            type="color"
                                                                                            value={field.buttonbgColor}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, buttonbgColor: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <div className='checkbox-option bg-colors'>
                                                                                    <label> Button Background Color</label>
                                                                                    <div className="color-picker-container">
                                                                                        <span className="color-code">{field.buttonColor}</span>
                                                                                        <input
                                                                                            type="color"
                                                                                            value={field.buttonColor}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, buttonColor: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <div className='checkbox-option bg-colors'>
                                                                                    <label> Color</label>
                                                                                    <div className="color-picker-container">
                                                                                        <span className="color-code">{field.buttonTextColor}</span>
                                                                                        <input
                                                                                            type="color"
                                                                                            value={field.buttonTextColor}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, buttonTextColor: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap'>
                                                                                <label>
                                                                                    Button Url
                                                                                    <input
                                                                                        type="text"
                                                                                        value={field.buttonUrll}
                                                                                        onChange={(e) => {
                                                                                            setFields(prevFields =>
                                                                                                prevFields.map(f =>
                                                                                                    f.id === field.id ? { ...f, buttonUrll: e.target.value } : f
                                                                                                )
                                                                                            );
                                                                                        }}
                                                                                    />
                                                                                </label>
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label> Letter Spacing</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.buttonLetterSpacing}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, buttonLetterSpacing: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                    placeholder="Letter Spacing"
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label> Border-Radious</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.buttonradious}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, buttonradious: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                    placeholder=" Border-Radious"
                                                                                />
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <div className='checkbox-option bg-colors'>
                                                                                    <label> Border Color</label>
                                                                                    <div className="color-picker-container">
                                                                                        <span className="color-code">{field.buttonBorderColor}</span>
                                                                                        <input
                                                                                            type="color"
                                                                                            value={field.buttonBorderColor}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, buttonBorderColor: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div className='form-builder-chaneging-wrap number' >
                                                                                <label>Border Width (px)</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.buttonBorderWidth}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, buttonBorderWidth: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap'>
                                                                                <label>Border Style</label>
                                                                                <select
                                                                                    value={field.buttonBorderStyle}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, buttonBorderStyle: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                >
                                                                                    <option value="solid">Solid</option>
                                                                                    <option value="dashed">Dashed</option>
                                                                                    <option value="dotted">Dotted</option>
                                                                                </select>
                                                                            </div>

                                                                        </div>
                                                                    );
                                                                }
                                                                if (field.type === "socalicon" && field.id === selectedFieldId) {
                                                                    return (
                                                                        <div key={field.id} className="description-field">

                                                                            <div className="form-builder-chaneging-wrap">
                                                                                <h2>Edit Social Icons</h2>

                                                                                <div className='form-builder-chaneging-wrap'>
                                                                                    <label>
                                                                                        <div className='custom-checkbox socalicons'>
                                                                                            <input
                                                                                                type="checkbox"
                                                                                                checked={!selectedIcons.facebook.isHidden}
                                                                                                onChange={() => handleToggleIcon('facebook')}
                                                                                            />
                                                                                            <i class="fa fa-facebook-square" aria-hidden="true"></i>
                                                                                            Facebook URL
                                                                                        </div>
                                                                                        <input
                                                                                            type="text"
                                                                                            value={selectedIcons.facebook.url}
                                                                                            onChange={(e) => handleIconUrlChange(e, 'facebook')}
                                                                                            style={{ display: selectedIcons.facebook.isHidden ? 'none' : 'block' }}
                                                                                        />
                                                                                    </label>
                                                                                </div>
                                                                                <div className='form-builder-chaneging-wrap'>
                                                                                    <label>
                                                                                        <div className='custom-checkbox socalicons'>
                                                                                            <input
                                                                                                type="checkbox"
                                                                                                checked={!selectedIcons.twitter.isHidden}
                                                                                                onChange={() => handleToggleIcon('twitter')}
                                                                                            />
                                                                                            <i class="fa fa-twitter" aria-hidden="true"></i>
                                                                                            Twitter URL
                                                                                        </div>
                                                                                        <input
                                                                                            type="text"
                                                                                            value={selectedIcons.twitter.url}
                                                                                            onChange={(e) => handleIconUrlChange(e, 'twitter')}
                                                                                            style={{ display: selectedIcons.twitter.isHidden ? 'none' : 'block' }}
                                                                                        />
                                                                                    </label>
                                                                                </div>
                                                                                <div className='form-builder-chaneging-wrap'>
                                                                                    <label>
                                                                                        <div className='custom-checkbox socalicons'>
                                                                                            <input
                                                                                                type="checkbox"
                                                                                                checked={!selectedIcons.instagram.isHidden}
                                                                                                onChange={() => handleToggleIcon('instagram')}
                                                                                            />
                                                                                            <i class="fa fa-instagram" aria-hidden="true"></i>
                                                                                            Instagram URL
                                                                                        </div>
                                                                                        <input
                                                                                            type="text"
                                                                                            value={selectedIcons.instagram.url}
                                                                                            onChange={(e) => handleIconUrlChange(e, 'instagram')}
                                                                                            style={{ display: selectedIcons.instagram.isHidden ? 'none' : 'block' }}
                                                                                        />
                                                                                    </label>
                                                                                </div>
                                                                                <div className='form-builder-chaneging-wrap'>
                                                                                    <button onClick={() => setShowFileUpload((prev) => !prev)}> + </button>
                                                                                    {showFileUpload && (
                                                                                        <div className='form-builder-chaneging-wrap file'>
                                                                                            <label>Uplaod Image</label>
                                                                                            <input
                                                                                                type="file"
                                                                                                accept="image/*"
                                                                                                onChange={handleCustomIconUpload}
                                                                                                multiple
                                                                                            />
                                                                                        </div>
                                                                                    )}
                                                                                    {customIcons.length > 0 && (
                                                                                        <div>
                                                                                            {customIcons.map((icon, index) => (
                                                                                                <div key={index} className='form-builder-chaneging-wrap  '>
                                                                                                    <div className='form-builder-chaneging-wrap socal'>
                                                                                                        <div className='custom-checkbox'>
                                                                                                            <input
                                                                                                                type="checkbox"
                                                                                                                checked={!icon.isHidden}
                                                                                                                onChange={() => toggleCustomIconVisibility(index)}
                                                                                                            />

                                                                                                        </div>
                                                                                                        <div className='img-socal-costom'>
                                                                                                            <img src={icon.src} alt={icon.name} style={{ width: "100%" }} />
                                                                                                        </div>
                                                                                                    </div>

                                                                                                    <input
                                                                                                        type="text"
                                                                                                        value={icon.url}
                                                                                                        onChange={(e) => handleCustomIconUrlChange(e, index)}
                                                                                                        placeholder="Custom URL"
                                                                                                    />
                                                                                                    <div style={{ marginTop: '10px' }}>
                                                                                                        <button className='rm-btn'
                                                                                                            onClick={() => handleCustomIconRemove(index)}
                                                                                                        >
                                                                                                            Remove Icon
                                                                                                        </button>
                                                                                                    </div>
                                                                                                </div>

                                                                                            ))}
                                                                                        </div>
                                                                                    )}
                                                                                </div>

                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap color'>
                                                                                <div className='checkbox-option bg-colors'>
                                                                                    <label> Background Color</label>
                                                                                    <div className="color-picker-container">
                                                                                        <span className="color-code">{field.socalIconbg}</span>
                                                                                        <input
                                                                                            type="color"
                                                                                            value={field.socalIconbg}
                                                                                            onChange={(e) => {
                                                                                                setFields(prevFields =>
                                                                                                    prevFields.map(f =>
                                                                                                        f.id === field.id ? { ...f, socalIconbg: e.target.value } : f
                                                                                                    )
                                                                                                );
                                                                                            }}
                                                                                        />
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label>Social Icon Gap (px) </label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.socalIcongap}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, socalIcongap: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label>Social Icon Height (px)</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.socalIconHeight}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, socalIconHeight: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number'>
                                                                                <label>Social Icon Width (px)</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.socalIconWidth}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, socalIconWidth: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap'>
                                                                                <label>Text Align </label>
                                                                                <select
                                                                                    value={field.socaliconTextAlign}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, socaliconTextAlign: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                >
                                                                                    <option value="">Select text align</option>
                                                                                    <option value="left">left</option>
                                                                                    <option value="center">center</option>
                                                                                    <option value="right">right</option>
                                                                                </select>
                                                                            </div>
                                                                            <div className='form-builder-chaneging-wrap number' >
                                                                                <label>Padding (px)</label>
                                                                                <input
                                                                                    type="number"
                                                                                    value={field.socalIconPadding}
                                                                                    onChange={(e) => {
                                                                                        setFields(prevFields =>
                                                                                            prevFields.map(f =>
                                                                                                f.id === field.id ? { ...f, socalIconPadding: e.target.value } : f
                                                                                            )
                                                                                        );
                                                                                    }}
                                                                                />
                                                                            </div>
                                                                        </div>
                                                                    );
                                                                }

                                                                return null;
                                                            })}
                                                        </div>
                                                    )}
                                                </div>
                                            </div>

                                        </div>)}
                                    </div>
                                </div>)}
                            </div>
                        </div>
                    </div>
                    <div className='btn_form_bulider'>
                        <div className="form-submission-wrp">
                            <button className="cancle-form-btn" onClick={handleCancle} >Cancel</button>
                        </div>
                        <div className="form-submission-wrp">
                            <button className="create-form-btn action_btn" onClick={createOrUpdateForm} >Save</button>
                        </div>
                    </div>
                </div>

            </div>
            <div className='form-builder-wrap-popup-inputs'>
                <div className='save-email-templates-add'>
                    {saveEmail && (<div className="popup ">
                        <div className="popup-content save">
                            <div className="save-email-template-popup">
                                <div className='cancle-save-email' onClick={() => setSaveEmail(false)}>
                                    <img src={cancleimg} alt="" />
                                </div>
                                <img src={savemail} alt="" />
                                <h2>Success</h2>
                                <p>Your Email has been save successfully!</p>
                                <p className="save-btn" onClick={handleContinue}>Continue</p>
                            </div>
                        </div>
                    </div>
                    )}
                </div>
                <div className='save-email-templates-add'>
                    {cancelEmail && (<div className="popup ">
                        <div className="popup-content save">
                            <div className="save-email-template-popup">
                                <div className='cancle-save-email' onClick={() => setCancelEmail(false)}>
                                    <img src={cancleimg} alt="" />
                                </div>
                                <img src={canclemail} alt="" />
                                <h2>Warning</h2>
                                <p>Are you sure you want to cancel this email?</p>
                                <p className="save-btn cancel" onClick={handleContinue}>Cancel</p>
                            </div>
                        </div>
                    </div>
                    )}
                </div>
                <div className="form-builder-prodcut-all">
                    {isPopupOpen && (
                        <div className="popup ">
                            <div className="popup-content product">
                                <button className="procduct-canclebtn" onClick={handleClosePopup}>
                                    <img src={productcancle} />
                                </button>

                                <div className="form-builder-search-bar search-bar">
                                    <input id="search" type="search" placeholder="Search" value={searchTerm}
                                        onChange={(e) => setSearchTerm(e.target.value)} />
                                    <div className="form_build_icon_search">
                                        <img src={search12} alt="" />
                                    </div>
                                </div>

                                <div className="product-list">
                                    {filteredProducts.length > 0 ? (
                                        filteredProducts.map((product) => (
                                            <div key={product.id} className="product-item">
                                                <div className='product-item-flex'>
                                                    <div className='custom-checkbox'>
                                                        <input
                                                            type="checkbox"
                                                            checked={selectedProducts.some((p) => p.id === product.id)}
                                                            onChange={(e) => handleProductClick(product, e.target.checked)}
                                                        />
                                                    </div>
                                                    <div className='product-itm-all-inline'>
                                                        {product.image ? (
                                                            <div className="images-galley">
                                                                <img
                                                                    src={product.image}
                                                                    alt={product.title}
                                                                />
                                                            </div>
                                                        ) : (
                                                            <p>No image available</p>
                                                        )}
                                                        <div className='product-itm-all-prices'>
                                                            <h3>{product.title}</h3>
                                                            <p className='price-product-all'>Price: ${product.price}</p>
                                                        </div>
                                                    </div>

                                                </div>


                                            </div>
                                        ))
                                    ) : (
                                        <p>No products available.</p>
                                    )}
                                </div>

                                {totalPages > 1 && (
                                    <div className="pagination">
                                        <div className='show-all enteries'>
                                            Showing data {filteredProducts.length} of {products.length} products
                                        </div>

                                        <nav>
                                            <ul className="xs:mt-0 mt-2 inline-flex items-center -space-x-px">
                                                <li>
                                                    <button
                                                        type="button"
                                                        disabled={currentPage === 1}
                                                        onClick={() => handlePageChange(currentPage - 1)}
                                                    >
                                                        <img src={left} alt="Previous" />
                                                    </button>
                                                </li>
                                                {generatePageNumbers().map((page, index) => (
                                                    <li key={index} aria-current={currentPage === page ? 'page' : undefined}>
                                                        {page === '...' ? (
                                                            <span>...</span>
                                                        ) : (
                                                            <button
                                                                type="button"
                                                                onClick={() => handlePageChange(page)}
                                                                className={`${currentPage === page ? 'active' : 'inactive'}`}
                                                            >
                                                                {page}
                                                            </button>
                                                        )}
                                                    </li>
                                                ))}
                                                <li>
                                                    <button
                                                        type="button"
                                                        disabled={currentPage === totalPages}
                                                        onClick={() => handlePageChange(currentPage + 1)}
                                                    >
                                                        <img src={right} alt="Next" />
                                                    </button>
                                                </li>
                                            </ul>
                                        </nav>

                                    </div>
                                )}
                            </div>
                        </div>
                    )}
                </div>
                {showImagePopup && (
                    <div className="popup">
                        <div className="popup-content">
                            <h3>Upload Image</h3>
                            <input type="file" accept="image/*" onChange={handleImageUpload} />
                            <button onClick={() => setShowImagePopup(false)}>Close</button>
                        </div>
                    </div>
                )}

                {showHeadingPopup && (
                    <div className="popup">
                        <div className="popup-content">
                            <div className="options">
                                <button style={{ padding: '10px', color: 'white', background: '#FD633E', fontSize: '14px', border: 'none' }} onClick={() => setSelectedOption('heading')}>Heading</button>
                                <button style={{ padding: '10px', color: 'white', background: '#F27F01', fontSize: '14px', border: 'none' }} onClick={() => setSelectedOption('image')}>Image</button>
                                <button style={{ padding: '10px', color: 'white', background: '#27A196', fontSize: '14px', border: 'none' }} onClick={() => setSelectedOption('content')}>Content</button>
                                <button style={{ padding: '10px', color: 'white', background: '#D9A425', fontSize: '14px', border: 'none' }} onClick={() => setSelectedOption('url')}>Button URL</button>
                            </div>
                            {selectedOption === 'heading' && (
                                <div className="heading-section">
                                    <label>
                                        <input
                                            type="text"
                                            value={headingText}
                                            onChange={(e) => setHeadingText(e.target.value)}
                                            placeholder="Heading Text"
                                        />
                                    </label>
                                    <label>
                                        <select value={headingLevel} onChange={(e) => setHeadingLevel(e.target.value)}>
                                            <option value="h1">H1</option>
                                            <option value="h2">H2</option>
                                            <option value="h3">H3</option>
                                            <option value="h4">H4</option>
                                            <option value="h5">H5</option>
                                            <option value="h6">H6</option>
                                        </select>
                                    </label>
                                    <label>
                                        <input
                                            type="text"
                                            value={headingFontSize}
                                            onChange={(e) => setHeadingFontSize(e.target.value)}
                                            placeholder="Font Size"
                                        />
                                    </label>
                                </div>
                            )}
                            {selectedOption === 'content' && (
                                <div className="content-section">
                                    <div className='admin-input email'>
                                        <div className='admin-label'>
                                            <label htmlFor="content">Content</label>
                                        </div>
                                        {ReactQuill ? (
                                            <ReactQuill
                                                value={editorValue}
                                                onChange={setEditorValue}
                                                modules={{ toolbar: toolbarOptions }}
                                            />
                                        ) : (
                                            <p>Loading editor...</p>
                                        )}
                                    </div>
                                </div>
                            )}
                            {selectedOption === 'url' && (
                                <div className="form-builder-changing-wrap url url-section">
                                    <button style={{
                                        backgroundColor: '#9474ff',
                                        border: '1px solid black',
                                        color: 'white',
                                        padding: '10px',
                                        borderRadius: '4px',
                                        height: '40px',
                                        width: '100px',
                                        fontSize: '16px'

                                    }}>Vist Now</button>
                                    <label>
                                        URL:
                                        <input
                                            type="url"
                                            value={headingUrl}
                                            onChange={(e) => setHeadingUrl(e.target.value)}
                                            placeholder="Enter URL (optional)"
                                        />
                                    </label>
                                </div>
                            )}

                            {selectedOption === 'image' && (
                                <div className="form-builder-changing-wrap file section">
                                    <label> Image:
                                        <input
                                            type="file"
                                            accept="image/*"
                                            onChange={(e) => {
                                                const file = e.target.files[0];
                                                if (file) {
                                                    const reader = new FileReader();
                                                    reader.onloadend = () => {
                                                        setImageUrl(reader.result);
                                                    };
                                                    reader.readAsDataURL(file);
                                                }
                                            }}
                                        />
                                        {imageUrl && <img src={imageUrl} alt="Preview" style={{ width: '100px', marginTop: '10px' }} />}
                                    </label>
                                </div>
                            )}

                            <button onClick={handleAddHeading}>Add Heading</button>
                            <button className='heading_cancle' onClick={() => setShowHeadingPopup(false)}>Close</button>
                        </div>
                    </div>
                )}
                {showDescriptionPopup && (
                    <div className="popup">
                        <div className="popup-content">
                            <label>
                                Description:
                                <textarea
                                    value={descriptionText}
                                    onChange={(e) => setDescriptionText(e.target.value)}
                                    placeholder="Description"
                                />
                            </label>
                            <button onClick={handleAddDescription}>Add Description</button>
                            <button className='heading_cancle' onClick={() => setShowDescriptionPopup(false)}>Close</button>
                        </div>
                    </div>
                )}
                {isPopupVisibleed && (
                    <div className="popup">
                        <div className="popup-content">
                            <h4>Edit Rich Text</h4>
                            <div className="content-section">
                                <div className="admin-input email">
                                    <div className="admin-label">
                                        <label htmlFor="content">Content</label>
                                    </div>
                                    <ReactQuill
                                        value={editorValueed}
                                        onChange={handleEditorChangeee}
                                        modules={{ toolbar: toolbarOptions }}
                                    />
                                </div>
                            </div>

                            <button onClick={handleSave}>Save</button>
                            <button onClick={() => setPopupVisibleed(false)}>Cancel</button>
                        </div>
                    </div>
                )}
            </div>

        </div >
    );
};

export default EmailTemplateCreate;